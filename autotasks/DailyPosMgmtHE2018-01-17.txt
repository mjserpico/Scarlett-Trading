2018-01-17 09:38:05,426 - DEBUG - ****************************************************
2018-01-17 09:38:05,427 - DEBUG - Current Time is 09:38AM
2018-01-17 09:38:05,427 - DEBUG - Starting Pos Mgmt H E
2018-01-17 09:38:05,427 - DEBUG - Connecting to database
2018-01-17 09:38:05,446 - DEBUG - Connected to database
2018-01-17 09:38:05,446 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 09:38:05,447 - DEBUG - Order Profit is 0
2018-01-17 09:38:05,447 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 09:38:05,450 - DEBUG - Stop ID is 0
2018-01-17 09:38:05,450 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 09:38:05,450 - DEBUG - Entry ID is 105
2018-01-17 09:38:05,451 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 09:38:05,453 - DEBUG - OCA ID is 1
2018-01-17 09:38:05,453 - DEBUG - Connecting to IBController
2018-01-17 09:38:06,461 - DEBUG - Connected to IBController
2018-01-17 09:38:06,461 - DEBUG - Position requested
2018-01-17 09:38:06,463 - DEBUG - Pos Mgmt -12987
2018-01-17 09:38:06,463 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212CC88>, pos=-12987, avgCost=0.95368235>
2018-01-17 09:38:06,464 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 09:38:06,464 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 09:38:06,464 - DEBUG - Position is -12987
2018-01-17 09:38:07,463 - DEBUG - Open Orders requested
2018-01-17 09:38:07,466 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x000000000212CE10>, order=<ib.ext.Order.Order object at 0x000000000212CBA8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C0208>>
2018-01-17 09:38:07,467 - DEBUG - Order OrderID 102
2018-01-17 09:38:07,467 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 09:38:07,467 - DEBUG - Order status PreSubmitted
2018-01-17 09:38:07,467 - DEBUG - Order Identification 102
2018-01-17 09:38:07,467 - DEBUG - Order Identification <class 'int'>
2018-01-17 09:38:07,467 - DEBUG - Profit ID from database is 0
2018-01-17 09:38:07,467 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 09:38:07,469 - DEBUG - Stop ID database is 0
2018-01-17 09:38:07,469 - DEBUG - Entry ID database is 105
2018-01-17 09:38:07,470 - DEBUG - Reply Handler Orders is <openOrder orderId=104, contract=<ib.ext.Contract.Contract object at 0x000000000212CE10>, order=<ib.ext.Order.Order object at 0x000000000212CBA8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C0080>>
2018-01-17 09:38:07,470 - DEBUG - Order OrderID 104
2018-01-17 09:38:07,470 - DEBUG - reply handler status <orderStatus orderId=104, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791157, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 09:38:07,470 - DEBUG - Order status PreSubmitted
2018-01-17 09:38:07,470 - DEBUG - Order Identification 104
2018-01-17 09:38:07,471 - DEBUG - Order Identification <class 'int'>
2018-01-17 09:38:07,471 - DEBUG - Profit ID from database is 0
2018-01-17 09:38:07,471 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 09:38:07,471 - DEBUG - Stop ID database is 0
2018-01-17 09:38:07,471 - DEBUG - Entry ID database is 105
2018-01-17 09:38:07,473 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x000000000212CE10>, order=<ib.ext.Order.Order object at 0x000000000212CBA8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C0278>>
2018-01-17 09:38:07,473 - DEBUG - Order OrderID 103
2018-01-17 09:38:07,473 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 09:38:07,474 - DEBUG - Order status PreSubmitted
2018-01-17 09:38:07,474 - DEBUG - Order Identification 103
2018-01-17 09:38:07,474 - DEBUG - Order Identification <class 'int'>
2018-01-17 09:38:07,474 - DEBUG - Profit ID from database is 0
2018-01-17 09:38:07,474 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 09:38:07,476 - DEBUG - Stop ID database is 0
2018-01-17 09:38:07,476 - DEBUG - Entry ID database is 105
2018-01-17 09:38:07,476 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x000000000212CE10>, order=<ib.ext.Order.Order object at 0x000000000212CBA8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C0358>>
2018-01-17 09:38:07,476 - DEBUG - Order OrderID 105
2018-01-17 09:38:07,477 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 09:38:07,477 - DEBUG - Order status PreSubmitted
2018-01-17 09:38:07,477 - DEBUG - Order Identification 105
2018-01-17 09:38:07,477 - DEBUG - Order Identification <class 'int'>
2018-01-17 09:38:07,479 - DEBUG - Profit ID from database is 0
2018-01-17 09:38:07,479 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 09:38:07,479 - DEBUG - Stop ID database is 0
2018-01-17 09:38:07,479 - DEBUG - Entry ID database is 105
2018-01-17 09:38:07,480 - DEBUG - Entry API ID is 105
2018-01-17 09:38:09,467 - DEBUG - Connecting to database
2018-01-17 09:38:09,473 - DEBUG - Connected to database
2018-01-17 09:38:09,474 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 09:38:09,476 - DEBUG - Stop loss value is 71.82
2018-01-17 09:38:09,476 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 09:38:09,476 - DEBUG - Stop loss value is 85.25
2018-01-17 09:38:09,477 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 09:38:09,479 - DEBUG - EntryPrice value is 74.3
2018-01-17 09:38:09,480 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 09:38:09,480 - DEBUG - Stop quantity 1
2018-01-17 09:38:09,482 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 09:38:09,482 - DEBUG - Direction is Long
2018-01-17 09:38:09,483 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 09:38:09,483 - DEBUG - Count is 0
2018-01-17 09:38:09,484 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 09:38:09,484 - DEBUG - Stop Loss Flag is 0
2018-01-17 09:38:09,486 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 09:38:09,486 - DEBUG - Max ID Order is (105,)
2018-01-17 09:38:09,486 - DEBUG - Today is 2018-01-17
2018-01-17 09:38:09,487 - DEBUG - Day of the week 2
2018-01-17 09:38:09,487 - DEBUG - Yesterday is 01/16/2018
2018-01-17 09:38:09,487 - DEBUG - In Position is  0
2018-01-17 09:38:09,487 - DEBUG - In Position is  <class 'int'>
2018-01-17 09:38:09,489 - DEBUG - curStopLossFlag is  0
2018-01-17 09:38:09,489 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 09:38:09,489 - DEBUG - Checking if Entry has been filled
2018-01-17 09:38:09,489 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 09:38:09,490 - DEBUG - EntryPend is 1
2018-01-17 09:38:09,490 - DEBUG - Try to Cancel Stop
2018-01-17 09:38:09,490 - DEBUG - Stop API ID 0
2018-01-17 09:38:09,490 - DEBUG - Profit API ID 0
2018-01-17 09:38:09,490 - DEBUG - Stop API ID <class 'int'>
2018-01-17 09:38:09,492 - DEBUG - Profit API ID <class 'int'>
2018-01-17 09:38:09,492 - DEBUG - Pos is 0
2018-01-17 09:38:09,492 - DEBUG - CurCount is 0
2018-01-17 09:38:09,492 - DEBUG - In Pos 0
2018-01-17 09:38:09,493 - DEBUG - Stop ID is 0
2018-01-17 09:38:09,493 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 09:38:09,493 - DEBUG - EntryPend is 1
2018-01-17 09:38:09,493 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 09:38:09,494 - DEBUG - Entry Date is 10
2018-01-17 09:38:09,494 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 09:38:09,494 - DEBUG - Order Profit ID is 0
2018-01-17 09:38:09,494 - DEBUG - Order Entry ID is 105
2018-01-17 09:38:09,494 - DEBUG - API ID is  0
2018-01-17 09:38:09,496 - DEBUG - Current Position is 0
2018-01-17 09:38:09,496 - DEBUG - Current Position is <class 'str'>
2018-01-17 09:38:09,496 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 09:38:09,496 - DEBUG - Time is 9
2018-01-17 09:38:09,496 - DEBUG - Time is <class 'int'>
2018-01-17 09:38:09,496 - DEBUG - Time is 38
2018-01-17 09:38:09,496 - DEBUG - Time is <class 'int'>
2018-01-17 09:38:09,496 - DEBUG - Disconnected from IBController
2018-01-17 09:38:09,496 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 09:43:05,352 - DEBUG - ****************************************************
2018-01-17 09:43:05,352 - DEBUG - Current Time is 09:43AM
2018-01-17 09:43:05,354 - DEBUG - Starting Pos Mgmt H E
2018-01-17 09:43:05,354 - DEBUG - Connecting to database
2018-01-17 09:43:05,381 - DEBUG - Connected to database
2018-01-17 09:43:05,381 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 09:43:05,382 - DEBUG - Order Profit is 0
2018-01-17 09:43:05,382 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 09:43:05,384 - DEBUG - Stop ID is 0
2018-01-17 09:43:05,384 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 09:43:05,387 - DEBUG - Entry ID is 105
2018-01-17 09:43:05,387 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 09:43:05,388 - DEBUG - OCA ID is 1
2018-01-17 09:43:05,388 - DEBUG - Connecting to IBController
2018-01-17 09:43:06,394 - DEBUG - Connected to IBController
2018-01-17 09:43:06,394 - DEBUG - Position requested
2018-01-17 09:43:06,395 - DEBUG - Pos Mgmt -12987
2018-01-17 09:43:06,397 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212DAC8>, pos=-12987, avgCost=0.95368235>
2018-01-17 09:43:06,397 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 09:43:06,397 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 09:43:06,397 - DEBUG - Position is -12987
2018-01-17 09:43:07,395 - DEBUG - Open Orders requested
2018-01-17 09:43:07,398 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x000000000212DE10>, order=<ib.ext.Order.Order object at 0x000000000212DA90>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C0208>>
2018-01-17 09:43:07,398 - DEBUG - Order OrderID 102
2018-01-17 09:43:07,398 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 09:43:07,398 - DEBUG - Order status PreSubmitted
2018-01-17 09:43:07,398 - DEBUG - Order Identification 102
2018-01-17 09:43:07,400 - DEBUG - Order Identification <class 'int'>
2018-01-17 09:43:07,400 - DEBUG - Profit ID from database is 0
2018-01-17 09:43:07,400 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 09:43:07,400 - DEBUG - Stop ID database is 0
2018-01-17 09:43:07,400 - DEBUG - Entry ID database is 105
2018-01-17 09:43:07,401 - DEBUG - Reply Handler Orders is <openOrder orderId=104, contract=<ib.ext.Contract.Contract object at 0x000000000212DE10>, order=<ib.ext.Order.Order object at 0x000000000212DA90>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C0080>>
2018-01-17 09:43:07,401 - DEBUG - Order OrderID 104
2018-01-17 09:43:07,401 - DEBUG - reply handler status <orderStatus orderId=104, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791157, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 09:43:07,403 - DEBUG - Order status PreSubmitted
2018-01-17 09:43:07,403 - DEBUG - Order Identification 104
2018-01-17 09:43:07,403 - DEBUG - Order Identification <class 'int'>
2018-01-17 09:43:07,403 - DEBUG - Profit ID from database is 0
2018-01-17 09:43:07,403 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 09:43:07,404 - DEBUG - Stop ID database is 0
2018-01-17 09:43:07,404 - DEBUG - Entry ID database is 105
2018-01-17 09:43:07,404 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x000000000212DE10>, order=<ib.ext.Order.Order object at 0x000000000212DA90>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C0278>>
2018-01-17 09:43:07,404 - DEBUG - Order OrderID 103
2018-01-17 09:43:07,405 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 09:43:07,405 - DEBUG - Order status PreSubmitted
2018-01-17 09:43:07,405 - DEBUG - Order Identification 103
2018-01-17 09:43:07,405 - DEBUG - Order Identification <class 'int'>
2018-01-17 09:43:07,405 - DEBUG - Profit ID from database is 0
2018-01-17 09:43:07,407 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 09:43:07,407 - DEBUG - Stop ID database is 0
2018-01-17 09:43:07,407 - DEBUG - Entry ID database is 105
2018-01-17 09:43:07,407 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x000000000212DE10>, order=<ib.ext.Order.Order object at 0x000000000212DA90>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C0358>>
2018-01-17 09:43:07,408 - DEBUG - Order OrderID 105
2018-01-17 09:43:07,408 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 09:43:07,408 - DEBUG - Order status PreSubmitted
2018-01-17 09:43:07,410 - DEBUG - Order Identification 105
2018-01-17 09:43:07,410 - DEBUG - Order Identification <class 'int'>
2018-01-17 09:43:07,410 - DEBUG - Profit ID from database is 0
2018-01-17 09:43:07,410 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 09:43:07,411 - DEBUG - Stop ID database is 0
2018-01-17 09:43:07,411 - DEBUG - Entry ID database is 105
2018-01-17 09:43:07,411 - DEBUG - Entry API ID is 105
2018-01-17 09:43:09,398 - DEBUG - Connecting to database
2018-01-17 09:43:09,405 - DEBUG - Connected to database
2018-01-17 09:43:09,407 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 09:43:09,407 - DEBUG - Stop loss value is 71.82
2018-01-17 09:43:09,408 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 09:43:09,408 - DEBUG - Stop loss value is 85.25
2018-01-17 09:43:09,411 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 09:43:09,411 - DEBUG - EntryPrice value is 74.3
2018-01-17 09:43:09,413 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 09:43:09,413 - DEBUG - Stop quantity 1
2018-01-17 09:43:09,414 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 09:43:09,414 - DEBUG - Direction is Long
2018-01-17 09:43:09,415 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 09:43:09,415 - DEBUG - Count is 0
2018-01-17 09:43:09,417 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 09:43:09,417 - DEBUG - Stop Loss Flag is 0
2018-01-17 09:43:09,418 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 09:43:09,420 - DEBUG - Max ID Order is (105,)
2018-01-17 09:43:09,420 - DEBUG - Today is 2018-01-17
2018-01-17 09:43:09,420 - DEBUG - Day of the week 2
2018-01-17 09:43:09,421 - DEBUG - Yesterday is 01/16/2018
2018-01-17 09:43:09,421 - DEBUG - In Position is  0
2018-01-17 09:43:09,421 - DEBUG - In Position is  <class 'int'>
2018-01-17 09:43:09,421 - DEBUG - curStopLossFlag is  0
2018-01-17 09:43:09,421 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 09:43:09,421 - DEBUG - Checking if Entry has been filled
2018-01-17 09:43:09,421 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 09:43:09,423 - DEBUG - EntryPend is 1
2018-01-17 09:43:09,424 - DEBUG - Try to Cancel Stop
2018-01-17 09:43:09,424 - DEBUG - Stop API ID 0
2018-01-17 09:43:09,424 - DEBUG - Profit API ID 0
2018-01-17 09:43:09,424 - DEBUG - Stop API ID <class 'int'>
2018-01-17 09:43:09,424 - DEBUG - Profit API ID <class 'int'>
2018-01-17 09:43:09,424 - DEBUG - Pos is 0
2018-01-17 09:43:09,424 - DEBUG - CurCount is 0
2018-01-17 09:43:09,424 - DEBUG - In Pos 0
2018-01-17 09:43:09,424 - DEBUG - Stop ID is 0
2018-01-17 09:43:09,426 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 09:43:09,427 - DEBUG - EntryPend is 1
2018-01-17 09:43:09,427 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 09:43:09,427 - DEBUG - Entry Date is 10
2018-01-17 09:43:09,427 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 09:43:09,427 - DEBUG - Order Profit ID is 0
2018-01-17 09:43:09,427 - DEBUG - Order Entry ID is 105
2018-01-17 09:43:09,427 - DEBUG - API ID is  0
2018-01-17 09:43:09,427 - DEBUG - Current Position is 0
2018-01-17 09:43:09,427 - DEBUG - Current Position is <class 'str'>
2018-01-17 09:43:09,428 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 09:43:09,428 - DEBUG - Time is 9
2018-01-17 09:43:09,428 - DEBUG - Time is <class 'int'>
2018-01-17 09:43:09,428 - DEBUG - Time is 43
2018-01-17 09:43:09,428 - DEBUG - Time is <class 'int'>
2018-01-17 09:43:09,430 - DEBUG - Disconnected from IBController
2018-01-17 09:43:09,430 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 09:48:05,345 - DEBUG - ****************************************************
2018-01-17 09:48:05,346 - DEBUG - Current Time is 09:48AM
2018-01-17 09:48:05,346 - DEBUG - Starting Pos Mgmt H E
2018-01-17 09:48:05,348 - DEBUG - Connecting to database
2018-01-17 09:48:05,368 - DEBUG - Connected to database
2018-01-17 09:48:05,368 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 09:48:05,371 - DEBUG - Order Profit is 0
2018-01-17 09:48:05,371 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 09:48:05,372 - DEBUG - Stop ID is 0
2018-01-17 09:48:05,372 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 09:48:05,374 - DEBUG - Entry ID is 105
2018-01-17 09:48:05,375 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 09:48:05,375 - DEBUG - OCA ID is 1
2018-01-17 09:48:05,375 - DEBUG - Connecting to IBController
2018-01-17 09:48:06,381 - DEBUG - Connected to IBController
2018-01-17 09:48:06,381 - DEBUG - Position requested
2018-01-17 09:48:06,382 - DEBUG - Pos Mgmt -12987
2018-01-17 09:48:06,382 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211CF60>, pos=-12987, avgCost=0.95368235>
2018-01-17 09:48:06,384 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 09:48:06,384 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 09:48:06,384 - DEBUG - Position is -12987
2018-01-17 09:48:07,382 - DEBUG - Open Orders requested
2018-01-17 09:48:07,384 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x000000000211CCC0>, order=<ib.ext.Order.Order object at 0x000000000211CB70>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B0198>>
2018-01-17 09:48:07,385 - DEBUG - Order OrderID 102
2018-01-17 09:48:07,385 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 09:48:07,387 - DEBUG - Order status PreSubmitted
2018-01-17 09:48:07,387 - DEBUG - Order Identification 102
2018-01-17 09:48:07,387 - DEBUG - Order Identification <class 'int'>
2018-01-17 09:48:07,388 - DEBUG - Profit ID from database is 0
2018-01-17 09:48:07,388 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 09:48:07,388 - DEBUG - Stop ID database is 0
2018-01-17 09:48:07,388 - DEBUG - Entry ID database is 105
2018-01-17 09:48:07,394 - DEBUG - Reply Handler Orders is <openOrder orderId=104, contract=<ib.ext.Contract.Contract object at 0x000000000211CCC0>, order=<ib.ext.Order.Order object at 0x000000000211CB70>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B0208>>
2018-01-17 09:48:07,394 - DEBUG - Order OrderID 104
2018-01-17 09:48:07,394 - DEBUG - reply handler status <orderStatus orderId=104, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791157, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 09:48:07,395 - DEBUG - Order status PreSubmitted
2018-01-17 09:48:07,395 - DEBUG - Order Identification 104
2018-01-17 09:48:07,395 - DEBUG - Order Identification <class 'int'>
2018-01-17 09:48:07,395 - DEBUG - Profit ID from database is 0
2018-01-17 09:48:07,397 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 09:48:07,397 - DEBUG - Stop ID database is 0
2018-01-17 09:48:07,397 - DEBUG - Entry ID database is 105
2018-01-17 09:48:07,398 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x000000000211CCC0>, order=<ib.ext.Order.Order object at 0x000000000211CB70>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B02E8>>
2018-01-17 09:48:07,398 - DEBUG - Order OrderID 103
2018-01-17 09:48:07,398 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 09:48:07,398 - DEBUG - Order status PreSubmitted
2018-01-17 09:48:07,398 - DEBUG - Order Identification 103
2018-01-17 09:48:07,400 - DEBUG - Order Identification <class 'int'>
2018-01-17 09:48:07,400 - DEBUG - Profit ID from database is 0
2018-01-17 09:48:07,400 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 09:48:07,400 - DEBUG - Stop ID database is 0
2018-01-17 09:48:07,401 - DEBUG - Entry ID database is 105
2018-01-17 09:48:07,401 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x000000000211CCC0>, order=<ib.ext.Order.Order object at 0x000000000211CB70>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B0358>>
2018-01-17 09:48:07,401 - DEBUG - Order OrderID 105
2018-01-17 09:48:07,403 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 09:48:07,403 - DEBUG - Order status PreSubmitted
2018-01-17 09:48:07,403 - DEBUG - Order Identification 105
2018-01-17 09:48:07,403 - DEBUG - Order Identification <class 'int'>
2018-01-17 09:48:07,404 - DEBUG - Profit ID from database is 0
2018-01-17 09:48:07,404 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 09:48:07,404 - DEBUG - Stop ID database is 0
2018-01-17 09:48:07,404 - DEBUG - Entry ID database is 105
2018-01-17 09:48:07,404 - DEBUG - Entry API ID is 105
2018-01-17 09:48:09,384 - DEBUG - Connecting to database
2018-01-17 09:48:09,391 - DEBUG - Connected to database
2018-01-17 09:48:09,391 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 09:48:09,392 - DEBUG - Stop loss value is 71.82
2018-01-17 09:48:09,394 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 09:48:09,394 - DEBUG - Stop loss value is 85.25
2018-01-17 09:48:09,395 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 09:48:09,395 - DEBUG - EntryPrice value is 74.3
2018-01-17 09:48:09,397 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 09:48:09,398 - DEBUG - Stop quantity 1
2018-01-17 09:48:09,398 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 09:48:09,400 - DEBUG - Direction is Long
2018-01-17 09:48:09,401 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 09:48:09,401 - DEBUG - Count is 0
2018-01-17 09:48:09,403 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 09:48:09,403 - DEBUG - Stop Loss Flag is 0
2018-01-17 09:48:09,404 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 09:48:09,404 - DEBUG - Max ID Order is (105,)
2018-01-17 09:48:09,404 - DEBUG - Today is 2018-01-17
2018-01-17 09:48:09,404 - DEBUG - Day of the week 2
2018-01-17 09:48:09,404 - DEBUG - Yesterday is 01/16/2018
2018-01-17 09:48:09,405 - DEBUG - In Position is  0
2018-01-17 09:48:09,405 - DEBUG - In Position is  <class 'int'>
2018-01-17 09:48:09,405 - DEBUG - curStopLossFlag is  0
2018-01-17 09:48:09,405 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 09:48:09,407 - DEBUG - Checking if Entry has been filled
2018-01-17 09:48:09,407 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 09:48:09,407 - DEBUG - EntryPend is 1
2018-01-17 09:48:09,407 - DEBUG - Try to Cancel Stop
2018-01-17 09:48:09,408 - DEBUG - Stop API ID 0
2018-01-17 09:48:09,408 - DEBUG - Profit API ID 0
2018-01-17 09:48:09,408 - DEBUG - Stop API ID <class 'int'>
2018-01-17 09:48:09,408 - DEBUG - Profit API ID <class 'int'>
2018-01-17 09:48:09,410 - DEBUG - Pos is 0
2018-01-17 09:48:09,410 - DEBUG - CurCount is 0
2018-01-17 09:48:09,410 - DEBUG - In Pos 0
2018-01-17 09:48:09,410 - DEBUG - Stop ID is 0
2018-01-17 09:48:09,410 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 09:48:09,411 - DEBUG - EntryPend is 1
2018-01-17 09:48:09,411 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 09:48:09,411 - DEBUG - Entry Date is 10
2018-01-17 09:48:09,411 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 09:48:09,413 - DEBUG - Order Profit ID is 0
2018-01-17 09:48:09,413 - DEBUG - Order Entry ID is 105
2018-01-17 09:48:09,413 - DEBUG - API ID is  0
2018-01-17 09:48:09,413 - DEBUG - Current Position is 0
2018-01-17 09:48:09,413 - DEBUG - Current Position is <class 'str'>
2018-01-17 09:48:09,414 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 09:48:09,414 - DEBUG - Time is 9
2018-01-17 09:48:09,414 - DEBUG - Time is <class 'int'>
2018-01-17 09:48:09,414 - DEBUG - Time is 48
2018-01-17 09:48:09,414 - DEBUG - Time is <class 'int'>
2018-01-17 09:48:09,414 - DEBUG - Disconnected from IBController
2018-01-17 09:48:09,414 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 09:53:05,352 - DEBUG - ****************************************************
2018-01-17 09:53:05,352 - DEBUG - Current Time is 09:53AM
2018-01-17 09:53:05,354 - DEBUG - Starting Pos Mgmt H E
2018-01-17 09:53:05,354 - DEBUG - Connecting to database
2018-01-17 09:53:05,371 - DEBUG - Connected to database
2018-01-17 09:53:05,371 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 09:53:05,375 - DEBUG - Order Profit is 0
2018-01-17 09:53:05,375 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 09:53:05,375 - DEBUG - Stop ID is 0
2018-01-17 09:53:05,375 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 09:53:05,378 - DEBUG - Entry ID is 105
2018-01-17 09:53:05,378 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 09:53:05,380 - DEBUG - OCA ID is 1
2018-01-17 09:53:05,380 - DEBUG - Connecting to IBController
2018-01-17 09:53:06,401 - DEBUG - Connected to IBController
2018-01-17 09:53:06,401 - DEBUG - Position requested
2018-01-17 09:53:06,401 - DEBUG - Pos Mgmt -12987
2018-01-17 09:53:06,403 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020ECC18>, pos=-12987, avgCost=0.95368235>
2018-01-17 09:53:06,403 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 09:53:06,403 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 09:53:06,404 - DEBUG - Position is -12987
2018-01-17 09:53:07,401 - DEBUG - Open Orders requested
2018-01-17 09:53:07,404 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x00000000020ECE10>, order=<ib.ext.Order.Order object at 0x00000000020ECBA8>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002180208>>
2018-01-17 09:53:07,404 - DEBUG - Order OrderID 102
2018-01-17 09:53:07,404 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 09:53:07,405 - DEBUG - Order status PreSubmitted
2018-01-17 09:53:07,405 - DEBUG - Order Identification 102
2018-01-17 09:53:07,405 - DEBUG - Order Identification <class 'int'>
2018-01-17 09:53:07,405 - DEBUG - Profit ID from database is 0
2018-01-17 09:53:07,407 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 09:53:07,407 - DEBUG - Stop ID database is 0
2018-01-17 09:53:07,407 - DEBUG - Entry ID database is 105
2018-01-17 09:53:07,407 - DEBUG - Reply Handler Orders is <openOrder orderId=104, contract=<ib.ext.Contract.Contract object at 0x00000000020ECE10>, order=<ib.ext.Order.Order object at 0x00000000020ECBA8>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002180080>>
2018-01-17 09:53:07,407 - DEBUG - Order OrderID 104
2018-01-17 09:53:07,408 - DEBUG - reply handler status <orderStatus orderId=104, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791157, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 09:53:07,408 - DEBUG - Order status PreSubmitted
2018-01-17 09:53:07,408 - DEBUG - Order Identification 104
2018-01-17 09:53:07,410 - DEBUG - Order Identification <class 'int'>
2018-01-17 09:53:07,410 - DEBUG - Profit ID from database is 0
2018-01-17 09:53:07,410 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 09:53:07,410 - DEBUG - Stop ID database is 0
2018-01-17 09:53:07,410 - DEBUG - Entry ID database is 105
2018-01-17 09:53:07,411 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x00000000020ECE10>, order=<ib.ext.Order.Order object at 0x00000000020ECBA8>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002180278>>
2018-01-17 09:53:07,411 - DEBUG - Order OrderID 103
2018-01-17 09:53:07,411 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 09:53:07,413 - DEBUG - Order status PreSubmitted
2018-01-17 09:53:07,413 - DEBUG - Order Identification 103
2018-01-17 09:53:07,413 - DEBUG - Order Identification <class 'int'>
2018-01-17 09:53:07,414 - DEBUG - Profit ID from database is 0
2018-01-17 09:53:07,414 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 09:53:07,414 - DEBUG - Stop ID database is 0
2018-01-17 09:53:07,414 - DEBUG - Entry ID database is 105
2018-01-17 09:53:07,414 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x00000000020ECE10>, order=<ib.ext.Order.Order object at 0x00000000020ECBA8>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002180358>>
2018-01-17 09:53:07,415 - DEBUG - Order OrderID 105
2018-01-17 09:53:07,415 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 09:53:07,415 - DEBUG - Order status PreSubmitted
2018-01-17 09:53:07,417 - DEBUG - Order Identification 105
2018-01-17 09:53:07,417 - DEBUG - Order Identification <class 'int'>
2018-01-17 09:53:07,417 - DEBUG - Profit ID from database is 0
2018-01-17 09:53:07,417 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 09:53:07,417 - DEBUG - Stop ID database is 0
2018-01-17 09:53:07,417 - DEBUG - Entry ID database is 105
2018-01-17 09:53:07,417 - DEBUG - Entry API ID is 105
2018-01-17 09:53:09,404 - DEBUG - Connecting to database
2018-01-17 09:53:09,411 - DEBUG - Connected to database
2018-01-17 09:53:09,413 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 09:53:09,414 - DEBUG - Stop loss value is 71.82
2018-01-17 09:53:09,414 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 09:53:09,415 - DEBUG - Stop loss value is 85.25
2018-01-17 09:53:09,417 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 09:53:09,417 - DEBUG - EntryPrice value is 74.3
2018-01-17 09:53:09,418 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 09:53:09,418 - DEBUG - Stop quantity 1
2018-01-17 09:53:09,420 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 09:53:09,421 - DEBUG - Direction is Long
2018-01-17 09:53:09,421 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 09:53:09,421 - DEBUG - Count is 0
2018-01-17 09:53:09,424 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 09:53:09,424 - DEBUG - Stop Loss Flag is 0
2018-01-17 09:53:09,426 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 09:53:09,427 - DEBUG - Max ID Order is (105,)
2018-01-17 09:53:09,427 - DEBUG - Today is 2018-01-17
2018-01-17 09:53:09,427 - DEBUG - Day of the week 2
2018-01-17 09:53:09,427 - DEBUG - Yesterday is 01/16/2018
2018-01-17 09:53:09,427 - DEBUG - In Position is  0
2018-01-17 09:53:09,427 - DEBUG - In Position is  <class 'int'>
2018-01-17 09:53:09,427 - DEBUG - curStopLossFlag is  0
2018-01-17 09:53:09,428 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 09:53:09,428 - DEBUG - Checking if Entry has been filled
2018-01-17 09:53:09,428 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 09:53:09,430 - DEBUG - EntryPend is 1
2018-01-17 09:53:09,430 - DEBUG - Try to Cancel Stop
2018-01-17 09:53:09,430 - DEBUG - Stop API ID 0
2018-01-17 09:53:09,430 - DEBUG - Profit API ID 0
2018-01-17 09:53:09,430 - DEBUG - Stop API ID <class 'int'>
2018-01-17 09:53:09,431 - DEBUG - Profit API ID <class 'int'>
2018-01-17 09:53:09,431 - DEBUG - Pos is 0
2018-01-17 09:53:09,431 - DEBUG - CurCount is 0
2018-01-17 09:53:09,431 - DEBUG - In Pos 0
2018-01-17 09:53:09,433 - DEBUG - Stop ID is 0
2018-01-17 09:53:09,433 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 09:53:09,434 - DEBUG - EntryPend is 1
2018-01-17 09:53:09,434 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 09:53:09,434 - DEBUG - Entry Date is 10
2018-01-17 09:53:09,434 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 09:53:09,434 - DEBUG - Order Profit ID is 0
2018-01-17 09:53:09,434 - DEBUG - Order Entry ID is 105
2018-01-17 09:53:09,434 - DEBUG - API ID is  0
2018-01-17 09:53:09,436 - DEBUG - Current Position is 0
2018-01-17 09:53:09,436 - DEBUG - Current Position is <class 'str'>
2018-01-17 09:53:09,436 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 09:53:09,436 - DEBUG - Time is 9
2018-01-17 09:53:09,436 - DEBUG - Time is <class 'int'>
2018-01-17 09:53:09,436 - DEBUG - Time is 53
2018-01-17 09:53:09,437 - DEBUG - Time is <class 'int'>
2018-01-17 09:53:09,437 - DEBUG - Disconnected from IBController
2018-01-17 09:53:09,437 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 09:58:05,336 - DEBUG - ****************************************************
2018-01-17 09:58:05,336 - DEBUG - Current Time is 09:58AM
2018-01-17 09:58:05,338 - DEBUG - Starting Pos Mgmt H E
2018-01-17 09:58:05,338 - DEBUG - Connecting to database
2018-01-17 09:58:05,355 - DEBUG - Connected to database
2018-01-17 09:58:05,357 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 09:58:05,358 - DEBUG - Order Profit is 0
2018-01-17 09:58:05,358 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 09:58:05,359 - DEBUG - Stop ID is 0
2018-01-17 09:58:05,359 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 09:58:05,361 - DEBUG - Entry ID is 105
2018-01-17 09:58:05,361 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 09:58:05,362 - DEBUG - OCA ID is 1
2018-01-17 09:58:05,364 - DEBUG - Connecting to IBController
2018-01-17 09:58:06,369 - DEBUG - Connected to IBController
2018-01-17 09:58:06,369 - DEBUG - Position requested
2018-01-17 09:58:06,371 - DEBUG - Pos Mgmt -12987
2018-01-17 09:58:06,371 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020ECC18>, pos=-12987, avgCost=0.95368235>
2018-01-17 09:58:06,371 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 09:58:06,371 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 09:58:06,371 - DEBUG - Position is -12987
2018-01-17 09:58:07,371 - DEBUG - Open Orders requested
2018-01-17 09:58:07,372 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x00000000020ECCC0>, order=<ib.ext.Order.Order object at 0x00000000020ECD30>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002180198>>
2018-01-17 09:58:07,374 - DEBUG - Order OrderID 102
2018-01-17 09:58:07,374 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 09:58:07,375 - DEBUG - Order status PreSubmitted
2018-01-17 09:58:07,375 - DEBUG - Order Identification 102
2018-01-17 09:58:07,375 - DEBUG - Order Identification <class 'int'>
2018-01-17 09:58:07,375 - DEBUG - Profit ID from database is 0
2018-01-17 09:58:07,375 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 09:58:07,375 - DEBUG - Stop ID database is 0
2018-01-17 09:58:07,375 - DEBUG - Entry ID database is 105
2018-01-17 09:58:07,377 - DEBUG - Reply Handler Orders is <openOrder orderId=104, contract=<ib.ext.Contract.Contract object at 0x00000000020ECCC0>, order=<ib.ext.Order.Order object at 0x00000000020ECD30>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002180208>>
2018-01-17 09:58:07,377 - DEBUG - Order OrderID 104
2018-01-17 09:58:07,378 - DEBUG - reply handler status <orderStatus orderId=104, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791157, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 09:58:07,378 - DEBUG - Order status PreSubmitted
2018-01-17 09:58:07,378 - DEBUG - Order Identification 104
2018-01-17 09:58:07,378 - DEBUG - Order Identification <class 'int'>
2018-01-17 09:58:07,378 - DEBUG - Profit ID from database is 0
2018-01-17 09:58:07,378 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 09:58:07,378 - DEBUG - Stop ID database is 0
2018-01-17 09:58:07,378 - DEBUG - Entry ID database is 105
2018-01-17 09:58:07,380 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x00000000020ECCC0>, order=<ib.ext.Order.Order object at 0x00000000020ECD30>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021802E8>>
2018-01-17 09:58:07,381 - DEBUG - Order OrderID 103
2018-01-17 09:58:07,381 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 09:58:07,381 - DEBUG - Order status PreSubmitted
2018-01-17 09:58:07,381 - DEBUG - Order Identification 103
2018-01-17 09:58:07,381 - DEBUG - Order Identification <class 'int'>
2018-01-17 09:58:07,381 - DEBUG - Profit ID from database is 0
2018-01-17 09:58:07,381 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 09:58:07,382 - DEBUG - Stop ID database is 0
2018-01-17 09:58:07,382 - DEBUG - Entry ID database is 105
2018-01-17 09:58:07,384 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x00000000020ECCC0>, order=<ib.ext.Order.Order object at 0x00000000020ECD30>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002180358>>
2018-01-17 09:58:07,384 - DEBUG - Order OrderID 105
2018-01-17 09:58:07,384 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 09:58:07,384 - DEBUG - Order status PreSubmitted
2018-01-17 09:58:07,384 - DEBUG - Order Identification 105
2018-01-17 09:58:07,384 - DEBUG - Order Identification <class 'int'>
2018-01-17 09:58:07,385 - DEBUG - Profit ID from database is 0
2018-01-17 09:58:07,385 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 09:58:07,385 - DEBUG - Stop ID database is 0
2018-01-17 09:58:07,385 - DEBUG - Entry ID database is 105
2018-01-17 09:58:07,387 - DEBUG - Entry API ID is 105
2018-01-17 09:58:09,371 - DEBUG - Connecting to database
2018-01-17 09:58:09,378 - DEBUG - Connected to database
2018-01-17 09:58:09,380 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 09:58:09,380 - DEBUG - Stop loss value is 71.82
2018-01-17 09:58:09,381 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 09:58:09,381 - DEBUG - Stop loss value is 85.25
2018-01-17 09:58:09,382 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 09:58:09,382 - DEBUG - EntryPrice value is 74.3
2018-01-17 09:58:09,384 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 09:58:09,384 - DEBUG - Stop quantity 1
2018-01-17 09:58:09,385 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 09:58:09,387 - DEBUG - Direction is Long
2018-01-17 09:58:09,388 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 09:58:09,388 - DEBUG - Count is 0
2018-01-17 09:58:09,390 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 09:58:09,390 - DEBUG - Stop Loss Flag is 0
2018-01-17 09:58:09,391 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 09:58:09,391 - DEBUG - Max ID Order is (105,)
2018-01-17 09:58:09,391 - DEBUG - Today is 2018-01-17
2018-01-17 09:58:09,391 - DEBUG - Day of the week 2
2018-01-17 09:58:09,392 - DEBUG - Yesterday is 01/16/2018
2018-01-17 09:58:09,392 - DEBUG - In Position is  0
2018-01-17 09:58:09,392 - DEBUG - In Position is  <class 'int'>
2018-01-17 09:58:09,392 - DEBUG - curStopLossFlag is  0
2018-01-17 09:58:09,394 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 09:58:09,394 - DEBUG - Checking if Entry has been filled
2018-01-17 09:58:09,394 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 09:58:09,394 - DEBUG - EntryPend is 1
2018-01-17 09:58:09,395 - DEBUG - Try to Cancel Stop
2018-01-17 09:58:09,395 - DEBUG - Stop API ID 0
2018-01-17 09:58:09,395 - DEBUG - Profit API ID 0
2018-01-17 09:58:09,395 - DEBUG - Stop API ID <class 'int'>
2018-01-17 09:58:09,395 - DEBUG - Profit API ID <class 'int'>
2018-01-17 09:58:09,397 - DEBUG - Pos is 0
2018-01-17 09:58:09,397 - DEBUG - CurCount is 0
2018-01-17 09:58:09,397 - DEBUG - In Pos 0
2018-01-17 09:58:09,397 - DEBUG - Stop ID is 0
2018-01-17 09:58:09,397 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 09:58:09,398 - DEBUG - EntryPend is 1
2018-01-17 09:58:09,398 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 09:58:09,398 - DEBUG - Entry Date is 10
2018-01-17 09:58:09,400 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 09:58:09,400 - DEBUG - Order Profit ID is 0
2018-01-17 09:58:09,400 - DEBUG - Order Entry ID is 105
2018-01-17 09:58:09,400 - DEBUG - API ID is  0
2018-01-17 09:58:09,400 - DEBUG - Current Position is 0
2018-01-17 09:58:09,400 - DEBUG - Current Position is <class 'str'>
2018-01-17 09:58:09,401 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 09:58:09,401 - DEBUG - Time is 9
2018-01-17 09:58:09,401 - DEBUG - Time is <class 'int'>
2018-01-17 09:58:09,401 - DEBUG - Time is 58
2018-01-17 09:58:09,401 - DEBUG - Time is <class 'int'>
2018-01-17 09:58:09,401 - DEBUG - Disconnected from IBController
2018-01-17 09:58:09,401 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 10:03:05,345 - DEBUG - ****************************************************
2018-01-17 10:03:05,346 - DEBUG - Current Time is 10:03AM
2018-01-17 10:03:05,346 - DEBUG - Starting Pos Mgmt H E
2018-01-17 10:03:05,346 - DEBUG - Connecting to database
2018-01-17 10:03:05,367 - DEBUG - Connected to database
2018-01-17 10:03:05,368 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 10:03:05,368 - DEBUG - Order Profit is 0
2018-01-17 10:03:05,369 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 10:03:05,371 - DEBUG - Stop ID is 0
2018-01-17 10:03:05,371 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 10:03:05,372 - DEBUG - Entry ID is 105
2018-01-17 10:03:05,372 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 10:03:05,374 - DEBUG - OCA ID is 1
2018-01-17 10:03:05,375 - DEBUG - Connecting to IBController
2018-01-17 10:03:06,378 - DEBUG - Connected to IBController
2018-01-17 10:03:06,378 - DEBUG - Position requested
2018-01-17 10:03:06,380 - DEBUG - Pos Mgmt -12987
2018-01-17 10:03:06,381 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210BC18>, pos=-12987, avgCost=0.95368235>
2018-01-17 10:03:06,381 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 10:03:06,381 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 10:03:06,381 - DEBUG - Position is -12987
2018-01-17 10:03:07,380 - DEBUG - Open Orders requested
2018-01-17 10:03:07,381 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x000000000210BE10>, order=<ib.ext.Order.Order object at 0x000000000210BDA0>, orderState=<ib.ext.OrderState.OrderState object at 0x000000000219F208>>
2018-01-17 10:03:07,381 - DEBUG - Order OrderID 102
2018-01-17 10:03:07,382 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:03:07,382 - DEBUG - Order status PreSubmitted
2018-01-17 10:03:07,382 - DEBUG - Order Identification 102
2018-01-17 10:03:07,382 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:03:07,384 - DEBUG - Profit ID from database is 0
2018-01-17 10:03:07,384 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:03:07,384 - DEBUG - Stop ID database is 0
2018-01-17 10:03:07,384 - DEBUG - Entry ID database is 105
2018-01-17 10:03:07,384 - DEBUG - Reply Handler Orders is <openOrder orderId=104, contract=<ib.ext.Contract.Contract object at 0x000000000210BE10>, order=<ib.ext.Order.Order object at 0x000000000210BDA0>, orderState=<ib.ext.OrderState.OrderState object at 0x000000000219F0B8>>
2018-01-17 10:03:07,385 - DEBUG - Order OrderID 104
2018-01-17 10:03:07,385 - DEBUG - reply handler status <orderStatus orderId=104, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791157, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:03:07,385 - DEBUG - Order status PreSubmitted
2018-01-17 10:03:07,387 - DEBUG - Order Identification 104
2018-01-17 10:03:07,387 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:03:07,387 - DEBUG - Profit ID from database is 0
2018-01-17 10:03:07,387 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:03:07,387 - DEBUG - Stop ID database is 0
2018-01-17 10:03:07,388 - DEBUG - Entry ID database is 105
2018-01-17 10:03:07,388 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x000000000210BE10>, order=<ib.ext.Order.Order object at 0x000000000210BDA0>, orderState=<ib.ext.OrderState.OrderState object at 0x000000000219F278>>
2018-01-17 10:03:07,388 - DEBUG - Order OrderID 103
2018-01-17 10:03:07,388 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:03:07,390 - DEBUG - Order status PreSubmitted
2018-01-17 10:03:07,390 - DEBUG - Order Identification 103
2018-01-17 10:03:07,390 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:03:07,390 - DEBUG - Profit ID from database is 0
2018-01-17 10:03:07,391 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:03:07,391 - DEBUG - Stop ID database is 0
2018-01-17 10:03:07,391 - DEBUG - Entry ID database is 105
2018-01-17 10:03:07,391 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x000000000210BE10>, order=<ib.ext.Order.Order object at 0x000000000210BDA0>, orderState=<ib.ext.OrderState.OrderState object at 0x000000000219F358>>
2018-01-17 10:03:07,391 - DEBUG - Order OrderID 105
2018-01-17 10:03:07,392 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:03:07,392 - DEBUG - Order status PreSubmitted
2018-01-17 10:03:07,392 - DEBUG - Order Identification 105
2018-01-17 10:03:07,394 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:03:07,394 - DEBUG - Profit ID from database is 0
2018-01-17 10:03:07,394 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:03:07,394 - DEBUG - Stop ID database is 0
2018-01-17 10:03:07,394 - DEBUG - Entry ID database is 105
2018-01-17 10:03:07,394 - DEBUG - Entry API ID is 105
2018-01-17 10:03:09,381 - DEBUG - Connecting to database
2018-01-17 10:03:09,388 - DEBUG - Connected to database
2018-01-17 10:03:09,390 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 10:03:09,391 - DEBUG - Stop loss value is 71.82
2018-01-17 10:03:09,391 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 10:03:09,391 - DEBUG - Stop loss value is 85.25
2018-01-17 10:03:09,392 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 10:03:09,394 - DEBUG - EntryPrice value is 74.3
2018-01-17 10:03:09,394 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 10:03:09,394 - DEBUG - Stop quantity 1
2018-01-17 10:03:09,397 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 10:03:09,397 - DEBUG - Direction is Long
2018-01-17 10:03:09,398 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 10:03:09,398 - DEBUG - Count is 0
2018-01-17 10:03:09,400 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 10:03:09,400 - DEBUG - Stop Loss Flag is 0
2018-01-17 10:03:09,401 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 10:03:09,401 - DEBUG - Max ID Order is (105,)
2018-01-17 10:03:09,401 - DEBUG - Today is 2018-01-17
2018-01-17 10:03:09,403 - DEBUG - Day of the week 2
2018-01-17 10:03:09,403 - DEBUG - Yesterday is 01/16/2018
2018-01-17 10:03:09,403 - DEBUG - In Position is  0
2018-01-17 10:03:09,403 - DEBUG - In Position is  <class 'int'>
2018-01-17 10:03:09,404 - DEBUG - curStopLossFlag is  0
2018-01-17 10:03:09,404 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 10:03:09,404 - DEBUG - Checking if Entry has been filled
2018-01-17 10:03:09,404 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 10:03:09,405 - DEBUG - EntryPend is 1
2018-01-17 10:03:09,405 - DEBUG - Try to Cancel Stop
2018-01-17 10:03:09,405 - DEBUG - Stop API ID 0
2018-01-17 10:03:09,405 - DEBUG - Profit API ID 0
2018-01-17 10:03:09,407 - DEBUG - Stop API ID <class 'int'>
2018-01-17 10:03:09,407 - DEBUG - Profit API ID <class 'int'>
2018-01-17 10:03:09,407 - DEBUG - Pos is 0
2018-01-17 10:03:09,407 - DEBUG - CurCount is 0
2018-01-17 10:03:09,407 - DEBUG - In Pos 0
2018-01-17 10:03:09,407 - DEBUG - Stop ID is 0
2018-01-17 10:03:09,407 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 10:03:09,408 - DEBUG - EntryPend is 1
2018-01-17 10:03:09,410 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 10:03:09,410 - DEBUG - Entry Date is 10
2018-01-17 10:03:09,410 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 10:03:09,410 - DEBUG - Order Profit ID is 0
2018-01-17 10:03:09,410 - DEBUG - Order Entry ID is 105
2018-01-17 10:03:09,411 - DEBUG - API ID is  0
2018-01-17 10:03:09,411 - DEBUG - Current Position is 0
2018-01-17 10:03:09,411 - DEBUG - Current Position is <class 'str'>
2018-01-17 10:03:09,411 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 10:03:09,411 - DEBUG - Time is 10
2018-01-17 10:03:09,411 - DEBUG - Time is <class 'int'>
2018-01-17 10:03:09,411 - DEBUG - Time is 3
2018-01-17 10:03:09,411 - DEBUG - Time is <class 'int'>
2018-01-17 10:03:09,411 - DEBUG - Disconnected from IBController
2018-01-17 10:03:09,411 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 10:08:05,341 - DEBUG - ****************************************************
2018-01-17 10:08:05,341 - DEBUG - Current Time is 10:08AM
2018-01-17 10:08:05,342 - DEBUG - Starting Pos Mgmt H E
2018-01-17 10:08:05,342 - DEBUG - Connecting to database
2018-01-17 10:08:05,371 - DEBUG - Connected to database
2018-01-17 10:08:05,371 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 10:08:05,372 - DEBUG - Order Profit is 0
2018-01-17 10:08:05,372 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 10:08:05,374 - DEBUG - Stop ID is 0
2018-01-17 10:08:05,375 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 10:08:05,375 - DEBUG - Entry ID is 105
2018-01-17 10:08:05,375 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 10:08:05,378 - DEBUG - OCA ID is 1
2018-01-17 10:08:05,378 - DEBUG - Connecting to IBController
2018-01-17 10:08:06,381 - DEBUG - Connected to IBController
2018-01-17 10:08:06,381 - DEBUG - Position requested
2018-01-17 10:08:06,382 - DEBUG - Pos Mgmt -12987
2018-01-17 10:08:06,384 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212BDA0>, pos=-12987, avgCost=0.95368235>
2018-01-17 10:08:06,384 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 10:08:06,384 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 10:08:06,384 - DEBUG - Position is -12987
2018-01-17 10:08:07,382 - DEBUG - Open Orders requested
2018-01-17 10:08:07,384 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x000000000212BE10>, order=<ib.ext.Order.Order object at 0x000000000212BD68>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021BF208>>
2018-01-17 10:08:07,385 - DEBUG - Order OrderID 102
2018-01-17 10:08:07,385 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:08:07,387 - DEBUG - Order status PreSubmitted
2018-01-17 10:08:07,387 - DEBUG - Order Identification 102
2018-01-17 10:08:07,387 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:08:07,388 - DEBUG - Profit ID from database is 0
2018-01-17 10:08:07,388 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:08:07,388 - DEBUG - Stop ID database is 0
2018-01-17 10:08:07,388 - DEBUG - Entry ID database is 105
2018-01-17 10:08:07,388 - DEBUG - Reply Handler Orders is <openOrder orderId=104, contract=<ib.ext.Contract.Contract object at 0x000000000212BE10>, order=<ib.ext.Order.Order object at 0x000000000212BD68>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021BF080>>
2018-01-17 10:08:07,390 - DEBUG - Order OrderID 104
2018-01-17 10:08:07,390 - DEBUG - reply handler status <orderStatus orderId=104, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791157, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:08:07,390 - DEBUG - Order status PreSubmitted
2018-01-17 10:08:07,391 - DEBUG - Order Identification 104
2018-01-17 10:08:07,391 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:08:07,391 - DEBUG - Profit ID from database is 0
2018-01-17 10:08:07,391 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:08:07,391 - DEBUG - Stop ID database is 0
2018-01-17 10:08:07,391 - DEBUG - Entry ID database is 105
2018-01-17 10:08:07,392 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x000000000212BE10>, order=<ib.ext.Order.Order object at 0x000000000212BD68>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021BF278>>
2018-01-17 10:08:07,392 - DEBUG - Order OrderID 103
2018-01-17 10:08:07,392 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:08:07,394 - DEBUG - Order status PreSubmitted
2018-01-17 10:08:07,394 - DEBUG - Order Identification 103
2018-01-17 10:08:07,394 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:08:07,394 - DEBUG - Profit ID from database is 0
2018-01-17 10:08:07,394 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:08:07,394 - DEBUG - Stop ID database is 0
2018-01-17 10:08:07,394 - DEBUG - Entry ID database is 105
2018-01-17 10:08:07,395 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x000000000212BE10>, order=<ib.ext.Order.Order object at 0x000000000212BD68>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021BF358>>
2018-01-17 10:08:07,395 - DEBUG - Order OrderID 105
2018-01-17 10:08:07,397 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:08:07,397 - DEBUG - Order status PreSubmitted
2018-01-17 10:08:07,397 - DEBUG - Order Identification 105
2018-01-17 10:08:07,397 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:08:07,398 - DEBUG - Profit ID from database is 0
2018-01-17 10:08:07,398 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:08:07,398 - DEBUG - Stop ID database is 0
2018-01-17 10:08:07,398 - DEBUG - Entry ID database is 105
2018-01-17 10:08:07,398 - DEBUG - Entry API ID is 105
2018-01-17 10:08:09,385 - DEBUG - Connecting to database
2018-01-17 10:08:09,392 - DEBUG - Connected to database
2018-01-17 10:08:09,394 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 10:08:09,394 - DEBUG - Stop loss value is 71.82
2018-01-17 10:08:09,395 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 10:08:09,395 - DEBUG - Stop loss value is 85.25
2018-01-17 10:08:09,398 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 10:08:09,398 - DEBUG - EntryPrice value is 74.3
2018-01-17 10:08:09,398 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 10:08:09,400 - DEBUG - Stop quantity 1
2018-01-17 10:08:09,401 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 10:08:09,401 - DEBUG - Direction is Long
2018-01-17 10:08:09,403 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 10:08:09,403 - DEBUG - Count is 0
2018-01-17 10:08:09,404 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 10:08:09,404 - DEBUG - Stop Loss Flag is 0
2018-01-17 10:08:09,405 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 10:08:09,405 - DEBUG - Max ID Order is (105,)
2018-01-17 10:08:09,407 - DEBUG - Today is 2018-01-17
2018-01-17 10:08:09,407 - DEBUG - Day of the week 2
2018-01-17 10:08:09,407 - DEBUG - Yesterday is 01/16/2018
2018-01-17 10:08:09,407 - DEBUG - In Position is  0
2018-01-17 10:08:09,407 - DEBUG - In Position is  <class 'int'>
2018-01-17 10:08:09,407 - DEBUG - curStopLossFlag is  0
2018-01-17 10:08:09,407 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 10:08:09,407 - DEBUG - Checking if Entry has been filled
2018-01-17 10:08:09,408 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 10:08:09,410 - DEBUG - EntryPend is 1
2018-01-17 10:08:09,410 - DEBUG - Try to Cancel Stop
2018-01-17 10:08:09,410 - DEBUG - Stop API ID 0
2018-01-17 10:08:09,411 - DEBUG - Profit API ID 0
2018-01-17 10:08:09,411 - DEBUG - Stop API ID <class 'int'>
2018-01-17 10:08:09,411 - DEBUG - Profit API ID <class 'int'>
2018-01-17 10:08:09,411 - DEBUG - Pos is 0
2018-01-17 10:08:09,411 - DEBUG - CurCount is 0
2018-01-17 10:08:09,411 - DEBUG - In Pos 0
2018-01-17 10:08:09,411 - DEBUG - Stop ID is 0
2018-01-17 10:08:09,411 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 10:08:09,413 - DEBUG - EntryPend is 1
2018-01-17 10:08:09,414 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 10:08:09,414 - DEBUG - Entry Date is 10
2018-01-17 10:08:09,414 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 10:08:09,414 - DEBUG - Order Profit ID is 0
2018-01-17 10:08:09,414 - DEBUG - Order Entry ID is 105
2018-01-17 10:08:09,414 - DEBUG - API ID is  0
2018-01-17 10:08:09,414 - DEBUG - Current Position is 0
2018-01-17 10:08:09,414 - DEBUG - Current Position is <class 'str'>
2018-01-17 10:08:09,414 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 10:08:09,414 - DEBUG - Time is 10
2018-01-17 10:08:09,414 - DEBUG - Time is <class 'int'>
2018-01-17 10:08:09,415 - DEBUG - Time is 8
2018-01-17 10:08:09,415 - DEBUG - Time is <class 'int'>
2018-01-17 10:08:09,415 - DEBUG - Disconnected from IBController
2018-01-17 10:08:09,415 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 10:13:05,365 - DEBUG - ****************************************************
2018-01-17 10:13:05,365 - DEBUG - Current Time is 10:13AM
2018-01-17 10:13:05,365 - DEBUG - Starting Pos Mgmt H E
2018-01-17 10:13:05,365 - DEBUG - Connecting to database
2018-01-17 10:13:05,388 - DEBUG - Connected to database
2018-01-17 10:13:05,388 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 10:13:05,390 - DEBUG - Order Profit is 0
2018-01-17 10:13:05,391 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 10:13:05,391 - DEBUG - Stop ID is 0
2018-01-17 10:13:05,391 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 10:13:05,394 - DEBUG - Entry ID is 105
2018-01-17 10:13:05,394 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 10:13:05,394 - DEBUG - OCA ID is 1
2018-01-17 10:13:05,395 - DEBUG - Connecting to IBController
2018-01-17 10:13:06,401 - DEBUG - Connected to IBController
2018-01-17 10:13:06,401 - DEBUG - Position requested
2018-01-17 10:13:06,403 - DEBUG - Pos Mgmt -12987
2018-01-17 10:13:06,404 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020BDDA0>, pos=-12987, avgCost=0.95368235>
2018-01-17 10:13:06,404 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 10:13:06,404 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 10:13:06,404 - DEBUG - Position is -12987
2018-01-17 10:13:07,403 - DEBUG - Open Orders requested
2018-01-17 10:13:07,404 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x00000000020BDE10>, order=<ib.ext.Order.Order object at 0x00000000020BDDD8>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002150208>>
2018-01-17 10:13:07,404 - DEBUG - Order OrderID 102
2018-01-17 10:13:07,405 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:13:07,405 - DEBUG - Order status PreSubmitted
2018-01-17 10:13:07,405 - DEBUG - Order Identification 102
2018-01-17 10:13:07,407 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:13:07,407 - DEBUG - Profit ID from database is 0
2018-01-17 10:13:07,407 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:13:07,407 - DEBUG - Stop ID database is 0
2018-01-17 10:13:07,407 - DEBUG - Entry ID database is 105
2018-01-17 10:13:07,408 - DEBUG - Reply Handler Orders is <openOrder orderId=104, contract=<ib.ext.Contract.Contract object at 0x00000000020BDE10>, order=<ib.ext.Order.Order object at 0x00000000020BDDD8>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002150080>>
2018-01-17 10:13:07,408 - DEBUG - Order OrderID 104
2018-01-17 10:13:07,408 - DEBUG - reply handler status <orderStatus orderId=104, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791157, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:13:07,410 - DEBUG - Order status PreSubmitted
2018-01-17 10:13:07,410 - DEBUG - Order Identification 104
2018-01-17 10:13:07,410 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:13:07,410 - DEBUG - Profit ID from database is 0
2018-01-17 10:13:07,410 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:13:07,411 - DEBUG - Stop ID database is 0
2018-01-17 10:13:07,411 - DEBUG - Entry ID database is 105
2018-01-17 10:13:07,414 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x00000000020BDE10>, order=<ib.ext.Order.Order object at 0x00000000020BDDD8>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002150278>>
2018-01-17 10:13:07,414 - DEBUG - Order OrderID 103
2018-01-17 10:13:07,415 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:13:07,415 - DEBUG - Order status PreSubmitted
2018-01-17 10:13:07,415 - DEBUG - Order Identification 103
2018-01-17 10:13:07,415 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:13:07,417 - DEBUG - Profit ID from database is 0
2018-01-17 10:13:07,417 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:13:07,417 - DEBUG - Stop ID database is 0
2018-01-17 10:13:07,417 - DEBUG - Entry ID database is 105
2018-01-17 10:13:07,417 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x00000000020BDE10>, order=<ib.ext.Order.Order object at 0x00000000020BDDD8>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002150358>>
2018-01-17 10:13:07,418 - DEBUG - Order OrderID 105
2018-01-17 10:13:07,418 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:13:07,418 - DEBUG - Order status PreSubmitted
2018-01-17 10:13:07,420 - DEBUG - Order Identification 105
2018-01-17 10:13:07,420 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:13:07,420 - DEBUG - Profit ID from database is 0
2018-01-17 10:13:07,420 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:13:07,421 - DEBUG - Stop ID database is 0
2018-01-17 10:13:07,421 - DEBUG - Entry ID database is 105
2018-01-17 10:13:07,421 - DEBUG - Entry API ID is 105
2018-01-17 10:13:09,404 - DEBUG - Connecting to database
2018-01-17 10:13:09,413 - DEBUG - Connected to database
2018-01-17 10:13:09,414 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 10:13:09,414 - DEBUG - Stop loss value is 71.82
2018-01-17 10:13:09,415 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 10:13:09,415 - DEBUG - Stop loss value is 85.25
2018-01-17 10:13:09,417 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 10:13:09,417 - DEBUG - EntryPrice value is 74.3
2018-01-17 10:13:09,420 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 10:13:09,420 - DEBUG - Stop quantity 1
2018-01-17 10:13:09,421 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 10:13:09,421 - DEBUG - Direction is Long
2018-01-17 10:13:09,423 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 10:13:09,423 - DEBUG - Count is 0
2018-01-17 10:13:09,424 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 10:13:09,424 - DEBUG - Stop Loss Flag is 0
2018-01-17 10:13:09,427 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 10:13:09,427 - DEBUG - Max ID Order is (105,)
2018-01-17 10:13:09,427 - DEBUG - Today is 2018-01-17
2018-01-17 10:13:09,427 - DEBUG - Day of the week 2
2018-01-17 10:13:09,427 - DEBUG - Yesterday is 01/16/2018
2018-01-17 10:13:09,427 - DEBUG - In Position is  0
2018-01-17 10:13:09,427 - DEBUG - In Position is  <class 'int'>
2018-01-17 10:13:09,428 - DEBUG - curStopLossFlag is  0
2018-01-17 10:13:09,428 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 10:13:09,428 - DEBUG - Checking if Entry has been filled
2018-01-17 10:13:09,428 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 10:13:09,430 - DEBUG - EntryPend is 1
2018-01-17 10:13:09,430 - DEBUG - Try to Cancel Stop
2018-01-17 10:13:09,430 - DEBUG - Stop API ID 0
2018-01-17 10:13:09,430 - DEBUG - Profit API ID 0
2018-01-17 10:13:09,431 - DEBUG - Stop API ID <class 'int'>
2018-01-17 10:13:09,431 - DEBUG - Profit API ID <class 'int'>
2018-01-17 10:13:09,431 - DEBUG - Pos is 0
2018-01-17 10:13:09,431 - DEBUG - CurCount is 0
2018-01-17 10:13:09,433 - DEBUG - In Pos 0
2018-01-17 10:13:09,433 - DEBUG - Stop ID is 0
2018-01-17 10:13:09,433 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 10:13:09,434 - DEBUG - EntryPend is 1
2018-01-17 10:13:09,434 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 10:13:09,434 - DEBUG - Entry Date is 10
2018-01-17 10:13:09,434 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 10:13:09,434 - DEBUG - Order Profit ID is 0
2018-01-17 10:13:09,434 - DEBUG - Order Entry ID is 105
2018-01-17 10:13:09,436 - DEBUG - API ID is  0
2018-01-17 10:13:09,436 - DEBUG - Current Position is 0
2018-01-17 10:13:09,436 - DEBUG - Current Position is <class 'str'>
2018-01-17 10:13:09,436 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 10:13:09,436 - DEBUG - Time is 10
2018-01-17 10:13:09,437 - DEBUG - Time is <class 'int'>
2018-01-17 10:13:09,437 - DEBUG - Time is 13
2018-01-17 10:13:09,437 - DEBUG - Time is <class 'int'>
2018-01-17 10:13:09,437 - DEBUG - Disconnected from IBController
2018-01-17 10:13:09,437 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 10:18:05,359 - DEBUG - ****************************************************
2018-01-17 10:18:05,361 - DEBUG - Current Time is 10:18AM
2018-01-17 10:18:05,361 - DEBUG - Starting Pos Mgmt H E
2018-01-17 10:18:05,361 - DEBUG - Connecting to database
2018-01-17 10:18:05,392 - DEBUG - Connected to database
2018-01-17 10:18:05,392 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 10:18:05,394 - DEBUG - Order Profit is 0
2018-01-17 10:18:05,394 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 10:18:05,395 - DEBUG - Stop ID is 0
2018-01-17 10:18:05,397 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 10:18:05,398 - DEBUG - Entry ID is 105
2018-01-17 10:18:05,398 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 10:18:05,401 - DEBUG - OCA ID is 1
2018-01-17 10:18:05,401 - DEBUG - Connecting to IBController
2018-01-17 10:18:06,418 - DEBUG - Connected to IBController
2018-01-17 10:18:06,418 - DEBUG - Position requested
2018-01-17 10:18:06,420 - DEBUG - Pos Mgmt -12987
2018-01-17 10:18:06,421 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212DEF0>, pos=-12987, avgCost=0.95368235>
2018-01-17 10:18:06,421 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 10:18:06,421 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 10:18:06,421 - DEBUG - Position is -12987
2018-01-17 10:18:07,421 - DEBUG - Open Orders requested
2018-01-17 10:18:07,423 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x000000000212DA58>, order=<ib.ext.Order.Order object at 0x000000000212DAC8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C0208>>
2018-01-17 10:18:07,424 - DEBUG - Order OrderID 102
2018-01-17 10:18:07,424 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:18:07,424 - DEBUG - Order status PreSubmitted
2018-01-17 10:18:07,424 - DEBUG - Order Identification 102
2018-01-17 10:18:07,424 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:18:07,424 - DEBUG - Profit ID from database is 0
2018-01-17 10:18:07,424 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:18:07,426 - DEBUG - Stop ID database is 0
2018-01-17 10:18:07,426 - DEBUG - Entry ID database is 105
2018-01-17 10:18:07,427 - DEBUG - Reply Handler Orders is <openOrder orderId=104, contract=<ib.ext.Contract.Contract object at 0x000000000212DA58>, order=<ib.ext.Order.Order object at 0x000000000212DAC8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C0080>>
2018-01-17 10:18:07,427 - DEBUG - Order OrderID 104
2018-01-17 10:18:07,427 - DEBUG - reply handler status <orderStatus orderId=104, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791157, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:18:07,427 - DEBUG - Order status PreSubmitted
2018-01-17 10:18:07,427 - DEBUG - Order Identification 104
2018-01-17 10:18:07,428 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:18:07,428 - DEBUG - Profit ID from database is 0
2018-01-17 10:18:07,428 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:18:07,428 - DEBUG - Stop ID database is 0
2018-01-17 10:18:07,428 - DEBUG - Entry ID database is 105
2018-01-17 10:18:07,430 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x000000000212DA58>, order=<ib.ext.Order.Order object at 0x000000000212DAC8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C0278>>
2018-01-17 10:18:07,430 - DEBUG - Order OrderID 103
2018-01-17 10:18:07,430 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:18:07,431 - DEBUG - Order status PreSubmitted
2018-01-17 10:18:07,431 - DEBUG - Order Identification 103
2018-01-17 10:18:07,431 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:18:07,431 - DEBUG - Profit ID from database is 0
2018-01-17 10:18:07,431 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:18:07,433 - DEBUG - Stop ID database is 0
2018-01-17 10:18:07,433 - DEBUG - Entry ID database is 105
2018-01-17 10:18:07,434 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x000000000212DA58>, order=<ib.ext.Order.Order object at 0x000000000212DAC8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C0358>>
2018-01-17 10:18:07,434 - DEBUG - Order OrderID 105
2018-01-17 10:18:07,434 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:18:07,434 - DEBUG - Order status PreSubmitted
2018-01-17 10:18:07,434 - DEBUG - Order Identification 105
2018-01-17 10:18:07,436 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:18:07,436 - DEBUG - Profit ID from database is 0
2018-01-17 10:18:07,436 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:18:07,436 - DEBUG - Stop ID database is 0
2018-01-17 10:18:07,436 - DEBUG - Entry ID database is 105
2018-01-17 10:18:07,437 - DEBUG - Entry API ID is 105
2018-01-17 10:18:09,423 - DEBUG - Connecting to database
2018-01-17 10:18:09,430 - DEBUG - Connected to database
2018-01-17 10:18:09,431 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 10:18:09,433 - DEBUG - Stop loss value is 71.82
2018-01-17 10:18:09,434 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 10:18:09,434 - DEBUG - Stop loss value is 85.25
2018-01-17 10:18:09,436 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 10:18:09,436 - DEBUG - EntryPrice value is 74.3
2018-01-17 10:18:09,437 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 10:18:09,437 - DEBUG - Stop quantity 1
2018-01-17 10:18:09,438 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 10:18:09,438 - DEBUG - Direction is Long
2018-01-17 10:18:09,440 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 10:18:09,440 - DEBUG - Count is 0
2018-01-17 10:18:09,441 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 10:18:09,443 - DEBUG - Stop Loss Flag is 0
2018-01-17 10:18:09,444 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 10:18:09,444 - DEBUG - Max ID Order is (105,)
2018-01-17 10:18:09,444 - DEBUG - Today is 2018-01-17
2018-01-17 10:18:09,444 - DEBUG - Day of the week 2
2018-01-17 10:18:09,444 - DEBUG - Yesterday is 01/16/2018
2018-01-17 10:18:09,446 - DEBUG - In Position is  0
2018-01-17 10:18:09,446 - DEBUG - In Position is  <class 'int'>
2018-01-17 10:18:09,446 - DEBUG - curStopLossFlag is  0
2018-01-17 10:18:09,446 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 10:18:09,446 - DEBUG - Checking if Entry has been filled
2018-01-17 10:18:09,447 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 10:18:09,447 - DEBUG - EntryPend is 1
2018-01-17 10:18:09,447 - DEBUG - Try to Cancel Stop
2018-01-17 10:18:09,447 - DEBUG - Stop API ID 0
2018-01-17 10:18:09,448 - DEBUG - Profit API ID 0
2018-01-17 10:18:09,448 - DEBUG - Stop API ID <class 'int'>
2018-01-17 10:18:09,448 - DEBUG - Profit API ID <class 'int'>
2018-01-17 10:18:09,448 - DEBUG - Pos is 0
2018-01-17 10:18:09,450 - DEBUG - CurCount is 0
2018-01-17 10:18:09,450 - DEBUG - In Pos 0
2018-01-17 10:18:09,450 - DEBUG - Stop ID is 0
2018-01-17 10:18:09,450 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 10:18:09,451 - DEBUG - EntryPend is 1
2018-01-17 10:18:09,451 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 10:18:09,451 - DEBUG - Entry Date is 10
2018-01-17 10:18:09,451 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 10:18:09,453 - DEBUG - Order Profit ID is 0
2018-01-17 10:18:09,453 - DEBUG - Order Entry ID is 105
2018-01-17 10:18:09,453 - DEBUG - API ID is  0
2018-01-17 10:18:09,453 - DEBUG - Current Position is 0
2018-01-17 10:18:09,453 - DEBUG - Current Position is <class 'str'>
2018-01-17 10:18:09,453 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 10:18:09,453 - DEBUG - Time is 10
2018-01-17 10:18:09,453 - DEBUG - Time is <class 'int'>
2018-01-17 10:18:09,453 - DEBUG - Time is 18
2018-01-17 10:18:09,453 - DEBUG - Time is <class 'int'>
2018-01-17 10:18:09,454 - DEBUG - Disconnected from IBController
2018-01-17 10:18:09,454 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 10:23:05,346 - DEBUG - ****************************************************
2018-01-17 10:23:05,346 - DEBUG - Current Time is 10:23AM
2018-01-17 10:23:05,348 - DEBUG - Starting Pos Mgmt H E
2018-01-17 10:23:05,348 - DEBUG - Connecting to database
2018-01-17 10:23:05,381 - DEBUG - Connected to database
2018-01-17 10:23:05,381 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 10:23:05,384 - DEBUG - Order Profit is 0
2018-01-17 10:23:05,384 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 10:23:05,384 - DEBUG - Stop ID is 0
2018-01-17 10:23:05,385 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 10:23:05,387 - DEBUG - Entry ID is 105
2018-01-17 10:23:05,387 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 10:23:05,388 - DEBUG - OCA ID is 1
2018-01-17 10:23:05,388 - DEBUG - Connecting to IBController
2018-01-17 10:23:06,398 - DEBUG - Connected to IBController
2018-01-17 10:23:06,398 - DEBUG - Position requested
2018-01-17 10:23:06,398 - DEBUG - Pos Mgmt -12987
2018-01-17 10:23:06,400 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000213DA58>, pos=-12987, avgCost=0.95368235>
2018-01-17 10:23:06,400 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 10:23:06,400 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 10:23:06,400 - DEBUG - Position is -12987
2018-01-17 10:23:07,398 - DEBUG - Open Orders requested
2018-01-17 10:23:07,401 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x000000000213DE10>, order=<ib.ext.Order.Order object at 0x000000000213DC88>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021D0208>>
2018-01-17 10:23:07,401 - DEBUG - Order OrderID 102
2018-01-17 10:23:07,401 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:23:07,403 - DEBUG - Order status PreSubmitted
2018-01-17 10:23:07,403 - DEBUG - Order Identification 102
2018-01-17 10:23:07,403 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:23:07,404 - DEBUG - Profit ID from database is 0
2018-01-17 10:23:07,404 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:23:07,404 - DEBUG - Stop ID database is 0
2018-01-17 10:23:07,404 - DEBUG - Entry ID database is 105
2018-01-17 10:23:07,404 - DEBUG - Reply Handler Orders is <openOrder orderId=104, contract=<ib.ext.Contract.Contract object at 0x000000000213DE10>, order=<ib.ext.Order.Order object at 0x000000000213DC88>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021D0080>>
2018-01-17 10:23:07,405 - DEBUG - Order OrderID 104
2018-01-17 10:23:07,405 - DEBUG - reply handler status <orderStatus orderId=104, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791157, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:23:07,405 - DEBUG - Order status PreSubmitted
2018-01-17 10:23:07,405 - DEBUG - Order Identification 104
2018-01-17 10:23:07,407 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:23:07,407 - DEBUG - Profit ID from database is 0
2018-01-17 10:23:07,407 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:23:07,407 - DEBUG - Stop ID database is 0
2018-01-17 10:23:07,407 - DEBUG - Entry ID database is 105
2018-01-17 10:23:07,408 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x000000000213DE10>, order=<ib.ext.Order.Order object at 0x000000000213DC88>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021D0278>>
2018-01-17 10:23:07,408 - DEBUG - Order OrderID 103
2018-01-17 10:23:07,408 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:23:07,410 - DEBUG - Order status PreSubmitted
2018-01-17 10:23:07,410 - DEBUG - Order Identification 103
2018-01-17 10:23:07,410 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:23:07,410 - DEBUG - Profit ID from database is 0
2018-01-17 10:23:07,411 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:23:07,411 - DEBUG - Stop ID database is 0
2018-01-17 10:23:07,411 - DEBUG - Entry ID database is 105
2018-01-17 10:23:07,411 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x000000000213DE10>, order=<ib.ext.Order.Order object at 0x000000000213DC88>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021D0358>>
2018-01-17 10:23:07,413 - DEBUG - Order OrderID 105
2018-01-17 10:23:07,413 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:23:07,413 - DEBUG - Order status PreSubmitted
2018-01-17 10:23:07,413 - DEBUG - Order Identification 105
2018-01-17 10:23:07,414 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:23:07,414 - DEBUG - Profit ID from database is 0
2018-01-17 10:23:07,414 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:23:07,414 - DEBUG - Stop ID database is 0
2018-01-17 10:23:07,414 - DEBUG - Entry ID database is 105
2018-01-17 10:23:07,414 - DEBUG - Entry API ID is 105
2018-01-17 10:23:09,401 - DEBUG - Connecting to database
2018-01-17 10:23:09,408 - DEBUG - Connected to database
2018-01-17 10:23:09,411 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 10:23:09,411 - DEBUG - Stop loss value is 71.82
2018-01-17 10:23:09,411 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 10:23:09,413 - DEBUG - Stop loss value is 85.25
2018-01-17 10:23:09,414 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 10:23:09,414 - DEBUG - EntryPrice value is 74.3
2018-01-17 10:23:09,415 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 10:23:09,415 - DEBUG - Stop quantity 1
2018-01-17 10:23:09,417 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 10:23:09,417 - DEBUG - Direction is Long
2018-01-17 10:23:09,418 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 10:23:09,420 - DEBUG - Count is 0
2018-01-17 10:23:09,421 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 10:23:09,421 - DEBUG - Stop Loss Flag is 0
2018-01-17 10:23:09,423 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 10:23:09,423 - DEBUG - Max ID Order is (105,)
2018-01-17 10:23:09,423 - DEBUG - Today is 2018-01-17
2018-01-17 10:23:09,424 - DEBUG - Day of the week 2
2018-01-17 10:23:09,424 - DEBUG - Yesterday is 01/16/2018
2018-01-17 10:23:09,424 - DEBUG - In Position is  0
2018-01-17 10:23:09,424 - DEBUG - In Position is  <class 'int'>
2018-01-17 10:23:09,424 - DEBUG - curStopLossFlag is  0
2018-01-17 10:23:09,424 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 10:23:09,424 - DEBUG - Checking if Entry has been filled
2018-01-17 10:23:09,424 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 10:23:09,427 - DEBUG - EntryPend is 1
2018-01-17 10:23:09,427 - DEBUG - Try to Cancel Stop
2018-01-17 10:23:09,427 - DEBUG - Stop API ID 0
2018-01-17 10:23:09,427 - DEBUG - Profit API ID 0
2018-01-17 10:23:09,427 - DEBUG - Stop API ID <class 'int'>
2018-01-17 10:23:09,427 - DEBUG - Profit API ID <class 'int'>
2018-01-17 10:23:09,427 - DEBUG - Pos is 0
2018-01-17 10:23:09,427 - DEBUG - CurCount is 0
2018-01-17 10:23:09,428 - DEBUG - In Pos 0
2018-01-17 10:23:09,428 - DEBUG - Stop ID is 0
2018-01-17 10:23:09,428 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 10:23:09,430 - DEBUG - EntryPend is 1
2018-01-17 10:23:09,430 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 10:23:09,430 - DEBUG - Entry Date is 10
2018-01-17 10:23:09,430 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 10:23:09,430 - DEBUG - Order Profit ID is 0
2018-01-17 10:23:09,430 - DEBUG - Order Entry ID is 105
2018-01-17 10:23:09,431 - DEBUG - API ID is  0
2018-01-17 10:23:09,431 - DEBUG - Current Position is 0
2018-01-17 10:23:09,431 - DEBUG - Current Position is <class 'str'>
2018-01-17 10:23:09,431 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 10:23:09,431 - DEBUG - Time is 10
2018-01-17 10:23:09,433 - DEBUG - Time is <class 'int'>
2018-01-17 10:23:09,433 - DEBUG - Time is 23
2018-01-17 10:23:09,433 - DEBUG - Time is <class 'int'>
2018-01-17 10:23:09,433 - DEBUG - Disconnected from IBController
2018-01-17 10:23:09,434 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 10:28:05,358 - DEBUG - ****************************************************
2018-01-17 10:28:05,358 - DEBUG - Current Time is 10:28AM
2018-01-17 10:28:05,358 - DEBUG - Starting Pos Mgmt H E
2018-01-17 10:28:05,358 - DEBUG - Connecting to database
2018-01-17 10:28:05,413 - DEBUG - Connected to database
2018-01-17 10:28:05,413 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 10:28:05,414 - DEBUG - Order Profit is 0
2018-01-17 10:28:05,414 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 10:28:05,417 - DEBUG - Stop ID is 0
2018-01-17 10:28:05,417 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 10:28:05,417 - DEBUG - Entry ID is 105
2018-01-17 10:28:05,418 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 10:28:05,420 - DEBUG - OCA ID is 1
2018-01-17 10:28:05,420 - DEBUG - Connecting to IBController
2018-01-17 10:28:06,427 - DEBUG - Connected to IBController
2018-01-17 10:28:06,427 - DEBUG - Position requested
2018-01-17 10:28:06,431 - DEBUG - Pos Mgmt -12987
2018-01-17 10:28:06,431 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FCA58>, pos=-12987, avgCost=0.95368235>
2018-01-17 10:28:06,433 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 10:28:06,433 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 10:28:06,433 - DEBUG - Position is -12987
2018-01-17 10:28:07,430 - DEBUG - Open Orders requested
2018-01-17 10:28:07,433 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x00000000020FCE10>, order=<ib.ext.Order.Order object at 0x00000000020FCC88>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021912B0>>
2018-01-17 10:28:07,434 - DEBUG - Order OrderID 102
2018-01-17 10:28:07,434 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:28:07,434 - DEBUG - Order status PreSubmitted
2018-01-17 10:28:07,434 - DEBUG - Order Identification 102
2018-01-17 10:28:07,434 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:28:07,434 - DEBUG - Profit ID from database is 0
2018-01-17 10:28:07,434 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:28:07,436 - DEBUG - Stop ID database is 0
2018-01-17 10:28:07,436 - DEBUG - Entry ID database is 105
2018-01-17 10:28:07,437 - DEBUG - Reply Handler Orders is <openOrder orderId=104, contract=<ib.ext.Contract.Contract object at 0x00000000020FCE10>, order=<ib.ext.Order.Order object at 0x00000000020FCC88>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002191160>>
2018-01-17 10:28:07,437 - DEBUG - Order OrderID 104
2018-01-17 10:28:07,437 - DEBUG - reply handler status <orderStatus orderId=104, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791157, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:28:07,437 - DEBUG - Order status PreSubmitted
2018-01-17 10:28:07,437 - DEBUG - Order Identification 104
2018-01-17 10:28:07,437 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:28:07,438 - DEBUG - Profit ID from database is 0
2018-01-17 10:28:07,438 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:28:07,438 - DEBUG - Stop ID database is 0
2018-01-17 10:28:07,438 - DEBUG - Entry ID database is 105
2018-01-17 10:28:07,440 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x00000000020FCE10>, order=<ib.ext.Order.Order object at 0x00000000020FCC88>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002191320>>
2018-01-17 10:28:07,440 - DEBUG - Order OrderID 103
2018-01-17 10:28:07,440 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:28:07,441 - DEBUG - Order status PreSubmitted
2018-01-17 10:28:07,441 - DEBUG - Order Identification 103
2018-01-17 10:28:07,441 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:28:07,441 - DEBUG - Profit ID from database is 0
2018-01-17 10:28:07,441 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:28:07,443 - DEBUG - Stop ID database is 0
2018-01-17 10:28:07,443 - DEBUG - Entry ID database is 105
2018-01-17 10:28:07,444 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x00000000020FCE10>, order=<ib.ext.Order.Order object at 0x00000000020FCC88>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002191400>>
2018-01-17 10:28:07,444 - DEBUG - Order OrderID 105
2018-01-17 10:28:07,444 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:28:07,444 - DEBUG - Order status PreSubmitted
2018-01-17 10:28:07,444 - DEBUG - Order Identification 105
2018-01-17 10:28:07,444 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:28:07,446 - DEBUG - Profit ID from database is 0
2018-01-17 10:28:07,446 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:28:07,446 - DEBUG - Stop ID database is 0
2018-01-17 10:28:07,446 - DEBUG - Entry ID database is 105
2018-01-17 10:28:07,447 - DEBUG - Entry API ID is 105
2018-01-17 10:28:09,433 - DEBUG - Connecting to database
2018-01-17 10:28:09,440 - DEBUG - Connected to database
2018-01-17 10:28:09,441 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 10:28:09,441 - DEBUG - Stop loss value is 71.82
2018-01-17 10:28:09,443 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 10:28:09,444 - DEBUG - Stop loss value is 85.25
2018-01-17 10:28:09,444 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 10:28:09,444 - DEBUG - EntryPrice value is 74.3
2018-01-17 10:28:09,447 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 10:28:09,447 - DEBUG - Stop quantity 1
2018-01-17 10:28:09,447 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 10:28:09,448 - DEBUG - Direction is Long
2018-01-17 10:28:09,450 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 10:28:09,450 - DEBUG - Count is 0
2018-01-17 10:28:09,451 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 10:28:09,451 - DEBUG - Stop Loss Flag is 0
2018-01-17 10:28:09,453 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 10:28:09,453 - DEBUG - Max ID Order is (105,)
2018-01-17 10:28:09,453 - DEBUG - Today is 2018-01-17
2018-01-17 10:28:09,453 - DEBUG - Day of the week 2
2018-01-17 10:28:09,454 - DEBUG - Yesterday is 01/16/2018
2018-01-17 10:28:09,454 - DEBUG - In Position is  0
2018-01-17 10:28:09,454 - DEBUG - In Position is  <class 'int'>
2018-01-17 10:28:09,454 - DEBUG - curStopLossFlag is  0
2018-01-17 10:28:09,454 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 10:28:09,456 - DEBUG - Checking if Entry has been filled
2018-01-17 10:28:09,456 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 10:28:09,457 - DEBUG - EntryPend is 1
2018-01-17 10:28:09,457 - DEBUG - Try to Cancel Stop
2018-01-17 10:28:09,457 - DEBUG - Stop API ID 0
2018-01-17 10:28:09,457 - DEBUG - Profit API ID 0
2018-01-17 10:28:09,457 - DEBUG - Stop API ID <class 'int'>
2018-01-17 10:28:09,457 - DEBUG - Profit API ID <class 'int'>
2018-01-17 10:28:09,459 - DEBUG - Pos is 0
2018-01-17 10:28:09,459 - DEBUG - CurCount is 0
2018-01-17 10:28:09,459 - DEBUG - In Pos 0
2018-01-17 10:28:09,459 - DEBUG - Stop ID is 0
2018-01-17 10:28:09,460 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 10:28:09,460 - DEBUG - EntryPend is 1
2018-01-17 10:28:09,460 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 10:28:09,460 - DEBUG - Entry Date is 10
2018-01-17 10:28:09,461 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 10:28:09,461 - DEBUG - Order Profit ID is 0
2018-01-17 10:28:09,461 - DEBUG - Order Entry ID is 105
2018-01-17 10:28:09,461 - DEBUG - API ID is  0
2018-01-17 10:28:09,461 - DEBUG - Current Position is 0
2018-01-17 10:28:09,461 - DEBUG - Current Position is <class 'str'>
2018-01-17 10:28:09,463 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 10:28:09,463 - DEBUG - Time is 10
2018-01-17 10:28:09,463 - DEBUG - Time is <class 'int'>
2018-01-17 10:28:09,463 - DEBUG - Time is 28
2018-01-17 10:28:09,463 - DEBUG - Time is <class 'int'>
2018-01-17 10:28:09,463 - DEBUG - Disconnected from IBController
2018-01-17 10:28:09,463 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 10:33:05,351 - DEBUG - ****************************************************
2018-01-17 10:33:05,351 - DEBUG - Current Time is 10:33AM
2018-01-17 10:33:05,351 - DEBUG - Starting Pos Mgmt H E
2018-01-17 10:33:05,351 - DEBUG - Connecting to database
2018-01-17 10:33:05,381 - DEBUG - Connected to database
2018-01-17 10:33:05,381 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 10:33:05,382 - DEBUG - Order Profit is 0
2018-01-17 10:33:05,382 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 10:33:05,384 - DEBUG - Stop ID is 0
2018-01-17 10:33:05,384 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 10:33:05,385 - DEBUG - Entry ID is 105
2018-01-17 10:33:05,387 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 10:33:05,388 - DEBUG - OCA ID is 1
2018-01-17 10:33:05,388 - DEBUG - Connecting to IBController
2018-01-17 10:33:06,392 - DEBUG - Connected to IBController
2018-01-17 10:33:06,392 - DEBUG - Position requested
2018-01-17 10:33:06,395 - DEBUG - Pos Mgmt -12987
2018-01-17 10:33:06,395 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020EDC50>, pos=-12987, avgCost=0.95368235>
2018-01-17 10:33:06,395 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 10:33:06,397 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 10:33:06,397 - DEBUG - Position is -12987
2018-01-17 10:33:07,394 - DEBUG - Open Orders requested
2018-01-17 10:33:07,397 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x00000000020EDCF8>, order=<ib.ext.Order.Order object at 0x00000000020EDBA8>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002180198>>
2018-01-17 10:33:07,398 - DEBUG - Order OrderID 102
2018-01-17 10:33:07,398 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:33:07,398 - DEBUG - Order status PreSubmitted
2018-01-17 10:33:07,398 - DEBUG - Order Identification 102
2018-01-17 10:33:07,398 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:33:07,398 - DEBUG - Profit ID from database is 0
2018-01-17 10:33:07,400 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:33:07,400 - DEBUG - Stop ID database is 0
2018-01-17 10:33:07,400 - DEBUG - Entry ID database is 105
2018-01-17 10:33:07,401 - DEBUG - Reply Handler Orders is <openOrder orderId=104, contract=<ib.ext.Contract.Contract object at 0x00000000020EDCF8>, order=<ib.ext.Order.Order object at 0x00000000020EDBA8>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002180208>>
2018-01-17 10:33:07,401 - DEBUG - Order OrderID 104
2018-01-17 10:33:07,401 - DEBUG - reply handler status <orderStatus orderId=104, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791157, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:33:07,401 - DEBUG - Order status PreSubmitted
2018-01-17 10:33:07,401 - DEBUG - Order Identification 104
2018-01-17 10:33:07,403 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:33:07,403 - DEBUG - Profit ID from database is 0
2018-01-17 10:33:07,403 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:33:07,403 - DEBUG - Stop ID database is 0
2018-01-17 10:33:07,404 - DEBUG - Entry ID database is 105
2018-01-17 10:33:07,404 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x00000000020EDCF8>, order=<ib.ext.Order.Order object at 0x00000000020EDBA8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021802E8>>
2018-01-17 10:33:07,404 - DEBUG - Order OrderID 103
2018-01-17 10:33:07,404 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:33:07,405 - DEBUG - Order status PreSubmitted
2018-01-17 10:33:07,405 - DEBUG - Order Identification 103
2018-01-17 10:33:07,405 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:33:07,405 - DEBUG - Profit ID from database is 0
2018-01-17 10:33:07,407 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:33:07,407 - DEBUG - Stop ID database is 0
2018-01-17 10:33:07,407 - DEBUG - Entry ID database is 105
2018-01-17 10:33:07,407 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x00000000020EDCF8>, order=<ib.ext.Order.Order object at 0x00000000020EDBA8>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002180358>>
2018-01-17 10:33:07,408 - DEBUG - Order OrderID 105
2018-01-17 10:33:07,408 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:33:07,408 - DEBUG - Order status PreSubmitted
2018-01-17 10:33:07,410 - DEBUG - Order Identification 105
2018-01-17 10:33:07,410 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:33:07,410 - DEBUG - Profit ID from database is 0
2018-01-17 10:33:07,410 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:33:07,410 - DEBUG - Stop ID database is 0
2018-01-17 10:33:07,411 - DEBUG - Entry ID database is 105
2018-01-17 10:33:07,411 - DEBUG - Entry API ID is 105
2018-01-17 10:33:09,395 - DEBUG - Connecting to database
2018-01-17 10:33:09,403 - DEBUG - Connected to database
2018-01-17 10:33:09,404 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 10:33:09,404 - DEBUG - Stop loss value is 71.82
2018-01-17 10:33:09,405 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 10:33:09,407 - DEBUG - Stop loss value is 85.25
2018-01-17 10:33:09,407 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 10:33:09,407 - DEBUG - EntryPrice value is 74.3
2018-01-17 10:33:09,410 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 10:33:09,410 - DEBUG - Stop quantity 1
2018-01-17 10:33:09,411 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 10:33:09,411 - DEBUG - Direction is Long
2018-01-17 10:33:09,413 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 10:33:09,413 - DEBUG - Count is 0
2018-01-17 10:33:09,414 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 10:33:09,414 - DEBUG - Stop Loss Flag is 0
2018-01-17 10:33:09,415 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 10:33:09,417 - DEBUG - Max ID Order is (105,)
2018-01-17 10:33:09,417 - DEBUG - Today is 2018-01-17
2018-01-17 10:33:09,417 - DEBUG - Day of the week 2
2018-01-17 10:33:09,417 - DEBUG - Yesterday is 01/16/2018
2018-01-17 10:33:09,417 - DEBUG - In Position is  0
2018-01-17 10:33:09,417 - DEBUG - In Position is  <class 'int'>
2018-01-17 10:33:09,417 - DEBUG - curStopLossFlag is  0
2018-01-17 10:33:09,418 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 10:33:09,418 - DEBUG - Checking if Entry has been filled
2018-01-17 10:33:09,418 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 10:33:09,420 - DEBUG - EntryPend is 1
2018-01-17 10:33:09,421 - DEBUG - Try to Cancel Stop
2018-01-17 10:33:09,421 - DEBUG - Stop API ID 0
2018-01-17 10:33:09,421 - DEBUG - Profit API ID 0
2018-01-17 10:33:09,421 - DEBUG - Stop API ID <class 'int'>
2018-01-17 10:33:09,421 - DEBUG - Profit API ID <class 'int'>
2018-01-17 10:33:09,421 - DEBUG - Pos is 0
2018-01-17 10:33:09,421 - DEBUG - CurCount is 0
2018-01-17 10:33:09,421 - DEBUG - In Pos 0
2018-01-17 10:33:09,421 - DEBUG - Stop ID is 0
2018-01-17 10:33:09,423 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 10:33:09,424 - DEBUG - EntryPend is 1
2018-01-17 10:33:09,424 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 10:33:09,424 - DEBUG - Entry Date is 10
2018-01-17 10:33:09,424 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 10:33:09,424 - DEBUG - Order Profit ID is 0
2018-01-17 10:33:09,424 - DEBUG - Order Entry ID is 105
2018-01-17 10:33:09,424 - DEBUG - API ID is  0
2018-01-17 10:33:09,424 - DEBUG - Current Position is 0
2018-01-17 10:33:09,426 - DEBUG - Current Position is <class 'str'>
2018-01-17 10:33:09,426 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 10:33:09,426 - DEBUG - Time is 10
2018-01-17 10:33:09,426 - DEBUG - Time is <class 'int'>
2018-01-17 10:33:09,426 - DEBUG - Time is 33
2018-01-17 10:33:09,426 - DEBUG - Time is <class 'int'>
2018-01-17 10:33:09,427 - DEBUG - Disconnected from IBController
2018-01-17 10:33:09,427 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 10:38:05,336 - DEBUG - ****************************************************
2018-01-17 10:38:05,336 - DEBUG - Current Time is 10:38AM
2018-01-17 10:38:05,338 - DEBUG - Starting Pos Mgmt H E
2018-01-17 10:38:05,338 - DEBUG - Connecting to database
2018-01-17 10:38:05,359 - DEBUG - Connected to database
2018-01-17 10:38:05,359 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 10:38:05,361 - DEBUG - Order Profit is 0
2018-01-17 10:38:05,361 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 10:38:05,362 - DEBUG - Stop ID is 0
2018-01-17 10:38:05,364 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 10:38:05,365 - DEBUG - Entry ID is 105
2018-01-17 10:38:05,365 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 10:38:05,367 - DEBUG - OCA ID is 1
2018-01-17 10:38:05,367 - DEBUG - Connecting to IBController
2018-01-17 10:38:06,371 - DEBUG - Connected to IBController
2018-01-17 10:38:06,371 - DEBUG - Position requested
2018-01-17 10:38:06,375 - DEBUG - Pos Mgmt -12987
2018-01-17 10:38:06,375 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000214CAC8>, pos=-12987, avgCost=0.95368235>
2018-01-17 10:38:06,375 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 10:38:06,377 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 10:38:06,377 - DEBUG - Position is -12987
2018-01-17 10:38:07,372 - DEBUG - Open Orders requested
2018-01-17 10:38:07,375 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x000000000214CD68>, order=<ib.ext.Order.Order object at 0x000000000214CBE0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021E0208>>
2018-01-17 10:38:07,375 - DEBUG - Order OrderID 102
2018-01-17 10:38:07,375 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:38:07,377 - DEBUG - Order status PreSubmitted
2018-01-17 10:38:07,377 - DEBUG - Order Identification 102
2018-01-17 10:38:07,377 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:38:07,378 - DEBUG - Profit ID from database is 0
2018-01-17 10:38:07,378 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:38:07,378 - DEBUG - Stop ID database is 0
2018-01-17 10:38:07,378 - DEBUG - Entry ID database is 105
2018-01-17 10:38:07,378 - DEBUG - Reply Handler Orders is <openOrder orderId=104, contract=<ib.ext.Contract.Contract object at 0x000000000214CD68>, order=<ib.ext.Order.Order object at 0x000000000214CBE0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021E00B8>>
2018-01-17 10:38:07,380 - DEBUG - Order OrderID 104
2018-01-17 10:38:07,380 - DEBUG - reply handler status <orderStatus orderId=104, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791157, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:38:07,380 - DEBUG - Order status PreSubmitted
2018-01-17 10:38:07,381 - DEBUG - Order Identification 104
2018-01-17 10:38:07,381 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:38:07,381 - DEBUG - Profit ID from database is 0
2018-01-17 10:38:07,381 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:38:07,381 - DEBUG - Stop ID database is 0
2018-01-17 10:38:07,381 - DEBUG - Entry ID database is 105
2018-01-17 10:38:07,382 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x000000000214CD68>, order=<ib.ext.Order.Order object at 0x000000000214CBE0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021E0278>>
2018-01-17 10:38:07,382 - DEBUG - Order OrderID 103
2018-01-17 10:38:07,382 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:38:07,384 - DEBUG - Order status PreSubmitted
2018-01-17 10:38:07,384 - DEBUG - Order Identification 103
2018-01-17 10:38:07,384 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:38:07,384 - DEBUG - Profit ID from database is 0
2018-01-17 10:38:07,384 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:38:07,384 - DEBUG - Stop ID database is 0
2018-01-17 10:38:07,384 - DEBUG - Entry ID database is 105
2018-01-17 10:38:07,385 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x000000000214CD68>, order=<ib.ext.Order.Order object at 0x000000000214CBE0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021E0358>>
2018-01-17 10:38:07,387 - DEBUG - Order OrderID 105
2018-01-17 10:38:07,387 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:38:07,387 - DEBUG - Order status PreSubmitted
2018-01-17 10:38:07,388 - DEBUG - Order Identification 105
2018-01-17 10:38:07,388 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:38:07,388 - DEBUG - Profit ID from database is 0
2018-01-17 10:38:07,388 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:38:07,388 - DEBUG - Stop ID database is 0
2018-01-17 10:38:07,388 - DEBUG - Entry ID database is 105
2018-01-17 10:38:07,388 - DEBUG - Entry API ID is 105
2018-01-17 10:38:09,375 - DEBUG - Connecting to database
2018-01-17 10:38:09,382 - DEBUG - Connected to database
2018-01-17 10:38:09,384 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 10:38:09,384 - DEBUG - Stop loss value is 71.82
2018-01-17 10:38:09,385 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 10:38:09,385 - DEBUG - Stop loss value is 85.25
2018-01-17 10:38:09,388 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 10:38:09,388 - DEBUG - EntryPrice value is 74.3
2018-01-17 10:38:09,388 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 10:38:09,390 - DEBUG - Stop quantity 1
2018-01-17 10:38:09,391 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 10:38:09,391 - DEBUG - Direction is Long
2018-01-17 10:38:09,391 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 10:38:09,392 - DEBUG - Count is 0
2018-01-17 10:38:09,394 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 10:38:09,394 - DEBUG - Stop Loss Flag is 0
2018-01-17 10:38:09,395 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 10:38:09,395 - DEBUG - Max ID Order is (105,)
2018-01-17 10:38:09,395 - DEBUG - Today is 2018-01-17
2018-01-17 10:38:09,397 - DEBUG - Day of the week 2
2018-01-17 10:38:09,397 - DEBUG - Yesterday is 01/16/2018
2018-01-17 10:38:09,397 - DEBUG - In Position is  0
2018-01-17 10:38:09,397 - DEBUG - In Position is  <class 'int'>
2018-01-17 10:38:09,398 - DEBUG - curStopLossFlag is  0
2018-01-17 10:38:09,398 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 10:38:09,398 - DEBUG - Checking if Entry has been filled
2018-01-17 10:38:09,398 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 10:38:09,400 - DEBUG - EntryPend is 1
2018-01-17 10:38:09,400 - DEBUG - Try to Cancel Stop
2018-01-17 10:38:09,400 - DEBUG - Stop API ID 0
2018-01-17 10:38:09,400 - DEBUG - Profit API ID 0
2018-01-17 10:38:09,401 - DEBUG - Stop API ID <class 'int'>
2018-01-17 10:38:09,401 - DEBUG - Profit API ID <class 'int'>
2018-01-17 10:38:09,401 - DEBUG - Pos is 0
2018-01-17 10:38:09,401 - DEBUG - CurCount is 0
2018-01-17 10:38:09,401 - DEBUG - In Pos 0
2018-01-17 10:38:09,401 - DEBUG - Stop ID is 0
2018-01-17 10:38:09,401 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 10:38:09,403 - DEBUG - EntryPend is 1
2018-01-17 10:38:09,403 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 10:38:09,404 - DEBUG - Entry Date is 10
2018-01-17 10:38:09,404 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 10:38:09,404 - DEBUG - Order Profit ID is 0
2018-01-17 10:38:09,404 - DEBUG - Order Entry ID is 105
2018-01-17 10:38:09,404 - DEBUG - API ID is  0
2018-01-17 10:38:09,404 - DEBUG - Current Position is 0
2018-01-17 10:38:09,404 - DEBUG - Current Position is <class 'str'>
2018-01-17 10:38:09,404 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 10:38:09,404 - DEBUG - Time is 10
2018-01-17 10:38:09,404 - DEBUG - Time is <class 'int'>
2018-01-17 10:38:09,404 - DEBUG - Time is 38
2018-01-17 10:38:09,405 - DEBUG - Time is <class 'int'>
2018-01-17 10:38:09,405 - DEBUG - Disconnected from IBController
2018-01-17 10:38:09,405 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 10:43:05,377 - DEBUG - ****************************************************
2018-01-17 10:43:05,377 - DEBUG - Current Time is 10:43AM
2018-01-17 10:43:05,378 - DEBUG - Starting Pos Mgmt H E
2018-01-17 10:43:05,378 - DEBUG - Connecting to database
2018-01-17 10:43:05,395 - DEBUG - Connected to database
2018-01-17 10:43:05,395 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 10:43:05,398 - DEBUG - Order Profit is 0
2018-01-17 10:43:05,398 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 10:43:05,400 - DEBUG - Stop ID is 0
2018-01-17 10:43:05,400 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 10:43:05,401 - DEBUG - Entry ID is 105
2018-01-17 10:43:05,401 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 10:43:05,404 - DEBUG - OCA ID is 1
2018-01-17 10:43:05,404 - DEBUG - Connecting to IBController
2018-01-17 10:43:06,408 - DEBUG - Connected to IBController
2018-01-17 10:43:06,408 - DEBUG - Position requested
2018-01-17 10:43:06,411 - DEBUG - Pos Mgmt -12987
2018-01-17 10:43:06,411 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000215CEF0>, pos=-12987, avgCost=0.95368235>
2018-01-17 10:43:06,411 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 10:43:06,411 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 10:43:06,413 - DEBUG - Position is -12987
2018-01-17 10:43:07,411 - DEBUG - Open Orders requested
2018-01-17 10:43:07,414 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x000000000215CAC8>, order=<ib.ext.Order.Order object at 0x000000000215CD30>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021F0198>>
2018-01-17 10:43:07,414 - DEBUG - Order OrderID 102
2018-01-17 10:43:07,414 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:43:07,415 - DEBUG - Order status PreSubmitted
2018-01-17 10:43:07,415 - DEBUG - Order Identification 102
2018-01-17 10:43:07,415 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:43:07,417 - DEBUG - Profit ID from database is 0
2018-01-17 10:43:07,417 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:43:07,417 - DEBUG - Stop ID database is 0
2018-01-17 10:43:07,417 - DEBUG - Entry ID database is 105
2018-01-17 10:43:07,417 - DEBUG - Reply Handler Orders is <openOrder orderId=104, contract=<ib.ext.Contract.Contract object at 0x000000000215CAC8>, order=<ib.ext.Order.Order object at 0x000000000215CD30>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021F0208>>
2018-01-17 10:43:07,418 - DEBUG - Order OrderID 104
2018-01-17 10:43:07,418 - DEBUG - reply handler status <orderStatus orderId=104, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791157, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:43:07,418 - DEBUG - Order status PreSubmitted
2018-01-17 10:43:07,420 - DEBUG - Order Identification 104
2018-01-17 10:43:07,420 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:43:07,420 - DEBUG - Profit ID from database is 0
2018-01-17 10:43:07,420 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:43:07,420 - DEBUG - Stop ID database is 0
2018-01-17 10:43:07,421 - DEBUG - Entry ID database is 105
2018-01-17 10:43:07,421 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x000000000215CAC8>, order=<ib.ext.Order.Order object at 0x000000000215CD30>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021F02E8>>
2018-01-17 10:43:07,421 - DEBUG - Order OrderID 103
2018-01-17 10:43:07,423 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:43:07,423 - DEBUG - Order status PreSubmitted
2018-01-17 10:43:07,423 - DEBUG - Order Identification 103
2018-01-17 10:43:07,424 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:43:07,424 - DEBUG - Profit ID from database is 0
2018-01-17 10:43:07,424 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:43:07,424 - DEBUG - Stop ID database is 0
2018-01-17 10:43:07,424 - DEBUG - Entry ID database is 105
2018-01-17 10:43:07,424 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x000000000215CAC8>, order=<ib.ext.Order.Order object at 0x000000000215CD30>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021F0358>>
2018-01-17 10:43:07,426 - DEBUG - Order OrderID 105
2018-01-17 10:43:07,426 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:43:07,427 - DEBUG - Order status PreSubmitted
2018-01-17 10:43:07,427 - DEBUG - Order Identification 105
2018-01-17 10:43:07,427 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:43:07,427 - DEBUG - Profit ID from database is 0
2018-01-17 10:43:07,427 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:43:07,427 - DEBUG - Stop ID database is 0
2018-01-17 10:43:07,427 - DEBUG - Entry ID database is 105
2018-01-17 10:43:07,427 - DEBUG - Entry API ID is 105
2018-01-17 10:43:09,413 - DEBUG - Connecting to database
2018-01-17 10:43:09,420 - DEBUG - Connected to database
2018-01-17 10:43:09,421 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 10:43:09,421 - DEBUG - Stop loss value is 71.82
2018-01-17 10:43:09,423 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 10:43:09,423 - DEBUG - Stop loss value is 85.25
2018-01-17 10:43:09,424 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 10:43:09,424 - DEBUG - EntryPrice value is 74.3
2018-01-17 10:43:09,426 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 10:43:09,427 - DEBUG - Stop quantity 1
2018-01-17 10:43:09,428 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 10:43:09,428 - DEBUG - Direction is Long
2018-01-17 10:43:09,430 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 10:43:09,430 - DEBUG - Count is 0
2018-01-17 10:43:09,431 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 10:43:09,431 - DEBUG - Stop Loss Flag is 0
2018-01-17 10:43:09,434 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 10:43:09,434 - DEBUG - Max ID Order is (105,)
2018-01-17 10:43:09,434 - DEBUG - Today is 2018-01-17
2018-01-17 10:43:09,434 - DEBUG - Day of the week 2
2018-01-17 10:43:09,434 - DEBUG - Yesterday is 01/16/2018
2018-01-17 10:43:09,434 - DEBUG - In Position is  0
2018-01-17 10:43:09,434 - DEBUG - In Position is  <class 'int'>
2018-01-17 10:43:09,436 - DEBUG - curStopLossFlag is  0
2018-01-17 10:43:09,436 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 10:43:09,436 - DEBUG - Checking if Entry has been filled
2018-01-17 10:43:09,436 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 10:43:09,437 - DEBUG - EntryPend is 1
2018-01-17 10:43:09,437 - DEBUG - Try to Cancel Stop
2018-01-17 10:43:09,437 - DEBUG - Stop API ID 0
2018-01-17 10:43:09,437 - DEBUG - Profit API ID 0
2018-01-17 10:43:09,437 - DEBUG - Stop API ID <class 'int'>
2018-01-17 10:43:09,438 - DEBUG - Profit API ID <class 'int'>
2018-01-17 10:43:09,438 - DEBUG - Pos is 0
2018-01-17 10:43:09,438 - DEBUG - CurCount is 0
2018-01-17 10:43:09,438 - DEBUG - In Pos 0
2018-01-17 10:43:09,440 - DEBUG - Stop ID is 0
2018-01-17 10:43:09,440 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 10:43:09,440 - DEBUG - EntryPend is 1
2018-01-17 10:43:09,440 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 10:43:09,441 - DEBUG - Entry Date is 10
2018-01-17 10:43:09,441 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 10:43:09,441 - DEBUG - Order Profit ID is 0
2018-01-17 10:43:09,441 - DEBUG - Order Entry ID is 105
2018-01-17 10:43:09,441 - DEBUG - API ID is  0
2018-01-17 10:43:09,443 - DEBUG - Current Position is 0
2018-01-17 10:43:09,443 - DEBUG - Current Position is <class 'str'>
2018-01-17 10:43:09,443 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 10:43:09,443 - DEBUG - Time is 10
2018-01-17 10:43:09,443 - DEBUG - Time is <class 'int'>
2018-01-17 10:43:09,443 - DEBUG - Time is 43
2018-01-17 10:43:09,444 - DEBUG - Time is <class 'int'>
2018-01-17 10:43:09,444 - DEBUG - Disconnected from IBController
2018-01-17 10:43:09,444 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 10:48:05,338 - DEBUG - ****************************************************
2018-01-17 10:48:05,338 - DEBUG - Current Time is 10:48AM
2018-01-17 10:48:05,339 - DEBUG - Starting Pos Mgmt H E
2018-01-17 10:48:05,339 - DEBUG - Connecting to database
2018-01-17 10:48:05,382 - DEBUG - Connected to database
2018-01-17 10:48:05,382 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 10:48:05,384 - DEBUG - Order Profit is 0
2018-01-17 10:48:05,384 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 10:48:05,387 - DEBUG - Stop ID is 0
2018-01-17 10:48:05,387 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 10:48:05,388 - DEBUG - Entry ID is 105
2018-01-17 10:48:05,388 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 10:48:05,390 - DEBUG - OCA ID is 1
2018-01-17 10:48:05,390 - DEBUG - Connecting to IBController
2018-01-17 10:48:06,398 - DEBUG - Connected to IBController
2018-01-17 10:48:06,398 - DEBUG - Position requested
2018-01-17 10:48:06,400 - DEBUG - Pos Mgmt -12987
2018-01-17 10:48:06,401 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210DA58>, pos=-12987, avgCost=0.95368235>
2018-01-17 10:48:06,401 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 10:48:06,401 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 10:48:06,401 - DEBUG - Position is -12987
2018-01-17 10:48:07,400 - DEBUG - Open Orders requested
2018-01-17 10:48:07,401 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x000000000210DDD8>, order=<ib.ext.Order.Order object at 0x000000000210DCF8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A0198>>
2018-01-17 10:48:07,403 - DEBUG - Order OrderID 102
2018-01-17 10:48:07,403 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:48:07,403 - DEBUG - Order status PreSubmitted
2018-01-17 10:48:07,404 - DEBUG - Order Identification 102
2018-01-17 10:48:07,404 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:48:07,404 - DEBUG - Profit ID from database is 0
2018-01-17 10:48:07,404 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:48:07,404 - DEBUG - Stop ID database is 0
2018-01-17 10:48:07,404 - DEBUG - Entry ID database is 105
2018-01-17 10:48:07,405 - DEBUG - Reply Handler Orders is <openOrder orderId=104, contract=<ib.ext.Contract.Contract object at 0x000000000210DDD8>, order=<ib.ext.Order.Order object at 0x000000000210DCF8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A0208>>
2018-01-17 10:48:07,405 - DEBUG - Order OrderID 104
2018-01-17 10:48:07,405 - DEBUG - reply handler status <orderStatus orderId=104, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791157, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:48:07,407 - DEBUG - Order status PreSubmitted
2018-01-17 10:48:07,407 - DEBUG - Order Identification 104
2018-01-17 10:48:07,407 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:48:07,407 - DEBUG - Profit ID from database is 0
2018-01-17 10:48:07,407 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:48:07,407 - DEBUG - Stop ID database is 0
2018-01-17 10:48:07,407 - DEBUG - Entry ID database is 105
2018-01-17 10:48:07,408 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x000000000210DDD8>, order=<ib.ext.Order.Order object at 0x000000000210DCF8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A02E8>>
2018-01-17 10:48:07,408 - DEBUG - Order OrderID 103
2018-01-17 10:48:07,410 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:48:07,410 - DEBUG - Order status PreSubmitted
2018-01-17 10:48:07,410 - DEBUG - Order Identification 103
2018-01-17 10:48:07,411 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:48:07,411 - DEBUG - Profit ID from database is 0
2018-01-17 10:48:07,411 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:48:07,411 - DEBUG - Stop ID database is 0
2018-01-17 10:48:07,411 - DEBUG - Entry ID database is 105
2018-01-17 10:48:07,413 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x000000000210DDD8>, order=<ib.ext.Order.Order object at 0x000000000210DCF8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A0358>>
2018-01-17 10:48:07,413 - DEBUG - Order OrderID 105
2018-01-17 10:48:07,413 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:48:07,414 - DEBUG - Order status PreSubmitted
2018-01-17 10:48:07,414 - DEBUG - Order Identification 105
2018-01-17 10:48:07,414 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:48:07,414 - DEBUG - Profit ID from database is 0
2018-01-17 10:48:07,414 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:48:07,414 - DEBUG - Stop ID database is 0
2018-01-17 10:48:07,414 - DEBUG - Entry ID database is 105
2018-01-17 10:48:07,414 - DEBUG - Entry API ID is 105
2018-01-17 10:48:09,401 - DEBUG - Connecting to database
2018-01-17 10:48:09,407 - DEBUG - Connected to database
2018-01-17 10:48:09,410 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 10:48:09,410 - DEBUG - Stop loss value is 71.82
2018-01-17 10:48:09,411 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 10:48:09,411 - DEBUG - Stop loss value is 85.25
2018-01-17 10:48:09,413 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 10:48:09,414 - DEBUG - EntryPrice value is 74.3
2018-01-17 10:48:09,414 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 10:48:09,414 - DEBUG - Stop quantity 1
2018-01-17 10:48:09,417 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 10:48:09,417 - DEBUG - Direction is Long
2018-01-17 10:48:09,417 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 10:48:09,418 - DEBUG - Count is 0
2018-01-17 10:48:09,420 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 10:48:09,420 - DEBUG - Stop Loss Flag is 0
2018-01-17 10:48:09,421 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 10:48:09,421 - DEBUG - Max ID Order is (105,)
2018-01-17 10:48:09,421 - DEBUG - Today is 2018-01-17
2018-01-17 10:48:09,421 - DEBUG - Day of the week 2
2018-01-17 10:48:09,423 - DEBUG - Yesterday is 01/16/2018
2018-01-17 10:48:09,423 - DEBUG - In Position is  0
2018-01-17 10:48:09,423 - DEBUG - In Position is  <class 'int'>
2018-01-17 10:48:09,423 - DEBUG - curStopLossFlag is  0
2018-01-17 10:48:09,424 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 10:48:09,424 - DEBUG - Checking if Entry has been filled
2018-01-17 10:48:09,424 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 10:48:09,424 - DEBUG - EntryPend is 1
2018-01-17 10:48:09,426 - DEBUG - Try to Cancel Stop
2018-01-17 10:48:09,426 - DEBUG - Stop API ID 0
2018-01-17 10:48:09,426 - DEBUG - Profit API ID 0
2018-01-17 10:48:09,426 - DEBUG - Stop API ID <class 'int'>
2018-01-17 10:48:09,426 - DEBUG - Profit API ID <class 'int'>
2018-01-17 10:48:09,427 - DEBUG - Pos is 0
2018-01-17 10:48:09,427 - DEBUG - CurCount is 0
2018-01-17 10:48:09,427 - DEBUG - In Pos 0
2018-01-17 10:48:09,427 - DEBUG - Stop ID is 0
2018-01-17 10:48:09,427 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 10:48:09,428 - DEBUG - EntryPend is 1
2018-01-17 10:48:09,428 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 10:48:09,430 - DEBUG - Entry Date is 10
2018-01-17 10:48:09,430 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 10:48:09,430 - DEBUG - Order Profit ID is 0
2018-01-17 10:48:09,430 - DEBUG - Order Entry ID is 105
2018-01-17 10:48:09,430 - DEBUG - API ID is  0
2018-01-17 10:48:09,430 - DEBUG - Current Position is 0
2018-01-17 10:48:09,430 - DEBUG - Current Position is <class 'str'>
2018-01-17 10:48:09,430 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 10:48:09,430 - DEBUG - Time is 10
2018-01-17 10:48:09,431 - DEBUG - Time is <class 'int'>
2018-01-17 10:48:09,431 - DEBUG - Time is 48
2018-01-17 10:48:09,431 - DEBUG - Time is <class 'int'>
2018-01-17 10:48:09,431 - DEBUG - Disconnected from IBController
2018-01-17 10:48:09,433 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 10:53:05,355 - DEBUG - ****************************************************
2018-01-17 10:53:05,355 - DEBUG - Current Time is 10:53AM
2018-01-17 10:53:05,357 - DEBUG - Starting Pos Mgmt H E
2018-01-17 10:53:05,357 - DEBUG - Connecting to database
2018-01-17 10:53:05,404 - DEBUG - Connected to database
2018-01-17 10:53:05,405 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 10:53:05,407 - DEBUG - Order Profit is 0
2018-01-17 10:53:05,407 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 10:53:05,408 - DEBUG - Stop ID is 0
2018-01-17 10:53:05,408 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 10:53:05,411 - DEBUG - Entry ID is 105
2018-01-17 10:53:05,411 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 10:53:05,411 - DEBUG - OCA ID is 1
2018-01-17 10:53:05,413 - DEBUG - Connecting to IBController
2018-01-17 10:53:06,418 - DEBUG - Connected to IBController
2018-01-17 10:53:06,418 - DEBUG - Position requested
2018-01-17 10:53:06,421 - DEBUG - Pos Mgmt -12987
2018-01-17 10:53:06,423 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210CF60>, pos=-12987, avgCost=0.95368235>
2018-01-17 10:53:06,423 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 10:53:06,423 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 10:53:06,424 - DEBUG - Position is -12987
2018-01-17 10:53:07,421 - DEBUG - Open Orders requested
2018-01-17 10:53:07,430 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x000000000210CBA8>, order=<ib.ext.Order.Order object at 0x000000000210CA20>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A0198>>
2018-01-17 10:53:07,431 - DEBUG - Order OrderID 102
2018-01-17 10:53:07,431 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:53:07,433 - DEBUG - Order status PreSubmitted
2018-01-17 10:53:07,433 - DEBUG - Order Identification 102
2018-01-17 10:53:07,433 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:53:07,433 - DEBUG - Profit ID from database is 0
2018-01-17 10:53:07,434 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:53:07,434 - DEBUG - Stop ID database is 0
2018-01-17 10:53:07,434 - DEBUG - Entry ID database is 105
2018-01-17 10:53:07,434 - DEBUG - Reply Handler Orders is <openOrder orderId=104, contract=<ib.ext.Contract.Contract object at 0x000000000210CBA8>, order=<ib.ext.Order.Order object at 0x000000000210CA20>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A0208>>
2018-01-17 10:53:07,436 - DEBUG - Order OrderID 104
2018-01-17 10:53:07,436 - DEBUG - reply handler status <orderStatus orderId=104, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791157, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:53:07,436 - DEBUG - Order status PreSubmitted
2018-01-17 10:53:07,437 - DEBUG - Order Identification 104
2018-01-17 10:53:07,437 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:53:07,437 - DEBUG - Profit ID from database is 0
2018-01-17 10:53:07,437 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:53:07,437 - DEBUG - Stop ID database is 0
2018-01-17 10:53:07,437 - DEBUG - Entry ID database is 105
2018-01-17 10:53:07,438 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x000000000210CBA8>, order=<ib.ext.Order.Order object at 0x000000000210CA20>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A02E8>>
2018-01-17 10:53:07,438 - DEBUG - Order OrderID 103
2018-01-17 10:53:07,438 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:53:07,440 - DEBUG - Order status PreSubmitted
2018-01-17 10:53:07,440 - DEBUG - Order Identification 103
2018-01-17 10:53:07,440 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:53:07,440 - DEBUG - Profit ID from database is 0
2018-01-17 10:53:07,440 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:53:07,440 - DEBUG - Stop ID database is 0
2018-01-17 10:53:07,440 - DEBUG - Entry ID database is 105
2018-01-17 10:53:07,441 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x000000000210CBA8>, order=<ib.ext.Order.Order object at 0x000000000210CA20>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A0358>>
2018-01-17 10:53:07,441 - DEBUG - Order OrderID 105
2018-01-17 10:53:07,443 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:53:07,443 - DEBUG - Order status PreSubmitted
2018-01-17 10:53:07,443 - DEBUG - Order Identification 105
2018-01-17 10:53:07,444 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:53:07,444 - DEBUG - Profit ID from database is 0
2018-01-17 10:53:07,444 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:53:07,444 - DEBUG - Stop ID database is 0
2018-01-17 10:53:07,444 - DEBUG - Entry ID database is 105
2018-01-17 10:53:07,444 - DEBUG - Entry API ID is 105
2018-01-17 10:53:09,423 - DEBUG - Connecting to database
2018-01-17 10:53:09,430 - DEBUG - Connected to database
2018-01-17 10:53:09,431 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 10:53:09,431 - DEBUG - Stop loss value is 71.82
2018-01-17 10:53:09,433 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 10:53:09,434 - DEBUG - Stop loss value is 85.25
2018-01-17 10:53:09,434 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 10:53:09,434 - DEBUG - EntryPrice value is 74.3
2018-01-17 10:53:09,437 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 10:53:09,437 - DEBUG - Stop quantity 1
2018-01-17 10:53:09,437 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 10:53:09,438 - DEBUG - Direction is Long
2018-01-17 10:53:09,440 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 10:53:09,440 - DEBUG - Count is 0
2018-01-17 10:53:09,441 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 10:53:09,441 - DEBUG - Stop Loss Flag is 0
2018-01-17 10:53:09,443 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 10:53:09,444 - DEBUG - Max ID Order is (105,)
2018-01-17 10:53:09,444 - DEBUG - Today is 2018-01-17
2018-01-17 10:53:09,444 - DEBUG - Day of the week 2
2018-01-17 10:53:09,444 - DEBUG - Yesterday is 01/16/2018
2018-01-17 10:53:09,444 - DEBUG - In Position is  0
2018-01-17 10:53:09,444 - DEBUG - In Position is  <class 'int'>
2018-01-17 10:53:09,444 - DEBUG - curStopLossFlag is  0
2018-01-17 10:53:09,446 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 10:53:09,446 - DEBUG - Checking if Entry has been filled
2018-01-17 10:53:09,446 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 10:53:09,447 - DEBUG - EntryPend is 1
2018-01-17 10:53:09,447 - DEBUG - Try to Cancel Stop
2018-01-17 10:53:09,447 - DEBUG - Stop API ID 0
2018-01-17 10:53:09,447 - DEBUG - Profit API ID 0
2018-01-17 10:53:09,447 - DEBUG - Stop API ID <class 'int'>
2018-01-17 10:53:09,448 - DEBUG - Profit API ID <class 'int'>
2018-01-17 10:53:09,448 - DEBUG - Pos is 0
2018-01-17 10:53:09,448 - DEBUG - CurCount is 0
2018-01-17 10:53:09,448 - DEBUG - In Pos 0
2018-01-17 10:53:09,450 - DEBUG - Stop ID is 0
2018-01-17 10:53:09,450 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 10:53:09,450 - DEBUG - EntryPend is 1
2018-01-17 10:53:09,450 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 10:53:09,451 - DEBUG - Entry Date is 10
2018-01-17 10:53:09,451 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 10:53:09,451 - DEBUG - Order Profit ID is 0
2018-01-17 10:53:09,451 - DEBUG - Order Entry ID is 105
2018-01-17 10:53:09,451 - DEBUG - API ID is  0
2018-01-17 10:53:09,453 - DEBUG - Current Position is 0
2018-01-17 10:53:09,453 - DEBUG - Current Position is <class 'str'>
2018-01-17 10:53:09,453 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 10:53:09,453 - DEBUG - Time is 10
2018-01-17 10:53:09,453 - DEBUG - Time is <class 'int'>
2018-01-17 10:53:09,453 - DEBUG - Time is 53
2018-01-17 10:53:09,453 - DEBUG - Time is <class 'int'>
2018-01-17 10:53:09,453 - DEBUG - Disconnected from IBController
2018-01-17 10:53:09,454 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 10:58:05,355 - DEBUG - ****************************************************
2018-01-17 10:58:05,355 - DEBUG - Current Time is 10:58AM
2018-01-17 10:58:05,355 - DEBUG - Starting Pos Mgmt H E
2018-01-17 10:58:05,355 - DEBUG - Connecting to database
2018-01-17 10:58:05,382 - DEBUG - Connected to database
2018-01-17 10:58:05,382 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 10:58:05,384 - DEBUG - Order Profit is 0
2018-01-17 10:58:05,384 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 10:58:05,387 - DEBUG - Stop ID is 0
2018-01-17 10:58:05,387 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 10:58:05,388 - DEBUG - Entry ID is 105
2018-01-17 10:58:05,388 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 10:58:05,390 - DEBUG - OCA ID is 1
2018-01-17 10:58:05,390 - DEBUG - Connecting to IBController
2018-01-17 10:58:06,397 - DEBUG - Connected to IBController
2018-01-17 10:58:06,397 - DEBUG - Position requested
2018-01-17 10:58:06,400 - DEBUG - Pos Mgmt -12987
2018-01-17 10:58:06,400 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000215DA58>, pos=-12987, avgCost=0.95368235>
2018-01-17 10:58:06,401 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 10:58:06,401 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 10:58:06,401 - DEBUG - Position is -12987
2018-01-17 10:58:07,400 - DEBUG - Open Orders requested
2018-01-17 10:58:07,401 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x000000000215DE10>, order=<ib.ext.Order.Order object at 0x000000000215DB70>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021F0208>>
2018-01-17 10:58:07,401 - DEBUG - Order OrderID 102
2018-01-17 10:58:07,403 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:58:07,403 - DEBUG - Order status PreSubmitted
2018-01-17 10:58:07,403 - DEBUG - Order Identification 102
2018-01-17 10:58:07,404 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:58:07,404 - DEBUG - Profit ID from database is 0
2018-01-17 10:58:07,404 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:58:07,404 - DEBUG - Stop ID database is 0
2018-01-17 10:58:07,404 - DEBUG - Entry ID database is 105
2018-01-17 10:58:07,405 - DEBUG - Reply Handler Orders is <openOrder orderId=104, contract=<ib.ext.Contract.Contract object at 0x000000000215DE10>, order=<ib.ext.Order.Order object at 0x000000000215DB70>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021F0080>>
2018-01-17 10:58:07,405 - DEBUG - Order OrderID 104
2018-01-17 10:58:07,407 - DEBUG - reply handler status <orderStatus orderId=104, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791157, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:58:07,407 - DEBUG - Order status PreSubmitted
2018-01-17 10:58:07,407 - DEBUG - Order Identification 104
2018-01-17 10:58:07,407 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:58:07,407 - DEBUG - Profit ID from database is 0
2018-01-17 10:58:07,407 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:58:07,407 - DEBUG - Stop ID database is 0
2018-01-17 10:58:07,407 - DEBUG - Entry ID database is 105
2018-01-17 10:58:07,408 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x000000000215DE10>, order=<ib.ext.Order.Order object at 0x000000000215DB70>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021F0278>>
2018-01-17 10:58:07,408 - DEBUG - Order OrderID 103
2018-01-17 10:58:07,410 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:58:07,410 - DEBUG - Order status PreSubmitted
2018-01-17 10:58:07,410 - DEBUG - Order Identification 103
2018-01-17 10:58:07,411 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:58:07,411 - DEBUG - Profit ID from database is 0
2018-01-17 10:58:07,411 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:58:07,411 - DEBUG - Stop ID database is 0
2018-01-17 10:58:07,411 - DEBUG - Entry ID database is 105
2018-01-17 10:58:07,411 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x000000000215DE10>, order=<ib.ext.Order.Order object at 0x000000000215DB70>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021F0358>>
2018-01-17 10:58:07,413 - DEBUG - Order OrderID 105
2018-01-17 10:58:07,413 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 10:58:07,414 - DEBUG - Order status PreSubmitted
2018-01-17 10:58:07,414 - DEBUG - Order Identification 105
2018-01-17 10:58:07,414 - DEBUG - Order Identification <class 'int'>
2018-01-17 10:58:07,414 - DEBUG - Profit ID from database is 0
2018-01-17 10:58:07,414 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 10:58:07,414 - DEBUG - Stop ID database is 0
2018-01-17 10:58:07,414 - DEBUG - Entry ID database is 105
2018-01-17 10:58:07,414 - DEBUG - Entry API ID is 105
2018-01-17 10:58:09,404 - DEBUG - Connecting to database
2018-01-17 10:58:09,411 - DEBUG - Connected to database
2018-01-17 10:58:09,413 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 10:58:09,413 - DEBUG - Stop loss value is 71.82
2018-01-17 10:58:09,414 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 10:58:09,414 - DEBUG - Stop loss value is 85.25
2018-01-17 10:58:09,417 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 10:58:09,417 - DEBUG - EntryPrice value is 74.3
2018-01-17 10:58:09,417 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 10:58:09,418 - DEBUG - Stop quantity 1
2018-01-17 10:58:09,420 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 10:58:09,421 - DEBUG - Direction is Long
2018-01-17 10:58:09,421 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 10:58:09,421 - DEBUG - Count is 0
2018-01-17 10:58:09,424 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 10:58:09,424 - DEBUG - Stop Loss Flag is 0
2018-01-17 10:58:09,424 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 10:58:09,426 - DEBUG - Max ID Order is (105,)
2018-01-17 10:58:09,426 - DEBUG - Today is 2018-01-17
2018-01-17 10:58:09,427 - DEBUG - Day of the week 2
2018-01-17 10:58:09,427 - DEBUG - Yesterday is 01/16/2018
2018-01-17 10:58:09,427 - DEBUG - In Position is  0
2018-01-17 10:58:09,427 - DEBUG - In Position is  <class 'int'>
2018-01-17 10:58:09,427 - DEBUG - curStopLossFlag is  0
2018-01-17 10:58:09,427 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 10:58:09,427 - DEBUG - Checking if Entry has been filled
2018-01-17 10:58:09,427 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 10:58:09,430 - DEBUG - EntryPend is 1
2018-01-17 10:58:09,430 - DEBUG - Try to Cancel Stop
2018-01-17 10:58:09,430 - DEBUG - Stop API ID 0
2018-01-17 10:58:09,430 - DEBUG - Profit API ID 0
2018-01-17 10:58:09,430 - DEBUG - Stop API ID <class 'int'>
2018-01-17 10:58:09,430 - DEBUG - Profit API ID <class 'int'>
2018-01-17 10:58:09,430 - DEBUG - Pos is 0
2018-01-17 10:58:09,430 - DEBUG - CurCount is 0
2018-01-17 10:58:09,430 - DEBUG - In Pos 0
2018-01-17 10:58:09,431 - DEBUG - Stop ID is 0
2018-01-17 10:58:09,431 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 10:58:09,433 - DEBUG - EntryPend is 1
2018-01-17 10:58:09,433 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 10:58:09,434 - DEBUG - Entry Date is 10
2018-01-17 10:58:09,434 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 10:58:09,434 - DEBUG - Order Profit ID is 0
2018-01-17 10:58:09,434 - DEBUG - Order Entry ID is 105
2018-01-17 10:58:09,434 - DEBUG - API ID is  0
2018-01-17 10:58:09,434 - DEBUG - Current Position is 0
2018-01-17 10:58:09,434 - DEBUG - Current Position is <class 'str'>
2018-01-17 10:58:09,434 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 10:58:09,434 - DEBUG - Time is 10
2018-01-17 10:58:09,434 - DEBUG - Time is <class 'int'>
2018-01-17 10:58:09,434 - DEBUG - Time is 58
2018-01-17 10:58:09,436 - DEBUG - Time is <class 'int'>
2018-01-17 10:58:09,436 - DEBUG - Disconnected from IBController
2018-01-17 10:58:09,436 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 11:03:05,358 - DEBUG - ****************************************************
2018-01-17 11:03:05,359 - DEBUG - Current Time is 11:03AM
2018-01-17 11:03:05,359 - DEBUG - Starting Pos Mgmt H E
2018-01-17 11:03:05,361 - DEBUG - Connecting to database
2018-01-17 11:03:05,382 - DEBUG - Connected to database
2018-01-17 11:03:05,384 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 11:03:05,384 - DEBUG - Order Profit is 0
2018-01-17 11:03:05,385 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 11:03:05,387 - DEBUG - Stop ID is 0
2018-01-17 11:03:05,387 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 11:03:05,388 - DEBUG - Entry ID is 105
2018-01-17 11:03:05,388 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 11:03:05,390 - DEBUG - OCA ID is 1
2018-01-17 11:03:05,391 - DEBUG - Connecting to IBController
2018-01-17 11:03:06,398 - DEBUG - Connected to IBController
2018-01-17 11:03:06,398 - DEBUG - Position requested
2018-01-17 11:03:06,400 - DEBUG - Pos Mgmt -12987
2018-01-17 11:03:06,401 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210CF60>, pos=-12987, avgCost=0.95368235>
2018-01-17 11:03:06,401 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 11:03:06,401 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 11:03:06,401 - DEBUG - Position is -12987
2018-01-17 11:03:07,401 - DEBUG - Open Orders requested
2018-01-17 11:03:07,403 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x000000000210CD30>, order=<ib.ext.Order.Order object at 0x000000000210CBE0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A11D0>>
2018-01-17 11:03:07,404 - DEBUG - Order OrderID 102
2018-01-17 11:03:07,404 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:03:07,404 - DEBUG - Order status PreSubmitted
2018-01-17 11:03:07,404 - DEBUG - Order Identification 102
2018-01-17 11:03:07,404 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:03:07,404 - DEBUG - Profit ID from database is 0
2018-01-17 11:03:07,405 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:03:07,405 - DEBUG - Stop ID database is 0
2018-01-17 11:03:07,405 - DEBUG - Entry ID database is 105
2018-01-17 11:03:07,407 - DEBUG - Reply Handler Orders is <openOrder orderId=104, contract=<ib.ext.Contract.Contract object at 0x000000000210CD30>, order=<ib.ext.Order.Order object at 0x000000000210CBE0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A1080>>
2018-01-17 11:03:07,407 - DEBUG - Order OrderID 104
2018-01-17 11:03:07,407 - DEBUG - reply handler status <orderStatus orderId=104, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791157, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:03:07,407 - DEBUG - Order status PreSubmitted
2018-01-17 11:03:07,407 - DEBUG - Order Identification 104
2018-01-17 11:03:07,408 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:03:07,408 - DEBUG - Profit ID from database is 0
2018-01-17 11:03:07,408 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:03:07,408 - DEBUG - Stop ID database is 0
2018-01-17 11:03:07,410 - DEBUG - Entry ID database is 105
2018-01-17 11:03:07,411 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x000000000210CD30>, order=<ib.ext.Order.Order object at 0x000000000210CBE0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A1208>>
2018-01-17 11:03:07,411 - DEBUG - Order OrderID 103
2018-01-17 11:03:07,411 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:03:07,411 - DEBUG - Order status PreSubmitted
2018-01-17 11:03:07,411 - DEBUG - Order Identification 103
2018-01-17 11:03:07,411 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:03:07,411 - DEBUG - Profit ID from database is 0
2018-01-17 11:03:07,413 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:03:07,413 - DEBUG - Stop ID database is 0
2018-01-17 11:03:07,413 - DEBUG - Entry ID database is 105
2018-01-17 11:03:07,414 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x000000000210CD30>, order=<ib.ext.Order.Order object at 0x000000000210CBE0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A13C8>>
2018-01-17 11:03:07,414 - DEBUG - Order OrderID 105
2018-01-17 11:03:07,414 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:03:07,414 - DEBUG - Order status PreSubmitted
2018-01-17 11:03:07,415 - DEBUG - Order Identification 105
2018-01-17 11:03:07,415 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:03:07,415 - DEBUG - Profit ID from database is 0
2018-01-17 11:03:07,415 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:03:07,415 - DEBUG - Stop ID database is 0
2018-01-17 11:03:07,417 - DEBUG - Entry ID database is 105
2018-01-17 11:03:07,417 - DEBUG - Entry API ID is 105
2018-01-17 11:03:09,404 - DEBUG - Connecting to database
2018-01-17 11:03:09,411 - DEBUG - Connected to database
2018-01-17 11:03:09,411 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 11:03:09,413 - DEBUG - Stop loss value is 71.82
2018-01-17 11:03:09,414 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 11:03:09,414 - DEBUG - Stop loss value is 85.25
2018-01-17 11:03:09,415 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 11:03:09,415 - DEBUG - EntryPrice value is 74.3
2018-01-17 11:03:09,417 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 11:03:09,417 - DEBUG - Stop quantity 1
2018-01-17 11:03:09,418 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 11:03:09,418 - DEBUG - Direction is Long
2018-01-17 11:03:09,421 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 11:03:09,421 - DEBUG - Count is 0
2018-01-17 11:03:09,421 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 11:03:09,423 - DEBUG - Stop Loss Flag is 0
2018-01-17 11:03:09,424 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 11:03:09,424 - DEBUG - Max ID Order is (105,)
2018-01-17 11:03:09,424 - DEBUG - Today is 2018-01-17
2018-01-17 11:03:09,424 - DEBUG - Day of the week 2
2018-01-17 11:03:09,424 - DEBUG - Yesterday is 01/16/2018
2018-01-17 11:03:09,426 - DEBUG - In Position is  0
2018-01-17 11:03:09,426 - DEBUG - In Position is  <class 'int'>
2018-01-17 11:03:09,426 - DEBUG - curStopLossFlag is  0
2018-01-17 11:03:09,426 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 11:03:09,427 - DEBUG - Checking if Entry has been filled
2018-01-17 11:03:09,427 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 11:03:09,427 - DEBUG - EntryPend is 1
2018-01-17 11:03:09,427 - DEBUG - Try to Cancel Stop
2018-01-17 11:03:09,428 - DEBUG - Stop API ID 0
2018-01-17 11:03:09,428 - DEBUG - Profit API ID 0
2018-01-17 11:03:09,428 - DEBUG - Stop API ID <class 'int'>
2018-01-17 11:03:09,428 - DEBUG - Profit API ID <class 'int'>
2018-01-17 11:03:09,428 - DEBUG - Pos is 0
2018-01-17 11:03:09,430 - DEBUG - CurCount is 0
2018-01-17 11:03:09,430 - DEBUG - In Pos 0
2018-01-17 11:03:09,430 - DEBUG - Stop ID is 0
2018-01-17 11:03:09,430 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 11:03:09,431 - DEBUG - EntryPend is 1
2018-01-17 11:03:09,431 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 11:03:09,431 - DEBUG - Entry Date is 10
2018-01-17 11:03:09,431 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 11:03:09,433 - DEBUG - Order Profit ID is 0
2018-01-17 11:03:09,433 - DEBUG - Order Entry ID is 105
2018-01-17 11:03:09,433 - DEBUG - API ID is  0
2018-01-17 11:03:09,433 - DEBUG - Current Position is 0
2018-01-17 11:03:09,433 - DEBUG - Current Position is <class 'str'>
2018-01-17 11:03:09,434 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 11:03:09,434 - DEBUG - Time is 11
2018-01-17 11:03:09,434 - DEBUG - Time is <class 'int'>
2018-01-17 11:03:09,434 - DEBUG - Time is 3
2018-01-17 11:03:09,434 - DEBUG - Time is <class 'int'>
2018-01-17 11:03:09,434 - DEBUG - Disconnected from IBController
2018-01-17 11:03:09,436 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 11:08:05,354 - DEBUG - ****************************************************
2018-01-17 11:08:05,355 - DEBUG - Current Time is 11:08AM
2018-01-17 11:08:05,355 - DEBUG - Starting Pos Mgmt H E
2018-01-17 11:08:05,355 - DEBUG - Connecting to database
2018-01-17 11:08:05,377 - DEBUG - Connected to database
2018-01-17 11:08:05,377 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 11:08:05,378 - DEBUG - Order Profit is 0
2018-01-17 11:08:05,378 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 11:08:05,380 - DEBUG - Stop ID is 0
2018-01-17 11:08:05,380 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 11:08:05,381 - DEBUG - Entry ID is 105
2018-01-17 11:08:05,381 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 11:08:05,382 - DEBUG - OCA ID is 1
2018-01-17 11:08:05,384 - DEBUG - Connecting to IBController
2018-01-17 11:08:06,388 - DEBUG - Connected to IBController
2018-01-17 11:08:06,388 - DEBUG - Position requested
2018-01-17 11:08:06,388 - DEBUG - Pos Mgmt -12987
2018-01-17 11:08:06,388 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020DDA58>, pos=-12987, avgCost=0.95368235>
2018-01-17 11:08:06,390 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 11:08:06,390 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 11:08:06,390 - DEBUG - Position is -12987
2018-01-17 11:08:07,388 - DEBUG - Open Orders requested
2018-01-17 11:08:07,391 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x00000000020DDE10>, order=<ib.ext.Order.Order object at 0x00000000020DDCF8>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002170208>>
2018-01-17 11:08:07,391 - DEBUG - Order OrderID 102
2018-01-17 11:08:07,391 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:08:07,392 - DEBUG - Order status PreSubmitted
2018-01-17 11:08:07,392 - DEBUG - Order Identification 102
2018-01-17 11:08:07,392 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:08:07,392 - DEBUG - Profit ID from database is 0
2018-01-17 11:08:07,394 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:08:07,394 - DEBUG - Stop ID database is 0
2018-01-17 11:08:07,394 - DEBUG - Entry ID database is 105
2018-01-17 11:08:07,394 - DEBUG - Reply Handler Orders is <openOrder orderId=104, contract=<ib.ext.Contract.Contract object at 0x00000000020DDE10>, order=<ib.ext.Order.Order object at 0x00000000020DDCF8>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002170080>>
2018-01-17 11:08:07,394 - DEBUG - Order OrderID 104
2018-01-17 11:08:07,395 - DEBUG - reply handler status <orderStatus orderId=104, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791157, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:08:07,395 - DEBUG - Order status PreSubmitted
2018-01-17 11:08:07,395 - DEBUG - Order Identification 104
2018-01-17 11:08:07,395 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:08:07,397 - DEBUG - Profit ID from database is 0
2018-01-17 11:08:07,397 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:08:07,397 - DEBUG - Stop ID database is 0
2018-01-17 11:08:07,397 - DEBUG - Entry ID database is 105
2018-01-17 11:08:07,398 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x00000000020DDE10>, order=<ib.ext.Order.Order object at 0x00000000020DDCF8>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002170278>>
2018-01-17 11:08:07,398 - DEBUG - Order OrderID 103
2018-01-17 11:08:07,398 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:08:07,398 - DEBUG - Order status PreSubmitted
2018-01-17 11:08:07,400 - DEBUG - Order Identification 103
2018-01-17 11:08:07,400 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:08:07,400 - DEBUG - Profit ID from database is 0
2018-01-17 11:08:07,400 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:08:07,401 - DEBUG - Stop ID database is 0
2018-01-17 11:08:07,401 - DEBUG - Entry ID database is 105
2018-01-17 11:08:07,401 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x00000000020DDE10>, order=<ib.ext.Order.Order object at 0x00000000020DDCF8>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002170358>>
2018-01-17 11:08:07,401 - DEBUG - Order OrderID 105
2018-01-17 11:08:07,403 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:08:07,403 - DEBUG - Order status PreSubmitted
2018-01-17 11:08:07,403 - DEBUG - Order Identification 105
2018-01-17 11:08:07,403 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:08:07,404 - DEBUG - Profit ID from database is 0
2018-01-17 11:08:07,404 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:08:07,404 - DEBUG - Stop ID database is 0
2018-01-17 11:08:07,404 - DEBUG - Entry ID database is 105
2018-01-17 11:08:07,404 - DEBUG - Entry API ID is 105
2018-01-17 11:08:09,391 - DEBUG - Connecting to database
2018-01-17 11:08:09,398 - DEBUG - Connected to database
2018-01-17 11:08:09,401 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 11:08:09,401 - DEBUG - Stop loss value is 71.82
2018-01-17 11:08:09,401 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 11:08:09,403 - DEBUG - Stop loss value is 85.25
2018-01-17 11:08:09,404 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 11:08:09,404 - DEBUG - EntryPrice value is 74.3
2018-01-17 11:08:09,405 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 11:08:09,405 - DEBUG - Stop quantity 1
2018-01-17 11:08:09,407 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 11:08:09,407 - DEBUG - Direction is Long
2018-01-17 11:08:09,408 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 11:08:09,410 - DEBUG - Count is 0
2018-01-17 11:08:09,411 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 11:08:09,411 - DEBUG - Stop Loss Flag is 0
2018-01-17 11:08:09,413 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 11:08:09,413 - DEBUG - Max ID Order is (105,)
2018-01-17 11:08:09,413 - DEBUG - Today is 2018-01-17
2018-01-17 11:08:09,414 - DEBUG - Day of the week 2
2018-01-17 11:08:09,414 - DEBUG - Yesterday is 01/16/2018
2018-01-17 11:08:09,414 - DEBUG - In Position is  0
2018-01-17 11:08:09,414 - DEBUG - In Position is  <class 'int'>
2018-01-17 11:08:09,414 - DEBUG - curStopLossFlag is  0
2018-01-17 11:08:09,414 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 11:08:09,414 - DEBUG - Checking if Entry has been filled
2018-01-17 11:08:09,414 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 11:08:09,417 - DEBUG - EntryPend is 1
2018-01-17 11:08:09,417 - DEBUG - Try to Cancel Stop
2018-01-17 11:08:09,417 - DEBUG - Stop API ID 0
2018-01-17 11:08:09,417 - DEBUG - Profit API ID 0
2018-01-17 11:08:09,417 - DEBUG - Stop API ID <class 'int'>
2018-01-17 11:08:09,417 - DEBUG - Profit API ID <class 'int'>
2018-01-17 11:08:09,417 - DEBUG - Pos is 0
2018-01-17 11:08:09,417 - DEBUG - CurCount is 0
2018-01-17 11:08:09,418 - DEBUG - In Pos 0
2018-01-17 11:08:09,418 - DEBUG - Stop ID is 0
2018-01-17 11:08:09,418 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 11:08:09,420 - DEBUG - EntryPend is 1
2018-01-17 11:08:09,421 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 11:08:09,421 - DEBUG - Entry Date is 10
2018-01-17 11:08:09,421 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 11:08:09,421 - DEBUG - Order Profit ID is 0
2018-01-17 11:08:09,421 - DEBUG - Order Entry ID is 105
2018-01-17 11:08:09,421 - DEBUG - API ID is  0
2018-01-17 11:08:09,421 - DEBUG - Current Position is 0
2018-01-17 11:08:09,421 - DEBUG - Current Position is <class 'str'>
2018-01-17 11:08:09,421 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 11:08:09,421 - DEBUG - Time is 11
2018-01-17 11:08:09,421 - DEBUG - Time is <class 'int'>
2018-01-17 11:08:09,423 - DEBUG - Time is 8
2018-01-17 11:08:09,423 - DEBUG - Time is <class 'int'>
2018-01-17 11:08:09,423 - DEBUG - Disconnected from IBController
2018-01-17 11:08:09,423 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 11:13:05,348 - DEBUG - ****************************************************
2018-01-17 11:13:05,348 - DEBUG - Current Time is 11:13AM
2018-01-17 11:13:05,349 - DEBUG - Starting Pos Mgmt H E
2018-01-17 11:13:05,349 - DEBUG - Connecting to database
2018-01-17 11:13:05,371 - DEBUG - Connected to database
2018-01-17 11:13:05,371 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 11:13:05,372 - DEBUG - Order Profit is 0
2018-01-17 11:13:05,374 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 11:13:05,375 - DEBUG - Stop ID is 0
2018-01-17 11:13:05,375 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 11:13:05,377 - DEBUG - Entry ID is 105
2018-01-17 11:13:05,377 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 11:13:05,378 - DEBUG - OCA ID is 1
2018-01-17 11:13:05,378 - DEBUG - Connecting to IBController
2018-01-17 11:13:06,388 - DEBUG - Connected to IBController
2018-01-17 11:13:06,388 - DEBUG - Position requested
2018-01-17 11:13:06,388 - DEBUG - Pos Mgmt -12987
2018-01-17 11:13:06,390 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212CCC0>, pos=-12987, avgCost=0.95368235>
2018-01-17 11:13:06,390 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 11:13:06,390 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 11:13:06,391 - DEBUG - Position is -12987
2018-01-17 11:13:07,388 - DEBUG - Open Orders requested
2018-01-17 11:13:07,391 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x000000000212CD68>, order=<ib.ext.Order.Order object at 0x000000000212CB00>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C0208>>
2018-01-17 11:13:07,391 - DEBUG - Order OrderID 102
2018-01-17 11:13:07,391 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:13:07,391 - DEBUG - Order status PreSubmitted
2018-01-17 11:13:07,392 - DEBUG - Order Identification 102
2018-01-17 11:13:07,392 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:13:07,392 - DEBUG - Profit ID from database is 0
2018-01-17 11:13:07,392 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:13:07,394 - DEBUG - Stop ID database is 0
2018-01-17 11:13:07,394 - DEBUG - Entry ID database is 105
2018-01-17 11:13:07,394 - DEBUG - Reply Handler Orders is <openOrder orderId=104, contract=<ib.ext.Contract.Contract object at 0x000000000212CD68>, order=<ib.ext.Order.Order object at 0x000000000212CB00>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C0080>>
2018-01-17 11:13:07,394 - DEBUG - Order OrderID 104
2018-01-17 11:13:07,395 - DEBUG - reply handler status <orderStatus orderId=104, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791157, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:13:07,395 - DEBUG - Order status PreSubmitted
2018-01-17 11:13:07,395 - DEBUG - Order Identification 104
2018-01-17 11:13:07,395 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:13:07,397 - DEBUG - Profit ID from database is 0
2018-01-17 11:13:07,397 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:13:07,397 - DEBUG - Stop ID database is 0
2018-01-17 11:13:07,397 - DEBUG - Entry ID database is 105
2018-01-17 11:13:07,398 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x000000000212CD68>, order=<ib.ext.Order.Order object at 0x000000000212CB00>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C0278>>
2018-01-17 11:13:07,398 - DEBUG - Order OrderID 103
2018-01-17 11:13:07,398 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:13:07,398 - DEBUG - Order status PreSubmitted
2018-01-17 11:13:07,400 - DEBUG - Order Identification 103
2018-01-17 11:13:07,400 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:13:07,400 - DEBUG - Profit ID from database is 0
2018-01-17 11:13:07,400 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:13:07,400 - DEBUG - Stop ID database is 0
2018-01-17 11:13:07,401 - DEBUG - Entry ID database is 105
2018-01-17 11:13:07,401 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x000000000212CD68>, order=<ib.ext.Order.Order object at 0x000000000212CB00>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C0358>>
2018-01-17 11:13:07,401 - DEBUG - Order OrderID 105
2018-01-17 11:13:07,401 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:13:07,403 - DEBUG - Order status PreSubmitted
2018-01-17 11:13:07,403 - DEBUG - Order Identification 105
2018-01-17 11:13:07,403 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:13:07,404 - DEBUG - Profit ID from database is 0
2018-01-17 11:13:07,404 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:13:07,404 - DEBUG - Stop ID database is 0
2018-01-17 11:13:07,404 - DEBUG - Entry ID database is 105
2018-01-17 11:13:07,404 - DEBUG - Entry API ID is 105
2018-01-17 11:13:09,391 - DEBUG - Connecting to database
2018-01-17 11:13:09,398 - DEBUG - Connected to database
2018-01-17 11:13:09,401 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 11:13:09,401 - DEBUG - Stop loss value is 71.82
2018-01-17 11:13:09,401 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 11:13:09,403 - DEBUG - Stop loss value is 85.25
2018-01-17 11:13:09,404 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 11:13:09,404 - DEBUG - EntryPrice value is 74.3
2018-01-17 11:13:09,405 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 11:13:09,405 - DEBUG - Stop quantity 1
2018-01-17 11:13:09,407 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 11:13:09,407 - DEBUG - Direction is Long
2018-01-17 11:13:09,408 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 11:13:09,408 - DEBUG - Count is 0
2018-01-17 11:13:09,411 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 11:13:09,411 - DEBUG - Stop Loss Flag is 0
2018-01-17 11:13:09,411 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 11:13:09,413 - DEBUG - Max ID Order is (105,)
2018-01-17 11:13:09,413 - DEBUG - Today is 2018-01-17
2018-01-17 11:13:09,413 - DEBUG - Day of the week 2
2018-01-17 11:13:09,414 - DEBUG - Yesterday is 01/16/2018
2018-01-17 11:13:09,414 - DEBUG - In Position is  0
2018-01-17 11:13:09,414 - DEBUG - In Position is  <class 'int'>
2018-01-17 11:13:09,414 - DEBUG - curStopLossFlag is  0
2018-01-17 11:13:09,414 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 11:13:09,414 - DEBUG - Checking if Entry has been filled
2018-01-17 11:13:09,414 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 11:13:09,417 - DEBUG - EntryPend is 1
2018-01-17 11:13:09,417 - DEBUG - Try to Cancel Stop
2018-01-17 11:13:09,417 - DEBUG - Stop API ID 0
2018-01-17 11:13:09,417 - DEBUG - Profit API ID 0
2018-01-17 11:13:09,417 - DEBUG - Stop API ID <class 'int'>
2018-01-17 11:13:09,417 - DEBUG - Profit API ID <class 'int'>
2018-01-17 11:13:09,417 - DEBUG - Pos is 0
2018-01-17 11:13:09,417 - DEBUG - CurCount is 0
2018-01-17 11:13:09,417 - DEBUG - In Pos 0
2018-01-17 11:13:09,417 - DEBUG - Stop ID is 0
2018-01-17 11:13:09,418 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 11:13:09,420 - DEBUG - EntryPend is 1
2018-01-17 11:13:09,420 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 11:13:09,420 - DEBUG - Entry Date is 10
2018-01-17 11:13:09,421 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 11:13:09,421 - DEBUG - Order Profit ID is 0
2018-01-17 11:13:09,421 - DEBUG - Order Entry ID is 105
2018-01-17 11:13:09,421 - DEBUG - API ID is  0
2018-01-17 11:13:09,421 - DEBUG - Current Position is 0
2018-01-17 11:13:09,421 - DEBUG - Current Position is <class 'str'>
2018-01-17 11:13:09,421 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 11:13:09,421 - DEBUG - Time is 11
2018-01-17 11:13:09,421 - DEBUG - Time is <class 'int'>
2018-01-17 11:13:09,421 - DEBUG - Time is 13
2018-01-17 11:13:09,423 - DEBUG - Time is <class 'int'>
2018-01-17 11:13:09,423 - DEBUG - Disconnected from IBController
2018-01-17 11:13:09,423 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 11:18:05,352 - DEBUG - ****************************************************
2018-01-17 11:18:05,354 - DEBUG - Current Time is 11:18AM
2018-01-17 11:18:05,354 - DEBUG - Starting Pos Mgmt H E
2018-01-17 11:18:05,354 - DEBUG - Connecting to database
2018-01-17 11:18:05,382 - DEBUG - Connected to database
2018-01-17 11:18:05,384 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 11:18:05,384 - DEBUG - Order Profit is 0
2018-01-17 11:18:05,385 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 11:18:05,387 - DEBUG - Stop ID is 0
2018-01-17 11:18:05,387 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 11:18:05,388 - DEBUG - Entry ID is 105
2018-01-17 11:18:05,388 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 11:18:05,390 - DEBUG - OCA ID is 1
2018-01-17 11:18:05,391 - DEBUG - Connecting to IBController
2018-01-17 11:18:06,397 - DEBUG - Connected to IBController
2018-01-17 11:18:06,397 - DEBUG - Position requested
2018-01-17 11:18:06,398 - DEBUG - Pos Mgmt -12987
2018-01-17 11:18:06,398 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212BAC8>, pos=-12987, avgCost=0.95368235>
2018-01-17 11:18:06,398 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 11:18:06,398 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 11:18:06,398 - DEBUG - Position is -12987
2018-01-17 11:18:07,398 - DEBUG - Open Orders requested
2018-01-17 11:18:07,398 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x000000000212BE10>, order=<ib.ext.Order.Order object at 0x000000000212BC88>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021BF208>>
2018-01-17 11:18:07,400 - DEBUG - Order OrderID 102
2018-01-17 11:18:07,400 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:18:07,401 - DEBUG - Order status PreSubmitted
2018-01-17 11:18:07,401 - DEBUG - Order Identification 102
2018-01-17 11:18:07,401 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:18:07,401 - DEBUG - Profit ID from database is 0
2018-01-17 11:18:07,401 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:18:07,401 - DEBUG - Stop ID database is 0
2018-01-17 11:18:07,401 - DEBUG - Entry ID database is 105
2018-01-17 11:18:07,403 - DEBUG - Reply Handler Orders is <openOrder orderId=104, contract=<ib.ext.Contract.Contract object at 0x000000000212BE10>, order=<ib.ext.Order.Order object at 0x000000000212BC88>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021BF0B8>>
2018-01-17 11:18:07,404 - DEBUG - Order OrderID 104
2018-01-17 11:18:07,404 - DEBUG - reply handler status <orderStatus orderId=104, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791157, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:18:07,404 - DEBUG - Order status PreSubmitted
2018-01-17 11:18:07,404 - DEBUG - Order Identification 104
2018-01-17 11:18:07,404 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:18:07,404 - DEBUG - Profit ID from database is 0
2018-01-17 11:18:07,404 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:18:07,404 - DEBUG - Stop ID database is 0
2018-01-17 11:18:07,404 - DEBUG - Entry ID database is 105
2018-01-17 11:18:07,407 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x000000000212BE10>, order=<ib.ext.Order.Order object at 0x000000000212BC88>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021BF278>>
2018-01-17 11:18:07,407 - DEBUG - Order OrderID 103
2018-01-17 11:18:07,407 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:18:07,407 - DEBUG - Order status PreSubmitted
2018-01-17 11:18:07,407 - DEBUG - Order Identification 103
2018-01-17 11:18:07,407 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:18:07,407 - DEBUG - Profit ID from database is 0
2018-01-17 11:18:07,407 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:18:07,407 - DEBUG - Stop ID database is 0
2018-01-17 11:18:07,408 - DEBUG - Entry ID database is 105
2018-01-17 11:18:07,410 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x000000000212BE10>, order=<ib.ext.Order.Order object at 0x000000000212BC88>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021BF358>>
2018-01-17 11:18:07,410 - DEBUG - Order OrderID 105
2018-01-17 11:18:07,410 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:18:07,411 - DEBUG - Order status PreSubmitted
2018-01-17 11:18:07,411 - DEBUG - Order Identification 105
2018-01-17 11:18:07,411 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:18:07,411 - DEBUG - Profit ID from database is 0
2018-01-17 11:18:07,411 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:18:07,411 - DEBUG - Stop ID database is 0
2018-01-17 11:18:07,411 - DEBUG - Entry ID database is 105
2018-01-17 11:18:07,411 - DEBUG - Entry API ID is 105
2018-01-17 11:18:09,401 - DEBUG - Connecting to database
2018-01-17 11:18:09,407 - DEBUG - Connected to database
2018-01-17 11:18:09,410 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 11:18:09,411 - DEBUG - Stop loss value is 71.82
2018-01-17 11:18:09,411 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 11:18:09,411 - DEBUG - Stop loss value is 85.25
2018-01-17 11:18:09,414 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 11:18:09,414 - DEBUG - EntryPrice value is 74.3
2018-01-17 11:18:09,414 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 11:18:09,415 - DEBUG - Stop quantity 1
2018-01-17 11:18:09,417 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 11:18:09,417 - DEBUG - Direction is Long
2018-01-17 11:18:09,418 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 11:18:09,418 - DEBUG - Count is 0
2018-01-17 11:18:09,420 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 11:18:09,421 - DEBUG - Stop Loss Flag is 0
2018-01-17 11:18:09,421 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 11:18:09,421 - DEBUG - Max ID Order is (105,)
2018-01-17 11:18:09,423 - DEBUG - Today is 2018-01-17
2018-01-17 11:18:09,423 - DEBUG - Day of the week 2
2018-01-17 11:18:09,423 - DEBUG - Yesterday is 01/16/2018
2018-01-17 11:18:09,423 - DEBUG - In Position is  0
2018-01-17 11:18:09,424 - DEBUG - In Position is  <class 'int'>
2018-01-17 11:18:09,424 - DEBUG - curStopLossFlag is  0
2018-01-17 11:18:09,424 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 11:18:09,424 - DEBUG - Checking if Entry has been filled
2018-01-17 11:18:09,424 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 11:18:09,426 - DEBUG - EntryPend is 1
2018-01-17 11:18:09,426 - DEBUG - Try to Cancel Stop
2018-01-17 11:18:09,427 - DEBUG - Stop API ID 0
2018-01-17 11:18:09,427 - DEBUG - Profit API ID 0
2018-01-17 11:18:09,427 - DEBUG - Stop API ID <class 'int'>
2018-01-17 11:18:09,427 - DEBUG - Profit API ID <class 'int'>
2018-01-17 11:18:09,427 - DEBUG - Pos is 0
2018-01-17 11:18:09,427 - DEBUG - CurCount is 0
2018-01-17 11:18:09,427 - DEBUG - In Pos 0
2018-01-17 11:18:09,427 - DEBUG - Stop ID is 0
2018-01-17 11:18:09,427 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 11:18:09,430 - DEBUG - EntryPend is 1
2018-01-17 11:18:09,430 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 11:18:09,430 - DEBUG - Entry Date is 10
2018-01-17 11:18:09,430 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 11:18:09,430 - DEBUG - Order Profit ID is 0
2018-01-17 11:18:09,430 - DEBUG - Order Entry ID is 105
2018-01-17 11:18:09,430 - DEBUG - API ID is  0
2018-01-17 11:18:09,430 - DEBUG - Current Position is 0
2018-01-17 11:18:09,430 - DEBUG - Current Position is <class 'str'>
2018-01-17 11:18:09,431 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 11:18:09,431 - DEBUG - Time is 11
2018-01-17 11:18:09,431 - DEBUG - Time is <class 'int'>
2018-01-17 11:18:09,431 - DEBUG - Time is 18
2018-01-17 11:18:09,431 - DEBUG - Time is <class 'int'>
2018-01-17 11:18:09,433 - DEBUG - Disconnected from IBController
2018-01-17 11:18:09,433 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 11:23:05,341 - DEBUG - ****************************************************
2018-01-17 11:23:05,341 - DEBUG - Current Time is 11:23AM
2018-01-17 11:23:05,342 - DEBUG - Starting Pos Mgmt H E
2018-01-17 11:23:05,342 - DEBUG - Connecting to database
2018-01-17 11:23:05,359 - DEBUG - Connected to database
2018-01-17 11:23:05,361 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 11:23:05,361 - DEBUG - Order Profit is 0
2018-01-17 11:23:05,361 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 11:23:05,364 - DEBUG - Stop ID is 0
2018-01-17 11:23:05,364 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 11:23:05,365 - DEBUG - Entry ID is 105
2018-01-17 11:23:05,365 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 11:23:05,367 - DEBUG - OCA ID is 1
2018-01-17 11:23:05,367 - DEBUG - Connecting to IBController
2018-01-17 11:23:06,371 - DEBUG - Connected to IBController
2018-01-17 11:23:06,371 - DEBUG - Position requested
2018-01-17 11:23:06,372 - DEBUG - Pos Mgmt -12987
2018-01-17 11:23:06,372 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211BEF0>, pos=-12987, avgCost=0.95368235>
2018-01-17 11:23:06,374 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 11:23:06,374 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 11:23:06,374 - DEBUG - Position is -12987
2018-01-17 11:23:07,374 - DEBUG - Open Orders requested
2018-01-17 11:23:07,375 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x000000000211BCF8>, order=<ib.ext.Order.Order object at 0x000000000211BC18>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021AF198>>
2018-01-17 11:23:07,377 - DEBUG - Order OrderID 102
2018-01-17 11:23:07,380 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:23:07,380 - DEBUG - Order status PreSubmitted
2018-01-17 11:23:07,381 - DEBUG - Order Identification 102
2018-01-17 11:23:07,381 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:23:07,381 - DEBUG - Profit ID from database is 0
2018-01-17 11:23:07,381 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:23:07,381 - DEBUG - Stop ID database is 0
2018-01-17 11:23:07,381 - DEBUG - Entry ID database is 105
2018-01-17 11:23:07,382 - DEBUG - Reply Handler Orders is <openOrder orderId=104, contract=<ib.ext.Contract.Contract object at 0x000000000211BCF8>, order=<ib.ext.Order.Order object at 0x000000000211BC18>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021AF208>>
2018-01-17 11:23:07,382 - DEBUG - Order OrderID 104
2018-01-17 11:23:07,384 - DEBUG - reply handler status <orderStatus orderId=104, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791157, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:23:07,384 - DEBUG - Order status PreSubmitted
2018-01-17 11:23:07,384 - DEBUG - Order Identification 104
2018-01-17 11:23:07,384 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:23:07,384 - DEBUG - Profit ID from database is 0
2018-01-17 11:23:07,384 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:23:07,384 - DEBUG - Stop ID database is 0
2018-01-17 11:23:07,385 - DEBUG - Entry ID database is 105
2018-01-17 11:23:07,387 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x000000000211BCF8>, order=<ib.ext.Order.Order object at 0x000000000211BC18>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021AF2E8>>
2018-01-17 11:23:07,387 - DEBUG - Order OrderID 103
2018-01-17 11:23:07,387 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:23:07,388 - DEBUG - Order status PreSubmitted
2018-01-17 11:23:07,388 - DEBUG - Order Identification 103
2018-01-17 11:23:07,388 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:23:07,388 - DEBUG - Profit ID from database is 0
2018-01-17 11:23:07,388 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:23:07,388 - DEBUG - Stop ID database is 0
2018-01-17 11:23:07,388 - DEBUG - Entry ID database is 105
2018-01-17 11:23:07,390 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x000000000211BCF8>, order=<ib.ext.Order.Order object at 0x000000000211BC18>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021AF358>>
2018-01-17 11:23:07,390 - DEBUG - Order OrderID 105
2018-01-17 11:23:07,391 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:23:07,391 - DEBUG - Order status PreSubmitted
2018-01-17 11:23:07,391 - DEBUG - Order Identification 105
2018-01-17 11:23:07,391 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:23:07,391 - DEBUG - Profit ID from database is 0
2018-01-17 11:23:07,391 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:23:07,391 - DEBUG - Stop ID database is 0
2018-01-17 11:23:07,391 - DEBUG - Entry ID database is 105
2018-01-17 11:23:07,392 - DEBUG - Entry API ID is 105
2018-01-17 11:23:09,375 - DEBUG - Connecting to database
2018-01-17 11:23:09,381 - DEBUG - Connected to database
2018-01-17 11:23:09,382 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 11:23:09,384 - DEBUG - Stop loss value is 71.82
2018-01-17 11:23:09,384 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 11:23:09,384 - DEBUG - Stop loss value is 85.25
2018-01-17 11:23:09,387 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 11:23:09,387 - DEBUG - EntryPrice value is 74.3
2018-01-17 11:23:09,388 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 11:23:09,388 - DEBUG - Stop quantity 1
2018-01-17 11:23:09,390 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 11:23:09,390 - DEBUG - Direction is Long
2018-01-17 11:23:09,391 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 11:23:09,391 - DEBUG - Count is 0
2018-01-17 11:23:09,392 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 11:23:09,394 - DEBUG - Stop Loss Flag is 0
2018-01-17 11:23:09,394 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 11:23:09,394 - DEBUG - Max ID Order is (105,)
2018-01-17 11:23:09,395 - DEBUG - Today is 2018-01-17
2018-01-17 11:23:09,395 - DEBUG - Day of the week 2
2018-01-17 11:23:09,395 - DEBUG - Yesterday is 01/16/2018
2018-01-17 11:23:09,397 - DEBUG - In Position is  0
2018-01-17 11:23:09,397 - DEBUG - In Position is  <class 'int'>
2018-01-17 11:23:09,397 - DEBUG - curStopLossFlag is  0
2018-01-17 11:23:09,397 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 11:23:09,398 - DEBUG - Checking if Entry has been filled
2018-01-17 11:23:09,398 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 11:23:09,398 - DEBUG - EntryPend is 1
2018-01-17 11:23:09,398 - DEBUG - Try to Cancel Stop
2018-01-17 11:23:09,400 - DEBUG - Stop API ID 0
2018-01-17 11:23:09,400 - DEBUG - Profit API ID 0
2018-01-17 11:23:09,400 - DEBUG - Stop API ID <class 'int'>
2018-01-17 11:23:09,400 - DEBUG - Profit API ID <class 'int'>
2018-01-17 11:23:09,400 - DEBUG - Pos is 0
2018-01-17 11:23:09,401 - DEBUG - CurCount is 0
2018-01-17 11:23:09,401 - DEBUG - In Pos 0
2018-01-17 11:23:09,401 - DEBUG - Stop ID is 0
2018-01-17 11:23:09,401 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 11:23:09,403 - DEBUG - EntryPend is 1
2018-01-17 11:23:09,403 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 11:23:09,403 - DEBUG - Entry Date is 10
2018-01-17 11:23:09,403 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 11:23:09,404 - DEBUG - Order Profit ID is 0
2018-01-17 11:23:09,404 - DEBUG - Order Entry ID is 105
2018-01-17 11:23:09,404 - DEBUG - API ID is  0
2018-01-17 11:23:09,404 - DEBUG - Current Position is 0
2018-01-17 11:23:09,404 - DEBUG - Current Position is <class 'str'>
2018-01-17 11:23:09,404 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 11:23:09,404 - DEBUG - Time is 11
2018-01-17 11:23:09,404 - DEBUG - Time is <class 'int'>
2018-01-17 11:23:09,404 - DEBUG - Time is 23
2018-01-17 11:23:09,404 - DEBUG - Time is <class 'int'>
2018-01-17 11:23:09,405 - DEBUG - Disconnected from IBController
2018-01-17 11:23:09,405 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 11:28:05,345 - DEBUG - ****************************************************
2018-01-17 11:28:05,345 - DEBUG - Current Time is 11:28AM
2018-01-17 11:28:05,346 - DEBUG - Starting Pos Mgmt H E
2018-01-17 11:28:05,346 - DEBUG - Connecting to database
2018-01-17 11:28:05,361 - DEBUG - Connected to database
2018-01-17 11:28:05,361 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 11:28:05,364 - DEBUG - Order Profit is 0
2018-01-17 11:28:05,364 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 11:28:05,365 - DEBUG - Stop ID is 0
2018-01-17 11:28:05,365 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 11:28:05,367 - DEBUG - Entry ID is 105
2018-01-17 11:28:05,368 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 11:28:05,368 - DEBUG - OCA ID is 1
2018-01-17 11:28:05,368 - DEBUG - Connecting to IBController
2018-01-17 11:28:06,374 - DEBUG - Connected to IBController
2018-01-17 11:28:06,374 - DEBUG - Position requested
2018-01-17 11:28:06,375 - DEBUG - Pos Mgmt -12987
2018-01-17 11:28:06,375 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211DAC8>, pos=-12987, avgCost=0.95368235>
2018-01-17 11:28:06,375 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 11:28:06,375 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 11:28:06,377 - DEBUG - Position is -12987
2018-01-17 11:28:07,375 - DEBUG - Open Orders requested
2018-01-17 11:28:07,377 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x000000000211DE10>, order=<ib.ext.Order.Order object at 0x000000000211DC88>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B0208>>
2018-01-17 11:28:07,377 - DEBUG - Order OrderID 102
2018-01-17 11:28:07,378 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:28:07,378 - DEBUG - Order status PreSubmitted
2018-01-17 11:28:07,378 - DEBUG - Order Identification 102
2018-01-17 11:28:07,378 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:28:07,378 - DEBUG - Profit ID from database is 0
2018-01-17 11:28:07,378 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:28:07,378 - DEBUG - Stop ID database is 0
2018-01-17 11:28:07,380 - DEBUG - Entry ID database is 105
2018-01-17 11:28:07,381 - DEBUG - Reply Handler Orders is <openOrder orderId=104, contract=<ib.ext.Contract.Contract object at 0x000000000211DE10>, order=<ib.ext.Order.Order object at 0x000000000211DC88>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B00B8>>
2018-01-17 11:28:07,381 - DEBUG - Order OrderID 104
2018-01-17 11:28:07,381 - DEBUG - reply handler status <orderStatus orderId=104, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791157, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:28:07,381 - DEBUG - Order status PreSubmitted
2018-01-17 11:28:07,381 - DEBUG - Order Identification 104
2018-01-17 11:28:07,381 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:28:07,381 - DEBUG - Profit ID from database is 0
2018-01-17 11:28:07,382 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:28:07,382 - DEBUG - Stop ID database is 0
2018-01-17 11:28:07,385 - DEBUG - Entry ID database is 105
2018-01-17 11:28:07,387 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x000000000211DE10>, order=<ib.ext.Order.Order object at 0x000000000211DC88>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B0278>>
2018-01-17 11:28:07,387 - DEBUG - Order OrderID 103
2018-01-17 11:28:07,388 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:28:07,388 - DEBUG - Order status PreSubmitted
2018-01-17 11:28:07,388 - DEBUG - Order Identification 103
2018-01-17 11:28:07,388 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:28:07,388 - DEBUG - Profit ID from database is 0
2018-01-17 11:28:07,388 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:28:07,388 - DEBUG - Stop ID database is 0
2018-01-17 11:28:07,388 - DEBUG - Entry ID database is 105
2018-01-17 11:28:07,391 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x000000000211DE10>, order=<ib.ext.Order.Order object at 0x000000000211DC88>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B0358>>
2018-01-17 11:28:07,391 - DEBUG - Order OrderID 105
2018-01-17 11:28:07,391 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:28:07,391 - DEBUG - Order status PreSubmitted
2018-01-17 11:28:07,391 - DEBUG - Order Identification 105
2018-01-17 11:28:07,391 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:28:07,391 - DEBUG - Profit ID from database is 0
2018-01-17 11:28:07,392 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:28:07,392 - DEBUG - Stop ID database is 0
2018-01-17 11:28:07,392 - DEBUG - Entry ID database is 105
2018-01-17 11:28:07,392 - DEBUG - Entry API ID is 105
2018-01-17 11:28:09,377 - DEBUG - Connecting to database
2018-01-17 11:28:09,384 - DEBUG - Connected to database
2018-01-17 11:28:09,384 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 11:28:09,385 - DEBUG - Stop loss value is 71.82
2018-01-17 11:28:09,387 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 11:28:09,388 - DEBUG - Stop loss value is 85.25
2018-01-17 11:28:09,388 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 11:28:09,388 - DEBUG - EntryPrice value is 74.3
2018-01-17 11:28:09,391 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 11:28:09,391 - DEBUG - Stop quantity 1
2018-01-17 11:28:09,391 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 11:28:09,392 - DEBUG - Direction is Long
2018-01-17 11:28:09,394 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 11:28:09,394 - DEBUG - Count is 0
2018-01-17 11:28:09,394 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 11:28:09,395 - DEBUG - Stop Loss Flag is 0
2018-01-17 11:28:09,397 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 11:28:09,397 - DEBUG - Max ID Order is (105,)
2018-01-17 11:28:09,398 - DEBUG - Today is 2018-01-17
2018-01-17 11:28:09,398 - DEBUG - Day of the week 2
2018-01-17 11:28:09,400 - DEBUG - Yesterday is 01/16/2018
2018-01-17 11:28:09,401 - DEBUG - In Position is  0
2018-01-17 11:28:09,401 - DEBUG - In Position is  <class 'int'>
2018-01-17 11:28:09,401 - DEBUG - curStopLossFlag is  0
2018-01-17 11:28:09,401 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 11:28:09,401 - DEBUG - Checking if Entry has been filled
2018-01-17 11:28:09,401 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 11:28:09,403 - DEBUG - EntryPend is 1
2018-01-17 11:28:09,403 - DEBUG - Try to Cancel Stop
2018-01-17 11:28:09,404 - DEBUG - Stop API ID 0
2018-01-17 11:28:09,404 - DEBUG - Profit API ID 0
2018-01-17 11:28:09,407 - DEBUG - Stop API ID <class 'int'>
2018-01-17 11:28:09,407 - DEBUG - Profit API ID <class 'int'>
2018-01-17 11:28:09,407 - DEBUG - Pos is 0
2018-01-17 11:28:09,407 - DEBUG - CurCount is 0
2018-01-17 11:28:09,408 - DEBUG - In Pos 0
2018-01-17 11:28:09,408 - DEBUG - Stop ID is 0
2018-01-17 11:28:09,408 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 11:28:09,411 - DEBUG - EntryPend is 1
2018-01-17 11:28:09,411 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 11:28:09,413 - DEBUG - Entry Date is 10
2018-01-17 11:28:09,413 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 11:28:09,414 - DEBUG - Order Profit ID is 0
2018-01-17 11:28:09,414 - DEBUG - Order Entry ID is 105
2018-01-17 11:28:09,414 - DEBUG - API ID is  0
2018-01-17 11:28:09,414 - DEBUG - Current Position is 0
2018-01-17 11:28:09,414 - DEBUG - Current Position is <class 'str'>
2018-01-17 11:28:09,414 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 11:28:09,414 - DEBUG - Time is 11
2018-01-17 11:28:09,414 - DEBUG - Time is <class 'int'>
2018-01-17 11:28:09,414 - DEBUG - Time is 28
2018-01-17 11:28:09,415 - DEBUG - Time is <class 'int'>
2018-01-17 11:28:09,415 - DEBUG - Disconnected from IBController
2018-01-17 11:28:09,417 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 11:33:05,339 - DEBUG - ****************************************************
2018-01-17 11:33:05,339 - DEBUG - Current Time is 11:33AM
2018-01-17 11:33:05,341 - DEBUG - Starting Pos Mgmt H E
2018-01-17 11:33:05,341 - DEBUG - Connecting to database
2018-01-17 11:33:05,358 - DEBUG - Connected to database
2018-01-17 11:33:05,358 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 11:33:05,361 - DEBUG - Order Profit is 0
2018-01-17 11:33:05,361 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 11:33:05,362 - DEBUG - Stop ID is 0
2018-01-17 11:33:05,362 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 11:33:05,364 - DEBUG - Entry ID is 105
2018-01-17 11:33:05,364 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 11:33:05,365 - DEBUG - OCA ID is 1
2018-01-17 11:33:05,365 - DEBUG - Connecting to IBController
2018-01-17 11:33:06,371 - DEBUG - Connected to IBController
2018-01-17 11:33:06,371 - DEBUG - Position requested
2018-01-17 11:33:06,371 - DEBUG - Pos Mgmt -12987
2018-01-17 11:33:06,372 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FDA58>, pos=-12987, avgCost=0.95368235>
2018-01-17 11:33:06,372 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 11:33:06,372 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 11:33:06,372 - DEBUG - Position is -12987
2018-01-17 11:33:07,371 - DEBUG - Open Orders requested
2018-01-17 11:33:07,374 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x00000000020FDE10>, order=<ib.ext.Order.Order object at 0x00000000020FDDD8>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002190208>>
2018-01-17 11:33:07,375 - DEBUG - Order OrderID 102
2018-01-17 11:33:07,375 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:33:07,375 - DEBUG - Order status PreSubmitted
2018-01-17 11:33:07,375 - DEBUG - Order Identification 102
2018-01-17 11:33:07,375 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:33:07,377 - DEBUG - Profit ID from database is 0
2018-01-17 11:33:07,377 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:33:07,377 - DEBUG - Stop ID database is 0
2018-01-17 11:33:07,377 - DEBUG - Entry ID database is 105
2018-01-17 11:33:07,378 - DEBUG - Reply Handler Orders is <openOrder orderId=104, contract=<ib.ext.Contract.Contract object at 0x00000000020FDE10>, order=<ib.ext.Order.Order object at 0x00000000020FDDD8>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002190080>>
2018-01-17 11:33:07,378 - DEBUG - Order OrderID 104
2018-01-17 11:33:07,378 - DEBUG - reply handler status <orderStatus orderId=104, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791157, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:33:07,380 - DEBUG - Order status PreSubmitted
2018-01-17 11:33:07,380 - DEBUG - Order Identification 104
2018-01-17 11:33:07,380 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:33:07,380 - DEBUG - Profit ID from database is 0
2018-01-17 11:33:07,380 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:33:07,381 - DEBUG - Stop ID database is 0
2018-01-17 11:33:07,381 - DEBUG - Entry ID database is 105
2018-01-17 11:33:07,381 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x00000000020FDE10>, order=<ib.ext.Order.Order object at 0x00000000020FDDD8>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002190278>>
2018-01-17 11:33:07,381 - DEBUG - Order OrderID 103
2018-01-17 11:33:07,382 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:33:07,382 - DEBUG - Order status PreSubmitted
2018-01-17 11:33:07,382 - DEBUG - Order Identification 103
2018-01-17 11:33:07,384 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:33:07,384 - DEBUG - Profit ID from database is 0
2018-01-17 11:33:07,384 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:33:07,384 - DEBUG - Stop ID database is 0
2018-01-17 11:33:07,384 - DEBUG - Entry ID database is 105
2018-01-17 11:33:07,385 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x00000000020FDE10>, order=<ib.ext.Order.Order object at 0x00000000020FDDD8>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002190358>>
2018-01-17 11:33:07,385 - DEBUG - Order OrderID 105
2018-01-17 11:33:07,385 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:33:07,387 - DEBUG - Order status PreSubmitted
2018-01-17 11:33:07,387 - DEBUG - Order Identification 105
2018-01-17 11:33:07,387 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:33:07,388 - DEBUG - Profit ID from database is 0
2018-01-17 11:33:07,388 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:33:07,388 - DEBUG - Stop ID database is 0
2018-01-17 11:33:07,388 - DEBUG - Entry ID database is 105
2018-01-17 11:33:07,388 - DEBUG - Entry API ID is 105
2018-01-17 11:33:09,375 - DEBUG - Connecting to database
2018-01-17 11:33:09,382 - DEBUG - Connected to database
2018-01-17 11:33:09,384 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 11:33:09,384 - DEBUG - Stop loss value is 71.82
2018-01-17 11:33:09,385 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 11:33:09,385 - DEBUG - Stop loss value is 85.25
2018-01-17 11:33:09,387 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 11:33:09,388 - DEBUG - EntryPrice value is 74.3
2018-01-17 11:33:09,388 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 11:33:09,388 - DEBUG - Stop quantity 1
2018-01-17 11:33:09,391 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 11:33:09,391 - DEBUG - Direction is Long
2018-01-17 11:33:09,391 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 11:33:09,392 - DEBUG - Count is 0
2018-01-17 11:33:09,394 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 11:33:09,394 - DEBUG - Stop Loss Flag is 0
2018-01-17 11:33:09,395 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 11:33:09,395 - DEBUG - Max ID Order is (105,)
2018-01-17 11:33:09,395 - DEBUG - Today is 2018-01-17
2018-01-17 11:33:09,397 - DEBUG - Day of the week 2
2018-01-17 11:33:09,397 - DEBUG - Yesterday is 01/16/2018
2018-01-17 11:33:09,397 - DEBUG - In Position is  0
2018-01-17 11:33:09,397 - DEBUG - In Position is  <class 'int'>
2018-01-17 11:33:09,398 - DEBUG - curStopLossFlag is  0
2018-01-17 11:33:09,398 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 11:33:09,398 - DEBUG - Checking if Entry has been filled
2018-01-17 11:33:09,398 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 11:33:09,400 - DEBUG - EntryPend is 1
2018-01-17 11:33:09,400 - DEBUG - Try to Cancel Stop
2018-01-17 11:33:09,400 - DEBUG - Stop API ID 0
2018-01-17 11:33:09,400 - DEBUG - Profit API ID 0
2018-01-17 11:33:09,401 - DEBUG - Stop API ID <class 'int'>
2018-01-17 11:33:09,401 - DEBUG - Profit API ID <class 'int'>
2018-01-17 11:33:09,401 - DEBUG - Pos is 0
2018-01-17 11:33:09,401 - DEBUG - CurCount is 0
2018-01-17 11:33:09,401 - DEBUG - In Pos 0
2018-01-17 11:33:09,401 - DEBUG - Stop ID is 0
2018-01-17 11:33:09,401 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 11:33:09,404 - DEBUG - EntryPend is 1
2018-01-17 11:33:09,404 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 11:33:09,404 - DEBUG - Entry Date is 10
2018-01-17 11:33:09,404 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 11:33:09,404 - DEBUG - Order Profit ID is 0
2018-01-17 11:33:09,404 - DEBUG - Order Entry ID is 105
2018-01-17 11:33:09,404 - DEBUG - API ID is  0
2018-01-17 11:33:09,404 - DEBUG - Current Position is 0
2018-01-17 11:33:09,404 - DEBUG - Current Position is <class 'str'>
2018-01-17 11:33:09,404 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 11:33:09,405 - DEBUG - Time is 11
2018-01-17 11:33:09,405 - DEBUG - Time is <class 'int'>
2018-01-17 11:33:09,405 - DEBUG - Time is 33
2018-01-17 11:33:09,405 - DEBUG - Time is <class 'int'>
2018-01-17 11:33:09,405 - DEBUG - Disconnected from IBController
2018-01-17 11:33:09,407 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 11:38:05,351 - DEBUG - ****************************************************
2018-01-17 11:38:05,351 - DEBUG - Current Time is 11:38AM
2018-01-17 11:38:05,351 - DEBUG - Starting Pos Mgmt H E
2018-01-17 11:38:05,351 - DEBUG - Connecting to database
2018-01-17 11:38:05,377 - DEBUG - Connected to database
2018-01-17 11:38:05,377 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 11:38:05,378 - DEBUG - Order Profit is 0
2018-01-17 11:38:05,378 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 11:38:05,381 - DEBUG - Stop ID is 0
2018-01-17 11:38:05,381 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 11:38:05,381 - DEBUG - Entry ID is 105
2018-01-17 11:38:05,382 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 11:38:05,384 - DEBUG - OCA ID is 1
2018-01-17 11:38:05,384 - DEBUG - Connecting to IBController
2018-01-17 11:38:06,387 - DEBUG - Connected to IBController
2018-01-17 11:38:06,387 - DEBUG - Position requested
2018-01-17 11:38:06,388 - DEBUG - Pos Mgmt -12987
2018-01-17 11:38:06,388 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000213DCF8>, pos=-12987, avgCost=0.95368235>
2018-01-17 11:38:06,388 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 11:38:06,388 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 11:38:06,390 - DEBUG - Position is -12987
2018-01-17 11:38:07,388 - DEBUG - Open Orders requested
2018-01-17 11:38:07,394 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x000000000213DDD8>, order=<ib.ext.Order.Order object at 0x000000000213DAC8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021D0198>>
2018-01-17 11:38:07,395 - DEBUG - Order OrderID 102
2018-01-17 11:38:07,395 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:38:07,397 - DEBUG - Order status PreSubmitted
2018-01-17 11:38:07,397 - DEBUG - Order Identification 102
2018-01-17 11:38:07,397 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:38:07,398 - DEBUG - Profit ID from database is 0
2018-01-17 11:38:07,398 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:38:07,398 - DEBUG - Stop ID database is 0
2018-01-17 11:38:07,398 - DEBUG - Entry ID database is 105
2018-01-17 11:38:07,398 - DEBUG - Reply Handler Orders is <openOrder orderId=104, contract=<ib.ext.Contract.Contract object at 0x000000000213DDD8>, order=<ib.ext.Order.Order object at 0x000000000213DAC8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021D0208>>
2018-01-17 11:38:07,400 - DEBUG - Order OrderID 104
2018-01-17 11:38:07,400 - DEBUG - reply handler status <orderStatus orderId=104, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791157, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:38:07,400 - DEBUG - Order status PreSubmitted
2018-01-17 11:38:07,401 - DEBUG - Order Identification 104
2018-01-17 11:38:07,401 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:38:07,401 - DEBUG - Profit ID from database is 0
2018-01-17 11:38:07,401 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:38:07,401 - DEBUG - Stop ID database is 0
2018-01-17 11:38:07,401 - DEBUG - Entry ID database is 105
2018-01-17 11:38:07,403 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x000000000213DDD8>, order=<ib.ext.Order.Order object at 0x000000000213DAC8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021D02E8>>
2018-01-17 11:38:07,410 - DEBUG - Order OrderID 103
2018-01-17 11:38:07,410 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:38:07,410 - DEBUG - Order status PreSubmitted
2018-01-17 11:38:07,411 - DEBUG - Order Identification 103
2018-01-17 11:38:07,411 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:38:07,411 - DEBUG - Profit ID from database is 0
2018-01-17 11:38:07,411 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:38:07,411 - DEBUG - Stop ID database is 0
2018-01-17 11:38:07,411 - DEBUG - Entry ID database is 105
2018-01-17 11:38:07,413 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x000000000213DDD8>, order=<ib.ext.Order.Order object at 0x000000000213DAC8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021D0358>>
2018-01-17 11:38:07,413 - DEBUG - Order OrderID 105
2018-01-17 11:38:07,413 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:38:07,414 - DEBUG - Order status PreSubmitted
2018-01-17 11:38:07,414 - DEBUG - Order Identification 105
2018-01-17 11:38:07,414 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:38:07,414 - DEBUG - Profit ID from database is 0
2018-01-17 11:38:07,414 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:38:07,414 - DEBUG - Stop ID database is 0
2018-01-17 11:38:07,414 - DEBUG - Entry ID database is 105
2018-01-17 11:38:07,414 - DEBUG - Entry API ID is 105
2018-01-17 11:38:09,388 - DEBUG - Connecting to database
2018-01-17 11:38:09,395 - DEBUG - Connected to database
2018-01-17 11:38:09,397 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 11:38:09,398 - DEBUG - Stop loss value is 71.82
2018-01-17 11:38:09,398 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 11:38:09,400 - DEBUG - Stop loss value is 85.25
2018-01-17 11:38:09,401 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 11:38:09,401 - DEBUG - EntryPrice value is 74.3
2018-01-17 11:38:09,403 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 11:38:09,403 - DEBUG - Stop quantity 1
2018-01-17 11:38:09,404 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 11:38:09,404 - DEBUG - Direction is Long
2018-01-17 11:38:09,405 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 11:38:09,405 - DEBUG - Count is 0
2018-01-17 11:38:09,407 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 11:38:09,407 - DEBUG - Stop Loss Flag is 0
2018-01-17 11:38:09,408 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 11:38:09,408 - DEBUG - Max ID Order is (105,)
2018-01-17 11:38:09,410 - DEBUG - Today is 2018-01-17
2018-01-17 11:38:09,410 - DEBUG - Day of the week 2
2018-01-17 11:38:09,410 - DEBUG - Yesterday is 01/16/2018
2018-01-17 11:38:09,411 - DEBUG - In Position is  0
2018-01-17 11:38:09,411 - DEBUG - In Position is  <class 'int'>
2018-01-17 11:38:09,411 - DEBUG - curStopLossFlag is  0
2018-01-17 11:38:09,411 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 11:38:09,411 - DEBUG - Checking if Entry has been filled
2018-01-17 11:38:09,411 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 11:38:09,413 - DEBUG - EntryPend is 1
2018-01-17 11:38:09,413 - DEBUG - Try to Cancel Stop
2018-01-17 11:38:09,414 - DEBUG - Stop API ID 0
2018-01-17 11:38:09,414 - DEBUG - Profit API ID 0
2018-01-17 11:38:09,414 - DEBUG - Stop API ID <class 'int'>
2018-01-17 11:38:09,414 - DEBUG - Profit API ID <class 'int'>
2018-01-17 11:38:09,414 - DEBUG - Pos is 0
2018-01-17 11:38:09,414 - DEBUG - CurCount is 0
2018-01-17 11:38:09,414 - DEBUG - In Pos 0
2018-01-17 11:38:09,414 - DEBUG - Stop ID is 0
2018-01-17 11:38:09,414 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 11:38:09,417 - DEBUG - EntryPend is 1
2018-01-17 11:38:09,417 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 11:38:09,417 - DEBUG - Entry Date is 10
2018-01-17 11:38:09,417 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 11:38:09,417 - DEBUG - Order Profit ID is 0
2018-01-17 11:38:09,417 - DEBUG - Order Entry ID is 105
2018-01-17 11:38:09,417 - DEBUG - API ID is  0
2018-01-17 11:38:09,417 - DEBUG - Current Position is 0
2018-01-17 11:38:09,417 - DEBUG - Current Position is <class 'str'>
2018-01-17 11:38:09,417 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 11:38:09,418 - DEBUG - Time is 11
2018-01-17 11:38:09,418 - DEBUG - Time is <class 'int'>
2018-01-17 11:38:09,418 - DEBUG - Time is 38
2018-01-17 11:38:09,418 - DEBUG - Time is <class 'int'>
2018-01-17 11:38:09,418 - DEBUG - Disconnected from IBController
2018-01-17 11:38:09,420 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 11:43:05,342 - DEBUG - ****************************************************
2018-01-17 11:43:05,342 - DEBUG - Current Time is 11:43AM
2018-01-17 11:43:05,342 - DEBUG - Starting Pos Mgmt H E
2018-01-17 11:43:05,342 - DEBUG - Connecting to database
2018-01-17 11:43:05,358 - DEBUG - Connected to database
2018-01-17 11:43:05,359 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 11:43:05,361 - DEBUG - Order Profit is 0
2018-01-17 11:43:05,361 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 11:43:05,362 - DEBUG - Stop ID is 0
2018-01-17 11:43:05,362 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 11:43:05,364 - DEBUG - Entry ID is 105
2018-01-17 11:43:05,365 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 11:43:05,365 - DEBUG - OCA ID is 1
2018-01-17 11:43:05,365 - DEBUG - Connecting to IBController
2018-01-17 11:43:06,371 - DEBUG - Connected to IBController
2018-01-17 11:43:06,371 - DEBUG - Position requested
2018-01-17 11:43:06,372 - DEBUG - Pos Mgmt -12987
2018-01-17 11:43:06,374 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000218DA58>, pos=-12987, avgCost=0.95368235>
2018-01-17 11:43:06,374 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 11:43:06,374 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 11:43:06,374 - DEBUG - Position is -12987
2018-01-17 11:43:07,372 - DEBUG - Open Orders requested
2018-01-17 11:43:07,374 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x000000000218DE10>, order=<ib.ext.Order.Order object at 0x000000000218DD68>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002220208>>
2018-01-17 11:43:07,375 - DEBUG - Order OrderID 102
2018-01-17 11:43:07,375 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:43:07,375 - DEBUG - Order status PreSubmitted
2018-01-17 11:43:07,375 - DEBUG - Order Identification 102
2018-01-17 11:43:07,375 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:43:07,377 - DEBUG - Profit ID from database is 0
2018-01-17 11:43:07,377 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:43:07,377 - DEBUG - Stop ID database is 0
2018-01-17 11:43:07,377 - DEBUG - Entry ID database is 105
2018-01-17 11:43:07,378 - DEBUG - Reply Handler Orders is <openOrder orderId=104, contract=<ib.ext.Contract.Contract object at 0x000000000218DE10>, order=<ib.ext.Order.Order object at 0x000000000218DD68>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002220080>>
2018-01-17 11:43:07,378 - DEBUG - Order OrderID 104
2018-01-17 11:43:07,378 - DEBUG - reply handler status <orderStatus orderId=104, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791157, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:43:07,380 - DEBUG - Order status PreSubmitted
2018-01-17 11:43:07,380 - DEBUG - Order Identification 104
2018-01-17 11:43:07,380 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:43:07,380 - DEBUG - Profit ID from database is 0
2018-01-17 11:43:07,380 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:43:07,381 - DEBUG - Stop ID database is 0
2018-01-17 11:43:07,381 - DEBUG - Entry ID database is 105
2018-01-17 11:43:07,381 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x000000000218DE10>, order=<ib.ext.Order.Order object at 0x000000000218DD68>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002220278>>
2018-01-17 11:43:07,381 - DEBUG - Order OrderID 103
2018-01-17 11:43:07,381 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:43:07,382 - DEBUG - Order status PreSubmitted
2018-01-17 11:43:07,382 - DEBUG - Order Identification 103
2018-01-17 11:43:07,382 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:43:07,382 - DEBUG - Profit ID from database is 0
2018-01-17 11:43:07,384 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:43:07,384 - DEBUG - Stop ID database is 0
2018-01-17 11:43:07,384 - DEBUG - Entry ID database is 105
2018-01-17 11:43:07,384 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x000000000218DE10>, order=<ib.ext.Order.Order object at 0x000000000218DD68>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002220358>>
2018-01-17 11:43:07,384 - DEBUG - Order OrderID 105
2018-01-17 11:43:07,385 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:43:07,385 - DEBUG - Order status PreSubmitted
2018-01-17 11:43:07,385 - DEBUG - Order Identification 105
2018-01-17 11:43:07,387 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:43:07,387 - DEBUG - Profit ID from database is 0
2018-01-17 11:43:07,387 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:43:07,387 - DEBUG - Stop ID database is 0
2018-01-17 11:43:07,388 - DEBUG - Entry ID database is 105
2018-01-17 11:43:07,388 - DEBUG - Entry API ID is 105
2018-01-17 11:43:09,375 - DEBUG - Connecting to database
2018-01-17 11:43:09,384 - DEBUG - Connected to database
2018-01-17 11:43:09,387 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 11:43:09,387 - DEBUG - Stop loss value is 71.82
2018-01-17 11:43:09,388 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 11:43:09,388 - DEBUG - Stop loss value is 85.25
2018-01-17 11:43:09,390 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 11:43:09,391 - DEBUG - EntryPrice value is 74.3
2018-01-17 11:43:09,391 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 11:43:09,391 - DEBUG - Stop quantity 1
2018-01-17 11:43:09,394 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 11:43:09,394 - DEBUG - Direction is Long
2018-01-17 11:43:09,394 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 11:43:09,395 - DEBUG - Count is 0
2018-01-17 11:43:09,397 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 11:43:09,397 - DEBUG - Stop Loss Flag is 0
2018-01-17 11:43:09,398 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 11:43:09,398 - DEBUG - Max ID Order is (105,)
2018-01-17 11:43:09,398 - DEBUG - Today is 2018-01-17
2018-01-17 11:43:09,400 - DEBUG - Day of the week 2
2018-01-17 11:43:09,400 - DEBUG - Yesterday is 01/16/2018
2018-01-17 11:43:09,400 - DEBUG - In Position is  0
2018-01-17 11:43:09,400 - DEBUG - In Position is  <class 'int'>
2018-01-17 11:43:09,401 - DEBUG - curStopLossFlag is  0
2018-01-17 11:43:09,401 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 11:43:09,401 - DEBUG - Checking if Entry has been filled
2018-01-17 11:43:09,401 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 11:43:09,403 - DEBUG - EntryPend is 1
2018-01-17 11:43:09,403 - DEBUG - Try to Cancel Stop
2018-01-17 11:43:09,403 - DEBUG - Stop API ID 0
2018-01-17 11:43:09,403 - DEBUG - Profit API ID 0
2018-01-17 11:43:09,404 - DEBUG - Stop API ID <class 'int'>
2018-01-17 11:43:09,404 - DEBUG - Profit API ID <class 'int'>
2018-01-17 11:43:09,404 - DEBUG - Pos is 0
2018-01-17 11:43:09,404 - DEBUG - CurCount is 0
2018-01-17 11:43:09,404 - DEBUG - In Pos 0
2018-01-17 11:43:09,404 - DEBUG - Stop ID is 0
2018-01-17 11:43:09,404 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 11:43:09,405 - DEBUG - EntryPend is 1
2018-01-17 11:43:09,405 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 11:43:09,407 - DEBUG - Entry Date is 10
2018-01-17 11:43:09,407 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 11:43:09,407 - DEBUG - Order Profit ID is 0
2018-01-17 11:43:09,407 - DEBUG - Order Entry ID is 105
2018-01-17 11:43:09,407 - DEBUG - API ID is  0
2018-01-17 11:43:09,407 - DEBUG - Current Position is 0
2018-01-17 11:43:09,407 - DEBUG - Current Position is <class 'str'>
2018-01-17 11:43:09,407 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 11:43:09,407 - DEBUG - Time is 11
2018-01-17 11:43:09,407 - DEBUG - Time is <class 'int'>
2018-01-17 11:43:09,408 - DEBUG - Time is 43
2018-01-17 11:43:09,408 - DEBUG - Time is <class 'int'>
2018-01-17 11:43:09,408 - DEBUG - Disconnected from IBController
2018-01-17 11:43:09,408 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 11:48:05,344 - DEBUG - ****************************************************
2018-01-17 11:48:05,345 - DEBUG - Current Time is 11:48AM
2018-01-17 11:48:05,345 - DEBUG - Starting Pos Mgmt H E
2018-01-17 11:48:05,345 - DEBUG - Connecting to database
2018-01-17 11:48:05,368 - DEBUG - Connected to database
2018-01-17 11:48:05,368 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 11:48:05,369 - DEBUG - Order Profit is 0
2018-01-17 11:48:05,371 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 11:48:05,372 - DEBUG - Stop ID is 0
2018-01-17 11:48:05,372 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 11:48:05,375 - DEBUG - Entry ID is 105
2018-01-17 11:48:05,375 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 11:48:05,375 - DEBUG - OCA ID is 1
2018-01-17 11:48:05,377 - DEBUG - Connecting to IBController
2018-01-17 11:48:06,384 - DEBUG - Connected to IBController
2018-01-17 11:48:06,384 - DEBUG - Position requested
2018-01-17 11:48:06,385 - DEBUG - Pos Mgmt -12987
2018-01-17 11:48:06,387 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211CC88>, pos=-12987, avgCost=0.95368235>
2018-01-17 11:48:06,387 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 11:48:06,387 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 11:48:06,388 - DEBUG - Position is -12987
2018-01-17 11:48:07,385 - DEBUG - Open Orders requested
2018-01-17 11:48:07,388 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x000000000211CD68>, order=<ib.ext.Order.Order object at 0x000000000211CBE0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B0208>>
2018-01-17 11:48:07,388 - DEBUG - Order OrderID 102
2018-01-17 11:48:07,390 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:48:07,390 - DEBUG - Order status PreSubmitted
2018-01-17 11:48:07,390 - DEBUG - Order Identification 102
2018-01-17 11:48:07,391 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:48:07,391 - DEBUG - Profit ID from database is 0
2018-01-17 11:48:07,391 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:48:07,391 - DEBUG - Stop ID database is 0
2018-01-17 11:48:07,391 - DEBUG - Entry ID database is 105
2018-01-17 11:48:07,392 - DEBUG - Reply Handler Orders is <openOrder orderId=104, contract=<ib.ext.Contract.Contract object at 0x000000000211CD68>, order=<ib.ext.Order.Order object at 0x000000000211CBE0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B00B8>>
2018-01-17 11:48:07,392 - DEBUG - Order OrderID 104
2018-01-17 11:48:07,392 - DEBUG - reply handler status <orderStatus orderId=104, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791157, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:48:07,394 - DEBUG - Order status PreSubmitted
2018-01-17 11:48:07,394 - DEBUG - Order Identification 104
2018-01-17 11:48:07,394 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:48:07,394 - DEBUG - Profit ID from database is 0
2018-01-17 11:48:07,394 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:48:07,394 - DEBUG - Stop ID database is 0
2018-01-17 11:48:07,394 - DEBUG - Entry ID database is 105
2018-01-17 11:48:07,395 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x000000000211CD68>, order=<ib.ext.Order.Order object at 0x000000000211CBE0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B0278>>
2018-01-17 11:48:07,397 - DEBUG - Order OrderID 103
2018-01-17 11:48:07,397 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:48:07,397 - DEBUG - Order status PreSubmitted
2018-01-17 11:48:07,397 - DEBUG - Order Identification 103
2018-01-17 11:48:07,398 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:48:07,398 - DEBUG - Profit ID from database is 0
2018-01-17 11:48:07,398 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:48:07,398 - DEBUG - Stop ID database is 0
2018-01-17 11:48:07,398 - DEBUG - Entry ID database is 105
2018-01-17 11:48:07,400 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x000000000211CD68>, order=<ib.ext.Order.Order object at 0x000000000211CBE0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B0358>>
2018-01-17 11:48:07,400 - DEBUG - Order OrderID 105
2018-01-17 11:48:07,401 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:48:07,401 - DEBUG - Order status PreSubmitted
2018-01-17 11:48:07,401 - DEBUG - Order Identification 105
2018-01-17 11:48:07,401 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:48:07,401 - DEBUG - Profit ID from database is 0
2018-01-17 11:48:07,401 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:48:07,401 - DEBUG - Stop ID database is 0
2018-01-17 11:48:07,401 - DEBUG - Entry ID database is 105
2018-01-17 11:48:07,403 - DEBUG - Entry API ID is 105
2018-01-17 11:48:09,388 - DEBUG - Connecting to database
2018-01-17 11:48:09,395 - DEBUG - Connected to database
2018-01-17 11:48:09,397 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 11:48:09,398 - DEBUG - Stop loss value is 71.82
2018-01-17 11:48:09,398 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 11:48:09,400 - DEBUG - Stop loss value is 85.25
2018-01-17 11:48:09,401 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 11:48:09,401 - DEBUG - EntryPrice value is 74.3
2018-01-17 11:48:09,403 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 11:48:09,403 - DEBUG - Stop quantity 1
2018-01-17 11:48:09,404 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 11:48:09,404 - DEBUG - Direction is Long
2018-01-17 11:48:09,405 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 11:48:09,405 - DEBUG - Count is 0
2018-01-17 11:48:09,407 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 11:48:09,407 - DEBUG - Stop Loss Flag is 0
2018-01-17 11:48:09,408 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 11:48:09,408 - DEBUG - Max ID Order is (105,)
2018-01-17 11:48:09,410 - DEBUG - Today is 2018-01-17
2018-01-17 11:48:09,410 - DEBUG - Day of the week 2
2018-01-17 11:48:09,411 - DEBUG - Yesterday is 01/16/2018
2018-01-17 11:48:09,411 - DEBUG - In Position is  0
2018-01-17 11:48:09,411 - DEBUG - In Position is  <class 'int'>
2018-01-17 11:48:09,411 - DEBUG - curStopLossFlag is  0
2018-01-17 11:48:09,411 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 11:48:09,411 - DEBUG - Checking if Entry has been filled
2018-01-17 11:48:09,411 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 11:48:09,413 - DEBUG - EntryPend is 1
2018-01-17 11:48:09,414 - DEBUG - Try to Cancel Stop
2018-01-17 11:48:09,414 - DEBUG - Stop API ID 0
2018-01-17 11:48:09,414 - DEBUG - Profit API ID 0
2018-01-17 11:48:09,414 - DEBUG - Stop API ID <class 'int'>
2018-01-17 11:48:09,414 - DEBUG - Profit API ID <class 'int'>
2018-01-17 11:48:09,414 - DEBUG - Pos is 0
2018-01-17 11:48:09,414 - DEBUG - CurCount is 0
2018-01-17 11:48:09,414 - DEBUG - In Pos 0
2018-01-17 11:48:09,414 - DEBUG - Stop ID is 0
2018-01-17 11:48:09,415 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 11:48:09,417 - DEBUG - EntryPend is 1
2018-01-17 11:48:09,417 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 11:48:09,417 - DEBUG - Entry Date is 10
2018-01-17 11:48:09,417 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 11:48:09,417 - DEBUG - Order Profit ID is 0
2018-01-17 11:48:09,417 - DEBUG - Order Entry ID is 105
2018-01-17 11:48:09,417 - DEBUG - API ID is  0
2018-01-17 11:48:09,418 - DEBUG - Current Position is 0
2018-01-17 11:48:09,418 - DEBUG - Current Position is <class 'str'>
2018-01-17 11:48:09,418 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 11:48:09,418 - DEBUG - Time is 11
2018-01-17 11:48:09,418 - DEBUG - Time is <class 'int'>
2018-01-17 11:48:09,418 - DEBUG - Time is 48
2018-01-17 11:48:09,420 - DEBUG - Time is <class 'int'>
2018-01-17 11:48:09,420 - DEBUG - Disconnected from IBController
2018-01-17 11:48:09,420 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 11:53:05,380 - DEBUG - ****************************************************
2018-01-17 11:53:05,380 - DEBUG - Current Time is 11:53AM
2018-01-17 11:53:05,381 - DEBUG - Starting Pos Mgmt H E
2018-01-17 11:53:05,381 - DEBUG - Connecting to database
2018-01-17 11:53:05,410 - DEBUG - Connected to database
2018-01-17 11:53:05,410 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 11:53:05,411 - DEBUG - Order Profit is 0
2018-01-17 11:53:05,411 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 11:53:05,413 - DEBUG - Stop ID is 0
2018-01-17 11:53:05,413 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 11:53:05,414 - DEBUG - Entry ID is 105
2018-01-17 11:53:05,414 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 11:53:05,415 - DEBUG - OCA ID is 1
2018-01-17 11:53:05,417 - DEBUG - Connecting to IBController
2018-01-17 11:53:06,421 - DEBUG - Connected to IBController
2018-01-17 11:53:06,421 - DEBUG - Position requested
2018-01-17 11:53:06,421 - DEBUG - Pos Mgmt -12987
2018-01-17 11:53:06,423 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211DC50>, pos=-12987, avgCost=0.95368235>
2018-01-17 11:53:06,423 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 11:53:06,423 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 11:53:06,423 - DEBUG - Position is -12987
2018-01-17 11:53:07,421 - DEBUG - Open Orders requested
2018-01-17 11:53:07,427 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x000000000211DE10>, order=<ib.ext.Order.Order object at 0x000000000211DCF8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B0208>>
2018-01-17 11:53:07,427 - DEBUG - Order OrderID 102
2018-01-17 11:53:07,427 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:53:07,428 - DEBUG - Order status PreSubmitted
2018-01-17 11:53:07,428 - DEBUG - Order Identification 102
2018-01-17 11:53:07,428 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:53:07,428 - DEBUG - Profit ID from database is 0
2018-01-17 11:53:07,428 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:53:07,430 - DEBUG - Stop ID database is 0
2018-01-17 11:53:07,430 - DEBUG - Entry ID database is 105
2018-01-17 11:53:07,430 - DEBUG - Reply Handler Orders is <openOrder orderId=104, contract=<ib.ext.Contract.Contract object at 0x000000000211DE10>, order=<ib.ext.Order.Order object at 0x000000000211DCF8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B0080>>
2018-01-17 11:53:07,430 - DEBUG - Order OrderID 104
2018-01-17 11:53:07,431 - DEBUG - reply handler status <orderStatus orderId=104, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791157, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:53:07,431 - DEBUG - Order status PreSubmitted
2018-01-17 11:53:07,431 - DEBUG - Order Identification 104
2018-01-17 11:53:07,431 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:53:07,433 - DEBUG - Profit ID from database is 0
2018-01-17 11:53:07,433 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:53:07,433 - DEBUG - Stop ID database is 0
2018-01-17 11:53:07,433 - DEBUG - Entry ID database is 105
2018-01-17 11:53:07,434 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x000000000211DE10>, order=<ib.ext.Order.Order object at 0x000000000211DCF8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B0278>>
2018-01-17 11:53:07,434 - DEBUG - Order OrderID 103
2018-01-17 11:53:07,434 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:53:07,436 - DEBUG - Order status PreSubmitted
2018-01-17 11:53:07,436 - DEBUG - Order Identification 103
2018-01-17 11:53:07,436 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:53:07,436 - DEBUG - Profit ID from database is 0
2018-01-17 11:53:07,437 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:53:07,437 - DEBUG - Stop ID database is 0
2018-01-17 11:53:07,437 - DEBUG - Entry ID database is 105
2018-01-17 11:53:07,437 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x000000000211DE10>, order=<ib.ext.Order.Order object at 0x000000000211DCF8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B0358>>
2018-01-17 11:53:07,438 - DEBUG - Order OrderID 105
2018-01-17 11:53:07,438 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:53:07,438 - DEBUG - Order status PreSubmitted
2018-01-17 11:53:07,440 - DEBUG - Order Identification 105
2018-01-17 11:53:07,440 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:53:07,440 - DEBUG - Profit ID from database is 0
2018-01-17 11:53:07,440 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:53:07,440 - DEBUG - Stop ID database is 0
2018-01-17 11:53:07,440 - DEBUG - Entry ID database is 105
2018-01-17 11:53:07,440 - DEBUG - Entry API ID is 105
2018-01-17 11:53:09,427 - DEBUG - Connecting to database
2018-01-17 11:53:09,434 - DEBUG - Connected to database
2018-01-17 11:53:09,437 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 11:53:09,437 - DEBUG - Stop loss value is 71.82
2018-01-17 11:53:09,437 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 11:53:09,438 - DEBUG - Stop loss value is 85.25
2018-01-17 11:53:09,440 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 11:53:09,440 - DEBUG - EntryPrice value is 74.3
2018-01-17 11:53:09,441 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 11:53:09,441 - DEBUG - Stop quantity 1
2018-01-17 11:53:09,443 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 11:53:09,444 - DEBUG - Direction is Long
2018-01-17 11:53:09,444 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 11:53:09,444 - DEBUG - Count is 0
2018-01-17 11:53:09,447 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 11:53:09,447 - DEBUG - Stop Loss Flag is 0
2018-01-17 11:53:09,448 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 11:53:09,448 - DEBUG - Max ID Order is (105,)
2018-01-17 11:53:09,448 - DEBUG - Today is 2018-01-17
2018-01-17 11:53:09,450 - DEBUG - Day of the week 2
2018-01-17 11:53:09,450 - DEBUG - Yesterday is 01/16/2018
2018-01-17 11:53:09,450 - DEBUG - In Position is  0
2018-01-17 11:53:09,450 - DEBUG - In Position is  <class 'int'>
2018-01-17 11:53:09,450 - DEBUG - curStopLossFlag is  0
2018-01-17 11:53:09,450 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 11:53:09,450 - DEBUG - Checking if Entry has been filled
2018-01-17 11:53:09,450 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 11:53:09,453 - DEBUG - EntryPend is 1
2018-01-17 11:53:09,453 - DEBUG - Try to Cancel Stop
2018-01-17 11:53:09,453 - DEBUG - Stop API ID 0
2018-01-17 11:53:09,453 - DEBUG - Profit API ID 0
2018-01-17 11:53:09,453 - DEBUG - Stop API ID <class 'int'>
2018-01-17 11:53:09,453 - DEBUG - Profit API ID <class 'int'>
2018-01-17 11:53:09,453 - DEBUG - Pos is 0
2018-01-17 11:53:09,453 - DEBUG - CurCount is 0
2018-01-17 11:53:09,453 - DEBUG - In Pos 0
2018-01-17 11:53:09,454 - DEBUG - Stop ID is 0
2018-01-17 11:53:09,454 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 11:53:09,456 - DEBUG - EntryPend is 1
2018-01-17 11:53:09,456 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 11:53:09,457 - DEBUG - Entry Date is 10
2018-01-17 11:53:09,457 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 11:53:09,457 - DEBUG - Order Profit ID is 0
2018-01-17 11:53:09,457 - DEBUG - Order Entry ID is 105
2018-01-17 11:53:09,457 - DEBUG - API ID is  0
2018-01-17 11:53:09,457 - DEBUG - Current Position is 0
2018-01-17 11:53:09,457 - DEBUG - Current Position is <class 'str'>
2018-01-17 11:53:09,457 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 11:53:09,457 - DEBUG - Time is 11
2018-01-17 11:53:09,457 - DEBUG - Time is <class 'int'>
2018-01-17 11:53:09,459 - DEBUG - Time is 53
2018-01-17 11:53:09,459 - DEBUG - Time is <class 'int'>
2018-01-17 11:53:09,459 - DEBUG - Disconnected from IBController
2018-01-17 11:53:09,459 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 11:58:05,342 - DEBUG - ****************************************************
2018-01-17 11:58:05,342 - DEBUG - Current Time is 11:58AM
2018-01-17 11:58:05,342 - DEBUG - Starting Pos Mgmt H E
2018-01-17 11:58:05,342 - DEBUG - Connecting to database
2018-01-17 11:58:05,391 - DEBUG - Connected to database
2018-01-17 11:58:05,391 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 11:58:05,392 - DEBUG - Order Profit is 0
2018-01-17 11:58:05,394 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 11:58:05,398 - DEBUG - Stop ID is 0
2018-01-17 11:58:05,398 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 11:58:05,400 - DEBUG - Entry ID is 105
2018-01-17 11:58:05,400 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 11:58:05,401 - DEBUG - OCA ID is 1
2018-01-17 11:58:05,401 - DEBUG - Connecting to IBController
2018-01-17 11:58:06,407 - DEBUG - Connected to IBController
2018-01-17 11:58:06,407 - DEBUG - Position requested
2018-01-17 11:58:06,407 - DEBUG - Pos Mgmt -12987
2018-01-17 11:58:06,408 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020EBEF0>, pos=-12987, avgCost=0.95368235>
2018-01-17 11:58:06,408 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 11:58:06,408 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 11:58:06,410 - DEBUG - Position is -12987
2018-01-17 11:58:07,408 - DEBUG - Open Orders requested
2018-01-17 11:58:07,411 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x00000000020EBCC0>, order=<ib.ext.Order.Order object at 0x00000000020EBC88>, orderState=<ib.ext.OrderState.OrderState object at 0x000000000217F208>>
2018-01-17 11:58:07,411 - DEBUG - Order OrderID 102
2018-01-17 11:58:07,411 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:58:07,413 - DEBUG - Order status PreSubmitted
2018-01-17 11:58:07,413 - DEBUG - Order Identification 102
2018-01-17 11:58:07,413 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:58:07,413 - DEBUG - Profit ID from database is 0
2018-01-17 11:58:07,413 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:58:07,414 - DEBUG - Stop ID database is 0
2018-01-17 11:58:07,414 - DEBUG - Entry ID database is 105
2018-01-17 11:58:07,414 - DEBUG - Reply Handler Orders is <openOrder orderId=104, contract=<ib.ext.Contract.Contract object at 0x00000000020EBCC0>, order=<ib.ext.Order.Order object at 0x00000000020EBC88>, orderState=<ib.ext.OrderState.OrderState object at 0x000000000217F0B8>>
2018-01-17 11:58:07,414 - DEBUG - Order OrderID 104
2018-01-17 11:58:07,415 - DEBUG - reply handler status <orderStatus orderId=104, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791157, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:58:07,415 - DEBUG - Order status PreSubmitted
2018-01-17 11:58:07,415 - DEBUG - Order Identification 104
2018-01-17 11:58:07,415 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:58:07,417 - DEBUG - Profit ID from database is 0
2018-01-17 11:58:07,417 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:58:07,417 - DEBUG - Stop ID database is 0
2018-01-17 11:58:07,417 - DEBUG - Entry ID database is 105
2018-01-17 11:58:07,418 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x00000000020EBCC0>, order=<ib.ext.Order.Order object at 0x00000000020EBC88>, orderState=<ib.ext.OrderState.OrderState object at 0x000000000217F278>>
2018-01-17 11:58:07,418 - DEBUG - Order OrderID 103
2018-01-17 11:58:07,418 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:58:07,420 - DEBUG - Order status PreSubmitted
2018-01-17 11:58:07,420 - DEBUG - Order Identification 103
2018-01-17 11:58:07,420 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:58:07,420 - DEBUG - Profit ID from database is 0
2018-01-17 11:58:07,420 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:58:07,421 - DEBUG - Stop ID database is 0
2018-01-17 11:58:07,421 - DEBUG - Entry ID database is 105
2018-01-17 11:58:07,421 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x00000000020EBCC0>, order=<ib.ext.Order.Order object at 0x00000000020EBC88>, orderState=<ib.ext.OrderState.OrderState object at 0x000000000217F358>>
2018-01-17 11:58:07,421 - DEBUG - Order OrderID 105
2018-01-17 11:58:07,423 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 11:58:07,423 - DEBUG - Order status PreSubmitted
2018-01-17 11:58:07,423 - DEBUG - Order Identification 105
2018-01-17 11:58:07,424 - DEBUG - Order Identification <class 'int'>
2018-01-17 11:58:07,424 - DEBUG - Profit ID from database is 0
2018-01-17 11:58:07,424 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 11:58:07,424 - DEBUG - Stop ID database is 0
2018-01-17 11:58:07,424 - DEBUG - Entry ID database is 105
2018-01-17 11:58:07,424 - DEBUG - Entry API ID is 105
2018-01-17 11:58:09,411 - DEBUG - Connecting to database
2018-01-17 11:58:09,418 - DEBUG - Connected to database
2018-01-17 11:58:09,421 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 11:58:09,421 - DEBUG - Stop loss value is 71.82
2018-01-17 11:58:09,421 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 11:58:09,423 - DEBUG - Stop loss value is 85.25
2018-01-17 11:58:09,424 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 11:58:09,424 - DEBUG - EntryPrice value is 74.3
2018-01-17 11:58:09,426 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 11:58:09,426 - DEBUG - Stop quantity 1
2018-01-17 11:58:09,427 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 11:58:09,427 - DEBUG - Direction is Long
2018-01-17 11:58:09,428 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 11:58:09,428 - DEBUG - Count is 0
2018-01-17 11:58:09,430 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 11:58:09,430 - DEBUG - Stop Loss Flag is 0
2018-01-17 11:58:09,433 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 11:58:09,433 - DEBUG - Max ID Order is (105,)
2018-01-17 11:58:09,433 - DEBUG - Today is 2018-01-17
2018-01-17 11:58:09,434 - DEBUG - Day of the week 2
2018-01-17 11:58:09,434 - DEBUG - Yesterday is 01/16/2018
2018-01-17 11:58:09,434 - DEBUG - In Position is  0
2018-01-17 11:58:09,434 - DEBUG - In Position is  <class 'int'>
2018-01-17 11:58:09,434 - DEBUG - curStopLossFlag is  0
2018-01-17 11:58:09,434 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 11:58:09,434 - DEBUG - Checking if Entry has been filled
2018-01-17 11:58:09,434 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 11:58:09,437 - DEBUG - EntryPend is 1
2018-01-17 11:58:09,437 - DEBUG - Try to Cancel Stop
2018-01-17 11:58:09,437 - DEBUG - Stop API ID 0
2018-01-17 11:58:09,437 - DEBUG - Profit API ID 0
2018-01-17 11:58:09,437 - DEBUG - Stop API ID <class 'int'>
2018-01-17 11:58:09,437 - DEBUG - Profit API ID <class 'int'>
2018-01-17 11:58:09,437 - DEBUG - Pos is 0
2018-01-17 11:58:09,437 - DEBUG - CurCount is 0
2018-01-17 11:58:09,437 - DEBUG - In Pos 0
2018-01-17 11:58:09,438 - DEBUG - Stop ID is 0
2018-01-17 11:58:09,438 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 11:58:09,440 - DEBUG - EntryPend is 1
2018-01-17 11:58:09,440 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 11:58:09,440 - DEBUG - Entry Date is 10
2018-01-17 11:58:09,440 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 11:58:09,440 - DEBUG - Order Profit ID is 0
2018-01-17 11:58:09,440 - DEBUG - Order Entry ID is 105
2018-01-17 11:58:09,440 - DEBUG - API ID is  0
2018-01-17 11:58:09,441 - DEBUG - Current Position is 0
2018-01-17 11:58:09,441 - DEBUG - Current Position is <class 'str'>
2018-01-17 11:58:09,441 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 11:58:09,441 - DEBUG - Time is 11
2018-01-17 11:58:09,441 - DEBUG - Time is <class 'int'>
2018-01-17 11:58:09,443 - DEBUG - Time is 58
2018-01-17 11:58:09,443 - DEBUG - Time is <class 'int'>
2018-01-17 11:58:09,443 - DEBUG - Disconnected from IBController
2018-01-17 11:58:09,443 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 12:03:05,351 - DEBUG - ****************************************************
2018-01-17 12:03:05,351 - DEBUG - Current Time is 12:03PM
2018-01-17 12:03:05,351 - DEBUG - Starting Pos Mgmt H E
2018-01-17 12:03:05,351 - DEBUG - Connecting to database
2018-01-17 12:03:05,384 - DEBUG - Connected to database
2018-01-17 12:03:05,385 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 12:03:05,387 - DEBUG - Order Profit is 0
2018-01-17 12:03:05,387 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 12:03:05,388 - DEBUG - Stop ID is 0
2018-01-17 12:03:05,388 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 12:03:05,391 - DEBUG - Entry ID is 105
2018-01-17 12:03:05,391 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 12:03:05,391 - DEBUG - OCA ID is 1
2018-01-17 12:03:05,392 - DEBUG - Connecting to IBController
2018-01-17 12:03:06,398 - DEBUG - Connected to IBController
2018-01-17 12:03:06,398 - DEBUG - Position requested
2018-01-17 12:03:06,400 - DEBUG - Pos Mgmt -12987
2018-01-17 12:03:06,401 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000213CC18>, pos=-12987, avgCost=0.95368235>
2018-01-17 12:03:06,401 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 12:03:06,401 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 12:03:06,401 - DEBUG - Position is -12987
2018-01-17 12:03:07,400 - DEBUG - Open Orders requested
2018-01-17 12:03:07,401 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x000000000213CE10>, order=<ib.ext.Order.Order object at 0x000000000213CB70>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021D12B0>>
2018-01-17 12:03:07,403 - DEBUG - Order OrderID 102
2018-01-17 12:03:07,403 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:03:07,404 - DEBUG - Order status PreSubmitted
2018-01-17 12:03:07,404 - DEBUG - Order Identification 102
2018-01-17 12:03:07,404 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:03:07,411 - DEBUG - Profit ID from database is 0
2018-01-17 12:03:07,411 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:03:07,411 - DEBUG - Stop ID database is 0
2018-01-17 12:03:07,411 - DEBUG - Entry ID database is 105
2018-01-17 12:03:07,413 - DEBUG - Reply Handler Orders is <openOrder orderId=104, contract=<ib.ext.Contract.Contract object at 0x000000000213CE10>, order=<ib.ext.Order.Order object at 0x000000000213CB70>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021D1128>>
2018-01-17 12:03:07,414 - DEBUG - Order OrderID 104
2018-01-17 12:03:07,414 - DEBUG - reply handler status <orderStatus orderId=104, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791157, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:03:07,414 - DEBUG - Order status PreSubmitted
2018-01-17 12:03:07,414 - DEBUG - Order Identification 104
2018-01-17 12:03:07,414 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:03:07,414 - DEBUG - Profit ID from database is 0
2018-01-17 12:03:07,414 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:03:07,415 - DEBUG - Stop ID database is 0
2018-01-17 12:03:07,415 - DEBUG - Entry ID database is 105
2018-01-17 12:03:07,417 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x000000000213CE10>, order=<ib.ext.Order.Order object at 0x000000000213CB70>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021D1320>>
2018-01-17 12:03:07,417 - DEBUG - Order OrderID 103
2018-01-17 12:03:07,417 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:03:07,417 - DEBUG - Order status PreSubmitted
2018-01-17 12:03:07,417 - DEBUG - Order Identification 103
2018-01-17 12:03:07,418 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:03:07,418 - DEBUG - Profit ID from database is 0
2018-01-17 12:03:07,418 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:03:07,418 - DEBUG - Stop ID database is 0
2018-01-17 12:03:07,418 - DEBUG - Entry ID database is 105
2018-01-17 12:03:07,420 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x000000000213CE10>, order=<ib.ext.Order.Order object at 0x000000000213CB70>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021D1400>>
2018-01-17 12:03:07,421 - DEBUG - Order OrderID 105
2018-01-17 12:03:07,421 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:03:07,421 - DEBUG - Order status PreSubmitted
2018-01-17 12:03:07,421 - DEBUG - Order Identification 105
2018-01-17 12:03:07,421 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:03:07,421 - DEBUG - Profit ID from database is 0
2018-01-17 12:03:07,423 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:03:07,423 - DEBUG - Stop ID database is 0
2018-01-17 12:03:07,423 - DEBUG - Entry ID database is 105
2018-01-17 12:03:07,423 - DEBUG - Entry API ID is 105
2018-01-17 12:03:09,403 - DEBUG - Connecting to database
2018-01-17 12:03:09,410 - DEBUG - Connected to database
2018-01-17 12:03:09,411 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 12:03:09,411 - DEBUG - Stop loss value is 71.82
2018-01-17 12:03:09,413 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 12:03:09,414 - DEBUG - Stop loss value is 85.25
2018-01-17 12:03:09,414 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 12:03:09,414 - DEBUG - EntryPrice value is 74.3
2018-01-17 12:03:09,417 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 12:03:09,417 - DEBUG - Stop quantity 1
2018-01-17 12:03:09,417 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 12:03:09,418 - DEBUG - Direction is Long
2018-01-17 12:03:09,420 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 12:03:09,420 - DEBUG - Count is 0
2018-01-17 12:03:09,421 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 12:03:09,421 - DEBUG - Stop Loss Flag is 0
2018-01-17 12:03:09,424 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 12:03:09,424 - DEBUG - Max ID Order is (105,)
2018-01-17 12:03:09,424 - DEBUG - Today is 2018-01-17
2018-01-17 12:03:09,424 - DEBUG - Day of the week 2
2018-01-17 12:03:09,424 - DEBUG - Yesterday is 01/16/2018
2018-01-17 12:03:09,424 - DEBUG - In Position is  0
2018-01-17 12:03:09,424 - DEBUG - In Position is  <class 'int'>
2018-01-17 12:03:09,426 - DEBUG - curStopLossFlag is  0
2018-01-17 12:03:09,426 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 12:03:09,426 - DEBUG - Checking if Entry has been filled
2018-01-17 12:03:09,426 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 12:03:09,427 - DEBUG - EntryPend is 1
2018-01-17 12:03:09,427 - DEBUG - Try to Cancel Stop
2018-01-17 12:03:09,427 - DEBUG - Stop API ID 0
2018-01-17 12:03:09,427 - DEBUG - Profit API ID 0
2018-01-17 12:03:09,428 - DEBUG - Stop API ID <class 'int'>
2018-01-17 12:03:09,428 - DEBUG - Profit API ID <class 'int'>
2018-01-17 12:03:09,428 - DEBUG - Pos is 0
2018-01-17 12:03:09,428 - DEBUG - CurCount is 0
2018-01-17 12:03:09,428 - DEBUG - In Pos 0
2018-01-17 12:03:09,430 - DEBUG - Stop ID is 0
2018-01-17 12:03:09,430 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 12:03:09,430 - DEBUG - EntryPend is 1
2018-01-17 12:03:09,431 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 12:03:09,431 - DEBUG - Entry Date is 10
2018-01-17 12:03:09,431 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 12:03:09,431 - DEBUG - Order Profit ID is 0
2018-01-17 12:03:09,431 - DEBUG - Order Entry ID is 105
2018-01-17 12:03:09,433 - DEBUG - API ID is  0
2018-01-17 12:03:09,433 - DEBUG - Current Position is 0
2018-01-17 12:03:09,433 - DEBUG - Current Position is <class 'str'>
2018-01-17 12:03:09,433 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 12:03:09,433 - DEBUG - Time is 12
2018-01-17 12:03:09,434 - DEBUG - Time is <class 'int'>
2018-01-17 12:03:09,434 - DEBUG - Time is 3
2018-01-17 12:03:09,434 - DEBUG - Time is <class 'int'>
2018-01-17 12:03:09,434 - DEBUG - Disconnected from IBController
2018-01-17 12:03:09,434 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 12:08:05,351 - DEBUG - ****************************************************
2018-01-17 12:08:05,351 - DEBUG - Current Time is 12:08PM
2018-01-17 12:08:05,352 - DEBUG - Starting Pos Mgmt H E
2018-01-17 12:08:05,352 - DEBUG - Connecting to database
2018-01-17 12:08:05,377 - DEBUG - Connected to database
2018-01-17 12:08:05,377 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 12:08:05,378 - DEBUG - Order Profit is 0
2018-01-17 12:08:05,378 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 12:08:05,380 - DEBUG - Stop ID is 0
2018-01-17 12:08:05,381 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 12:08:05,381 - DEBUG - Entry ID is 105
2018-01-17 12:08:05,381 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 12:08:05,384 - DEBUG - OCA ID is 1
2018-01-17 12:08:05,384 - DEBUG - Connecting to IBController
2018-01-17 12:08:06,388 - DEBUG - Connected to IBController
2018-01-17 12:08:06,388 - DEBUG - Position requested
2018-01-17 12:08:06,390 - DEBUG - Pos Mgmt -12987
2018-01-17 12:08:06,390 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020ECB70>, pos=-12987, avgCost=0.95368235>
2018-01-17 12:08:06,391 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 12:08:06,391 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 12:08:06,391 - DEBUG - Position is -12987
2018-01-17 12:08:07,390 - DEBUG - Open Orders requested
2018-01-17 12:08:07,391 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x00000000020ECD68>, order=<ib.ext.Order.Order object at 0x00000000020ECE10>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002181278>>
2018-01-17 12:08:07,392 - DEBUG - Order OrderID 102
2018-01-17 12:08:07,392 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:08:07,394 - DEBUG - Order status PreSubmitted
2018-01-17 12:08:07,394 - DEBUG - Order Identification 102
2018-01-17 12:08:07,394 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:08:07,394 - DEBUG - Profit ID from database is 0
2018-01-17 12:08:07,394 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:08:07,394 - DEBUG - Stop ID database is 0
2018-01-17 12:08:07,394 - DEBUG - Entry ID database is 105
2018-01-17 12:08:07,395 - DEBUG - Reply Handler Orders is <openOrder orderId=104, contract=<ib.ext.Contract.Contract object at 0x00000000020ECD68>, order=<ib.ext.Order.Order object at 0x00000000020ECE10>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021810B8>>
2018-01-17 12:08:07,395 - DEBUG - Order OrderID 104
2018-01-17 12:08:07,397 - DEBUG - reply handler status <orderStatus orderId=104, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791157, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:08:07,397 - DEBUG - Order status PreSubmitted
2018-01-17 12:08:07,397 - DEBUG - Order Identification 104
2018-01-17 12:08:07,398 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:08:07,398 - DEBUG - Profit ID from database is 0
2018-01-17 12:08:07,398 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:08:07,398 - DEBUG - Stop ID database is 0
2018-01-17 12:08:07,398 - DEBUG - Entry ID database is 105
2018-01-17 12:08:07,400 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x00000000020ECD68>, order=<ib.ext.Order.Order object at 0x00000000020ECE10>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002181240>>
2018-01-17 12:08:07,400 - DEBUG - Order OrderID 103
2018-01-17 12:08:07,400 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:08:07,401 - DEBUG - Order status PreSubmitted
2018-01-17 12:08:07,401 - DEBUG - Order Identification 103
2018-01-17 12:08:07,401 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:08:07,401 - DEBUG - Profit ID from database is 0
2018-01-17 12:08:07,401 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:08:07,401 - DEBUG - Stop ID database is 0
2018-01-17 12:08:07,401 - DEBUG - Entry ID database is 105
2018-01-17 12:08:07,403 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x00000000020ECD68>, order=<ib.ext.Order.Order object at 0x00000000020ECE10>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002181320>>
2018-01-17 12:08:07,404 - DEBUG - Order OrderID 105
2018-01-17 12:08:07,404 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:08:07,404 - DEBUG - Order status PreSubmitted
2018-01-17 12:08:07,404 - DEBUG - Order Identification 105
2018-01-17 12:08:07,404 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:08:07,404 - DEBUG - Profit ID from database is 0
2018-01-17 12:08:07,404 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:08:07,405 - DEBUG - Stop ID database is 0
2018-01-17 12:08:07,405 - DEBUG - Entry ID database is 105
2018-01-17 12:08:07,405 - DEBUG - Entry API ID is 105
2018-01-17 12:08:09,392 - DEBUG - Connecting to database
2018-01-17 12:08:09,401 - DEBUG - Connected to database
2018-01-17 12:08:09,401 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 12:08:09,403 - DEBUG - Stop loss value is 71.82
2018-01-17 12:08:09,404 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 12:08:09,404 - DEBUG - Stop loss value is 85.25
2018-01-17 12:08:09,405 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 12:08:09,407 - DEBUG - EntryPrice value is 74.3
2018-01-17 12:08:09,407 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 12:08:09,407 - DEBUG - Stop quantity 1
2018-01-17 12:08:09,410 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 12:08:09,410 - DEBUG - Direction is Long
2018-01-17 12:08:09,411 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 12:08:09,411 - DEBUG - Count is 0
2018-01-17 12:08:09,413 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 12:08:09,413 - DEBUG - Stop Loss Flag is 0
2018-01-17 12:08:09,414 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 12:08:09,414 - DEBUG - Max ID Order is (105,)
2018-01-17 12:08:09,414 - DEBUG - Today is 2018-01-17
2018-01-17 12:08:09,415 - DEBUG - Day of the week 2
2018-01-17 12:08:09,415 - DEBUG - Yesterday is 01/16/2018
2018-01-17 12:08:09,415 - DEBUG - In Position is  0
2018-01-17 12:08:09,417 - DEBUG - In Position is  <class 'int'>
2018-01-17 12:08:09,417 - DEBUG - curStopLossFlag is  0
2018-01-17 12:08:09,417 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 12:08:09,417 - DEBUG - Checking if Entry has been filled
2018-01-17 12:08:09,417 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 12:08:09,418 - DEBUG - EntryPend is 1
2018-01-17 12:08:09,418 - DEBUG - Try to Cancel Stop
2018-01-17 12:08:09,418 - DEBUG - Stop API ID 0
2018-01-17 12:08:09,418 - DEBUG - Profit API ID 0
2018-01-17 12:08:09,420 - DEBUG - Stop API ID <class 'int'>
2018-01-17 12:08:09,420 - DEBUG - Profit API ID <class 'int'>
2018-01-17 12:08:09,420 - DEBUG - Pos is 0
2018-01-17 12:08:09,420 - DEBUG - CurCount is 0
2018-01-17 12:08:09,421 - DEBUG - In Pos 0
2018-01-17 12:08:09,421 - DEBUG - Stop ID is 0
2018-01-17 12:08:09,421 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 12:08:09,421 - DEBUG - EntryPend is 1
2018-01-17 12:08:09,423 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 12:08:09,423 - DEBUG - Entry Date is 10
2018-01-17 12:08:09,423 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 12:08:09,423 - DEBUG - Order Profit ID is 0
2018-01-17 12:08:09,424 - DEBUG - Order Entry ID is 105
2018-01-17 12:08:09,424 - DEBUG - API ID is  0
2018-01-17 12:08:09,424 - DEBUG - Current Position is 0
2018-01-17 12:08:09,424 - DEBUG - Current Position is <class 'str'>
2018-01-17 12:08:09,424 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 12:08:09,424 - DEBUG - Time is 12
2018-01-17 12:08:09,424 - DEBUG - Time is <class 'int'>
2018-01-17 12:08:09,424 - DEBUG - Time is 8
2018-01-17 12:08:09,424 - DEBUG - Time is <class 'int'>
2018-01-17 12:08:09,424 - DEBUG - Disconnected from IBController
2018-01-17 12:08:09,426 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 12:13:05,335 - DEBUG - ****************************************************
2018-01-17 12:13:05,335 - DEBUG - Current Time is 12:13PM
2018-01-17 12:13:05,335 - DEBUG - Starting Pos Mgmt H E
2018-01-17 12:13:05,336 - DEBUG - Connecting to database
2018-01-17 12:13:05,367 - DEBUG - Connected to database
2018-01-17 12:13:05,368 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 12:13:05,368 - DEBUG - Order Profit is 0
2018-01-17 12:13:05,369 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 12:13:05,371 - DEBUG - Stop ID is 0
2018-01-17 12:13:05,371 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 12:13:05,372 - DEBUG - Entry ID is 105
2018-01-17 12:13:05,372 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 12:13:05,375 - DEBUG - OCA ID is 1
2018-01-17 12:13:05,375 - DEBUG - Connecting to IBController
2018-01-17 12:13:06,381 - DEBUG - Connected to IBController
2018-01-17 12:13:06,381 - DEBUG - Position requested
2018-01-17 12:13:06,381 - DEBUG - Pos Mgmt -12987
2018-01-17 12:13:06,382 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000213DAC8>, pos=-12987, avgCost=0.95368235>
2018-01-17 12:13:06,382 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 12:13:06,382 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 12:13:06,382 - DEBUG - Position is -12987
2018-01-17 12:13:07,381 - DEBUG - Open Orders requested
2018-01-17 12:13:07,384 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x000000000213DE10>, order=<ib.ext.Order.Order object at 0x000000000213DC88>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021D1278>>
2018-01-17 12:13:07,385 - DEBUG - Order OrderID 102
2018-01-17 12:13:07,385 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:13:07,387 - DEBUG - Order status PreSubmitted
2018-01-17 12:13:07,387 - DEBUG - Order Identification 102
2018-01-17 12:13:07,387 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:13:07,387 - DEBUG - Profit ID from database is 0
2018-01-17 12:13:07,387 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:13:07,388 - DEBUG - Stop ID database is 0
2018-01-17 12:13:07,388 - DEBUG - Entry ID database is 105
2018-01-17 12:13:07,388 - DEBUG - Reply Handler Orders is <openOrder orderId=104, contract=<ib.ext.Contract.Contract object at 0x000000000213DE10>, order=<ib.ext.Order.Order object at 0x000000000213DC88>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021D10B8>>
2018-01-17 12:13:07,388 - DEBUG - Order OrderID 104
2018-01-17 12:13:07,390 - DEBUG - reply handler status <orderStatus orderId=104, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791157, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:13:07,390 - DEBUG - Order status PreSubmitted
2018-01-17 12:13:07,390 - DEBUG - Order Identification 104
2018-01-17 12:13:07,391 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:13:07,391 - DEBUG - Profit ID from database is 0
2018-01-17 12:13:07,391 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:13:07,391 - DEBUG - Stop ID database is 0
2018-01-17 12:13:07,391 - DEBUG - Entry ID database is 105
2018-01-17 12:13:07,391 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x000000000213DE10>, order=<ib.ext.Order.Order object at 0x000000000213DC88>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021D1240>>
2018-01-17 12:13:07,392 - DEBUG - Order OrderID 103
2018-01-17 12:13:07,392 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:13:07,394 - DEBUG - Order status PreSubmitted
2018-01-17 12:13:07,394 - DEBUG - Order Identification 103
2018-01-17 12:13:07,394 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:13:07,394 - DEBUG - Profit ID from database is 0
2018-01-17 12:13:07,394 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:13:07,394 - DEBUG - Stop ID database is 0
2018-01-17 12:13:07,394 - DEBUG - Entry ID database is 105
2018-01-17 12:13:07,395 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x000000000213DE10>, order=<ib.ext.Order.Order object at 0x000000000213DC88>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021D1320>>
2018-01-17 12:13:07,397 - DEBUG - Order OrderID 105
2018-01-17 12:13:07,397 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:13:07,397 - DEBUG - Order status PreSubmitted
2018-01-17 12:13:07,398 - DEBUG - Order Identification 105
2018-01-17 12:13:07,398 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:13:07,398 - DEBUG - Profit ID from database is 0
2018-01-17 12:13:07,398 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:13:07,398 - DEBUG - Stop ID database is 0
2018-01-17 12:13:07,398 - DEBUG - Entry ID database is 105
2018-01-17 12:13:07,398 - DEBUG - Entry API ID is 105
2018-01-17 12:13:09,387 - DEBUG - Connecting to database
2018-01-17 12:13:09,394 - DEBUG - Connected to database
2018-01-17 12:13:09,394 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 12:13:09,395 - DEBUG - Stop loss value is 71.82
2018-01-17 12:13:09,397 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 12:13:09,397 - DEBUG - Stop loss value is 85.25
2018-01-17 12:13:09,398 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 12:13:09,398 - DEBUG - EntryPrice value is 74.3
2018-01-17 12:13:09,400 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 12:13:09,401 - DEBUG - Stop quantity 1
2018-01-17 12:13:09,401 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 12:13:09,401 - DEBUG - Direction is Long
2018-01-17 12:13:09,403 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 12:13:09,404 - DEBUG - Count is 0
2018-01-17 12:13:09,404 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 12:13:09,404 - DEBUG - Stop Loss Flag is 0
2018-01-17 12:13:09,407 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 12:13:09,407 - DEBUG - Max ID Order is (105,)
2018-01-17 12:13:09,407 - DEBUG - Today is 2018-01-17
2018-01-17 12:13:09,407 - DEBUG - Day of the week 2
2018-01-17 12:13:09,407 - DEBUG - Yesterday is 01/16/2018
2018-01-17 12:13:09,407 - DEBUG - In Position is  0
2018-01-17 12:13:09,407 - DEBUG - In Position is  <class 'int'>
2018-01-17 12:13:09,408 - DEBUG - curStopLossFlag is  0
2018-01-17 12:13:09,408 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 12:13:09,408 - DEBUG - Checking if Entry has been filled
2018-01-17 12:13:09,408 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 12:13:09,411 - DEBUG - EntryPend is 1
2018-01-17 12:13:09,411 - DEBUG - Try to Cancel Stop
2018-01-17 12:13:09,411 - DEBUG - Stop API ID 0
2018-01-17 12:13:09,411 - DEBUG - Profit API ID 0
2018-01-17 12:13:09,411 - DEBUG - Stop API ID <class 'int'>
2018-01-17 12:13:09,411 - DEBUG - Profit API ID <class 'int'>
2018-01-17 12:13:09,411 - DEBUG - Pos is 0
2018-01-17 12:13:09,411 - DEBUG - CurCount is 0
2018-01-17 12:13:09,411 - DEBUG - In Pos 0
2018-01-17 12:13:09,413 - DEBUG - Stop ID is 0
2018-01-17 12:13:09,413 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 12:13:09,414 - DEBUG - EntryPend is 1
2018-01-17 12:13:09,414 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 12:13:09,414 - DEBUG - Entry Date is 10
2018-01-17 12:13:09,415 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 12:13:09,415 - DEBUG - Order Profit ID is 0
2018-01-17 12:13:09,415 - DEBUG - Order Entry ID is 105
2018-01-17 12:13:09,415 - DEBUG - API ID is  0
2018-01-17 12:13:09,415 - DEBUG - Current Position is 0
2018-01-17 12:13:09,415 - DEBUG - Current Position is <class 'str'>
2018-01-17 12:13:09,417 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 12:13:09,417 - DEBUG - Time is 12
2018-01-17 12:13:09,417 - DEBUG - Time is <class 'int'>
2018-01-17 12:13:09,417 - DEBUG - Time is 13
2018-01-17 12:13:09,417 - DEBUG - Time is <class 'int'>
2018-01-17 12:13:09,417 - DEBUG - Disconnected from IBController
2018-01-17 12:13:09,417 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 12:18:05,345 - DEBUG - ****************************************************
2018-01-17 12:18:05,346 - DEBUG - Current Time is 12:18PM
2018-01-17 12:18:05,346 - DEBUG - Starting Pos Mgmt H E
2018-01-17 12:18:05,348 - DEBUG - Connecting to database
2018-01-17 12:18:05,368 - DEBUG - Connected to database
2018-01-17 12:18:05,368 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 12:18:05,371 - DEBUG - Order Profit is 0
2018-01-17 12:18:05,371 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 12:18:05,372 - DEBUG - Stop ID is 0
2018-01-17 12:18:05,372 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 12:18:05,374 - DEBUG - Entry ID is 105
2018-01-17 12:18:05,375 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 12:18:05,375 - DEBUG - OCA ID is 1
2018-01-17 12:18:05,375 - DEBUG - Connecting to IBController
2018-01-17 12:18:06,384 - DEBUG - Connected to IBController
2018-01-17 12:18:06,384 - DEBUG - Position requested
2018-01-17 12:18:06,384 - DEBUG - Pos Mgmt -12987
2018-01-17 12:18:06,385 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212CEF0>, pos=-12987, avgCost=0.95368235>
2018-01-17 12:18:06,385 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 12:18:06,385 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 12:18:06,385 - DEBUG - Position is -12987
2018-01-17 12:18:07,385 - DEBUG - Open Orders requested
2018-01-17 12:18:07,388 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x000000000212CDD8>, order=<ib.ext.Order.Order object at 0x000000000212CC88>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C0208>>
2018-01-17 12:18:07,388 - DEBUG - Order OrderID 102
2018-01-17 12:18:07,388 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:18:07,388 - DEBUG - Order status PreSubmitted
2018-01-17 12:18:07,390 - DEBUG - Order Identification 102
2018-01-17 12:18:07,390 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:18:07,390 - DEBUG - Profit ID from database is 0
2018-01-17 12:18:07,390 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:18:07,391 - DEBUG - Stop ID database is 0
2018-01-17 12:18:07,391 - DEBUG - Entry ID database is 105
2018-01-17 12:18:07,391 - DEBUG - Reply Handler Orders is <openOrder orderId=104, contract=<ib.ext.Contract.Contract object at 0x000000000212CDD8>, order=<ib.ext.Order.Order object at 0x000000000212CC88>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C0080>>
2018-01-17 12:18:07,391 - DEBUG - Order OrderID 104
2018-01-17 12:18:07,392 - DEBUG - reply handler status <orderStatus orderId=104, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791157, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:18:07,392 - DEBUG - Order status PreSubmitted
2018-01-17 12:18:07,392 - DEBUG - Order Identification 104
2018-01-17 12:18:07,392 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:18:07,394 - DEBUG - Profit ID from database is 0
2018-01-17 12:18:07,394 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:18:07,394 - DEBUG - Stop ID database is 0
2018-01-17 12:18:07,394 - DEBUG - Entry ID database is 105
2018-01-17 12:18:07,394 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x000000000212CDD8>, order=<ib.ext.Order.Order object at 0x000000000212CC88>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C0278>>
2018-01-17 12:18:07,395 - DEBUG - Order OrderID 103
2018-01-17 12:18:07,395 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:18:07,395 - DEBUG - Order status PreSubmitted
2018-01-17 12:18:07,397 - DEBUG - Order Identification 103
2018-01-17 12:18:07,397 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:18:07,397 - DEBUG - Profit ID from database is 0
2018-01-17 12:18:07,397 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:18:07,397 - DEBUG - Stop ID database is 0
2018-01-17 12:18:07,398 - DEBUG - Entry ID database is 105
2018-01-17 12:18:07,398 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x000000000212CDD8>, order=<ib.ext.Order.Order object at 0x000000000212CC88>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C0358>>
2018-01-17 12:18:07,398 - DEBUG - Order OrderID 105
2018-01-17 12:18:07,400 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:18:07,400 - DEBUG - Order status PreSubmitted
2018-01-17 12:18:07,400 - DEBUG - Order Identification 105
2018-01-17 12:18:07,400 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:18:07,401 - DEBUG - Profit ID from database is 0
2018-01-17 12:18:07,401 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:18:07,401 - DEBUG - Stop ID database is 0
2018-01-17 12:18:07,401 - DEBUG - Entry ID database is 105
2018-01-17 12:18:07,401 - DEBUG - Entry API ID is 105
2018-01-17 12:18:09,388 - DEBUG - Connecting to database
2018-01-17 12:18:09,394 - DEBUG - Connected to database
2018-01-17 12:18:09,395 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 12:18:09,397 - DEBUG - Stop loss value is 71.82
2018-01-17 12:18:09,398 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 12:18:09,398 - DEBUG - Stop loss value is 85.25
2018-01-17 12:18:09,400 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 12:18:09,400 - DEBUG - EntryPrice value is 74.3
2018-01-17 12:18:09,401 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 12:18:09,401 - DEBUG - Stop quantity 1
2018-01-17 12:18:09,403 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 12:18:09,403 - DEBUG - Direction is Long
2018-01-17 12:18:09,404 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 12:18:09,404 - DEBUG - Count is 0
2018-01-17 12:18:09,405 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 12:18:09,405 - DEBUG - Stop Loss Flag is 0
2018-01-17 12:18:09,407 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 12:18:09,407 - DEBUG - Max ID Order is (105,)
2018-01-17 12:18:09,407 - DEBUG - Today is 2018-01-17
2018-01-17 12:18:09,408 - DEBUG - Day of the week 2
2018-01-17 12:18:09,408 - DEBUG - Yesterday is 01/16/2018
2018-01-17 12:18:09,408 - DEBUG - In Position is  0
2018-01-17 12:18:09,410 - DEBUG - In Position is  <class 'int'>
2018-01-17 12:18:09,410 - DEBUG - curStopLossFlag is  0
2018-01-17 12:18:09,410 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 12:18:09,410 - DEBUG - Checking if Entry has been filled
2018-01-17 12:18:09,410 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 12:18:09,411 - DEBUG - EntryPend is 1
2018-01-17 12:18:09,411 - DEBUG - Try to Cancel Stop
2018-01-17 12:18:09,411 - DEBUG - Stop API ID 0
2018-01-17 12:18:09,411 - DEBUG - Profit API ID 0
2018-01-17 12:18:09,413 - DEBUG - Stop API ID <class 'int'>
2018-01-17 12:18:09,413 - DEBUG - Profit API ID <class 'int'>
2018-01-17 12:18:09,413 - DEBUG - Pos is 0
2018-01-17 12:18:09,413 - DEBUG - CurCount is 0
2018-01-17 12:18:09,414 - DEBUG - In Pos 0
2018-01-17 12:18:09,414 - DEBUG - Stop ID is 0
2018-01-17 12:18:09,414 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 12:18:09,414 - DEBUG - EntryPend is 1
2018-01-17 12:18:09,415 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 12:18:09,415 - DEBUG - Entry Date is 10
2018-01-17 12:18:09,415 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 12:18:09,415 - DEBUG - Order Profit ID is 0
2018-01-17 12:18:09,417 - DEBUG - Order Entry ID is 105
2018-01-17 12:18:09,417 - DEBUG - API ID is  0
2018-01-17 12:18:09,417 - DEBUG - Current Position is 0
2018-01-17 12:18:09,417 - DEBUG - Current Position is <class 'str'>
2018-01-17 12:18:09,417 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 12:18:09,417 - DEBUG - Time is 12
2018-01-17 12:18:09,417 - DEBUG - Time is <class 'int'>
2018-01-17 12:18:09,417 - DEBUG - Time is 18
2018-01-17 12:18:09,417 - DEBUG - Time is <class 'int'>
2018-01-17 12:18:09,417 - DEBUG - Disconnected from IBController
2018-01-17 12:18:09,418 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 12:23:05,352 - DEBUG - ****************************************************
2018-01-17 12:23:05,352 - DEBUG - Current Time is 12:23PM
2018-01-17 12:23:05,354 - DEBUG - Starting Pos Mgmt H E
2018-01-17 12:23:05,354 - DEBUG - Connecting to database
2018-01-17 12:23:05,430 - DEBUG - Connected to database
2018-01-17 12:23:05,431 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 12:23:05,433 - DEBUG - Order Profit is 0
2018-01-17 12:23:05,433 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 12:23:05,434 - DEBUG - Stop ID is 0
2018-01-17 12:23:05,434 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 12:23:05,437 - DEBUG - Entry ID is 105
2018-01-17 12:23:05,437 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 12:23:05,438 - DEBUG - OCA ID is 1
2018-01-17 12:23:05,438 - DEBUG - Connecting to IBController
2018-01-17 12:23:06,443 - DEBUG - Connected to IBController
2018-01-17 12:23:06,443 - DEBUG - Position requested
2018-01-17 12:23:06,444 - DEBUG - Pos Mgmt -12987
2018-01-17 12:23:06,444 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020DDAC8>, pos=-12987, avgCost=0.95368235>
2018-01-17 12:23:06,444 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 12:23:06,444 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 12:23:06,444 - DEBUG - Position is -12987
2018-01-17 12:23:07,444 - DEBUG - Open Orders requested
2018-01-17 12:23:07,444 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x00000000020DDE10>, order=<ib.ext.Order.Order object at 0x00000000020DDD30>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002170208>>
2018-01-17 12:23:07,446 - DEBUG - Order OrderID 102
2018-01-17 12:23:07,447 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:23:07,447 - DEBUG - Order status PreSubmitted
2018-01-17 12:23:07,447 - DEBUG - Order Identification 102
2018-01-17 12:23:07,447 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:23:07,447 - DEBUG - Profit ID from database is 0
2018-01-17 12:23:07,447 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:23:07,447 - DEBUG - Stop ID database is 0
2018-01-17 12:23:07,448 - DEBUG - Entry ID database is 105
2018-01-17 12:23:07,450 - DEBUG - Reply Handler Orders is <openOrder orderId=104, contract=<ib.ext.Contract.Contract object at 0x00000000020DDE10>, order=<ib.ext.Order.Order object at 0x00000000020DDD30>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002170080>>
2018-01-17 12:23:07,450 - DEBUG - Order OrderID 104
2018-01-17 12:23:07,450 - DEBUG - reply handler status <orderStatus orderId=104, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791157, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:23:07,450 - DEBUG - Order status PreSubmitted
2018-01-17 12:23:07,450 - DEBUG - Order Identification 104
2018-01-17 12:23:07,450 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:23:07,450 - DEBUG - Profit ID from database is 0
2018-01-17 12:23:07,451 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:23:07,451 - DEBUG - Stop ID database is 0
2018-01-17 12:23:07,451 - DEBUG - Entry ID database is 105
2018-01-17 12:23:07,453 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x00000000020DDE10>, order=<ib.ext.Order.Order object at 0x00000000020DDD30>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002170278>>
2018-01-17 12:23:07,453 - DEBUG - Order OrderID 103
2018-01-17 12:23:07,453 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:23:07,453 - DEBUG - Order status PreSubmitted
2018-01-17 12:23:07,453 - DEBUG - Order Identification 103
2018-01-17 12:23:07,454 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:23:07,454 - DEBUG - Profit ID from database is 0
2018-01-17 12:23:07,454 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:23:07,454 - DEBUG - Stop ID database is 0
2018-01-17 12:23:07,454 - DEBUG - Entry ID database is 105
2018-01-17 12:23:07,456 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x00000000020DDE10>, order=<ib.ext.Order.Order object at 0x00000000020DDD30>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002170358>>
2018-01-17 12:23:07,457 - DEBUG - Order OrderID 105
2018-01-17 12:23:07,457 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:23:07,457 - DEBUG - Order status PreSubmitted
2018-01-17 12:23:07,457 - DEBUG - Order Identification 105
2018-01-17 12:23:07,457 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:23:07,457 - DEBUG - Profit ID from database is 0
2018-01-17 12:23:07,459 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:23:07,459 - DEBUG - Stop ID database is 0
2018-01-17 12:23:07,459 - DEBUG - Entry ID database is 105
2018-01-17 12:23:07,459 - DEBUG - Entry API ID is 105
2018-01-17 12:23:09,446 - DEBUG - Connecting to database
2018-01-17 12:23:09,453 - DEBUG - Connected to database
2018-01-17 12:23:09,454 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 12:23:09,454 - DEBUG - Stop loss value is 71.82
2018-01-17 12:23:09,456 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 12:23:09,457 - DEBUG - Stop loss value is 85.25
2018-01-17 12:23:09,457 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 12:23:09,457 - DEBUG - EntryPrice value is 74.3
2018-01-17 12:23:09,460 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 12:23:09,460 - DEBUG - Stop quantity 1
2018-01-17 12:23:09,460 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 12:23:09,461 - DEBUG - Direction is Long
2018-01-17 12:23:09,463 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 12:23:09,463 - DEBUG - Count is 0
2018-01-17 12:23:09,463 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 12:23:09,464 - DEBUG - Stop Loss Flag is 0
2018-01-17 12:23:09,466 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 12:23:09,466 - DEBUG - Max ID Order is (105,)
2018-01-17 12:23:09,467 - DEBUG - Today is 2018-01-17
2018-01-17 12:23:09,467 - DEBUG - Day of the week 2
2018-01-17 12:23:09,467 - DEBUG - Yesterday is 01/16/2018
2018-01-17 12:23:09,467 - DEBUG - In Position is  0
2018-01-17 12:23:09,467 - DEBUG - In Position is  <class 'int'>
2018-01-17 12:23:09,467 - DEBUG - curStopLossFlag is  0
2018-01-17 12:23:09,467 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 12:23:09,469 - DEBUG - Checking if Entry has been filled
2018-01-17 12:23:09,469 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 12:23:09,470 - DEBUG - EntryPend is 1
2018-01-17 12:23:09,470 - DEBUG - Try to Cancel Stop
2018-01-17 12:23:09,470 - DEBUG - Stop API ID 0
2018-01-17 12:23:09,470 - DEBUG - Profit API ID 0
2018-01-17 12:23:09,470 - DEBUG - Stop API ID <class 'int'>
2018-01-17 12:23:09,470 - DEBUG - Profit API ID <class 'int'>
2018-01-17 12:23:09,471 - DEBUG - Pos is 0
2018-01-17 12:23:09,471 - DEBUG - CurCount is 0
2018-01-17 12:23:09,471 - DEBUG - In Pos 0
2018-01-17 12:23:09,471 - DEBUG - Stop ID is 0
2018-01-17 12:23:09,471 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 12:23:09,473 - DEBUG - EntryPend is 1
2018-01-17 12:23:09,473 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 12:23:09,473 - DEBUG - Entry Date is 10
2018-01-17 12:23:09,473 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 12:23:09,474 - DEBUG - Order Profit ID is 0
2018-01-17 12:23:09,474 - DEBUG - Order Entry ID is 105
2018-01-17 12:23:09,474 - DEBUG - API ID is  0
2018-01-17 12:23:09,474 - DEBUG - Current Position is 0
2018-01-17 12:23:09,474 - DEBUG - Current Position is <class 'str'>
2018-01-17 12:23:09,476 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 12:23:09,476 - DEBUG - Time is 12
2018-01-17 12:23:09,476 - DEBUG - Time is <class 'int'>
2018-01-17 12:23:09,476 - DEBUG - Time is 23
2018-01-17 12:23:09,476 - DEBUG - Time is <class 'int'>
2018-01-17 12:23:09,476 - DEBUG - Disconnected from IBController
2018-01-17 12:23:09,476 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 12:28:05,345 - DEBUG - ****************************************************
2018-01-17 12:28:05,345 - DEBUG - Current Time is 12:28PM
2018-01-17 12:28:05,345 - DEBUG - Starting Pos Mgmt H E
2018-01-17 12:28:05,345 - DEBUG - Connecting to database
2018-01-17 12:28:05,371 - DEBUG - Connected to database
2018-01-17 12:28:05,371 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 12:28:05,372 - DEBUG - Order Profit is 0
2018-01-17 12:28:05,372 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 12:28:05,374 - DEBUG - Stop ID is 0
2018-01-17 12:28:05,374 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 12:28:05,375 - DEBUG - Entry ID is 105
2018-01-17 12:28:05,375 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 12:28:05,377 - DEBUG - OCA ID is 1
2018-01-17 12:28:05,378 - DEBUG - Connecting to IBController
2018-01-17 12:28:06,381 - DEBUG - Connected to IBController
2018-01-17 12:28:06,381 - DEBUG - Position requested
2018-01-17 12:28:06,382 - DEBUG - Pos Mgmt -12987
2018-01-17 12:28:06,384 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000213DEF0>, pos=-12987, avgCost=0.95368235>
2018-01-17 12:28:06,384 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 12:28:06,384 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 12:28:06,384 - DEBUG - Position is -12987
2018-01-17 12:28:07,382 - DEBUG - Open Orders requested
2018-01-17 12:28:07,395 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x000000000213DA90>, order=<ib.ext.Order.Order object at 0x000000000213DB70>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021D0198>>
2018-01-17 12:28:07,397 - DEBUG - Order OrderID 102
2018-01-17 12:28:07,397 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:28:07,398 - DEBUG - Order status PreSubmitted
2018-01-17 12:28:07,398 - DEBUG - Order Identification 102
2018-01-17 12:28:07,398 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:28:07,398 - DEBUG - Profit ID from database is 0
2018-01-17 12:28:07,400 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:28:07,400 - DEBUG - Stop ID database is 0
2018-01-17 12:28:07,400 - DEBUG - Entry ID database is 105
2018-01-17 12:28:07,401 - DEBUG - Reply Handler Orders is <openOrder orderId=104, contract=<ib.ext.Contract.Contract object at 0x000000000213DA90>, order=<ib.ext.Order.Order object at 0x000000000213DB70>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021D0208>>
2018-01-17 12:28:07,401 - DEBUG - Order OrderID 104
2018-01-17 12:28:07,401 - DEBUG - reply handler status <orderStatus orderId=104, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791157, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:28:07,401 - DEBUG - Order status PreSubmitted
2018-01-17 12:28:07,403 - DEBUG - Order Identification 104
2018-01-17 12:28:07,403 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:28:07,403 - DEBUG - Profit ID from database is 0
2018-01-17 12:28:07,403 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:28:07,404 - DEBUG - Stop ID database is 0
2018-01-17 12:28:07,404 - DEBUG - Entry ID database is 105
2018-01-17 12:28:07,404 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x000000000213DA90>, order=<ib.ext.Order.Order object at 0x000000000213DB70>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021D02E8>>
2018-01-17 12:28:07,404 - DEBUG - Order OrderID 103
2018-01-17 12:28:07,405 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:28:07,405 - DEBUG - Order status PreSubmitted
2018-01-17 12:28:07,405 - DEBUG - Order Identification 103
2018-01-17 12:28:07,405 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:28:07,407 - DEBUG - Profit ID from database is 0
2018-01-17 12:28:07,407 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:28:07,407 - DEBUG - Stop ID database is 0
2018-01-17 12:28:07,407 - DEBUG - Entry ID database is 105
2018-01-17 12:28:07,407 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x000000000213DA90>, order=<ib.ext.Order.Order object at 0x000000000213DB70>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021D0358>>
2018-01-17 12:28:07,408 - DEBUG - Order OrderID 105
2018-01-17 12:28:07,408 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:28:07,410 - DEBUG - Order status PreSubmitted
2018-01-17 12:28:07,410 - DEBUG - Order Identification 105
2018-01-17 12:28:07,410 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:28:07,410 - DEBUG - Profit ID from database is 0
2018-01-17 12:28:07,411 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:28:07,411 - DEBUG - Stop ID database is 0
2018-01-17 12:28:07,411 - DEBUG - Entry ID database is 105
2018-01-17 12:28:07,411 - DEBUG - Entry API ID is 105
2018-01-17 12:28:09,384 - DEBUG - Connecting to database
2018-01-17 12:28:09,391 - DEBUG - Connected to database
2018-01-17 12:28:09,391 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 12:28:09,392 - DEBUG - Stop loss value is 71.82
2018-01-17 12:28:09,394 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 12:28:09,394 - DEBUG - Stop loss value is 85.25
2018-01-17 12:28:09,395 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 12:28:09,395 - DEBUG - EntryPrice value is 74.3
2018-01-17 12:28:09,398 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 12:28:09,398 - DEBUG - Stop quantity 1
2018-01-17 12:28:09,398 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 12:28:09,400 - DEBUG - Direction is Long
2018-01-17 12:28:09,401 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 12:28:09,401 - DEBUG - Count is 0
2018-01-17 12:28:09,403 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 12:28:09,403 - DEBUG - Stop Loss Flag is 0
2018-01-17 12:28:09,404 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 12:28:09,404 - DEBUG - Max ID Order is (105,)
2018-01-17 12:28:09,404 - DEBUG - Today is 2018-01-17
2018-01-17 12:28:09,405 - DEBUG - Day of the week 2
2018-01-17 12:28:09,405 - DEBUG - Yesterday is 01/16/2018
2018-01-17 12:28:09,405 - DEBUG - In Position is  0
2018-01-17 12:28:09,405 - DEBUG - In Position is  <class 'int'>
2018-01-17 12:28:09,407 - DEBUG - curStopLossFlag is  0
2018-01-17 12:28:09,407 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 12:28:09,407 - DEBUG - Checking if Entry has been filled
2018-01-17 12:28:09,407 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 12:28:09,408 - DEBUG - EntryPend is 1
2018-01-17 12:28:09,408 - DEBUG - Try to Cancel Stop
2018-01-17 12:28:09,408 - DEBUG - Stop API ID 0
2018-01-17 12:28:09,408 - DEBUG - Profit API ID 0
2018-01-17 12:28:09,410 - DEBUG - Stop API ID <class 'int'>
2018-01-17 12:28:09,410 - DEBUG - Profit API ID <class 'int'>
2018-01-17 12:28:09,410 - DEBUG - Pos is 0
2018-01-17 12:28:09,410 - DEBUG - CurCount is 0
2018-01-17 12:28:09,411 - DEBUG - In Pos 0
2018-01-17 12:28:09,411 - DEBUG - Stop ID is 0
2018-01-17 12:28:09,411 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 12:28:09,411 - DEBUG - EntryPend is 1
2018-01-17 12:28:09,413 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 12:28:09,413 - DEBUG - Entry Date is 10
2018-01-17 12:28:09,413 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 12:28:09,413 - DEBUG - Order Profit ID is 0
2018-01-17 12:28:09,413 - DEBUG - Order Entry ID is 105
2018-01-17 12:28:09,414 - DEBUG - API ID is  0
2018-01-17 12:28:09,414 - DEBUG - Current Position is 0
2018-01-17 12:28:09,414 - DEBUG - Current Position is <class 'str'>
2018-01-17 12:28:09,414 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 12:28:09,414 - DEBUG - Time is 12
2018-01-17 12:28:09,414 - DEBUG - Time is <class 'int'>
2018-01-17 12:28:09,414 - DEBUG - Time is 28
2018-01-17 12:28:09,414 - DEBUG - Time is <class 'int'>
2018-01-17 12:28:09,414 - DEBUG - Disconnected from IBController
2018-01-17 12:28:09,414 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 12:33:05,342 - DEBUG - ****************************************************
2018-01-17 12:33:05,342 - DEBUG - Current Time is 12:33PM
2018-01-17 12:33:05,342 - DEBUG - Starting Pos Mgmt H E
2018-01-17 12:33:05,342 - DEBUG - Connecting to database
2018-01-17 12:33:05,359 - DEBUG - Connected to database
2018-01-17 12:33:05,359 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 12:33:05,361 - DEBUG - Order Profit is 0
2018-01-17 12:33:05,361 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 12:33:05,364 - DEBUG - Stop ID is 0
2018-01-17 12:33:05,364 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 12:33:05,365 - DEBUG - Entry ID is 105
2018-01-17 12:33:05,365 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 12:33:05,367 - DEBUG - OCA ID is 1
2018-01-17 12:33:05,367 - DEBUG - Connecting to IBController
2018-01-17 12:33:06,372 - DEBUG - Connected to IBController
2018-01-17 12:33:06,372 - DEBUG - Position requested
2018-01-17 12:33:06,374 - DEBUG - Pos Mgmt -12987
2018-01-17 12:33:06,375 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020EDA58>, pos=-12987, avgCost=0.95368235>
2018-01-17 12:33:06,375 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 12:33:06,375 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 12:33:06,375 - DEBUG - Position is -12987
2018-01-17 12:33:07,374 - DEBUG - Open Orders requested
2018-01-17 12:33:07,375 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x00000000020EDE10>, order=<ib.ext.Order.Order object at 0x00000000020EDC88>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002180208>>
2018-01-17 12:33:07,377 - DEBUG - Order OrderID 102
2018-01-17 12:33:07,377 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:33:07,378 - DEBUG - Order status PreSubmitted
2018-01-17 12:33:07,378 - DEBUG - Order Identification 102
2018-01-17 12:33:07,378 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:33:07,378 - DEBUG - Profit ID from database is 0
2018-01-17 12:33:07,378 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:33:07,378 - DEBUG - Stop ID database is 0
2018-01-17 12:33:07,378 - DEBUG - Entry ID database is 105
2018-01-17 12:33:07,380 - DEBUG - Reply Handler Orders is <openOrder orderId=104, contract=<ib.ext.Contract.Contract object at 0x00000000020EDE10>, order=<ib.ext.Order.Order object at 0x00000000020EDC88>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021800B8>>
2018-01-17 12:33:07,381 - DEBUG - Order OrderID 104
2018-01-17 12:33:07,381 - DEBUG - reply handler status <orderStatus orderId=104, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791157, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:33:07,381 - DEBUG - Order status PreSubmitted
2018-01-17 12:33:07,381 - DEBUG - Order Identification 104
2018-01-17 12:33:07,381 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:33:07,381 - DEBUG - Profit ID from database is 0
2018-01-17 12:33:07,381 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:33:07,381 - DEBUG - Stop ID database is 0
2018-01-17 12:33:07,382 - DEBUG - Entry ID database is 105
2018-01-17 12:33:07,384 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x00000000020EDE10>, order=<ib.ext.Order.Order object at 0x00000000020EDC88>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002180278>>
2018-01-17 12:33:07,384 - DEBUG - Order OrderID 103
2018-01-17 12:33:07,384 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:33:07,384 - DEBUG - Order status PreSubmitted
2018-01-17 12:33:07,384 - DEBUG - Order Identification 103
2018-01-17 12:33:07,384 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:33:07,384 - DEBUG - Profit ID from database is 0
2018-01-17 12:33:07,385 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:33:07,385 - DEBUG - Stop ID database is 0
2018-01-17 12:33:07,385 - DEBUG - Entry ID database is 105
2018-01-17 12:33:07,387 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x00000000020EDE10>, order=<ib.ext.Order.Order object at 0x00000000020EDC88>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002180358>>
2018-01-17 12:33:07,388 - DEBUG - Order OrderID 105
2018-01-17 12:33:07,388 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:33:07,388 - DEBUG - Order status PreSubmitted
2018-01-17 12:33:07,388 - DEBUG - Order Identification 105
2018-01-17 12:33:07,388 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:33:07,388 - DEBUG - Profit ID from database is 0
2018-01-17 12:33:07,388 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:33:07,390 - DEBUG - Stop ID database is 0
2018-01-17 12:33:07,390 - DEBUG - Entry ID database is 105
2018-01-17 12:33:07,390 - DEBUG - Entry API ID is 105
2018-01-17 12:33:09,377 - DEBUG - Connecting to database
2018-01-17 12:33:09,384 - DEBUG - Connected to database
2018-01-17 12:33:09,385 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 12:33:09,385 - DEBUG - Stop loss value is 71.82
2018-01-17 12:33:09,387 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 12:33:09,388 - DEBUG - Stop loss value is 85.25
2018-01-17 12:33:09,388 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 12:33:09,388 - DEBUG - EntryPrice value is 74.3
2018-01-17 12:33:09,391 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 12:33:09,391 - DEBUG - Stop quantity 1
2018-01-17 12:33:09,391 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 12:33:09,392 - DEBUG - Direction is Long
2018-01-17 12:33:09,394 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 12:33:09,394 - DEBUG - Count is 0
2018-01-17 12:33:09,395 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 12:33:09,395 - DEBUG - Stop Loss Flag is 0
2018-01-17 12:33:09,397 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 12:33:09,397 - DEBUG - Max ID Order is (105,)
2018-01-17 12:33:09,398 - DEBUG - Today is 2018-01-17
2018-01-17 12:33:09,398 - DEBUG - Day of the week 2
2018-01-17 12:33:09,398 - DEBUG - Yesterday is 01/16/2018
2018-01-17 12:33:09,398 - DEBUG - In Position is  0
2018-01-17 12:33:09,398 - DEBUG - In Position is  <class 'int'>
2018-01-17 12:33:09,398 - DEBUG - curStopLossFlag is  0
2018-01-17 12:33:09,398 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 12:33:09,400 - DEBUG - Checking if Entry has been filled
2018-01-17 12:33:09,400 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 12:33:09,401 - DEBUG - EntryPend is 1
2018-01-17 12:33:09,401 - DEBUG - Try to Cancel Stop
2018-01-17 12:33:09,401 - DEBUG - Stop API ID 0
2018-01-17 12:33:09,401 - DEBUG - Profit API ID 0
2018-01-17 12:33:09,401 - DEBUG - Stop API ID <class 'int'>
2018-01-17 12:33:09,401 - DEBUG - Profit API ID <class 'int'>
2018-01-17 12:33:09,401 - DEBUG - Pos is 0
2018-01-17 12:33:09,403 - DEBUG - CurCount is 0
2018-01-17 12:33:09,403 - DEBUG - In Pos 0
2018-01-17 12:33:09,403 - DEBUG - Stop ID is 0
2018-01-17 12:33:09,403 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 12:33:09,404 - DEBUG - EntryPend is 1
2018-01-17 12:33:09,404 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 12:33:09,404 - DEBUG - Entry Date is 10
2018-01-17 12:33:09,404 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 12:33:09,405 - DEBUG - Order Profit ID is 0
2018-01-17 12:33:09,405 - DEBUG - Order Entry ID is 105
2018-01-17 12:33:09,405 - DEBUG - API ID is  0
2018-01-17 12:33:09,405 - DEBUG - Current Position is 0
2018-01-17 12:33:09,405 - DEBUG - Current Position is <class 'str'>
2018-01-17 12:33:09,405 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 12:33:09,407 - DEBUG - Time is 12
2018-01-17 12:33:09,407 - DEBUG - Time is <class 'int'>
2018-01-17 12:33:09,407 - DEBUG - Time is 33
2018-01-17 12:33:09,407 - DEBUG - Time is <class 'int'>
2018-01-17 12:33:09,407 - DEBUG - Disconnected from IBController
2018-01-17 12:33:09,407 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 12:38:05,362 - DEBUG - ****************************************************
2018-01-17 12:38:05,364 - DEBUG - Current Time is 12:38PM
2018-01-17 12:38:05,364 - DEBUG - Starting Pos Mgmt H E
2018-01-17 12:38:05,365 - DEBUG - Connecting to database
2018-01-17 12:38:05,543 - DEBUG - Connected to database
2018-01-17 12:38:05,545 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 12:38:05,546 - DEBUG - Order Profit is 0
2018-01-17 12:38:05,546 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 12:38:05,548 - DEBUG - Stop ID is 0
2018-01-17 12:38:05,549 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 12:38:05,549 - DEBUG - Entry ID is 105
2018-01-17 12:38:05,549 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 12:38:05,552 - DEBUG - OCA ID is 1
2018-01-17 12:38:05,552 - DEBUG - Connecting to IBController
2018-01-17 12:38:06,559 - DEBUG - Connected to IBController
2018-01-17 12:38:06,559 - DEBUG - Position requested
2018-01-17 12:38:06,559 - DEBUG - Pos Mgmt -12987
2018-01-17 12:38:06,561 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211DEF0>, pos=-12987, avgCost=0.95368235>
2018-01-17 12:38:06,561 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 12:38:06,561 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 12:38:06,562 - DEBUG - Position is -12987
2018-01-17 12:38:07,559 - DEBUG - Open Orders requested
2018-01-17 12:38:07,562 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x000000000211DDD8>, order=<ib.ext.Order.Order object at 0x000000000211DA58>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B0208>>
2018-01-17 12:38:07,562 - DEBUG - Order OrderID 102
2018-01-17 12:38:07,562 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:38:07,563 - DEBUG - Order status PreSubmitted
2018-01-17 12:38:07,563 - DEBUG - Order Identification 102
2018-01-17 12:38:07,563 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:38:07,563 - DEBUG - Profit ID from database is 0
2018-01-17 12:38:07,563 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:38:07,565 - DEBUG - Stop ID database is 0
2018-01-17 12:38:07,565 - DEBUG - Entry ID database is 105
2018-01-17 12:38:07,565 - DEBUG - Reply Handler Orders is <openOrder orderId=104, contract=<ib.ext.Contract.Contract object at 0x000000000211DDD8>, order=<ib.ext.Order.Order object at 0x000000000211DA58>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B00B8>>
2018-01-17 12:38:07,565 - DEBUG - Order OrderID 104
2018-01-17 12:38:07,566 - DEBUG - reply handler status <orderStatus orderId=104, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791157, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:38:07,566 - DEBUG - Order status PreSubmitted
2018-01-17 12:38:07,566 - DEBUG - Order Identification 104
2018-01-17 12:38:07,568 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:38:07,568 - DEBUG - Profit ID from database is 0
2018-01-17 12:38:07,568 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:38:07,568 - DEBUG - Stop ID database is 0
2018-01-17 12:38:07,568 - DEBUG - Entry ID database is 105
2018-01-17 12:38:07,569 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x000000000211DDD8>, order=<ib.ext.Order.Order object at 0x000000000211DA58>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B0278>>
2018-01-17 12:38:07,569 - DEBUG - Order OrderID 103
2018-01-17 12:38:07,569 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:38:07,571 - DEBUG - Order status PreSubmitted
2018-01-17 12:38:07,571 - DEBUG - Order Identification 103
2018-01-17 12:38:07,571 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:38:07,571 - DEBUG - Profit ID from database is 0
2018-01-17 12:38:07,572 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:38:07,572 - DEBUG - Stop ID database is 0
2018-01-17 12:38:07,572 - DEBUG - Entry ID database is 105
2018-01-17 12:38:07,572 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x000000000211DDD8>, order=<ib.ext.Order.Order object at 0x000000000211DA58>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B0358>>
2018-01-17 12:38:07,572 - DEBUG - Order OrderID 105
2018-01-17 12:38:07,573 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:38:07,573 - DEBUG - Order status PreSubmitted
2018-01-17 12:38:07,573 - DEBUG - Order Identification 105
2018-01-17 12:38:07,575 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:38:07,575 - DEBUG - Profit ID from database is 0
2018-01-17 12:38:07,575 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:38:07,575 - DEBUG - Stop ID database is 0
2018-01-17 12:38:07,575 - DEBUG - Entry ID database is 105
2018-01-17 12:38:07,575 - DEBUG - Entry API ID is 105
2018-01-17 12:38:09,562 - DEBUG - Connecting to database
2018-01-17 12:38:09,569 - DEBUG - Connected to database
2018-01-17 12:38:09,572 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 12:38:09,572 - DEBUG - Stop loss value is 71.82
2018-01-17 12:38:09,572 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 12:38:09,573 - DEBUG - Stop loss value is 85.25
2018-01-17 12:38:09,575 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 12:38:09,575 - DEBUG - EntryPrice value is 74.3
2018-01-17 12:38:09,576 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 12:38:09,576 - DEBUG - Stop quantity 1
2018-01-17 12:38:09,578 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 12:38:09,578 - DEBUG - Direction is Long
2018-01-17 12:38:09,585 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 12:38:09,586 - DEBUG - Count is 0
2018-01-17 12:38:09,588 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 12:38:09,588 - DEBUG - Stop Loss Flag is 0
2018-01-17 12:38:09,589 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 12:38:09,589 - DEBUG - Max ID Order is (105,)
2018-01-17 12:38:09,591 - DEBUG - Today is 2018-01-17
2018-01-17 12:38:09,591 - DEBUG - Day of the week 2
2018-01-17 12:38:09,591 - DEBUG - Yesterday is 01/16/2018
2018-01-17 12:38:09,591 - DEBUG - In Position is  0
2018-01-17 12:38:09,592 - DEBUG - In Position is  <class 'int'>
2018-01-17 12:38:09,592 - DEBUG - curStopLossFlag is  0
2018-01-17 12:38:09,592 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 12:38:09,592 - DEBUG - Checking if Entry has been filled
2018-01-17 12:38:09,592 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 12:38:09,594 - DEBUG - EntryPend is 1
2018-01-17 12:38:09,594 - DEBUG - Try to Cancel Stop
2018-01-17 12:38:09,594 - DEBUG - Stop API ID 0
2018-01-17 12:38:09,595 - DEBUG - Profit API ID 0
2018-01-17 12:38:09,595 - DEBUG - Stop API ID <class 'int'>
2018-01-17 12:38:09,595 - DEBUG - Profit API ID <class 'int'>
2018-01-17 12:38:09,595 - DEBUG - Pos is 0
2018-01-17 12:38:09,595 - DEBUG - CurCount is 0
2018-01-17 12:38:09,595 - DEBUG - In Pos 0
2018-01-17 12:38:09,595 - DEBUG - Stop ID is 0
2018-01-17 12:38:09,595 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 12:38:09,598 - DEBUG - EntryPend is 1
2018-01-17 12:38:09,598 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 12:38:09,598 - DEBUG - Entry Date is 10
2018-01-17 12:38:09,598 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 12:38:09,598 - DEBUG - Order Profit ID is 0
2018-01-17 12:38:09,598 - DEBUG - Order Entry ID is 105
2018-01-17 12:38:09,598 - DEBUG - API ID is  0
2018-01-17 12:38:09,598 - DEBUG - Current Position is 0
2018-01-17 12:38:09,598 - DEBUG - Current Position is <class 'str'>
2018-01-17 12:38:09,599 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 12:38:09,599 - DEBUG - Time is 12
2018-01-17 12:38:09,599 - DEBUG - Time is <class 'int'>
2018-01-17 12:38:09,599 - DEBUG - Time is 38
2018-01-17 12:38:09,599 - DEBUG - Time is <class 'int'>
2018-01-17 12:38:09,601 - DEBUG - Disconnected from IBController
2018-01-17 12:38:09,601 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 12:43:05,352 - DEBUG - ****************************************************
2018-01-17 12:43:05,352 - DEBUG - Current Time is 12:43PM
2018-01-17 12:43:05,354 - DEBUG - Starting Pos Mgmt H E
2018-01-17 12:43:05,354 - DEBUG - Connecting to database
2018-01-17 12:43:05,371 - DEBUG - Connected to database
2018-01-17 12:43:05,371 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 12:43:05,372 - DEBUG - Order Profit is 0
2018-01-17 12:43:05,372 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 12:43:05,375 - DEBUG - Stop ID is 0
2018-01-17 12:43:05,375 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 12:43:05,375 - DEBUG - Entry ID is 105
2018-01-17 12:43:05,377 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 12:43:05,378 - DEBUG - OCA ID is 1
2018-01-17 12:43:05,378 - DEBUG - Connecting to IBController
2018-01-17 12:43:06,382 - DEBUG - Connected to IBController
2018-01-17 12:43:06,382 - DEBUG - Position requested
2018-01-17 12:43:06,384 - DEBUG - Pos Mgmt -12987
2018-01-17 12:43:06,384 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000213DA90>, pos=-12987, avgCost=0.95368235>
2018-01-17 12:43:06,384 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 12:43:06,384 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 12:43:06,384 - DEBUG - Position is -12987
2018-01-17 12:43:07,384 - DEBUG - Open Orders requested
2018-01-17 12:43:07,385 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x000000000213DE10>, order=<ib.ext.Order.Order object at 0x000000000213DC18>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021D0208>>
2018-01-17 12:43:07,387 - DEBUG - Order OrderID 102
2018-01-17 12:43:07,387 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:43:07,388 - DEBUG - Order status PreSubmitted
2018-01-17 12:43:07,388 - DEBUG - Order Identification 102
2018-01-17 12:43:07,388 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:43:07,388 - DEBUG - Profit ID from database is 0
2018-01-17 12:43:07,388 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:43:07,388 - DEBUG - Stop ID database is 0
2018-01-17 12:43:07,388 - DEBUG - Entry ID database is 105
2018-01-17 12:43:07,390 - DEBUG - Reply Handler Orders is <openOrder orderId=104, contract=<ib.ext.Contract.Contract object at 0x000000000213DE10>, order=<ib.ext.Order.Order object at 0x000000000213DC18>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021D00B8>>
2018-01-17 12:43:07,391 - DEBUG - Order OrderID 104
2018-01-17 12:43:07,391 - DEBUG - reply handler status <orderStatus orderId=104, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791157, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:43:07,391 - DEBUG - Order status PreSubmitted
2018-01-17 12:43:07,391 - DEBUG - Order Identification 104
2018-01-17 12:43:07,391 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:43:07,391 - DEBUG - Profit ID from database is 0
2018-01-17 12:43:07,391 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:43:07,391 - DEBUG - Stop ID database is 0
2018-01-17 12:43:07,392 - DEBUG - Entry ID database is 105
2018-01-17 12:43:07,394 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x000000000213DE10>, order=<ib.ext.Order.Order object at 0x000000000213DC18>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021D0278>>
2018-01-17 12:43:07,394 - DEBUG - Order OrderID 103
2018-01-17 12:43:07,394 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:43:07,394 - DEBUG - Order status PreSubmitted
2018-01-17 12:43:07,394 - DEBUG - Order Identification 103
2018-01-17 12:43:07,394 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:43:07,395 - DEBUG - Profit ID from database is 0
2018-01-17 12:43:07,395 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:43:07,395 - DEBUG - Stop ID database is 0
2018-01-17 12:43:07,395 - DEBUG - Entry ID database is 105
2018-01-17 12:43:07,397 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x000000000213DE10>, order=<ib.ext.Order.Order object at 0x000000000213DC18>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021D0358>>
2018-01-17 12:43:07,398 - DEBUG - Order OrderID 105
2018-01-17 12:43:07,398 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:43:07,398 - DEBUG - Order status PreSubmitted
2018-01-17 12:43:07,398 - DEBUG - Order Identification 105
2018-01-17 12:43:07,398 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:43:07,398 - DEBUG - Profit ID from database is 0
2018-01-17 12:43:07,398 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:43:07,400 - DEBUG - Stop ID database is 0
2018-01-17 12:43:07,400 - DEBUG - Entry ID database is 105
2018-01-17 12:43:07,400 - DEBUG - Entry API ID is 105
2018-01-17 12:43:09,387 - DEBUG - Connecting to database
2018-01-17 12:43:09,394 - DEBUG - Connected to database
2018-01-17 12:43:09,395 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 12:43:09,395 - DEBUG - Stop loss value is 71.82
2018-01-17 12:43:09,398 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 12:43:09,398 - DEBUG - Stop loss value is 85.25
2018-01-17 12:43:09,398 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 12:43:09,400 - DEBUG - EntryPrice value is 74.3
2018-01-17 12:43:09,401 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 12:43:09,401 - DEBUG - Stop quantity 1
2018-01-17 12:43:09,403 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 12:43:09,403 - DEBUG - Direction is Long
2018-01-17 12:43:09,404 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 12:43:09,404 - DEBUG - Count is 0
2018-01-17 12:43:09,405 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 12:43:09,405 - DEBUG - Stop Loss Flag is 0
2018-01-17 12:43:09,407 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 12:43:09,407 - DEBUG - Max ID Order is (105,)
2018-01-17 12:43:09,407 - DEBUG - Today is 2018-01-17
2018-01-17 12:43:09,408 - DEBUG - Day of the week 2
2018-01-17 12:43:09,408 - DEBUG - Yesterday is 01/16/2018
2018-01-17 12:43:09,408 - DEBUG - In Position is  0
2018-01-17 12:43:09,408 - DEBUG - In Position is  <class 'int'>
2018-01-17 12:43:09,410 - DEBUG - curStopLossFlag is  0
2018-01-17 12:43:09,410 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 12:43:09,410 - DEBUG - Checking if Entry has been filled
2018-01-17 12:43:09,410 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 12:43:09,411 - DEBUG - EntryPend is 1
2018-01-17 12:43:09,411 - DEBUG - Try to Cancel Stop
2018-01-17 12:43:09,411 - DEBUG - Stop API ID 0
2018-01-17 12:43:09,413 - DEBUG - Profit API ID 0
2018-01-17 12:43:09,413 - DEBUG - Stop API ID <class 'int'>
2018-01-17 12:43:09,413 - DEBUG - Profit API ID <class 'int'>
2018-01-17 12:43:09,413 - DEBUG - Pos is 0
2018-01-17 12:43:09,413 - DEBUG - CurCount is 0
2018-01-17 12:43:09,414 - DEBUG - In Pos 0
2018-01-17 12:43:09,414 - DEBUG - Stop ID is 0
2018-01-17 12:43:09,414 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 12:43:09,414 - DEBUG - EntryPend is 1
2018-01-17 12:43:09,415 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 12:43:09,415 - DEBUG - Entry Date is 10
2018-01-17 12:43:09,415 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 12:43:09,415 - DEBUG - Order Profit ID is 0
2018-01-17 12:43:09,415 - DEBUG - Order Entry ID is 105
2018-01-17 12:43:09,417 - DEBUG - API ID is  0
2018-01-17 12:43:09,417 - DEBUG - Current Position is 0
2018-01-17 12:43:09,417 - DEBUG - Current Position is <class 'str'>
2018-01-17 12:43:09,417 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 12:43:09,417 - DEBUG - Time is 12
2018-01-17 12:43:09,417 - DEBUG - Time is <class 'int'>
2018-01-17 12:43:09,417 - DEBUG - Time is 43
2018-01-17 12:43:09,417 - DEBUG - Time is <class 'int'>
2018-01-17 12:43:09,417 - DEBUG - Disconnected from IBController
2018-01-17 12:43:09,417 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 12:48:05,355 - DEBUG - ****************************************************
2018-01-17 12:48:05,357 - DEBUG - Current Time is 12:48PM
2018-01-17 12:48:05,357 - DEBUG - Starting Pos Mgmt H E
2018-01-17 12:48:05,358 - DEBUG - Connecting to database
2018-01-17 12:48:05,378 - DEBUG - Connected to database
2018-01-17 12:48:05,378 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 12:48:05,381 - DEBUG - Order Profit is 0
2018-01-17 12:48:05,381 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 12:48:05,382 - DEBUG - Stop ID is 0
2018-01-17 12:48:05,382 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 12:48:05,384 - DEBUG - Entry ID is 105
2018-01-17 12:48:05,384 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 12:48:05,385 - DEBUG - OCA ID is 1
2018-01-17 12:48:05,387 - DEBUG - Connecting to IBController
2018-01-17 12:48:06,395 - DEBUG - Connected to IBController
2018-01-17 12:48:06,395 - DEBUG - Position requested
2018-01-17 12:48:06,397 - DEBUG - Pos Mgmt -12987
2018-01-17 12:48:06,398 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212DEF0>, pos=-12987, avgCost=0.95368235>
2018-01-17 12:48:06,398 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 12:48:06,398 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 12:48:06,398 - DEBUG - Position is -12987
2018-01-17 12:48:07,398 - DEBUG - Open Orders requested
2018-01-17 12:48:07,400 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x000000000212DD30>, order=<ib.ext.Order.Order object at 0x000000000212DAC8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C0198>>
2018-01-17 12:48:07,401 - DEBUG - Order OrderID 102
2018-01-17 12:48:07,401 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:48:07,401 - DEBUG - Order status PreSubmitted
2018-01-17 12:48:07,401 - DEBUG - Order Identification 102
2018-01-17 12:48:07,401 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:48:07,401 - DEBUG - Profit ID from database is 0
2018-01-17 12:48:07,403 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:48:07,403 - DEBUG - Stop ID database is 0
2018-01-17 12:48:07,403 - DEBUG - Entry ID database is 105
2018-01-17 12:48:07,404 - DEBUG - Reply Handler Orders is <openOrder orderId=104, contract=<ib.ext.Contract.Contract object at 0x000000000212DD30>, order=<ib.ext.Order.Order object at 0x000000000212DAC8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C0208>>
2018-01-17 12:48:07,404 - DEBUG - Order OrderID 104
2018-01-17 12:48:07,404 - DEBUG - reply handler status <orderStatus orderId=104, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791157, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:48:07,404 - DEBUG - Order status PreSubmitted
2018-01-17 12:48:07,404 - DEBUG - Order Identification 104
2018-01-17 12:48:07,405 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:48:07,405 - DEBUG - Profit ID from database is 0
2018-01-17 12:48:07,405 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:48:07,405 - DEBUG - Stop ID database is 0
2018-01-17 12:48:07,405 - DEBUG - Entry ID database is 105
2018-01-17 12:48:07,407 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x000000000212DD30>, order=<ib.ext.Order.Order object at 0x000000000212DAC8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C02E8>>
2018-01-17 12:48:07,407 - DEBUG - Order OrderID 103
2018-01-17 12:48:07,407 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:48:07,408 - DEBUG - Order status PreSubmitted
2018-01-17 12:48:07,408 - DEBUG - Order Identification 103
2018-01-17 12:48:07,408 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:48:07,408 - DEBUG - Profit ID from database is 0
2018-01-17 12:48:07,408 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:48:07,410 - DEBUG - Stop ID database is 0
2018-01-17 12:48:07,410 - DEBUG - Entry ID database is 105
2018-01-17 12:48:07,411 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x000000000212DD30>, order=<ib.ext.Order.Order object at 0x000000000212DAC8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C0358>>
2018-01-17 12:48:07,411 - DEBUG - Order OrderID 105
2018-01-17 12:48:07,411 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:48:07,411 - DEBUG - Order status PreSubmitted
2018-01-17 12:48:07,411 - DEBUG - Order Identification 105
2018-01-17 12:48:07,413 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:48:07,413 - DEBUG - Profit ID from database is 0
2018-01-17 12:48:07,413 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:48:07,413 - DEBUG - Stop ID database is 0
2018-01-17 12:48:07,413 - DEBUG - Entry ID database is 105
2018-01-17 12:48:07,414 - DEBUG - Entry API ID is 105
2018-01-17 12:48:09,398 - DEBUG - Connecting to database
2018-01-17 12:48:09,404 - DEBUG - Connected to database
2018-01-17 12:48:09,405 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 12:48:09,407 - DEBUG - Stop loss value is 71.82
2018-01-17 12:48:09,407 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 12:48:09,408 - DEBUG - Stop loss value is 85.25
2018-01-17 12:48:09,410 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 12:48:09,410 - DEBUG - EntryPrice value is 74.3
2018-01-17 12:48:09,411 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 12:48:09,411 - DEBUG - Stop quantity 1
2018-01-17 12:48:09,413 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 12:48:09,414 - DEBUG - Direction is Long
2018-01-17 12:48:09,414 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 12:48:09,414 - DEBUG - Count is 0
2018-01-17 12:48:09,417 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 12:48:09,417 - DEBUG - Stop Loss Flag is 0
2018-01-17 12:48:09,417 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 12:48:09,418 - DEBUG - Max ID Order is (105,)
2018-01-17 12:48:09,418 - DEBUG - Today is 2018-01-17
2018-01-17 12:48:09,418 - DEBUG - Day of the week 2
2018-01-17 12:48:09,420 - DEBUG - Yesterday is 01/16/2018
2018-01-17 12:48:09,420 - DEBUG - In Position is  0
2018-01-17 12:48:09,420 - DEBUG - In Position is  <class 'int'>
2018-01-17 12:48:09,420 - DEBUG - curStopLossFlag is  0
2018-01-17 12:48:09,421 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 12:48:09,421 - DEBUG - Checking if Entry has been filled
2018-01-17 12:48:09,421 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 12:48:09,421 - DEBUG - EntryPend is 1
2018-01-17 12:48:09,423 - DEBUG - Try to Cancel Stop
2018-01-17 12:48:09,423 - DEBUG - Stop API ID 0
2018-01-17 12:48:09,423 - DEBUG - Profit API ID 0
2018-01-17 12:48:09,423 - DEBUG - Stop API ID <class 'int'>
2018-01-17 12:48:09,424 - DEBUG - Profit API ID <class 'int'>
2018-01-17 12:48:09,424 - DEBUG - Pos is 0
2018-01-17 12:48:09,424 - DEBUG - CurCount is 0
2018-01-17 12:48:09,424 - DEBUG - In Pos 0
2018-01-17 12:48:09,424 - DEBUG - Stop ID is 0
2018-01-17 12:48:09,424 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 12:48:09,426 - DEBUG - EntryPend is 1
2018-01-17 12:48:09,426 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 12:48:09,426 - DEBUG - Entry Date is 10
2018-01-17 12:48:09,427 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 12:48:09,427 - DEBUG - Order Profit ID is 0
2018-01-17 12:48:09,427 - DEBUG - Order Entry ID is 105
2018-01-17 12:48:09,427 - DEBUG - API ID is  0
2018-01-17 12:48:09,427 - DEBUG - Current Position is 0
2018-01-17 12:48:09,427 - DEBUG - Current Position is <class 'str'>
2018-01-17 12:48:09,427 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 12:48:09,427 - DEBUG - Time is 12
2018-01-17 12:48:09,427 - DEBUG - Time is <class 'int'>
2018-01-17 12:48:09,427 - DEBUG - Time is 48
2018-01-17 12:48:09,427 - DEBUG - Time is <class 'int'>
2018-01-17 12:48:09,428 - DEBUG - Disconnected from IBController
2018-01-17 12:48:09,428 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 12:53:05,349 - DEBUG - ****************************************************
2018-01-17 12:53:05,351 - DEBUG - Current Time is 12:53PM
2018-01-17 12:53:05,351 - DEBUG - Starting Pos Mgmt H E
2018-01-17 12:53:05,351 - DEBUG - Connecting to database
2018-01-17 12:53:05,380 - DEBUG - Connected to database
2018-01-17 12:53:05,381 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 12:53:05,381 - DEBUG - Order Profit is 0
2018-01-17 12:53:05,382 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 12:53:05,384 - DEBUG - Stop ID is 0
2018-01-17 12:53:05,384 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 12:53:05,385 - DEBUG - Entry ID is 105
2018-01-17 12:53:05,385 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 12:53:05,387 - DEBUG - OCA ID is 1
2018-01-17 12:53:05,388 - DEBUG - Connecting to IBController
2018-01-17 12:53:06,391 - DEBUG - Connected to IBController
2018-01-17 12:53:06,391 - DEBUG - Position requested
2018-01-17 12:53:06,392 - DEBUG - Pos Mgmt -12987
2018-01-17 12:53:06,394 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212DD68>, pos=-12987, avgCost=0.95368235>
2018-01-17 12:53:06,394 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 12:53:06,394 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 12:53:06,394 - DEBUG - Position is -12987
2018-01-17 12:53:07,392 - DEBUG - Open Orders requested
2018-01-17 12:53:07,394 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x000000000212DE10>, order=<ib.ext.Order.Order object at 0x000000000212DB70>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C0208>>
2018-01-17 12:53:07,395 - DEBUG - Order OrderID 102
2018-01-17 12:53:07,395 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:53:07,397 - DEBUG - Order status PreSubmitted
2018-01-17 12:53:07,397 - DEBUG - Order Identification 102
2018-01-17 12:53:07,397 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:53:07,398 - DEBUG - Profit ID from database is 0
2018-01-17 12:53:07,398 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:53:07,398 - DEBUG - Stop ID database is 0
2018-01-17 12:53:07,398 - DEBUG - Entry ID database is 105
2018-01-17 12:53:07,398 - DEBUG - Reply Handler Orders is <openOrder orderId=104, contract=<ib.ext.Contract.Contract object at 0x000000000212DE10>, order=<ib.ext.Order.Order object at 0x000000000212DB70>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C0080>>
2018-01-17 12:53:07,400 - DEBUG - Order OrderID 104
2018-01-17 12:53:07,400 - DEBUG - reply handler status <orderStatus orderId=104, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791157, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:53:07,400 - DEBUG - Order status PreSubmitted
2018-01-17 12:53:07,401 - DEBUG - Order Identification 104
2018-01-17 12:53:07,401 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:53:07,401 - DEBUG - Profit ID from database is 0
2018-01-17 12:53:07,401 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:53:07,401 - DEBUG - Stop ID database is 0
2018-01-17 12:53:07,401 - DEBUG - Entry ID database is 105
2018-01-17 12:53:07,403 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x000000000212DE10>, order=<ib.ext.Order.Order object at 0x000000000212DB70>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C0278>>
2018-01-17 12:53:07,403 - DEBUG - Order OrderID 103
2018-01-17 12:53:07,403 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:53:07,404 - DEBUG - Order status PreSubmitted
2018-01-17 12:53:07,404 - DEBUG - Order Identification 103
2018-01-17 12:53:07,404 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:53:07,404 - DEBUG - Profit ID from database is 0
2018-01-17 12:53:07,404 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:53:07,404 - DEBUG - Stop ID database is 0
2018-01-17 12:53:07,404 - DEBUG - Entry ID database is 105
2018-01-17 12:53:07,405 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x000000000212DE10>, order=<ib.ext.Order.Order object at 0x000000000212DB70>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C0358>>
2018-01-17 12:53:07,405 - DEBUG - Order OrderID 105
2018-01-17 12:53:07,407 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:53:07,407 - DEBUG - Order status PreSubmitted
2018-01-17 12:53:07,407 - DEBUG - Order Identification 105
2018-01-17 12:53:07,407 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:53:07,407 - DEBUG - Profit ID from database is 0
2018-01-17 12:53:07,407 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:53:07,407 - DEBUG - Stop ID database is 0
2018-01-17 12:53:07,407 - DEBUG - Entry ID database is 105
2018-01-17 12:53:07,408 - DEBUG - Entry API ID is 105
2018-01-17 12:53:09,395 - DEBUG - Connecting to database
2018-01-17 12:53:09,403 - DEBUG - Connected to database
2018-01-17 12:53:09,404 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 12:53:09,404 - DEBUG - Stop loss value is 71.82
2018-01-17 12:53:09,405 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 12:53:09,407 - DEBUG - Stop loss value is 85.25
2018-01-17 12:53:09,407 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 12:53:09,407 - DEBUG - EntryPrice value is 74.3
2018-01-17 12:53:09,410 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 12:53:09,410 - DEBUG - Stop quantity 1
2018-01-17 12:53:09,411 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 12:53:09,411 - DEBUG - Direction is Long
2018-01-17 12:53:09,413 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 12:53:09,413 - DEBUG - Count is 0
2018-01-17 12:53:09,414 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 12:53:09,414 - DEBUG - Stop Loss Flag is 0
2018-01-17 12:53:09,415 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 12:53:09,415 - DEBUG - Max ID Order is (105,)
2018-01-17 12:53:09,417 - DEBUG - Today is 2018-01-17
2018-01-17 12:53:09,417 - DEBUG - Day of the week 2
2018-01-17 12:53:09,417 - DEBUG - Yesterday is 01/16/2018
2018-01-17 12:53:09,417 - DEBUG - In Position is  0
2018-01-17 12:53:09,417 - DEBUG - In Position is  <class 'int'>
2018-01-17 12:53:09,417 - DEBUG - curStopLossFlag is  0
2018-01-17 12:53:09,417 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 12:53:09,417 - DEBUG - Checking if Entry has been filled
2018-01-17 12:53:09,418 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 12:53:09,420 - DEBUG - EntryPend is 1
2018-01-17 12:53:09,420 - DEBUG - Try to Cancel Stop
2018-01-17 12:53:09,420 - DEBUG - Stop API ID 0
2018-01-17 12:53:09,421 - DEBUG - Profit API ID 0
2018-01-17 12:53:09,421 - DEBUG - Stop API ID <class 'int'>
2018-01-17 12:53:09,421 - DEBUG - Profit API ID <class 'int'>
2018-01-17 12:53:09,421 - DEBUG - Pos is 0
2018-01-17 12:53:09,421 - DEBUG - CurCount is 0
2018-01-17 12:53:09,421 - DEBUG - In Pos 0
2018-01-17 12:53:09,421 - DEBUG - Stop ID is 0
2018-01-17 12:53:09,421 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 12:53:09,424 - DEBUG - EntryPend is 1
2018-01-17 12:53:09,424 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 12:53:09,424 - DEBUG - Entry Date is 10
2018-01-17 12:53:09,424 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 12:53:09,424 - DEBUG - Order Profit ID is 0
2018-01-17 12:53:09,424 - DEBUG - Order Entry ID is 105
2018-01-17 12:53:09,424 - DEBUG - API ID is  0
2018-01-17 12:53:09,424 - DEBUG - Current Position is 0
2018-01-17 12:53:09,424 - DEBUG - Current Position is <class 'str'>
2018-01-17 12:53:09,424 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 12:53:09,424 - DEBUG - Time is 12
2018-01-17 12:53:09,426 - DEBUG - Time is <class 'int'>
2018-01-17 12:53:09,426 - DEBUG - Time is 53
2018-01-17 12:53:09,426 - DEBUG - Time is <class 'int'>
2018-01-17 12:53:09,426 - DEBUG - Disconnected from IBController
2018-01-17 12:53:09,427 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 12:58:05,345 - DEBUG - ****************************************************
2018-01-17 12:58:05,345 - DEBUG - Current Time is 12:58PM
2018-01-17 12:58:05,345 - DEBUG - Starting Pos Mgmt H E
2018-01-17 12:58:05,345 - DEBUG - Connecting to database
2018-01-17 12:58:05,368 - DEBUG - Connected to database
2018-01-17 12:58:05,368 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 12:58:05,371 - DEBUG - Order Profit is 0
2018-01-17 12:58:05,371 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 12:58:05,372 - DEBUG - Stop ID is 0
2018-01-17 12:58:05,372 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 12:58:05,375 - DEBUG - Entry ID is 105
2018-01-17 12:58:05,375 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 12:58:05,375 - DEBUG - OCA ID is 1
2018-01-17 12:58:05,377 - DEBUG - Connecting to IBController
2018-01-17 12:58:06,382 - DEBUG - Connected to IBController
2018-01-17 12:58:06,382 - DEBUG - Position requested
2018-01-17 12:58:06,384 - DEBUG - Pos Mgmt -12987
2018-01-17 12:58:06,384 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210BEF0>, pos=-12987, avgCost=0.95368235>
2018-01-17 12:58:06,384 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 12:58:06,384 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 12:58:06,385 - DEBUG - Position is -12987
2018-01-17 12:58:07,384 - DEBUG - Open Orders requested
2018-01-17 12:58:07,390 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x000000000210BC18>, order=<ib.ext.Order.Order object at 0x000000000210BA58>, orderState=<ib.ext.OrderState.OrderState object at 0x000000000219F198>>
2018-01-17 12:58:07,391 - DEBUG - Order OrderID 102
2018-01-17 12:58:07,391 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:58:07,394 - DEBUG - Order status PreSubmitted
2018-01-17 12:58:07,394 - DEBUG - Order Identification 102
2018-01-17 12:58:07,394 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:58:07,395 - DEBUG - Profit ID from database is 0
2018-01-17 12:58:07,395 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:58:07,395 - DEBUG - Stop ID database is 0
2018-01-17 12:58:07,395 - DEBUG - Entry ID database is 105
2018-01-17 12:58:07,397 - DEBUG - Reply Handler Orders is <openOrder orderId=104, contract=<ib.ext.Contract.Contract object at 0x000000000210BC18>, order=<ib.ext.Order.Order object at 0x000000000210BA58>, orderState=<ib.ext.OrderState.OrderState object at 0x000000000219F208>>
2018-01-17 12:58:07,398 - DEBUG - Order OrderID 104
2018-01-17 12:58:07,398 - DEBUG - reply handler status <orderStatus orderId=104, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791157, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:58:07,398 - DEBUG - Order status PreSubmitted
2018-01-17 12:58:07,398 - DEBUG - Order Identification 104
2018-01-17 12:58:07,398 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:58:07,398 - DEBUG - Profit ID from database is 0
2018-01-17 12:58:07,398 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:58:07,400 - DEBUG - Stop ID database is 0
2018-01-17 12:58:07,400 - DEBUG - Entry ID database is 105
2018-01-17 12:58:07,401 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x000000000210BC18>, order=<ib.ext.Order.Order object at 0x000000000210BA58>, orderState=<ib.ext.OrderState.OrderState object at 0x000000000219F2E8>>
2018-01-17 12:58:07,401 - DEBUG - Order OrderID 103
2018-01-17 12:58:07,401 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:58:07,401 - DEBUG - Order status PreSubmitted
2018-01-17 12:58:07,401 - DEBUG - Order Identification 103
2018-01-17 12:58:07,401 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:58:07,403 - DEBUG - Profit ID from database is 0
2018-01-17 12:58:07,403 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:58:07,403 - DEBUG - Stop ID database is 0
2018-01-17 12:58:07,403 - DEBUG - Entry ID database is 105
2018-01-17 12:58:07,404 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x000000000210BC18>, order=<ib.ext.Order.Order object at 0x000000000210BA58>, orderState=<ib.ext.OrderState.OrderState object at 0x000000000219F358>>
2018-01-17 12:58:07,404 - DEBUG - Order OrderID 105
2018-01-17 12:58:07,404 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 12:58:07,404 - DEBUG - Order status PreSubmitted
2018-01-17 12:58:07,405 - DEBUG - Order Identification 105
2018-01-17 12:58:07,405 - DEBUG - Order Identification <class 'int'>
2018-01-17 12:58:07,405 - DEBUG - Profit ID from database is 0
2018-01-17 12:58:07,405 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 12:58:07,407 - DEBUG - Stop ID database is 0
2018-01-17 12:58:07,407 - DEBUG - Entry ID database is 105
2018-01-17 12:58:07,407 - DEBUG - Entry API ID is 105
2018-01-17 12:58:09,385 - DEBUG - Connecting to database
2018-01-17 12:58:09,392 - DEBUG - Connected to database
2018-01-17 12:58:09,394 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 12:58:09,394 - DEBUG - Stop loss value is 71.82
2018-01-17 12:58:09,395 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 12:58:09,397 - DEBUG - Stop loss value is 85.25
2018-01-17 12:58:09,398 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 12:58:09,398 - DEBUG - EntryPrice value is 74.3
2018-01-17 12:58:09,400 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 12:58:09,400 - DEBUG - Stop quantity 1
2018-01-17 12:58:09,401 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 12:58:09,401 - DEBUG - Direction is Long
2018-01-17 12:58:09,403 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 12:58:09,403 - DEBUG - Count is 0
2018-01-17 12:58:09,404 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 12:58:09,404 - DEBUG - Stop Loss Flag is 0
2018-01-17 12:58:09,405 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 12:58:09,407 - DEBUG - Max ID Order is (105,)
2018-01-17 12:58:09,407 - DEBUG - Today is 2018-01-17
2018-01-17 12:58:09,407 - DEBUG - Day of the week 2
2018-01-17 12:58:09,407 - DEBUG - Yesterday is 01/16/2018
2018-01-17 12:58:09,407 - DEBUG - In Position is  0
2018-01-17 12:58:09,407 - DEBUG - In Position is  <class 'int'>
2018-01-17 12:58:09,407 - DEBUG - curStopLossFlag is  0
2018-01-17 12:58:09,408 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 12:58:09,408 - DEBUG - Checking if Entry has been filled
2018-01-17 12:58:09,408 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 12:58:09,411 - DEBUG - EntryPend is 1
2018-01-17 12:58:09,411 - DEBUG - Try to Cancel Stop
2018-01-17 12:58:09,411 - DEBUG - Stop API ID 0
2018-01-17 12:58:09,411 - DEBUG - Profit API ID 0
2018-01-17 12:58:09,411 - DEBUG - Stop API ID <class 'int'>
2018-01-17 12:58:09,411 - DEBUG - Profit API ID <class 'int'>
2018-01-17 12:58:09,411 - DEBUG - Pos is 0
2018-01-17 12:58:09,411 - DEBUG - CurCount is 0
2018-01-17 12:58:09,411 - DEBUG - In Pos 0
2018-01-17 12:58:09,411 - DEBUG - Stop ID is 0
2018-01-17 12:58:09,413 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 12:58:09,414 - DEBUG - EntryPend is 1
2018-01-17 12:58:09,414 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 12:58:09,414 - DEBUG - Entry Date is 10
2018-01-17 12:58:09,414 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 12:58:09,414 - DEBUG - Order Profit ID is 0
2018-01-17 12:58:09,414 - DEBUG - Order Entry ID is 105
2018-01-17 12:58:09,414 - DEBUG - API ID is  0
2018-01-17 12:58:09,414 - DEBUG - Current Position is 0
2018-01-17 12:58:09,415 - DEBUG - Current Position is <class 'str'>
2018-01-17 12:58:09,415 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 12:58:09,415 - DEBUG - Time is 12
2018-01-17 12:58:09,415 - DEBUG - Time is <class 'int'>
2018-01-17 12:58:09,415 - DEBUG - Time is 58
2018-01-17 12:58:09,417 - DEBUG - Time is <class 'int'>
2018-01-17 12:58:09,417 - DEBUG - Disconnected from IBController
2018-01-17 12:58:09,417 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 13:03:05,384 - DEBUG - ****************************************************
2018-01-17 13:03:05,384 - DEBUG - Current Time is 01:03PM
2018-01-17 13:03:05,384 - DEBUG - Starting Pos Mgmt H E
2018-01-17 13:03:05,384 - DEBUG - Connecting to database
2018-01-17 13:03:05,414 - DEBUG - Connected to database
2018-01-17 13:03:05,414 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 13:03:05,414 - DEBUG - Order Profit is 0
2018-01-17 13:03:05,415 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 13:03:05,417 - DEBUG - Stop ID is 0
2018-01-17 13:03:05,417 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 13:03:05,418 - DEBUG - Entry ID is 105
2018-01-17 13:03:05,418 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 13:03:05,420 - DEBUG - OCA ID is 1
2018-01-17 13:03:05,421 - DEBUG - Connecting to IBController
2018-01-17 13:03:06,428 - DEBUG - Connected to IBController
2018-01-17 13:03:06,428 - DEBUG - Position requested
2018-01-17 13:03:06,433 - DEBUG - Pos Mgmt -12987
2018-01-17 13:03:06,434 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020CDA58>, pos=-12987, avgCost=0.95368235>
2018-01-17 13:03:06,434 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 13:03:06,434 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 13:03:06,434 - DEBUG - Position is -12987
2018-01-17 13:03:07,433 - DEBUG - Open Orders requested
2018-01-17 13:03:07,440 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x00000000020CDC50>, order=<ib.ext.Order.Order object at 0x00000000020CDCF8>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002160198>>
2018-01-17 13:03:07,441 - DEBUG - Order OrderID 102
2018-01-17 13:03:07,441 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 13:03:07,443 - DEBUG - Order status PreSubmitted
2018-01-17 13:03:07,443 - DEBUG - Order Identification 102
2018-01-17 13:03:07,443 - DEBUG - Order Identification <class 'int'>
2018-01-17 13:03:07,444 - DEBUG - Profit ID from database is 0
2018-01-17 13:03:07,444 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 13:03:07,444 - DEBUG - Stop ID database is 0
2018-01-17 13:03:07,444 - DEBUG - Entry ID database is 105
2018-01-17 13:03:07,444 - DEBUG - Reply Handler Orders is <openOrder orderId=104, contract=<ib.ext.Contract.Contract object at 0x00000000020CDC50>, order=<ib.ext.Order.Order object at 0x00000000020CDCF8>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002160208>>
2018-01-17 13:03:07,446 - DEBUG - Order OrderID 104
2018-01-17 13:03:07,446 - DEBUG - reply handler status <orderStatus orderId=104, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791157, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 13:03:07,446 - DEBUG - Order status PreSubmitted
2018-01-17 13:03:07,447 - DEBUG - Order Identification 104
2018-01-17 13:03:07,447 - DEBUG - Order Identification <class 'int'>
2018-01-17 13:03:07,447 - DEBUG - Profit ID from database is 0
2018-01-17 13:03:07,447 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 13:03:07,447 - DEBUG - Stop ID database is 0
2018-01-17 13:03:07,447 - DEBUG - Entry ID database is 105
2018-01-17 13:03:07,448 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x00000000020CDC50>, order=<ib.ext.Order.Order object at 0x00000000020CDCF8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021602E8>>
2018-01-17 13:03:07,448 - DEBUG - Order OrderID 103
2018-01-17 13:03:07,450 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 13:03:07,450 - DEBUG - Order status PreSubmitted
2018-01-17 13:03:07,450 - DEBUG - Order Identification 103
2018-01-17 13:03:07,450 - DEBUG - Order Identification <class 'int'>
2018-01-17 13:03:07,450 - DEBUG - Profit ID from database is 0
2018-01-17 13:03:07,450 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 13:03:07,450 - DEBUG - Stop ID database is 0
2018-01-17 13:03:07,450 - DEBUG - Entry ID database is 105
2018-01-17 13:03:07,451 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x00000000020CDC50>, order=<ib.ext.Order.Order object at 0x00000000020CDCF8>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002160358>>
2018-01-17 13:03:07,453 - DEBUG - Order OrderID 105
2018-01-17 13:03:07,453 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 13:03:07,453 - DEBUG - Order status PreSubmitted
2018-01-17 13:03:07,453 - DEBUG - Order Identification 105
2018-01-17 13:03:07,453 - DEBUG - Order Identification <class 'int'>
2018-01-17 13:03:07,453 - DEBUG - Profit ID from database is 0
2018-01-17 13:03:07,454 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 13:03:07,454 - DEBUG - Stop ID database is 0
2018-01-17 13:03:07,454 - DEBUG - Entry ID database is 105
2018-01-17 13:03:07,454 - DEBUG - Entry API ID is 105
2018-01-17 13:03:09,436 - DEBUG - Connecting to database
2018-01-17 13:03:09,443 - DEBUG - Connected to database
2018-01-17 13:03:09,444 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 13:03:09,444 - DEBUG - Stop loss value is 71.82
2018-01-17 13:03:09,446 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 13:03:09,447 - DEBUG - Stop loss value is 85.25
2018-01-17 13:03:09,447 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 13:03:09,447 - DEBUG - EntryPrice value is 74.3
2018-01-17 13:03:09,450 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 13:03:09,450 - DEBUG - Stop quantity 1
2018-01-17 13:03:09,450 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 13:03:09,451 - DEBUG - Direction is Long
2018-01-17 13:03:09,453 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 13:03:09,453 - DEBUG - Count is 0
2018-01-17 13:03:09,454 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 13:03:09,454 - DEBUG - Stop Loss Flag is 0
2018-01-17 13:03:09,456 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 13:03:09,457 - DEBUG - Max ID Order is (105,)
2018-01-17 13:03:09,457 - DEBUG - Today is 2018-01-17
2018-01-17 13:03:09,457 - DEBUG - Day of the week 2
2018-01-17 13:03:09,457 - DEBUG - Yesterday is 01/16/2018
2018-01-17 13:03:09,457 - DEBUG - In Position is  0
2018-01-17 13:03:09,457 - DEBUG - In Position is  <class 'int'>
2018-01-17 13:03:09,457 - DEBUG - curStopLossFlag is  0
2018-01-17 13:03:09,457 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 13:03:09,459 - DEBUG - Checking if Entry has been filled
2018-01-17 13:03:09,459 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 13:03:09,460 - DEBUG - EntryPend is 1
2018-01-17 13:03:09,460 - DEBUG - Try to Cancel Stop
2018-01-17 13:03:09,460 - DEBUG - Stop API ID 0
2018-01-17 13:03:09,460 - DEBUG - Profit API ID 0
2018-01-17 13:03:09,460 - DEBUG - Stop API ID <class 'int'>
2018-01-17 13:03:09,460 - DEBUG - Profit API ID <class 'int'>
2018-01-17 13:03:09,461 - DEBUG - Pos is 0
2018-01-17 13:03:09,461 - DEBUG - CurCount is 0
2018-01-17 13:03:09,461 - DEBUG - In Pos 0
2018-01-17 13:03:09,461 - DEBUG - Stop ID is 0
2018-01-17 13:03:09,463 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 13:03:09,463 - DEBUG - EntryPend is 1
2018-01-17 13:03:09,463 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 13:03:09,463 - DEBUG - Entry Date is 10
2018-01-17 13:03:09,464 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 13:03:09,464 - DEBUG - Order Profit ID is 0
2018-01-17 13:03:09,464 - DEBUG - Order Entry ID is 105
2018-01-17 13:03:09,464 - DEBUG - API ID is  0
2018-01-17 13:03:09,464 - DEBUG - Current Position is 0
2018-01-17 13:03:09,466 - DEBUG - Current Position is <class 'str'>
2018-01-17 13:03:09,466 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 13:03:09,466 - DEBUG - Time is 13
2018-01-17 13:03:09,466 - DEBUG - Time is <class 'int'>
2018-01-17 13:03:09,466 - DEBUG - Time is 3
2018-01-17 13:03:09,467 - DEBUG - Time is <class 'int'>
2018-01-17 13:03:09,467 - DEBUG - Disconnected from IBController
2018-01-17 13:03:09,467 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 13:08:05,358 - DEBUG - ****************************************************
2018-01-17 13:08:05,358 - DEBUG - Current Time is 01:08PM
2018-01-17 13:08:05,358 - DEBUG - Starting Pos Mgmt H E
2018-01-17 13:08:05,358 - DEBUG - Connecting to database
2018-01-17 13:08:05,377 - DEBUG - Connected to database
2018-01-17 13:08:05,377 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 13:08:05,378 - DEBUG - Order Profit is 0
2018-01-17 13:08:05,378 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 13:08:05,380 - DEBUG - Stop ID is 0
2018-01-17 13:08:05,381 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 13:08:05,381 - DEBUG - Entry ID is 105
2018-01-17 13:08:05,381 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 13:08:05,384 - DEBUG - OCA ID is 1
2018-01-17 13:08:05,384 - DEBUG - Connecting to IBController
2018-01-17 13:08:06,391 - DEBUG - Connected to IBController
2018-01-17 13:08:06,391 - DEBUG - Position requested
2018-01-17 13:08:06,391 - DEBUG - Pos Mgmt -12987
2018-01-17 13:08:06,392 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FDEF0>, pos=-12987, avgCost=0.95368235>
2018-01-17 13:08:06,392 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 13:08:06,392 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 13:08:06,394 - DEBUG - Position is -12987
2018-01-17 13:08:07,392 - DEBUG - Open Orders requested
2018-01-17 13:08:07,394 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x00000000020FDDD8>, order=<ib.ext.Order.Order object at 0x00000000020FDD30>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002190198>>
2018-01-17 13:08:07,395 - DEBUG - Order OrderID 102
2018-01-17 13:08:07,401 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 13:08:07,403 - DEBUG - Order status PreSubmitted
2018-01-17 13:08:07,403 - DEBUG - Order Identification 102
2018-01-17 13:08:07,403 - DEBUG - Order Identification <class 'int'>
2018-01-17 13:08:07,404 - DEBUG - Profit ID from database is 0
2018-01-17 13:08:07,404 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 13:08:07,404 - DEBUG - Stop ID database is 0
2018-01-17 13:08:07,404 - DEBUG - Entry ID database is 105
2018-01-17 13:08:07,405 - DEBUG - Reply Handler Orders is <openOrder orderId=104, contract=<ib.ext.Contract.Contract object at 0x00000000020FDDD8>, order=<ib.ext.Order.Order object at 0x00000000020FDD30>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002190208>>
2018-01-17 13:08:07,405 - DEBUG - Order OrderID 104
2018-01-17 13:08:07,405 - DEBUG - reply handler status <orderStatus orderId=104, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791157, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 13:08:07,407 - DEBUG - Order status PreSubmitted
2018-01-17 13:08:07,407 - DEBUG - Order Identification 104
2018-01-17 13:08:07,407 - DEBUG - Order Identification <class 'int'>
2018-01-17 13:08:07,407 - DEBUG - Profit ID from database is 0
2018-01-17 13:08:07,407 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 13:08:07,407 - DEBUG - Stop ID database is 0
2018-01-17 13:08:07,407 - DEBUG - Entry ID database is 105
2018-01-17 13:08:07,410 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x00000000020FDDD8>, order=<ib.ext.Order.Order object at 0x00000000020FDD30>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021902E8>>
2018-01-17 13:08:07,410 - DEBUG - Order OrderID 103
2018-01-17 13:08:07,410 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 13:08:07,411 - DEBUG - Order status PreSubmitted
2018-01-17 13:08:07,411 - DEBUG - Order Identification 103
2018-01-17 13:08:07,411 - DEBUG - Order Identification <class 'int'>
2018-01-17 13:08:07,411 - DEBUG - Profit ID from database is 0
2018-01-17 13:08:07,411 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 13:08:07,411 - DEBUG - Stop ID database is 0
2018-01-17 13:08:07,411 - DEBUG - Entry ID database is 105
2018-01-17 13:08:07,413 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x00000000020FDDD8>, order=<ib.ext.Order.Order object at 0x00000000020FDD30>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002190358>>
2018-01-17 13:08:07,414 - DEBUG - Order OrderID 105
2018-01-17 13:08:07,414 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 13:08:07,414 - DEBUG - Order status PreSubmitted
2018-01-17 13:08:07,414 - DEBUG - Order Identification 105
2018-01-17 13:08:07,414 - DEBUG - Order Identification <class 'int'>
2018-01-17 13:08:07,414 - DEBUG - Profit ID from database is 0
2018-01-17 13:08:07,414 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 13:08:07,415 - DEBUG - Stop ID database is 0
2018-01-17 13:08:07,415 - DEBUG - Entry ID database is 105
2018-01-17 13:08:07,415 - DEBUG - Entry API ID is 105
2018-01-17 13:08:09,394 - DEBUG - Connecting to database
2018-01-17 13:08:09,401 - DEBUG - Connected to database
2018-01-17 13:08:09,401 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 13:08:09,403 - DEBUG - Stop loss value is 71.82
2018-01-17 13:08:09,404 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 13:08:09,404 - DEBUG - Stop loss value is 85.25
2018-01-17 13:08:09,405 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 13:08:09,405 - DEBUG - EntryPrice value is 74.3
2018-01-17 13:08:09,407 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 13:08:09,407 - DEBUG - Stop quantity 1
2018-01-17 13:08:09,408 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 13:08:09,408 - DEBUG - Direction is Long
2018-01-17 13:08:09,410 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 13:08:09,411 - DEBUG - Count is 0
2018-01-17 13:08:09,411 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 13:08:09,413 - DEBUG - Stop Loss Flag is 0
2018-01-17 13:08:09,414 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 13:08:09,414 - DEBUG - Max ID Order is (105,)
2018-01-17 13:08:09,414 - DEBUG - Today is 2018-01-17
2018-01-17 13:08:09,414 - DEBUG - Day of the week 2
2018-01-17 13:08:09,414 - DEBUG - Yesterday is 01/16/2018
2018-01-17 13:08:09,415 - DEBUG - In Position is  0
2018-01-17 13:08:09,415 - DEBUG - In Position is  <class 'int'>
2018-01-17 13:08:09,415 - DEBUG - curStopLossFlag is  0
2018-01-17 13:08:09,415 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 13:08:09,415 - DEBUG - Checking if Entry has been filled
2018-01-17 13:08:09,417 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 13:08:09,417 - DEBUG - EntryPend is 1
2018-01-17 13:08:09,417 - DEBUG - Try to Cancel Stop
2018-01-17 13:08:09,418 - DEBUG - Stop API ID 0
2018-01-17 13:08:09,418 - DEBUG - Profit API ID 0
2018-01-17 13:08:09,418 - DEBUG - Stop API ID <class 'int'>
2018-01-17 13:08:09,418 - DEBUG - Profit API ID <class 'int'>
2018-01-17 13:08:09,418 - DEBUG - Pos is 0
2018-01-17 13:08:09,420 - DEBUG - CurCount is 0
2018-01-17 13:08:09,420 - DEBUG - In Pos 0
2018-01-17 13:08:09,420 - DEBUG - Stop ID is 0
2018-01-17 13:08:09,420 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 13:08:09,421 - DEBUG - EntryPend is 1
2018-01-17 13:08:09,421 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 13:08:09,421 - DEBUG - Entry Date is 10
2018-01-17 13:08:09,421 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 13:08:09,423 - DEBUG - Order Profit ID is 0
2018-01-17 13:08:09,423 - DEBUG - Order Entry ID is 105
2018-01-17 13:08:09,423 - DEBUG - API ID is  0
2018-01-17 13:08:09,423 - DEBUG - Current Position is 0
2018-01-17 13:08:09,423 - DEBUG - Current Position is <class 'str'>
2018-01-17 13:08:09,424 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 13:08:09,424 - DEBUG - Time is 13
2018-01-17 13:08:09,424 - DEBUG - Time is <class 'int'>
2018-01-17 13:08:09,424 - DEBUG - Time is 8
2018-01-17 13:08:09,424 - DEBUG - Time is <class 'int'>
2018-01-17 13:08:09,424 - DEBUG - Disconnected from IBController
2018-01-17 13:08:09,426 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 13:13:05,338 - DEBUG - ****************************************************
2018-01-17 13:13:05,339 - DEBUG - Current Time is 01:13PM
2018-01-17 13:13:05,339 - DEBUG - Starting Pos Mgmt H E
2018-01-17 13:13:05,339 - DEBUG - Connecting to database
2018-01-17 13:13:05,362 - DEBUG - Connected to database
2018-01-17 13:13:05,362 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 13:13:05,365 - DEBUG - Order Profit is 0
2018-01-17 13:13:05,365 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 13:13:05,367 - DEBUG - Stop ID is 0
2018-01-17 13:13:05,367 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 13:13:05,368 - DEBUG - Entry ID is 105
2018-01-17 13:13:05,368 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 13:13:05,369 - DEBUG - OCA ID is 1
2018-01-17 13:13:05,369 - DEBUG - Connecting to IBController
2018-01-17 13:13:06,375 - DEBUG - Connected to IBController
2018-01-17 13:13:06,375 - DEBUG - Position requested
2018-01-17 13:13:06,377 - DEBUG - Pos Mgmt -12987
2018-01-17 13:13:06,377 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211DA58>, pos=-12987, avgCost=0.95368235>
2018-01-17 13:13:06,378 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 13:13:06,378 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 13:13:06,378 - DEBUG - Position is -12987
2018-01-17 13:13:07,377 - DEBUG - Open Orders requested
2018-01-17 13:13:07,378 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x000000000211DE10>, order=<ib.ext.Order.Order object at 0x000000000211DBE0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B0208>>
2018-01-17 13:13:07,380 - DEBUG - Order OrderID 102
2018-01-17 13:13:07,380 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 13:13:07,381 - DEBUG - Order status PreSubmitted
2018-01-17 13:13:07,381 - DEBUG - Order Identification 102
2018-01-17 13:13:07,381 - DEBUG - Order Identification <class 'int'>
2018-01-17 13:13:07,381 - DEBUG - Profit ID from database is 0
2018-01-17 13:13:07,381 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 13:13:07,381 - DEBUG - Stop ID database is 0
2018-01-17 13:13:07,381 - DEBUG - Entry ID database is 105
2018-01-17 13:13:07,382 - DEBUG - Reply Handler Orders is <openOrder orderId=104, contract=<ib.ext.Contract.Contract object at 0x000000000211DE10>, order=<ib.ext.Order.Order object at 0x000000000211DBE0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B0080>>
2018-01-17 13:13:07,384 - DEBUG - Order OrderID 104
2018-01-17 13:13:07,384 - DEBUG - reply handler status <orderStatus orderId=104, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791157, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 13:13:07,384 - DEBUG - Order status PreSubmitted
2018-01-17 13:13:07,384 - DEBUG - Order Identification 104
2018-01-17 13:13:07,384 - DEBUG - Order Identification <class 'int'>
2018-01-17 13:13:07,384 - DEBUG - Profit ID from database is 0
2018-01-17 13:13:07,384 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 13:13:07,384 - DEBUG - Stop ID database is 0
2018-01-17 13:13:07,384 - DEBUG - Entry ID database is 105
2018-01-17 13:13:07,385 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x000000000211DE10>, order=<ib.ext.Order.Order object at 0x000000000211DBE0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B0278>>
2018-01-17 13:13:07,387 - DEBUG - Order OrderID 103
2018-01-17 13:13:07,387 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 13:13:07,388 - DEBUG - Order status PreSubmitted
2018-01-17 13:13:07,388 - DEBUG - Order Identification 103
2018-01-17 13:13:07,388 - DEBUG - Order Identification <class 'int'>
2018-01-17 13:13:07,388 - DEBUG - Profit ID from database is 0
2018-01-17 13:13:07,388 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 13:13:07,388 - DEBUG - Stop ID database is 0
2018-01-17 13:13:07,388 - DEBUG - Entry ID database is 105
2018-01-17 13:13:07,390 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x000000000211DE10>, order=<ib.ext.Order.Order object at 0x000000000211DBE0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B0358>>
2018-01-17 13:13:07,390 - DEBUG - Order OrderID 105
2018-01-17 13:13:07,391 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 13:13:07,391 - DEBUG - Order status PreSubmitted
2018-01-17 13:13:07,391 - DEBUG - Order Identification 105
2018-01-17 13:13:07,391 - DEBUG - Order Identification <class 'int'>
2018-01-17 13:13:07,391 - DEBUG - Profit ID from database is 0
2018-01-17 13:13:07,391 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 13:13:07,391 - DEBUG - Stop ID database is 0
2018-01-17 13:13:07,391 - DEBUG - Entry ID database is 105
2018-01-17 13:13:07,392 - DEBUG - Entry API ID is 105
2018-01-17 13:13:09,380 - DEBUG - Connecting to database
2018-01-17 13:13:09,387 - DEBUG - Connected to database
2018-01-17 13:13:09,388 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 13:13:09,388 - DEBUG - Stop loss value is 71.82
2018-01-17 13:13:09,390 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 13:13:09,391 - DEBUG - Stop loss value is 85.25
2018-01-17 13:13:09,391 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 13:13:09,391 - DEBUG - EntryPrice value is 74.3
2018-01-17 13:13:09,394 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 13:13:09,394 - DEBUG - Stop quantity 1
2018-01-17 13:13:09,394 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 13:13:09,395 - DEBUG - Direction is Long
2018-01-17 13:13:09,397 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 13:13:09,397 - DEBUG - Count is 0
2018-01-17 13:13:09,398 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 13:13:09,398 - DEBUG - Stop Loss Flag is 0
2018-01-17 13:13:09,400 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 13:13:09,401 - DEBUG - Max ID Order is (105,)
2018-01-17 13:13:09,401 - DEBUG - Today is 2018-01-17
2018-01-17 13:13:09,401 - DEBUG - Day of the week 2
2018-01-17 13:13:09,401 - DEBUG - Yesterday is 01/16/2018
2018-01-17 13:13:09,401 - DEBUG - In Position is  0
2018-01-17 13:13:09,401 - DEBUG - In Position is  <class 'int'>
2018-01-17 13:13:09,401 - DEBUG - curStopLossFlag is  0
2018-01-17 13:13:09,403 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 13:13:09,403 - DEBUG - Checking if Entry has been filled
2018-01-17 13:13:09,403 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 13:13:09,404 - DEBUG - EntryPend is 1
2018-01-17 13:13:09,404 - DEBUG - Try to Cancel Stop
2018-01-17 13:13:09,404 - DEBUG - Stop API ID 0
2018-01-17 13:13:09,404 - DEBUG - Profit API ID 0
2018-01-17 13:13:09,404 - DEBUG - Stop API ID <class 'int'>
2018-01-17 13:13:09,405 - DEBUG - Profit API ID <class 'int'>
2018-01-17 13:13:09,405 - DEBUG - Pos is 0
2018-01-17 13:13:09,405 - DEBUG - CurCount is 0
2018-01-17 13:13:09,405 - DEBUG - In Pos 0
2018-01-17 13:13:09,405 - DEBUG - Stop ID is 0
2018-01-17 13:13:09,407 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 13:13:09,407 - DEBUG - EntryPend is 1
2018-01-17 13:13:09,407 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 13:13:09,407 - DEBUG - Entry Date is 10
2018-01-17 13:13:09,408 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 13:13:09,408 - DEBUG - Order Profit ID is 0
2018-01-17 13:13:09,408 - DEBUG - Order Entry ID is 105
2018-01-17 13:13:09,408 - DEBUG - API ID is  0
2018-01-17 13:13:09,408 - DEBUG - Current Position is 0
2018-01-17 13:13:09,410 - DEBUG - Current Position is <class 'str'>
2018-01-17 13:13:09,410 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 13:13:09,410 - DEBUG - Time is 13
2018-01-17 13:13:09,410 - DEBUG - Time is <class 'int'>
2018-01-17 13:13:09,410 - DEBUG - Time is 13
2018-01-17 13:13:09,411 - DEBUG - Time is <class 'int'>
2018-01-17 13:13:09,411 - DEBUG - Disconnected from IBController
2018-01-17 13:13:09,411 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 13:18:05,335 - DEBUG - ****************************************************
2018-01-17 13:18:05,335 - DEBUG - Current Time is 01:18PM
2018-01-17 13:18:05,335 - DEBUG - Starting Pos Mgmt H E
2018-01-17 13:18:05,335 - DEBUG - Connecting to database
2018-01-17 13:18:05,382 - DEBUG - Connected to database
2018-01-17 13:18:05,382 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 13:18:05,384 - DEBUG - Order Profit is 0
2018-01-17 13:18:05,384 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 13:18:05,387 - DEBUG - Stop ID is 0
2018-01-17 13:18:05,387 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 13:18:05,388 - DEBUG - Entry ID is 105
2018-01-17 13:18:05,388 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 13:18:05,391 - DEBUG - OCA ID is 1
2018-01-17 13:18:05,391 - DEBUG - Connecting to IBController
2018-01-17 13:18:06,397 - DEBUG - Connected to IBController
2018-01-17 13:18:06,397 - DEBUG - Position requested
2018-01-17 13:18:06,398 - DEBUG - Pos Mgmt -12987
2018-01-17 13:18:06,398 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000213BE10>, pos=-12987, avgCost=0.95368235>
2018-01-17 13:18:06,398 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 13:18:06,398 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 13:18:06,400 - DEBUG - Position is -12987
2018-01-17 13:18:07,398 - DEBUG - Open Orders requested
2018-01-17 13:18:07,400 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x000000000213BC88>, order=<ib.ext.Order.Order object at 0x000000000213BC50>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021D0128>>
2018-01-17 13:18:07,400 - DEBUG - Order OrderID 102
2018-01-17 13:18:07,401 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 13:18:07,401 - DEBUG - Order status PreSubmitted
2018-01-17 13:18:07,401 - DEBUG - Order Identification 102
2018-01-17 13:18:07,401 - DEBUG - Order Identification <class 'int'>
2018-01-17 13:18:07,401 - DEBUG - Profit ID from database is 0
2018-01-17 13:18:07,401 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 13:18:07,401 - DEBUG - Stop ID database is 0
2018-01-17 13:18:07,403 - DEBUG - Entry ID database is 105
2018-01-17 13:18:07,404 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x000000000213BFD0>, order=<ib.ext.Order.Order object at 0x000000000213BC50>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021D0198>>
2018-01-17 13:18:07,404 - DEBUG - Order OrderID 103
2018-01-17 13:18:07,404 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 13:18:07,404 - DEBUG - Order status PreSubmitted
2018-01-17 13:18:07,404 - DEBUG - Order Identification 103
2018-01-17 13:18:07,404 - DEBUG - Order Identification <class 'int'>
2018-01-17 13:18:07,404 - DEBUG - Profit ID from database is 0
2018-01-17 13:18:07,404 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 13:18:07,405 - DEBUG - Stop ID database is 0
2018-01-17 13:18:07,405 - DEBUG - Entry ID database is 105
2018-01-17 13:18:07,407 - DEBUG - Reply Handler Orders is <openOrder orderId=105, contract=<ib.ext.Contract.Contract object at 0x000000000213BFD0>, order=<ib.ext.Order.Order object at 0x000000000213BC50>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021D0278>>
2018-01-17 13:18:07,407 - DEBUG - Order OrderID 105
2018-01-17 13:18:07,407 - DEBUG - reply handler status <orderStatus orderId=105, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 13:18:07,407 - DEBUG - Order status PreSubmitted
2018-01-17 13:18:07,407 - DEBUG - Order Identification 105
2018-01-17 13:18:07,407 - DEBUG - Order Identification <class 'int'>
2018-01-17 13:18:07,408 - DEBUG - Profit ID from database is 0
2018-01-17 13:18:07,408 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 13:18:07,408 - DEBUG - Stop ID database is 0
2018-01-17 13:18:07,408 - DEBUG - Entry ID database is 105
2018-01-17 13:18:07,410 - DEBUG - Entry API ID is 105
2018-01-17 13:18:09,398 - DEBUG - Connecting to database
2018-01-17 13:18:09,404 - DEBUG - Connected to database
2018-01-17 13:18:09,407 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 13:18:09,407 - DEBUG - Stop loss value is 71.82
2018-01-17 13:18:09,407 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 13:18:09,408 - DEBUG - Stop loss value is 85.25
2018-01-17 13:18:09,410 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 13:18:09,411 - DEBUG - EntryPrice value is 74.3
2018-01-17 13:18:09,411 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 13:18:09,411 - DEBUG - Stop quantity 1
2018-01-17 13:18:09,414 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 13:18:09,414 - DEBUG - Direction is Long
2018-01-17 13:18:09,414 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 13:18:09,415 - DEBUG - Count is 0
2018-01-17 13:18:09,417 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 13:18:09,417 - DEBUG - Stop Loss Flag is 0
2018-01-17 13:18:09,418 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 13:18:09,418 - DEBUG - Max ID Order is (105,)
2018-01-17 13:18:09,418 - DEBUG - Today is 2018-01-17
2018-01-17 13:18:09,420 - DEBUG - Day of the week 2
2018-01-17 13:18:09,420 - DEBUG - Yesterday is 01/16/2018
2018-01-17 13:18:09,420 - DEBUG - In Position is  0
2018-01-17 13:18:09,420 - DEBUG - In Position is  <class 'int'>
2018-01-17 13:18:09,421 - DEBUG - curStopLossFlag is  0
2018-01-17 13:18:09,421 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 13:18:09,421 - DEBUG - Checking if Entry has been filled
2018-01-17 13:18:09,421 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 13:18:09,421 - DEBUG - EntryPend is 1
2018-01-17 13:18:09,423 - DEBUG - Try to Cancel Stop
2018-01-17 13:18:09,423 - DEBUG - Stop API ID 0
2018-01-17 13:18:09,423 - DEBUG - Profit API ID 0
2018-01-17 13:18:09,423 - DEBUG - Stop API ID <class 'int'>
2018-01-17 13:18:09,423 - DEBUG - Profit API ID <class 'int'>
2018-01-17 13:18:09,424 - DEBUG - Pos is 0
2018-01-17 13:18:09,424 - DEBUG - CurCount is 0
2018-01-17 13:18:09,424 - DEBUG - In Pos 0
2018-01-17 13:18:09,424 - DEBUG - Stop ID is 0
2018-01-17 13:18:09,424 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 13:18:09,426 - DEBUG - EntryPend is 1
2018-01-17 13:18:09,426 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 13:18:09,426 - DEBUG - Entry Date is 10
2018-01-17 13:18:09,426 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 13:18:09,426 - DEBUG - Order Profit ID is 0
2018-01-17 13:18:09,427 - DEBUG - Order Entry ID is 105
2018-01-17 13:18:09,427 - DEBUG - API ID is  0
2018-01-17 13:18:09,427 - DEBUG - Current Position is 0
2018-01-17 13:18:09,427 - DEBUG - Current Position is <class 'str'>
2018-01-17 13:18:09,427 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 13:18:09,427 - DEBUG - Time is 13
2018-01-17 13:18:09,427 - DEBUG - Time is <class 'int'>
2018-01-17 13:18:09,427 - DEBUG - Time is 18
2018-01-17 13:18:09,427 - DEBUG - Time is <class 'int'>
2018-01-17 13:18:09,427 - ERROR - Setup Never Executed. Clearing Position information and Orders
2018-01-17 13:18:09,428 - ERROR - Canceled Order 105
2018-01-17 13:18:09,428 - DEBUG - Query is UPDATE Orders SET Status = 'Canceled' where idOrder = 105;
2018-01-17 13:18:09,438 - DEBUG - reply handler status <orderStatus orderId=105, status=Cancelled, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791158, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=None>
2018-01-17 13:18:09,438 - DEBUG - Order status Cancelled
2018-01-17 13:18:09,440 - DEBUG - Order Identification 105
2018-01-17 13:18:09,440 - DEBUG - Order Identification <class 'int'>
2018-01-17 13:18:09,440 - DEBUG - Profit ID from database is 0
2018-01-17 13:18:09,440 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 13:18:09,440 - DEBUG - Stop ID database is 0
2018-01-17 13:18:09,440 - DEBUG - Entry ID database is 105
2018-01-17 13:18:09,440 - DEBUG - Entry API ID is 105
2018-01-17 13:18:09,443 - DEBUG - Query is UPDATE hasPosition SET BB_StopLossVal = 0 where CCY ='HE';
2018-01-17 13:18:09,457 - DEBUG - Query is UPDATE hasPosition SET BB_StopQty = 0 where CCY ='HE';
2018-01-17 13:18:09,471 - DEBUG - Query is UPDATE hasPosition SET BB_direction = 0 where CCY ='HE';
2018-01-17 13:18:09,486 - DEBUG - Query is UPDATE hasPosition SET BB_EntryID = 0 where CCY = 'HE'
2018-01-17 13:18:09,500 - DEBUG - Query is UPDATE hasPosition SET BB_Position = 0 where CCY = 'HE'
2018-01-17 13:18:09,515 - DEBUG - Query is UPDATE hasPosition SET BB_ProfitID = 0 where CCY = 'HE'
2018-01-17 13:18:09,529 - DEBUG - Query is UPDATE hasPosition SET BB_StopID = 0 where CCY = 'HE'
2018-01-17 13:18:09,542 - DEBUG - Query is UPDATE hasPosition SET BBEntryPending = 0 where CCY = 'HE'
2018-01-17 13:18:09,558 - DEBUG - Query is UPDATE hasPosition SET Count = 0 where CCY = 'HE'
2018-01-17 13:18:09,572 - DEBUG - Query is UPDATE hasPosition SET BB_EntryPrice = 0 where CCY = 'HE'
2018-01-17 13:18:09,585 - DEBUG - Query is UPDATE hasPosition SET BB_ProfitPrice = 0 where CCY = 'HE'
2018-01-17 13:18:09,608 - DEBUG - Disconnected from IBController
2018-01-17 13:18:09,608 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 13:23:05,335 - DEBUG - ****************************************************
2018-01-17 13:23:05,335 - DEBUG - Current Time is 01:23PM
2018-01-17 13:23:05,335 - DEBUG - Starting Pos Mgmt H E
2018-01-17 13:23:05,336 - DEBUG - Connecting to database
2018-01-17 13:23:05,367 - DEBUG - Connected to database
2018-01-17 13:23:05,367 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 13:23:05,368 - DEBUG - Order Profit is 0
2018-01-17 13:23:05,368 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 13:23:05,369 - DEBUG - Stop ID is 0
2018-01-17 13:23:05,371 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 13:23:05,371 - DEBUG - Entry ID is 0
2018-01-17 13:23:05,371 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 13:23:05,374 - DEBUG - OCA ID is 1
2018-01-17 13:23:05,374 - DEBUG - Connecting to IBController
2018-01-17 13:23:06,378 - DEBUG - Connected to IBController
2018-01-17 13:23:06,378 - DEBUG - Position requested
2018-01-17 13:23:06,380 - DEBUG - Pos Mgmt -12987
2018-01-17 13:23:06,381 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212BBE0>, pos=-12987, avgCost=0.95368235>
2018-01-17 13:23:06,381 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 13:23:06,381 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 13:23:06,381 - DEBUG - Position is -12987
2018-01-17 13:23:07,380 - DEBUG - Open Orders requested
2018-01-17 13:23:07,381 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x000000000212BA90>, order=<ib.ext.Order.Order object at 0x000000000212BCC0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C00F0>>
2018-01-17 13:23:07,381 - DEBUG - Order OrderID 102
2018-01-17 13:23:07,382 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 13:23:07,382 - DEBUG - Order status PreSubmitted
2018-01-17 13:23:07,382 - DEBUG - Order Identification 102
2018-01-17 13:23:07,384 - DEBUG - Order Identification <class 'int'>
2018-01-17 13:23:07,384 - DEBUG - Profit ID from database is 0
2018-01-17 13:23:07,384 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 13:23:07,384 - DEBUG - Stop ID database is 0
2018-01-17 13:23:07,384 - DEBUG - Entry ID database is 0
2018-01-17 13:23:07,385 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x000000000212BF98>, order=<ib.ext.Order.Order object at 0x000000000212BCC0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C0048>>
2018-01-17 13:23:07,385 - DEBUG - Order OrderID 103
2018-01-17 13:23:07,385 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 13:23:07,387 - DEBUG - Order status PreSubmitted
2018-01-17 13:23:07,387 - DEBUG - Order Identification 103
2018-01-17 13:23:07,387 - DEBUG - Order Identification <class 'int'>
2018-01-17 13:23:07,388 - DEBUG - Profit ID from database is 0
2018-01-17 13:23:07,388 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 13:23:07,388 - DEBUG - Stop ID database is 0
2018-01-17 13:23:07,388 - DEBUG - Entry ID database is 0
2018-01-17 13:23:09,381 - DEBUG - Connecting to database
2018-01-17 13:23:09,388 - DEBUG - Connected to database
2018-01-17 13:23:09,391 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 13:23:09,391 - DEBUG - Stop loss value is 0
2018-01-17 13:23:09,391 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 13:23:09,392 - DEBUG - Stop loss value is 0
2018-01-17 13:23:09,394 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 13:23:09,394 - DEBUG - EntryPrice value is 0
2018-01-17 13:23:09,395 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 13:23:09,395 - DEBUG - Stop quantity 0
2018-01-17 13:23:09,397 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 13:23:09,398 - DEBUG - Direction is 0
2018-01-17 13:23:09,398 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 13:23:09,398 - DEBUG - Count is 0
2018-01-17 13:23:09,401 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 13:23:09,401 - DEBUG - Stop Loss Flag is 0
2018-01-17 13:23:09,401 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 13:23:09,403 - DEBUG - Max ID Order is (105,)
2018-01-17 13:23:09,403 - DEBUG - Today is 2018-01-17
2018-01-17 13:23:09,403 - DEBUG - Day of the week 2
2018-01-17 13:23:09,404 - DEBUG - Yesterday is 01/16/2018
2018-01-17 13:23:09,404 - DEBUG - In Position is  0
2018-01-17 13:23:09,404 - DEBUG - In Position is  <class 'int'>
2018-01-17 13:23:09,404 - DEBUG - curStopLossFlag is  0
2018-01-17 13:23:09,404 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 13:23:09,404 - DEBUG - Checking if Entry has been filled
2018-01-17 13:23:09,404 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 13:23:09,405 - DEBUG - EntryPend is 0
2018-01-17 13:23:09,407 - DEBUG - Try to Cancel Stop
2018-01-17 13:23:09,407 - DEBUG - Stop API ID 0
2018-01-17 13:23:09,407 - DEBUG - Profit API ID 0
2018-01-17 13:23:09,407 - DEBUG - Stop API ID <class 'int'>
2018-01-17 13:23:09,407 - DEBUG - Profit API ID <class 'int'>
2018-01-17 13:23:09,407 - DEBUG - Pos is 0
2018-01-17 13:23:09,407 - DEBUG - CurCount is 0
2018-01-17 13:23:09,407 - DEBUG - In Pos 0
2018-01-17 13:23:09,407 - DEBUG - Stop ID is 0
2018-01-17 13:23:09,407 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 13:23:09,410 - DEBUG - EntryPend is 0
2018-01-17 13:23:09,410 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 13:23:09,410 - DEBUG - Entry Date is 10
2018-01-17 13:23:09,410 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 13:23:09,411 - DEBUG - Order Profit ID is 0
2018-01-17 13:23:09,411 - DEBUG - Order Entry ID is 0
2018-01-17 13:23:09,411 - DEBUG - API ID is  0
2018-01-17 13:23:09,411 - DEBUG - Current Position is 0
2018-01-17 13:23:09,411 - DEBUG - Current Position is <class 'str'>
2018-01-17 13:23:09,411 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 13:23:09,411 - DEBUG - Time is 13
2018-01-17 13:23:09,411 - DEBUG - Time is <class 'int'>
2018-01-17 13:23:09,411 - DEBUG - Time is 23
2018-01-17 13:23:09,413 - DEBUG - Time is <class 'int'>
2018-01-17 13:23:09,413 - ERROR - Setup Never Executed. Clearing Position information and Orders
2018-01-17 13:23:09,413 - ERROR - Canceled Order 0
2018-01-17 13:23:09,413 - DEBUG - Query is UPDATE Orders SET Status = 'Canceled' where idOrder = 0;
2018-01-17 13:23:09,427 - DEBUG - Query is UPDATE hasPosition SET BB_StopLossVal = 0 where CCY ='HE';
2018-01-17 13:23:09,440 - DEBUG - Query is UPDATE hasPosition SET BB_StopQty = 0 where CCY ='HE';
2018-01-17 13:23:09,454 - DEBUG - Query is UPDATE hasPosition SET BB_direction = 0 where CCY ='HE';
2018-01-17 13:23:09,470 - DEBUG - Query is UPDATE hasPosition SET BB_EntryID = 0 where CCY = 'HE'
2018-01-17 13:23:09,483 - DEBUG - Query is UPDATE hasPosition SET BB_Position = 0 where CCY = 'HE'
2018-01-17 13:23:09,499 - DEBUG - Query is UPDATE hasPosition SET BB_ProfitID = 0 where CCY = 'HE'
2018-01-17 13:23:09,513 - DEBUG - Query is UPDATE hasPosition SET BB_StopID = 0 where CCY = 'HE'
2018-01-17 13:23:09,526 - DEBUG - Query is UPDATE hasPosition SET BBEntryPending = 0 where CCY = 'HE'
2018-01-17 13:23:09,540 - DEBUG - Query is UPDATE hasPosition SET Count = 0 where CCY = 'HE'
2018-01-17 13:23:09,555 - DEBUG - Query is UPDATE hasPosition SET BB_EntryPrice = 0 where CCY = 'HE'
2018-01-17 13:23:09,576 - DEBUG - Query is UPDATE hasPosition SET BB_ProfitPrice = 0 where CCY = 'HE'
2018-01-17 13:23:09,592 - DEBUG - Disconnected from IBController
2018-01-17 13:23:09,592 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 13:28:05,325 - DEBUG - ****************************************************
2018-01-17 13:28:05,326 - DEBUG - Current Time is 01:28PM
2018-01-17 13:28:05,326 - DEBUG - Starting Pos Mgmt H E
2018-01-17 13:28:05,328 - DEBUG - Connecting to database
2018-01-17 13:28:05,378 - DEBUG - Connected to database
2018-01-17 13:28:05,378 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 13:28:05,381 - DEBUG - Order Profit is 0
2018-01-17 13:28:05,381 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 13:28:05,381 - DEBUG - Stop ID is 0
2018-01-17 13:28:05,381 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 13:28:05,384 - DEBUG - Entry ID is 0
2018-01-17 13:28:05,384 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 13:28:05,384 - DEBUG - OCA ID is 1
2018-01-17 13:28:05,385 - DEBUG - Connecting to IBController
2018-01-17 13:28:06,414 - DEBUG - Connected to IBController
2018-01-17 13:28:06,414 - DEBUG - Position requested
2018-01-17 13:28:06,417 - DEBUG - Pos Mgmt -12987
2018-01-17 13:28:06,417 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020DCB38>, pos=-12987, avgCost=0.95368235>
2018-01-17 13:28:06,417 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 13:28:06,417 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 13:28:06,417 - DEBUG - Position is -12987
2018-01-17 13:28:07,415 - DEBUG - Open Orders requested
2018-01-17 13:28:07,417 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x00000000020DCCF8>, order=<ib.ext.Order.Order object at 0x00000000020DCDA0>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002171080>>
2018-01-17 13:28:07,417 - DEBUG - Order OrderID 102
2018-01-17 13:28:07,418 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 13:28:07,418 - DEBUG - Order status PreSubmitted
2018-01-17 13:28:07,418 - DEBUG - Order Identification 102
2018-01-17 13:28:07,420 - DEBUG - Order Identification <class 'int'>
2018-01-17 13:28:07,420 - DEBUG - Profit ID from database is 0
2018-01-17 13:28:07,420 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 13:28:07,420 - DEBUG - Stop ID database is 0
2018-01-17 13:28:07,421 - DEBUG - Entry ID database is 0
2018-01-17 13:28:07,421 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x00000000020DCFD0>, order=<ib.ext.Order.Order object at 0x00000000020DCDA0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021710F0>>
2018-01-17 13:28:07,421 - DEBUG - Order OrderID 103
2018-01-17 13:28:07,421 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 13:28:07,423 - DEBUG - Order status PreSubmitted
2018-01-17 13:28:07,423 - DEBUG - Order Identification 103
2018-01-17 13:28:07,423 - DEBUG - Order Identification <class 'int'>
2018-01-17 13:28:07,424 - DEBUG - Profit ID from database is 0
2018-01-17 13:28:07,424 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 13:28:07,424 - DEBUG - Stop ID database is 0
2018-01-17 13:28:07,424 - DEBUG - Entry ID database is 0
2018-01-17 13:28:09,415 - DEBUG - Connecting to database
2018-01-17 13:28:09,423 - DEBUG - Connected to database
2018-01-17 13:28:09,424 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 13:28:09,424 - DEBUG - Stop loss value is 0
2018-01-17 13:28:09,426 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 13:28:09,427 - DEBUG - Stop loss value is 0
2018-01-17 13:28:09,427 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 13:28:09,427 - DEBUG - EntryPrice value is 0
2018-01-17 13:28:09,430 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 13:28:09,430 - DEBUG - Stop quantity 0
2018-01-17 13:28:09,430 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 13:28:09,430 - DEBUG - Direction is 0
2018-01-17 13:28:09,433 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 13:28:09,433 - DEBUG - Count is 0
2018-01-17 13:28:09,434 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 13:28:09,434 - DEBUG - Stop Loss Flag is 0
2018-01-17 13:28:09,436 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 13:28:09,436 - DEBUG - Max ID Order is (105,)
2018-01-17 13:28:09,437 - DEBUG - Today is 2018-01-17
2018-01-17 13:28:09,437 - DEBUG - Day of the week 2
2018-01-17 13:28:09,437 - DEBUG - Yesterday is 01/16/2018
2018-01-17 13:28:09,437 - DEBUG - In Position is  0
2018-01-17 13:28:09,437 - DEBUG - In Position is  <class 'int'>
2018-01-17 13:28:09,437 - DEBUG - curStopLossFlag is  0
2018-01-17 13:28:09,437 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 13:28:09,437 - DEBUG - Checking if Entry has been filled
2018-01-17 13:28:09,438 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 13:28:09,440 - DEBUG - EntryPend is 0
2018-01-17 13:28:09,440 - DEBUG - Try to Cancel Stop
2018-01-17 13:28:09,440 - DEBUG - Stop API ID 0
2018-01-17 13:28:09,440 - DEBUG - Profit API ID 0
2018-01-17 13:28:09,440 - DEBUG - Stop API ID <class 'int'>
2018-01-17 13:28:09,440 - DEBUG - Profit API ID <class 'int'>
2018-01-17 13:28:09,440 - DEBUG - Pos is 0
2018-01-17 13:28:09,441 - DEBUG - CurCount is 0
2018-01-17 13:28:09,441 - DEBUG - In Pos 0
2018-01-17 13:28:09,441 - DEBUG - Stop ID is 0
2018-01-17 13:28:09,441 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 13:28:09,443 - DEBUG - EntryPend is 0
2018-01-17 13:28:09,444 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 13:28:09,444 - DEBUG - Entry Date is 10
2018-01-17 13:28:09,444 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 13:28:09,444 - DEBUG - Order Profit ID is 0
2018-01-17 13:28:09,444 - DEBUG - Order Entry ID is 0
2018-01-17 13:28:09,444 - DEBUG - API ID is  0
2018-01-17 13:28:09,444 - DEBUG - Current Position is 0
2018-01-17 13:28:09,444 - DEBUG - Current Position is <class 'str'>
2018-01-17 13:28:09,444 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 13:28:09,446 - DEBUG - Time is 13
2018-01-17 13:28:09,446 - DEBUG - Time is <class 'int'>
2018-01-17 13:28:09,446 - DEBUG - Time is 28
2018-01-17 13:28:09,446 - DEBUG - Time is <class 'int'>
2018-01-17 13:28:09,446 - ERROR - Setup Never Executed. Clearing Position information and Orders
2018-01-17 13:28:09,447 - ERROR - Canceled Order 0
2018-01-17 13:28:09,447 - DEBUG - Query is UPDATE Orders SET Status = 'Canceled' where idOrder = 0;
2018-01-17 13:28:09,461 - DEBUG - Query is UPDATE hasPosition SET BB_StopLossVal = 0 where CCY ='HE';
2018-01-17 13:28:09,480 - DEBUG - Query is UPDATE hasPosition SET BB_StopQty = 0 where CCY ='HE';
2018-01-17 13:28:09,494 - DEBUG - Query is UPDATE hasPosition SET BB_direction = 0 where CCY ='HE';
2018-01-17 13:28:09,509 - DEBUG - Query is UPDATE hasPosition SET BB_EntryID = 0 where CCY = 'HE'
2018-01-17 13:28:09,525 - DEBUG - Query is UPDATE hasPosition SET BB_Position = 0 where CCY = 'HE'
2018-01-17 13:28:09,539 - DEBUG - Query is UPDATE hasPosition SET BB_ProfitID = 0 where CCY = 'HE'
2018-01-17 13:28:09,552 - DEBUG - Query is UPDATE hasPosition SET BB_StopID = 0 where CCY = 'HE'
2018-01-17 13:28:09,568 - DEBUG - Query is UPDATE hasPosition SET BBEntryPending = 0 where CCY = 'HE'
2018-01-17 13:28:09,582 - DEBUG - Query is UPDATE hasPosition SET Count = 0 where CCY = 'HE'
2018-01-17 13:28:09,596 - DEBUG - Query is UPDATE hasPosition SET BB_EntryPrice = 0 where CCY = 'HE'
2018-01-17 13:28:09,619 - DEBUG - Query is UPDATE hasPosition SET BB_ProfitPrice = 0 where CCY = 'HE'
2018-01-17 13:28:09,634 - DEBUG - Disconnected from IBController
2018-01-17 13:28:09,634 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 13:33:05,344 - DEBUG - ****************************************************
2018-01-17 13:33:05,345 - DEBUG - Current Time is 01:33PM
2018-01-17 13:33:05,345 - DEBUG - Starting Pos Mgmt H E
2018-01-17 13:33:05,345 - DEBUG - Connecting to database
2018-01-17 13:33:05,362 - DEBUG - Connected to database
2018-01-17 13:33:05,364 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 13:33:05,365 - DEBUG - Order Profit is 0
2018-01-17 13:33:05,365 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 13:33:05,367 - DEBUG - Stop ID is 0
2018-01-17 13:33:05,367 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 13:33:05,368 - DEBUG - Entry ID is 0
2018-01-17 13:33:05,368 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 13:33:05,369 - DEBUG - OCA ID is 1
2018-01-17 13:33:05,369 - DEBUG - Connecting to IBController
2018-01-17 13:33:06,375 - DEBUG - Connected to IBController
2018-01-17 13:33:06,375 - DEBUG - Position requested
2018-01-17 13:33:06,375 - DEBUG - Pos Mgmt -12987
2018-01-17 13:33:06,375 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020DCE10>, pos=-12987, avgCost=0.95368235>
2018-01-17 13:33:06,377 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 13:33:06,377 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 13:33:06,377 - DEBUG - Position is -12987
2018-01-17 13:33:07,375 - DEBUG - Open Orders requested
2018-01-17 13:33:07,380 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x00000000020DCAC8>, order=<ib.ext.Order.Order object at 0x00000000020DCA90>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021710F0>>
2018-01-17 13:33:07,381 - DEBUG - Order OrderID 102
2018-01-17 13:33:07,381 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 13:33:07,381 - DEBUG - Order status PreSubmitted
2018-01-17 13:33:07,381 - DEBUG - Order Identification 102
2018-01-17 13:33:07,381 - DEBUG - Order Identification <class 'int'>
2018-01-17 13:33:07,382 - DEBUG - Profit ID from database is 0
2018-01-17 13:33:07,382 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 13:33:07,382 - DEBUG - Stop ID database is 0
2018-01-17 13:33:07,382 - DEBUG - Entry ID database is 0
2018-01-17 13:33:07,384 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x00000000020DCEF0>, order=<ib.ext.Order.Order object at 0x00000000020DCA90>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002171080>>
2018-01-17 13:33:07,384 - DEBUG - Order OrderID 103
2018-01-17 13:33:07,384 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 13:33:07,385 - DEBUG - Order status PreSubmitted
2018-01-17 13:33:07,385 - DEBUG - Order Identification 103
2018-01-17 13:33:07,385 - DEBUG - Order Identification <class 'int'>
2018-01-17 13:33:07,385 - DEBUG - Profit ID from database is 0
2018-01-17 13:33:07,387 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 13:33:07,387 - DEBUG - Stop ID database is 0
2018-01-17 13:33:07,387 - DEBUG - Entry ID database is 0
2018-01-17 13:33:09,381 - DEBUG - Connecting to database
2018-01-17 13:33:09,388 - DEBUG - Connected to database
2018-01-17 13:33:09,388 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 13:33:09,390 - DEBUG - Stop loss value is 0
2018-01-17 13:33:09,391 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 13:33:09,391 - DEBUG - Stop loss value is 0
2018-01-17 13:33:09,392 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 13:33:09,392 - DEBUG - EntryPrice value is 0
2018-01-17 13:33:09,394 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 13:33:09,394 - DEBUG - Stop quantity 0
2018-01-17 13:33:09,395 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 13:33:09,395 - DEBUG - Direction is 0
2018-01-17 13:33:09,398 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 13:33:09,398 - DEBUG - Count is 0
2018-01-17 13:33:09,398 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 13:33:09,400 - DEBUG - Stop Loss Flag is 0
2018-01-17 13:33:09,401 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 13:33:09,401 - DEBUG - Max ID Order is (105,)
2018-01-17 13:33:09,401 - DEBUG - Today is 2018-01-17
2018-01-17 13:33:09,401 - DEBUG - Day of the week 2
2018-01-17 13:33:09,403 - DEBUG - Yesterday is 01/16/2018
2018-01-17 13:33:09,403 - DEBUG - In Position is  0
2018-01-17 13:33:09,403 - DEBUG - In Position is  <class 'int'>
2018-01-17 13:33:09,403 - DEBUG - curStopLossFlag is  0
2018-01-17 13:33:09,404 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 13:33:09,404 - DEBUG - Checking if Entry has been filled
2018-01-17 13:33:09,404 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 13:33:09,404 - DEBUG - EntryPend is 0
2018-01-17 13:33:09,405 - DEBUG - Try to Cancel Stop
2018-01-17 13:33:09,405 - DEBUG - Stop API ID 0
2018-01-17 13:33:09,405 - DEBUG - Profit API ID 0
2018-01-17 13:33:09,405 - DEBUG - Stop API ID <class 'int'>
2018-01-17 13:33:09,407 - DEBUG - Profit API ID <class 'int'>
2018-01-17 13:33:09,407 - DEBUG - Pos is 0
2018-01-17 13:33:09,407 - DEBUG - CurCount is 0
2018-01-17 13:33:09,407 - DEBUG - In Pos 0
2018-01-17 13:33:09,407 - DEBUG - Stop ID is 0
2018-01-17 13:33:09,407 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 13:33:09,408 - DEBUG - EntryPend is 0
2018-01-17 13:33:09,408 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 13:33:09,408 - DEBUG - Entry Date is 10
2018-01-17 13:33:09,410 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 13:33:09,410 - DEBUG - Order Profit ID is 0
2018-01-17 13:33:09,410 - DEBUG - Order Entry ID is 0
2018-01-17 13:33:09,410 - DEBUG - API ID is  0
2018-01-17 13:33:09,410 - DEBUG - Current Position is 0
2018-01-17 13:33:09,411 - DEBUG - Current Position is <class 'str'>
2018-01-17 13:33:09,411 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 13:33:09,411 - DEBUG - Time is 13
2018-01-17 13:33:09,411 - DEBUG - Time is <class 'int'>
2018-01-17 13:33:09,411 - DEBUG - Time is 33
2018-01-17 13:33:09,411 - DEBUG - Time is <class 'int'>
2018-01-17 13:33:09,411 - ERROR - Setup Never Executed. Clearing Position information and Orders
2018-01-17 13:33:09,411 - ERROR - Canceled Order 0
2018-01-17 13:33:09,413 - DEBUG - Query is UPDATE Orders SET Status = 'Canceled' where idOrder = 0;
2018-01-17 13:33:09,427 - DEBUG - Query is UPDATE hasPosition SET BB_StopLossVal = 0 where CCY ='HE';
2018-01-17 13:33:09,441 - DEBUG - Query is UPDATE hasPosition SET BB_StopQty = 0 where CCY ='HE';
2018-01-17 13:33:09,456 - DEBUG - Query is UPDATE hasPosition SET BB_direction = 0 where CCY ='HE';
2018-01-17 13:33:09,470 - DEBUG - Query is UPDATE hasPosition SET BB_EntryID = 0 where CCY = 'HE'
2018-01-17 13:33:09,484 - DEBUG - Query is UPDATE hasPosition SET BB_Position = 0 where CCY = 'HE'
2018-01-17 13:33:09,497 - DEBUG - Query is UPDATE hasPosition SET BB_ProfitID = 0 where CCY = 'HE'
2018-01-17 13:33:09,513 - DEBUG - Query is UPDATE hasPosition SET BB_StopID = 0 where CCY = 'HE'
2018-01-17 13:33:09,528 - DEBUG - Query is UPDATE hasPosition SET BBEntryPending = 0 where CCY = 'HE'
2018-01-17 13:33:09,542 - DEBUG - Query is UPDATE hasPosition SET Count = 0 where CCY = 'HE'
2018-01-17 13:33:09,559 - DEBUG - Query is UPDATE hasPosition SET BB_EntryPrice = 0 where CCY = 'HE'
2018-01-17 13:33:09,576 - DEBUG - Query is UPDATE hasPosition SET BB_ProfitPrice = 0 where CCY = 'HE'
2018-01-17 13:33:09,591 - DEBUG - Disconnected from IBController
2018-01-17 13:33:09,592 - DEBUG - END POS MGMT SCRIPT :-!
2018-01-17 13:38:05,339 - DEBUG - ****************************************************
2018-01-17 13:38:05,341 - DEBUG - Current Time is 01:38PM
2018-01-17 13:38:05,341 - DEBUG - Starting Pos Mgmt H E
2018-01-17 13:38:05,341 - DEBUG - Connecting to database
2018-01-17 13:38:05,368 - DEBUG - Connected to database
2018-01-17 13:38:05,368 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-01-17 13:38:05,371 - DEBUG - Order Profit is 0
2018-01-17 13:38:05,371 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-01-17 13:38:05,372 - DEBUG - Stop ID is 0
2018-01-17 13:38:05,372 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-01-17 13:38:05,374 - DEBUG - Entry ID is 0
2018-01-17 13:38:05,375 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-01-17 13:38:05,375 - DEBUG - OCA ID is 1
2018-01-17 13:38:05,377 - DEBUG - Connecting to IBController
2018-01-17 13:38:06,391 - DEBUG - Connected to IBController
2018-01-17 13:38:06,391 - DEBUG - Position requested
2018-01-17 13:38:06,392 - DEBUG - Pos Mgmt -12987
2018-01-17 13:38:06,394 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210BA20>, pos=-12987, avgCost=0.95368235>
2018-01-17 13:38:06,394 - DEBUG - ccy1 Symbol with position is NZD
2018-01-17 13:38:06,394 - DEBUG - ccy2 Currency with position is CAD
2018-01-17 13:38:06,394 - DEBUG - Position is -12987
2018-01-17 13:38:07,392 - DEBUG - Open Orders requested
2018-01-17 13:38:07,394 - DEBUG - Reply Handler Orders is <openOrder orderId=102, contract=<ib.ext.Contract.Contract object at 0x000000000210BA90>, order=<ib.ext.Order.Order object at 0x000000000210BD68>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A00F0>>
2018-01-17 13:38:07,394 - DEBUG - Order OrderID 102
2018-01-17 13:38:07,395 - DEBUG - reply handler status <orderStatus orderId=102, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=1202791155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 13:38:07,395 - DEBUG - Order status PreSubmitted
2018-01-17 13:38:07,395 - DEBUG - Order Identification 102
2018-01-17 13:38:07,395 - DEBUG - Order Identification <class 'int'>
2018-01-17 13:38:07,397 - DEBUG - Profit ID from database is 0
2018-01-17 13:38:07,397 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 13:38:07,397 - DEBUG - Stop ID database is 0
2018-01-17 13:38:07,397 - DEBUG - Entry ID database is 0
2018-01-17 13:38:07,398 - DEBUG - Reply Handler Orders is <openOrder orderId=103, contract=<ib.ext.Contract.Contract object at 0x000000000210BF98>, order=<ib.ext.Order.Order object at 0x000000000210BD68>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A0048>>
2018-01-17 13:38:07,398 - DEBUG - Order OrderID 103
2018-01-17 13:38:07,398 - DEBUG - reply handler status <orderStatus orderId=103, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1202791156, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-01-17 13:38:07,400 - DEBUG - Order status PreSubmitted
2018-01-17 13:38:07,400 - DEBUG - Order Identification 103
2018-01-17 13:38:07,400 - DEBUG - Order Identification <class 'int'>
2018-01-17 13:38:07,400 - DEBUG - Profit ID from database is 0
2018-01-17 13:38:07,401 - DEBUG - Profit ID from database is <class 'str'>
2018-01-17 13:38:07,401 - DEBUG - Stop ID database is 0
2018-01-17 13:38:07,401 - DEBUG - Entry ID database is 0
2018-01-17 13:38:09,394 - DEBUG - Connecting to database
2018-01-17 13:38:09,401 - DEBUG - Connected to database
2018-01-17 13:38:09,403 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-01-17 13:38:09,404 - DEBUG - Stop loss value is 0
2018-01-17 13:38:09,404 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-01-17 13:38:09,404 - DEBUG - Stop loss value is 0
2018-01-17 13:38:09,407 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-01-17 13:38:09,407 - DEBUG - EntryPrice value is 0
2018-01-17 13:38:09,408 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-01-17 13:38:09,408 - DEBUG - Stop quantity 0
2018-01-17 13:38:09,410 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-01-17 13:38:09,410 - DEBUG - Direction is 0
2018-01-17 13:38:09,411 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-01-17 13:38:09,411 - DEBUG - Count is 0
2018-01-17 13:38:09,413 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-01-17 13:38:09,414 - DEBUG - Stop Loss Flag is 0
2018-01-17 13:38:09,414 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-01-17 13:38:09,414 - DEBUG - Max ID Order is (105,)
2018-01-17 13:38:09,415 - DEBUG - Today is 2018-01-17
2018-01-17 13:38:09,415 - DEBUG - Day of the week 2
2018-01-17 13:38:09,415 - DEBUG - Yesterday is 01/16/2018
2018-01-17 13:38:09,417 - DEBUG - In Position is  0
2018-01-17 13:38:09,417 - DEBUG - In Position is  <class 'int'>
2018-01-17 13:38:09,417 - DEBUG - curStopLossFlag is  0
2018-01-17 13:38:09,417 - DEBUG - curStopLossFlag is  <class 'str'>
2018-01-17 13:38:09,417 - DEBUG - Checking if Entry has been filled
2018-01-17 13:38:09,417 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 13:38:09,418 - DEBUG - EntryPend is 0
2018-01-17 13:38:09,418 - DEBUG - Try to Cancel Stop
2018-01-17 13:38:09,420 - DEBUG - Stop API ID 0
2018-01-17 13:38:09,420 - DEBUG - Profit API ID 0
2018-01-17 13:38:09,420 - DEBUG - Stop API ID <class 'int'>
2018-01-17 13:38:09,420 - DEBUG - Profit API ID <class 'int'>
2018-01-17 13:38:09,420 - DEBUG - Pos is 0
2018-01-17 13:38:09,421 - DEBUG - CurCount is 0
2018-01-17 13:38:09,421 - DEBUG - In Pos 0
2018-01-17 13:38:09,421 - DEBUG - Stop ID is 0
2018-01-17 13:38:09,421 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-01-17 13:38:09,423 - DEBUG - EntryPend is 0
2018-01-17 13:38:09,423 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-01-17 13:38:09,423 - DEBUG - Entry Date is 10
2018-01-17 13:38:09,424 - DEBUG - confirming yesterday is 01/16/2018
2018-01-17 13:38:09,424 - DEBUG - Order Profit ID is 0
2018-01-17 13:38:09,424 - DEBUG - Order Entry ID is 0
2018-01-17 13:38:09,424 - DEBUG - API ID is  0
2018-01-17 13:38:09,424 - DEBUG - Current Position is 0
2018-01-17 13:38:09,424 - DEBUG - Current Position is <class 'str'>
2018-01-17 13:38:09,424 - DEBUG - Checking if Positions should be close at EOD
2018-01-17 13:38:09,424 - DEBUG - Time is 13
2018-01-17 13:38:09,424 - DEBUG - Time is <class 'int'>
2018-01-17 13:38:09,426 - DEBUG - Time is 38
2018-01-17 13:38:09,426 - DEBUG - Time is <class 'int'>
2018-01-17 13:38:09,426 - ERROR - Setup Never Executed. Clearing Position information and Orders
2018-01-17 13:38:09,426 - ERROR - Canceled Order 0
2018-01-17 13:38:09,427 - DEBUG - Query is UPDATE Orders SET Status = 'Canceled' where idOrder = 0;
2018-01-17 13:38:09,441 - DEBUG - Query is UPDATE hasPosition SET BB_StopLossVal = 0 where CCY ='HE';
2018-01-17 13:38:09,456 - DEBUG - Query is UPDATE hasPosition SET BB_StopQty = 0 where CCY ='HE';
2018-01-17 13:38:09,470 - DEBUG - Query is UPDATE hasPosition SET BB_direction = 0 where CCY ='HE';
2018-01-17 13:38:09,484 - DEBUG - Query is UPDATE hasPosition SET BB_EntryID = 0 where CCY = 'HE'
2018-01-17 13:38:09,499 - DEBUG - Query is UPDATE hasPosition SET BB_Position = 0 where CCY = 'HE'
2018-01-17 13:38:09,513 - DEBUG - Query is UPDATE hasPosition SET BB_ProfitID = 0 where CCY = 'HE'
2018-01-17 13:38:09,528 - DEBUG - Query is UPDATE hasPosition SET BB_StopID = 0 where CCY = 'HE'
2018-01-17 13:38:09,542 - DEBUG - Query is UPDATE hasPosition SET BBEntryPending = 0 where CCY = 'HE'
2018-01-17 13:38:09,555 - DEBUG - Query is UPDATE hasPosition SET Count = 0 where CCY = 'HE'
2018-01-17 13:38:09,572 - DEBUG - Query is UPDATE hasPosition SET BB_EntryPrice = 0 where CCY = 'HE'
2018-01-17 13:38:09,585 - DEBUG - Query is UPDATE hasPosition SET BB_ProfitPrice = 0 where CCY = 'HE'
2018-01-17 13:38:09,599 - DEBUG - Disconnected from IBController
2018-01-17 13:38:09,601 - DEBUG - END POS MGMT SCRIPT :-!
