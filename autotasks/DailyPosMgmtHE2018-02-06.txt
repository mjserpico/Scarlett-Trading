2018-02-06 09:36:01,460 - DEBUG - ****************************************************
2018-02-06 09:36:01,460 - DEBUG - Current Time is 09:36AM
2018-02-06 09:36:01,460 - DEBUG - Starting Pos Mgmt H E
2018-02-06 09:36:01,460 - DEBUG - Connecting to database
2018-02-06 09:36:01,483 - DEBUG - Connected to database
2018-02-06 09:36:01,483 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 09:36:01,486 - DEBUG - Order Profit is 170
2018-02-06 09:36:01,486 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 09:36:01,487 - DEBUG - Stop ID is 0
2018-02-06 09:36:01,487 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 09:36:01,490 - DEBUG - Entry ID is 170
2018-02-06 09:36:01,490 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 09:36:01,490 - DEBUG - OCA ID is 1
2018-02-06 09:36:01,492 - DEBUG - Connecting to IBController
2018-02-06 09:36:02,499 - DEBUG - Connected to IBController
2018-02-06 09:36:02,499 - DEBUG - Position requested
2018-02-06 09:36:02,500 - DEBUG - Pos Mgmt 0
2018-02-06 09:36:02,500 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020EDBE0>, pos=0, avgCost=0.0>
2018-02-06 09:36:02,502 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 09:36:02,502 - DEBUG - ccy2 Currency with position is USD
2018-02-06 09:36:02,502 - DEBUG - Position is 0
2018-02-06 09:36:02,503 - DEBUG - Pos Mgmt -12987
2018-02-06 09:36:02,503 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020EDA90>, pos=-12987, avgCost=0.95368235>
2018-02-06 09:36:02,503 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 09:36:02,503 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 09:36:02,503 - DEBUG - Position is -12987
2018-02-06 09:36:02,503 - DEBUG - Pos Mgmt 0
2018-02-06 09:36:02,503 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020EDF28>, pos=0, avgCost=0.0>
2018-02-06 09:36:02,505 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 09:36:02,505 - DEBUG - ccy2 Currency with position is USD
2018-02-06 09:36:02,505 - DEBUG - Position is 0
2018-02-06 09:36:03,500 - DEBUG - Open Orders requested
2018-02-06 09:36:03,503 - DEBUG - Reply Handler Orders is <openOrder orderId=169, contract=<ib.ext.Contract.Contract object at 0x00000000020EDA90>, order=<ib.ext.Order.Order object at 0x00000000020EDAC8>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002182198>>
2018-02-06 09:36:03,503 - DEBUG - Order OrderID 169
2018-02-06 09:36:03,503 - DEBUG - reply handler status <orderStatus orderId=169, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067153, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 09:36:03,503 - DEBUG - Order status PreSubmitted
2018-02-06 09:36:03,503 - DEBUG - Order Identification 169
2018-02-06 09:36:03,505 - DEBUG - Order Identification <class 'int'>
2018-02-06 09:36:03,505 - DEBUG - Profit ID from database is 170
2018-02-06 09:36:03,505 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 09:36:03,505 - DEBUG - Stop ID database is 0
2018-02-06 09:36:03,506 - DEBUG - Entry ID database is 170
2018-02-06 09:36:03,506 - DEBUG - Reply Handler Orders is <openOrder orderId=170, contract=<ib.ext.Contract.Contract object at 0x00000000020EDA90>, order=<ib.ext.Order.Order object at 0x00000000020EDAC8>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002182208>>
2018-02-06 09:36:03,506 - DEBUG - Order OrderID 170
2018-02-06 09:36:03,507 - DEBUG - reply handler status <orderStatus orderId=170, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067154, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 09:36:03,507 - DEBUG - Order status PreSubmitted
2018-02-06 09:36:03,507 - DEBUG - Order Identification 170
2018-02-06 09:36:03,509 - DEBUG - Order Identification <class 'int'>
2018-02-06 09:36:03,509 - DEBUG - Profit ID from database is 170
2018-02-06 09:36:03,509 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 09:36:03,509 - DEBUG - Stop ID database is 0
2018-02-06 09:36:03,509 - DEBUG - Entry ID database is 170
2018-02-06 09:36:03,509 - DEBUG - Profit API ID is 170
2018-02-06 09:36:03,509 - DEBUG - Entry API ID is 170
2018-02-06 09:36:05,500 - DEBUG - Connecting to database
2018-02-06 09:36:05,507 - DEBUG - Connected to database
2018-02-06 09:36:05,509 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 09:36:05,509 - DEBUG - Stop loss value is 74.22
2018-02-06 09:36:05,512 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 09:36:05,512 - DEBUG - Stop loss value is 61.3
2018-02-06 09:36:05,513 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 09:36:05,513 - DEBUG - EntryPrice value is 72.25
2018-02-06 09:36:05,515 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 09:36:05,516 - DEBUG - Stop quantity 1
2018-02-06 09:36:05,516 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 09:36:05,516 - DEBUG - Direction is Short
2018-02-06 09:36:05,519 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 09:36:05,519 - DEBUG - Count is 0
2018-02-06 09:36:05,519 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 09:36:05,520 - DEBUG - Stop Loss Flag is 0
2018-02-06 09:36:05,522 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 09:36:05,522 - DEBUG - Max ID Order is (170,)
2018-02-06 09:36:05,523 - DEBUG - Today is 2018-02-06
2018-02-06 09:36:05,523 - DEBUG - Day of the week 1
2018-02-06 09:36:05,523 - DEBUG - Yesterday is 02/05/2018
2018-02-06 09:36:05,523 - DEBUG - In Position is  0
2018-02-06 09:36:05,523 - DEBUG - In Position is  <class 'int'>
2018-02-06 09:36:05,523 - DEBUG - curStopLossFlag is  0
2018-02-06 09:36:05,525 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 09:36:05,525 - DEBUG - Checking if Entry has been filled
2018-02-06 09:36:05,525 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 09:36:05,526 - DEBUG - EntryPend is 1
2018-02-06 09:36:05,526 - DEBUG - Try to Cancel Stop
2018-02-06 09:36:05,526 - DEBUG - Stop API ID 0
2018-02-06 09:36:05,526 - DEBUG - Profit API ID 170
2018-02-06 09:36:05,526 - DEBUG - Stop API ID <class 'int'>
2018-02-06 09:36:05,528 - DEBUG - Profit API ID <class 'int'>
2018-02-06 09:36:05,528 - DEBUG - Pos is 0
2018-02-06 09:36:05,528 - DEBUG - CurCount is 0
2018-02-06 09:36:05,528 - DEBUG - In Pos 0
2018-02-06 09:36:05,529 - DEBUG - Stop ID is 0
2018-02-06 09:36:05,529 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 09:36:05,529 - DEBUG - EntryPend is 1
2018-02-06 09:36:05,530 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 09:36:05,530 - DEBUG - Entry Date is 10
2018-02-06 09:36:05,530 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 09:36:05,530 - DEBUG - Order Profit ID is 170
2018-02-06 09:36:05,532 - DEBUG - Order Entry ID is 170
2018-02-06 09:36:05,532 - DEBUG - API ID is  0
2018-02-06 09:36:05,532 - DEBUG - Current Position is 0
2018-02-06 09:36:05,532 - DEBUG - Current Position is <class 'str'>
2018-02-06 09:36:05,532 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 09:36:05,532 - DEBUG - Time is 9
2018-02-06 09:36:05,532 - DEBUG - Time is <class 'int'>
2018-02-06 09:36:05,532 - DEBUG - Time is 36
2018-02-06 09:36:05,533 - DEBUG - Time is <class 'int'>
2018-02-06 09:36:05,533 - DEBUG - Disconnected from IBController
2018-02-06 09:36:05,533 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 09:41:01,377 - DEBUG - ****************************************************
2018-02-06 09:41:01,377 - DEBUG - Current Time is 09:41AM
2018-02-06 09:41:01,378 - DEBUG - Starting Pos Mgmt H E
2018-02-06 09:41:01,378 - DEBUG - Connecting to database
2018-02-06 09:41:01,404 - DEBUG - Connected to database
2018-02-06 09:41:01,404 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 09:41:01,405 - DEBUG - Order Profit is 170
2018-02-06 09:41:01,405 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 09:41:01,407 - DEBUG - Stop ID is 0
2018-02-06 09:41:01,407 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 09:41:01,408 - DEBUG - Entry ID is 170
2018-02-06 09:41:01,410 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 09:41:01,411 - DEBUG - OCA ID is 1
2018-02-06 09:41:01,411 - DEBUG - Connecting to IBController
2018-02-06 09:41:02,417 - DEBUG - Connected to IBController
2018-02-06 09:41:02,417 - DEBUG - Position requested
2018-02-06 09:41:02,423 - DEBUG - Pos Mgmt 0
2018-02-06 09:41:02,424 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210CCF8>, pos=0, avgCost=0.0>
2018-02-06 09:41:02,424 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 09:41:02,424 - DEBUG - ccy2 Currency with position is USD
2018-02-06 09:41:02,424 - DEBUG - Position is 0
2018-02-06 09:41:02,424 - DEBUG - Pos Mgmt -1
2018-02-06 09:41:02,424 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210CBE0>, pos=-1, avgCost=28787.1>
2018-02-06 09:41:02,426 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 09:41:02,426 - DEBUG - ccy2 Currency with position is USD
2018-02-06 09:41:02,426 - DEBUG - Position is -1
2018-02-06 09:41:02,426 - DEBUG - In Position
2018-02-06 09:41:02,427 - DEBUG - Position is 1
2018-02-06 09:41:02,427 - DEBUG - Pos Mgmt -12987
2018-02-06 09:41:02,427 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210CEF0>, pos=-12987, avgCost=0.95368235>
2018-02-06 09:41:02,427 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 09:41:02,427 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 09:41:02,427 - DEBUG - Position is -12987
2018-02-06 09:41:02,428 - DEBUG - Pos Mgmt 0
2018-02-06 09:41:02,428 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210CDD8>, pos=0, avgCost=0.0>
2018-02-06 09:41:02,428 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 09:41:02,430 - DEBUG - ccy2 Currency with position is USD
2018-02-06 09:41:02,430 - DEBUG - Position is 0
2018-02-06 09:41:03,423 - DEBUG - Open Orders requested
2018-02-06 09:41:03,426 - DEBUG - Reply Handler Orders is <openOrder orderId=169, contract=<ib.ext.Contract.Contract object at 0x000000000210CEF0>, order=<ib.ext.Order.Order object at 0x000000000210CB00>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A1160>>
2018-02-06 09:41:03,426 - DEBUG - Order OrderID 169
2018-02-06 09:41:03,427 - DEBUG - reply handler status <orderStatus orderId=169, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067153, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 09:41:03,427 - DEBUG - Order status PreSubmitted
2018-02-06 09:41:03,427 - DEBUG - Order Identification 169
2018-02-06 09:41:03,427 - DEBUG - Order Identification <class 'int'>
2018-02-06 09:41:03,427 - DEBUG - Profit ID from database is 170
2018-02-06 09:41:03,427 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 09:41:03,427 - DEBUG - Stop ID database is 0
2018-02-06 09:41:03,428 - DEBUG - Entry ID database is 170
2018-02-06 09:41:05,424 - DEBUG - Connecting to database
2018-02-06 09:41:05,438 - DEBUG - Connected to database
2018-02-06 09:41:05,440 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 09:41:05,440 - DEBUG - Stop loss value is 74.22
2018-02-06 09:41:05,443 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 09:41:05,443 - DEBUG - Stop loss value is 61.3
2018-02-06 09:41:05,444 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 09:41:05,444 - DEBUG - EntryPrice value is 72.25
2018-02-06 09:41:05,446 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 09:41:05,447 - DEBUG - Stop quantity 1
2018-02-06 09:41:05,447 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 09:41:05,448 - DEBUG - Direction is Short
2018-02-06 09:41:05,450 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 09:41:05,450 - DEBUG - Count is 0
2018-02-06 09:41:05,451 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 09:41:05,451 - DEBUG - Stop Loss Flag is 0
2018-02-06 09:41:05,453 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 09:41:05,453 - DEBUG - Max ID Order is (170,)
2018-02-06 09:41:05,453 - DEBUG - Today is 2018-02-06
2018-02-06 09:41:05,454 - DEBUG - Day of the week 1
2018-02-06 09:41:05,454 - DEBUG - Yesterday is 02/05/2018
2018-02-06 09:41:05,454 - DEBUG - In Position is  1
2018-02-06 09:41:05,456 - DEBUG - In Position is  <class 'int'>
2018-02-06 09:41:05,456 - DEBUG - curStopLossFlag is  0
2018-02-06 09:41:05,456 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 09:41:05,456 - DEBUG - Checking if Entry has been filled
2018-02-06 09:41:05,457 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 09:41:05,457 - DEBUG - EntryPend is 1
2018-02-06 09:41:05,457 - DEBUG - Identified Entry Order Has Been Filled: In Stop Loss creation
2018-02-06 09:41:05,459 - DEBUG - Order Profit is ('170',)
2018-02-06 09:41:05,459 - DEBUG - Incremented Order ID for stop loss 171
2018-02-06 09:41:05,459 - DEBUG - Symbol, secType, exchange is H FUT GLOBEX
2018-02-06 09:41:05,459 - DEBUG - Contract is <ib.ext.Contract.Contract object at 0x0000000002104160>
2018-02-06 09:41:05,460 - DEBUG - Entry Trade Direction is Short
2018-02-06 09:41:05,460 - DEBUG - In Short direction.
2018-02-06 09:41:05,460 - DEBUG - In TRAIL STOP function
2018-02-06 09:41:05,460 - DEBUG - Order action Buy
2018-02-06 09:41:05,460 - DEBUG - Limit value is 1
2018-02-06 09:41:05,460 - DEBUG - In Buy action. TRAIL price is 74.2200
2018-02-06 09:41:05,460 - DEBUG - In Buy action. AUX Price price is 1.0
2018-02-06 09:41:05,461 - DEBUG - In Buy action. account is U1998629
2018-02-06 09:41:05,463 - DEBUG - Long stop order placed
2018-02-06 09:41:05,482 - DEBUG - Query is UPDATE hasPosition SET BB_Position = 1 where CCY = 'HE'
2018-02-06 09:41:05,482 - DEBUG - BB POSITION Set to 1.  No More positions should be taken
2018-02-06 09:41:05,509 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x00000000021A12B0>, order=<ib.ext.Order.Order object at 0x00000000021A1320>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A15C0>>
2018-02-06 09:41:05,509 - DEBUG - Order OrderID 171
2018-02-06 09:41:05,510 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 09:41:05,510 - DEBUG - Order status PreSubmitted
2018-02-06 09:41:05,510 - DEBUG - Order Identification 171
2018-02-06 09:41:05,510 - DEBUG - Order Identification <class 'int'>
2018-02-06 09:41:05,512 - DEBUG - Profit ID from database is 170
2018-02-06 09:41:05,512 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 09:41:05,512 - DEBUG - Stop ID database is 0
2018-02-06 09:41:05,512 - DEBUG - Entry ID database is 170
2018-02-06 09:41:05,513 - DEBUG - Master Fill set to 1
2018-02-06 09:41:05,513 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'ES'
2018-02-06 09:41:05,516 - DEBUG - Entry ID is 0
2018-02-06 09:41:05,516 - DEBUG - Canceled Order 0
2018-02-06 09:41:05,516 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'M6E'
2018-02-06 09:41:05,517 - DEBUG - Entry ID is 166
2018-02-06 09:41:05,519 - ERROR - Canceled Order 166
2018-02-06 09:41:05,519 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'LE'
2018-02-06 09:41:05,520 - DEBUG - Entry ID is 169
2018-02-06 09:41:05,520 - ERROR - Canceled Order 169
2018-02-06 09:41:05,522 - DEBUG - Query is UPDATE Orders SET Status = 'Canceled' where idOrder = 166;
2018-02-06 09:41:05,532 - DEBUG - reply handler status <orderStatus orderId=169, status=Cancelled, filled=0, remaining=1, avgFillPrice=0.0, permId=507067153, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=None>
2018-02-06 09:41:05,532 - DEBUG - Order status Cancelled
2018-02-06 09:41:05,532 - DEBUG - Order Identification 169
2018-02-06 09:41:05,533 - DEBUG - Order Identification <class 'int'>
2018-02-06 09:41:05,533 - DEBUG - Profit ID from database is 170
2018-02-06 09:41:05,533 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 09:41:05,533 - DEBUG - Stop ID database is 0
2018-02-06 09:41:05,535 - DEBUG - Entry ID database is 170
2018-02-06 09:41:05,538 - DEBUG - Query is UPDATE Orders SET Status = 'Canceled' where idOrder = 0;
2018-02-06 09:41:05,552 - DEBUG - Query is UPDATE Orders SET Status = 'Canceled' where idOrder = 169;
2018-02-06 09:41:05,569 - DEBUG - Max Positions is (-12.0,)
2018-02-06 09:41:05,569 - DEBUG - Max Positions2 is -11.0
2018-02-06 09:41:05,569 - DEBUG - Query is UPDATE RiskParameters SET RiskParametersValue = -11.0 where idRiskParameters = 15
2018-02-06 09:41:05,584 - DEBUG - Query is UPDATE hasPosition SET BBEntryPending = 0 where CCY ='HE';
2018-02-06 09:41:05,598 - DEBUG - Query is UPDATE hasPosition SET BB_StopLossFlag = 1 where CCY = 'HE'
2018-02-06 09:41:05,621 - DEBUG - StopLossVal2 is 74.22
2018-02-06 09:41:05,621 - DEBUG - ProfitVal2 is 61.3
2018-02-06 09:41:05,661 - DEBUG - Query is UPDATE Orders SET Status = 'Filled' where idOrder = 170;
2018-02-06 09:41:05,677 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 09:41:05,677 - DEBUG - Max ID Order is (171,)
2018-02-06 09:41:05,677 - DEBUG - Incremented Order ID for profit target 172
2018-02-06 09:41:05,677 - DEBUG - Try to Cancel Stop
2018-02-06 09:41:05,677 - DEBUG - Stop API ID 0
2018-02-06 09:41:05,678 - DEBUG - Profit API ID 0
2018-02-06 09:41:05,678 - DEBUG - Stop API ID <class 'int'>
2018-02-06 09:41:05,678 - DEBUG - Profit API ID <class 'int'>
2018-02-06 09:41:05,678 - DEBUG - Pos is 1
2018-02-06 09:41:05,680 - DEBUG - CurCount is 0
2018-02-06 09:41:05,680 - DEBUG - In Pos 1
2018-02-06 09:41:05,680 - DEBUG - Stop ID is 0
2018-02-06 09:41:05,680 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 09:41:05,681 - DEBUG - EntryPend is 0
2018-02-06 09:41:05,681 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 09:41:05,681 - DEBUG - Entry Date is 10
2018-02-06 09:41:05,683 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 09:41:05,683 - DEBUG - Order Profit ID is 170
2018-02-06 09:41:05,683 - DEBUG - Order Entry ID is 170
2018-02-06 09:41:05,683 - DEBUG - API ID is  0
2018-02-06 09:41:05,684 - DEBUG - Current Position is 0
2018-02-06 09:41:05,684 - DEBUG - Current Position is <class 'str'>
2018-02-06 09:41:05,684 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 09:41:05,684 - DEBUG - Time is 9
2018-02-06 09:41:05,684 - DEBUG - Time is <class 'int'>
2018-02-06 09:41:05,684 - DEBUG - Time is 41
2018-02-06 09:41:05,684 - DEBUG - Time is <class 'int'>
2018-02-06 09:41:05,684 - DEBUG - Disconnected from IBController
2018-02-06 09:41:05,686 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 09:46:01,374 - DEBUG - ****************************************************
2018-02-06 09:46:01,375 - DEBUG - Current Time is 09:46AM
2018-02-06 09:46:01,375 - DEBUG - Starting Pos Mgmt H E
2018-02-06 09:46:01,375 - DEBUG - Connecting to database
2018-02-06 09:46:01,401 - DEBUG - Connected to database
2018-02-06 09:46:01,403 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 09:46:01,404 - DEBUG - Order Profit is 170
2018-02-06 09:46:01,404 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 09:46:01,405 - DEBUG - Stop ID is 171
2018-02-06 09:46:01,405 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 09:46:01,407 - DEBUG - Entry ID is 170
2018-02-06 09:46:01,407 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 09:46:01,410 - DEBUG - OCA ID is 1
2018-02-06 09:46:01,410 - DEBUG - Connecting to IBController
2018-02-06 09:46:02,415 - DEBUG - Connected to IBController
2018-02-06 09:46:02,415 - DEBUG - Position requested
2018-02-06 09:46:02,417 - DEBUG - Pos Mgmt 0
2018-02-06 09:46:02,417 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211CD30>, pos=0, avgCost=0.0>
2018-02-06 09:46:02,417 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 09:46:02,418 - DEBUG - ccy2 Currency with position is USD
2018-02-06 09:46:02,418 - DEBUG - Position is 0
2018-02-06 09:46:02,418 - DEBUG - Pos Mgmt -1
2018-02-06 09:46:02,420 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211CCF8>, pos=-1, avgCost=28787.1>
2018-02-06 09:46:02,420 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 09:46:02,420 - DEBUG - ccy2 Currency with position is USD
2018-02-06 09:46:02,421 - DEBUG - Position is -1
2018-02-06 09:46:02,421 - DEBUG - In Position
2018-02-06 09:46:02,421 - DEBUG - Position is 1
2018-02-06 09:46:02,421 - DEBUG - Pos Mgmt -12987
2018-02-06 09:46:02,421 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211CF98>, pos=-12987, avgCost=0.95368235>
2018-02-06 09:46:02,421 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 09:46:02,421 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 09:46:02,421 - DEBUG - Position is -12987
2018-02-06 09:46:02,423 - DEBUG - Pos Mgmt 0
2018-02-06 09:46:02,423 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211CE10>, pos=0, avgCost=0.0>
2018-02-06 09:46:02,423 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 09:46:02,424 - DEBUG - ccy2 Currency with position is USD
2018-02-06 09:46:02,424 - DEBUG - Position is 0
2018-02-06 09:46:03,417 - DEBUG - Open Orders requested
2018-02-06 09:46:03,418 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x000000000211CF98>, order=<ib.ext.Order.Order object at 0x000000000211CD68>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B2198>>
2018-02-06 09:46:03,420 - DEBUG - Order OrderID 171
2018-02-06 09:46:03,420 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 09:46:03,421 - DEBUG - Order status PreSubmitted
2018-02-06 09:46:03,421 - DEBUG - Order Identification 171
2018-02-06 09:46:03,421 - DEBUG - Order Identification <class 'int'>
2018-02-06 09:46:03,421 - DEBUG - Profit ID from database is 170
2018-02-06 09:46:03,421 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 09:46:03,421 - DEBUG - Stop ID database is 171
2018-02-06 09:46:03,421 - DEBUG - Entry ID database is 170
2018-02-06 09:46:03,423 - DEBUG - Stop API ID is 171
2018-02-06 09:46:05,417 - DEBUG - Connecting to database
2018-02-06 09:46:05,426 - DEBUG - Connected to database
2018-02-06 09:46:05,427 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 09:46:05,427 - DEBUG - Stop loss value is 74.22
2018-02-06 09:46:05,428 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 09:46:05,428 - DEBUG - Stop loss value is 61.3
2018-02-06 09:46:05,433 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 09:46:05,434 - DEBUG - EntryPrice value is 72.25
2018-02-06 09:46:05,436 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 09:46:05,436 - DEBUG - Stop quantity 1
2018-02-06 09:46:05,437 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 09:46:05,437 - DEBUG - Direction is Short
2018-02-06 09:46:05,440 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 09:46:05,440 - DEBUG - Count is 1
2018-02-06 09:46:05,440 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 09:46:05,441 - DEBUG - Stop Loss Flag is 1
2018-02-06 09:46:05,443 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 09:46:05,443 - DEBUG - Max ID Order is (171,)
2018-02-06 09:46:05,444 - DEBUG - Today is 2018-02-06
2018-02-06 09:46:05,444 - DEBUG - Day of the week 1
2018-02-06 09:46:05,444 - DEBUG - Yesterday is 02/05/2018
2018-02-06 09:46:05,444 - DEBUG - In Position is  1
2018-02-06 09:46:05,444 - DEBUG - In Position is  <class 'int'>
2018-02-06 09:46:05,444 - DEBUG - curStopLossFlag is  1
2018-02-06 09:46:05,444 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 09:46:05,446 - DEBUG - Checking if Entry has been filled
2018-02-06 09:46:05,446 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 09:46:05,447 - DEBUG - EntryPend is 0
2018-02-06 09:46:05,447 - DEBUG - Try to Cancel Stop
2018-02-06 09:46:05,447 - DEBUG - Stop API ID 171
2018-02-06 09:46:05,447 - DEBUG - Profit API ID 0
2018-02-06 09:46:05,447 - DEBUG - Stop API ID <class 'int'>
2018-02-06 09:46:05,448 - DEBUG - Profit API ID <class 'int'>
2018-02-06 09:46:05,448 - DEBUG - Pos is 1
2018-02-06 09:46:05,448 - DEBUG - CurCount is 1
2018-02-06 09:46:05,448 - DEBUG - In Pos 1
2018-02-06 09:46:05,450 - DEBUG - Stop ID is 171
2018-02-06 09:46:05,450 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 09:46:05,450 - DEBUG - EntryPend is 0
2018-02-06 09:46:05,451 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 09:46:05,451 - DEBUG - Entry Date is 10
2018-02-06 09:46:05,451 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 09:46:05,451 - DEBUG - Order Profit ID is 170
2018-02-06 09:46:05,453 - DEBUG - Order Entry ID is 170
2018-02-06 09:46:05,453 - DEBUG - API ID is  0
2018-02-06 09:46:05,453 - DEBUG - Current Position is 1
2018-02-06 09:46:05,453 - DEBUG - Current Position is <class 'str'>
2018-02-06 09:46:05,453 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 09:46:05,453 - DEBUG - Time is 9
2018-02-06 09:46:05,453 - DEBUG - Time is <class 'int'>
2018-02-06 09:46:05,454 - DEBUG - Time is 46
2018-02-06 09:46:05,454 - DEBUG - Time is <class 'int'>
2018-02-06 09:46:05,454 - DEBUG - Disconnected from IBController
2018-02-06 09:46:05,456 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 09:51:01,371 - DEBUG - ****************************************************
2018-02-06 09:51:01,372 - DEBUG - Current Time is 09:51AM
2018-02-06 09:51:01,372 - DEBUG - Starting Pos Mgmt H E
2018-02-06 09:51:01,374 - DEBUG - Connecting to database
2018-02-06 09:51:01,411 - DEBUG - Connected to database
2018-02-06 09:51:01,411 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 09:51:01,413 - DEBUG - Order Profit is 170
2018-02-06 09:51:01,413 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 09:51:01,414 - DEBUG - Stop ID is 171
2018-02-06 09:51:01,414 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 09:51:01,415 - DEBUG - Entry ID is 170
2018-02-06 09:51:01,417 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 09:51:01,417 - DEBUG - OCA ID is 1
2018-02-06 09:51:01,417 - DEBUG - Connecting to IBController
2018-02-06 09:51:02,437 - DEBUG - Connected to IBController
2018-02-06 09:51:02,437 - DEBUG - Position requested
2018-02-06 09:51:02,440 - DEBUG - Pos Mgmt 0
2018-02-06 09:51:02,441 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212CDD8>, pos=0, avgCost=0.0>
2018-02-06 09:51:02,441 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 09:51:02,443 - DEBUG - ccy2 Currency with position is USD
2018-02-06 09:51:02,443 - DEBUG - Position is 0
2018-02-06 09:51:02,443 - DEBUG - Pos Mgmt -1
2018-02-06 09:51:02,444 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212CBE0>, pos=-1, avgCost=28787.1>
2018-02-06 09:51:02,444 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 09:51:02,444 - DEBUG - ccy2 Currency with position is USD
2018-02-06 09:51:02,444 - DEBUG - Position is -1
2018-02-06 09:51:02,444 - DEBUG - In Position
2018-02-06 09:51:02,444 - DEBUG - Position is 1
2018-02-06 09:51:02,444 - DEBUG - Pos Mgmt -12987
2018-02-06 09:51:02,446 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212CF98>, pos=-12987, avgCost=0.95368235>
2018-02-06 09:51:02,446 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 09:51:02,446 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 09:51:02,447 - DEBUG - Position is -12987
2018-02-06 09:51:02,447 - DEBUG - Pos Mgmt 0
2018-02-06 09:51:02,447 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212CDA0>, pos=0, avgCost=0.0>
2018-02-06 09:51:02,447 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 09:51:02,447 - DEBUG - ccy2 Currency with position is USD
2018-02-06 09:51:02,447 - DEBUG - Position is 0
2018-02-06 09:51:03,440 - DEBUG - Open Orders requested
2018-02-06 09:51:03,443 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x000000000212CF98>, order=<ib.ext.Order.Order object at 0x000000000212CB38>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C1198>>
2018-02-06 09:51:03,444 - DEBUG - Order OrderID 171
2018-02-06 09:51:03,444 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 09:51:03,444 - DEBUG - Order status PreSubmitted
2018-02-06 09:51:03,444 - DEBUG - Order Identification 171
2018-02-06 09:51:03,444 - DEBUG - Order Identification <class 'int'>
2018-02-06 09:51:03,446 - DEBUG - Profit ID from database is 170
2018-02-06 09:51:03,446 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 09:51:03,446 - DEBUG - Stop ID database is 171
2018-02-06 09:51:03,446 - DEBUG - Entry ID database is 170
2018-02-06 09:51:03,447 - DEBUG - Stop API ID is 171
2018-02-06 09:51:05,441 - DEBUG - Connecting to database
2018-02-06 09:51:05,448 - DEBUG - Connected to database
2018-02-06 09:51:05,450 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 09:51:05,450 - DEBUG - Stop loss value is 74.22
2018-02-06 09:51:05,453 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 09:51:05,453 - DEBUG - Stop loss value is 61.3
2018-02-06 09:51:05,453 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 09:51:05,454 - DEBUG - EntryPrice value is 72.25
2018-02-06 09:51:05,456 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 09:51:05,456 - DEBUG - Stop quantity 1
2018-02-06 09:51:05,457 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 09:51:05,457 - DEBUG - Direction is Short
2018-02-06 09:51:05,459 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 09:51:05,460 - DEBUG - Count is 1
2018-02-06 09:51:05,460 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 09:51:05,460 - DEBUG - Stop Loss Flag is 1
2018-02-06 09:51:05,463 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 09:51:05,463 - DEBUG - Max ID Order is (171,)
2018-02-06 09:51:05,463 - DEBUG - Today is 2018-02-06
2018-02-06 09:51:05,463 - DEBUG - Day of the week 1
2018-02-06 09:51:05,463 - DEBUG - Yesterday is 02/05/2018
2018-02-06 09:51:05,464 - DEBUG - In Position is  1
2018-02-06 09:51:05,464 - DEBUG - In Position is  <class 'int'>
2018-02-06 09:51:05,464 - DEBUG - curStopLossFlag is  1
2018-02-06 09:51:05,466 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 09:51:05,466 - DEBUG - Checking if Entry has been filled
2018-02-06 09:51:05,466 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 09:51:05,467 - DEBUG - EntryPend is 0
2018-02-06 09:51:05,467 - DEBUG - Try to Cancel Stop
2018-02-06 09:51:05,467 - DEBUG - Stop API ID 171
2018-02-06 09:51:05,467 - DEBUG - Profit API ID 0
2018-02-06 09:51:05,469 - DEBUG - Stop API ID <class 'int'>
2018-02-06 09:51:05,469 - DEBUG - Profit API ID <class 'int'>
2018-02-06 09:51:05,469 - DEBUG - Pos is 1
2018-02-06 09:51:05,469 - DEBUG - CurCount is 1
2018-02-06 09:51:05,470 - DEBUG - In Pos 1
2018-02-06 09:51:05,470 - DEBUG - Stop ID is 171
2018-02-06 09:51:05,470 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 09:51:05,471 - DEBUG - EntryPend is 0
2018-02-06 09:51:05,471 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 09:51:05,471 - DEBUG - Entry Date is 10
2018-02-06 09:51:05,471 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 09:51:05,473 - DEBUG - Order Profit ID is 170
2018-02-06 09:51:05,473 - DEBUG - Order Entry ID is 170
2018-02-06 09:51:05,473 - DEBUG - API ID is  0
2018-02-06 09:51:05,473 - DEBUG - Current Position is 1
2018-02-06 09:51:05,473 - DEBUG - Current Position is <class 'str'>
2018-02-06 09:51:05,473 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 09:51:05,473 - DEBUG - Time is 9
2018-02-06 09:51:05,473 - DEBUG - Time is <class 'int'>
2018-02-06 09:51:05,473 - DEBUG - Time is 51
2018-02-06 09:51:05,474 - DEBUG - Time is <class 'int'>
2018-02-06 09:51:05,474 - DEBUG - Disconnected from IBController
2018-02-06 09:51:05,474 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 09:56:01,371 - DEBUG - ****************************************************
2018-02-06 09:56:01,371 - DEBUG - Current Time is 09:56AM
2018-02-06 09:56:01,372 - DEBUG - Starting Pos Mgmt H E
2018-02-06 09:56:01,372 - DEBUG - Connecting to database
2018-02-06 09:56:01,430 - DEBUG - Connected to database
2018-02-06 09:56:01,431 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 09:56:01,433 - DEBUG - Order Profit is 170
2018-02-06 09:56:01,433 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 09:56:01,434 - DEBUG - Stop ID is 171
2018-02-06 09:56:01,434 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 09:56:01,444 - DEBUG - Entry ID is 170
2018-02-06 09:56:01,444 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 09:56:01,446 - DEBUG - OCA ID is 1
2018-02-06 09:56:01,447 - DEBUG - Connecting to IBController
2018-02-06 09:56:02,451 - DEBUG - Connected to IBController
2018-02-06 09:56:02,451 - DEBUG - Position requested
2018-02-06 09:56:02,453 - DEBUG - Pos Mgmt 0
2018-02-06 09:56:02,453 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212DD68>, pos=0, avgCost=0.0>
2018-02-06 09:56:02,454 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 09:56:02,454 - DEBUG - ccy2 Currency with position is USD
2018-02-06 09:56:02,454 - DEBUG - Position is 0
2018-02-06 09:56:02,456 - DEBUG - Pos Mgmt -1
2018-02-06 09:56:02,456 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212DCF8>, pos=-1, avgCost=28787.1>
2018-02-06 09:56:02,456 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 09:56:02,456 - DEBUG - ccy2 Currency with position is USD
2018-02-06 09:56:02,457 - DEBUG - Position is -1
2018-02-06 09:56:02,457 - DEBUG - In Position
2018-02-06 09:56:02,457 - DEBUG - Position is 1
2018-02-06 09:56:02,457 - DEBUG - Pos Mgmt -12987
2018-02-06 09:56:02,457 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212DF28>, pos=-12987, avgCost=0.95368235>
2018-02-06 09:56:02,457 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 09:56:02,459 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 09:56:02,459 - DEBUG - Position is -12987
2018-02-06 09:56:02,459 - DEBUG - Pos Mgmt 0
2018-02-06 09:56:02,460 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212DDA0>, pos=0, avgCost=0.0>
2018-02-06 09:56:02,460 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 09:56:02,460 - DEBUG - ccy2 Currency with position is USD
2018-02-06 09:56:02,460 - DEBUG - Position is 0
2018-02-06 09:56:03,453 - DEBUG - Open Orders requested
2018-02-06 09:56:03,454 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x000000000212DF28>, order=<ib.ext.Order.Order object at 0x000000000212DD68>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C1198>>
2018-02-06 09:56:03,456 - DEBUG - Order OrderID 171
2018-02-06 09:56:03,456 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 09:56:03,457 - DEBUG - Order status PreSubmitted
2018-02-06 09:56:03,457 - DEBUG - Order Identification 171
2018-02-06 09:56:03,457 - DEBUG - Order Identification <class 'int'>
2018-02-06 09:56:03,457 - DEBUG - Profit ID from database is 170
2018-02-06 09:56:03,457 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 09:56:03,457 - DEBUG - Stop ID database is 171
2018-02-06 09:56:03,459 - DEBUG - Entry ID database is 170
2018-02-06 09:56:03,459 - DEBUG - Stop API ID is 171
2018-02-06 09:56:05,453 - DEBUG - Connecting to database
2018-02-06 09:56:05,460 - DEBUG - Connected to database
2018-02-06 09:56:05,463 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 09:56:05,463 - DEBUG - Stop loss value is 74.22
2018-02-06 09:56:05,464 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 09:56:05,464 - DEBUG - Stop loss value is 61.3
2018-02-06 09:56:05,467 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 09:56:05,467 - DEBUG - EntryPrice value is 72.25
2018-02-06 09:56:05,467 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 09:56:05,469 - DEBUG - Stop quantity 1
2018-02-06 09:56:05,470 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 09:56:05,470 - DEBUG - Direction is Short
2018-02-06 09:56:05,471 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 09:56:05,471 - DEBUG - Count is 1
2018-02-06 09:56:05,473 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 09:56:05,473 - DEBUG - Stop Loss Flag is 1
2018-02-06 09:56:05,474 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 09:56:05,474 - DEBUG - Max ID Order is (171,)
2018-02-06 09:56:05,476 - DEBUG - Today is 2018-02-06
2018-02-06 09:56:05,476 - DEBUG - Day of the week 1
2018-02-06 09:56:05,476 - DEBUG - Yesterday is 02/05/2018
2018-02-06 09:56:05,476 - DEBUG - In Position is  1
2018-02-06 09:56:05,476 - DEBUG - In Position is  <class 'int'>
2018-02-06 09:56:05,476 - DEBUG - curStopLossFlag is  1
2018-02-06 09:56:05,477 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 09:56:05,477 - DEBUG - Checking if Entry has been filled
2018-02-06 09:56:05,477 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 09:56:05,479 - DEBUG - EntryPend is 0
2018-02-06 09:56:05,480 - DEBUG - Try to Cancel Stop
2018-02-06 09:56:05,480 - DEBUG - Stop API ID 171
2018-02-06 09:56:05,480 - DEBUG - Profit API ID 0
2018-02-06 09:56:05,480 - DEBUG - Stop API ID <class 'int'>
2018-02-06 09:56:05,480 - DEBUG - Profit API ID <class 'int'>
2018-02-06 09:56:05,480 - DEBUG - Pos is 1
2018-02-06 09:56:05,480 - DEBUG - CurCount is 1
2018-02-06 09:56:05,480 - DEBUG - In Pos 1
2018-02-06 09:56:05,482 - DEBUG - Stop ID is 171
2018-02-06 09:56:05,482 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 09:56:05,483 - DEBUG - EntryPend is 0
2018-02-06 09:56:05,483 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 09:56:05,483 - DEBUG - Entry Date is 10
2018-02-06 09:56:05,483 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 09:56:05,483 - DEBUG - Order Profit ID is 170
2018-02-06 09:56:05,484 - DEBUG - Order Entry ID is 170
2018-02-06 09:56:05,484 - DEBUG - API ID is  0
2018-02-06 09:56:05,484 - DEBUG - Current Position is 1
2018-02-06 09:56:05,484 - DEBUG - Current Position is <class 'str'>
2018-02-06 09:56:05,486 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 09:56:05,486 - DEBUG - Time is 9
2018-02-06 09:56:05,486 - DEBUG - Time is <class 'int'>
2018-02-06 09:56:05,486 - DEBUG - Time is 56
2018-02-06 09:56:05,486 - DEBUG - Time is <class 'int'>
2018-02-06 09:56:05,486 - DEBUG - Disconnected from IBController
2018-02-06 09:56:05,486 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 10:01:01,375 - DEBUG - ****************************************************
2018-02-06 10:01:01,377 - DEBUG - Current Time is 10:01AM
2018-02-06 10:01:01,377 - DEBUG - Starting Pos Mgmt H E
2018-02-06 10:01:01,377 - DEBUG - Connecting to database
2018-02-06 10:01:01,401 - DEBUG - Connected to database
2018-02-06 10:01:01,401 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 10:01:01,404 - DEBUG - Order Profit is 170
2018-02-06 10:01:01,404 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 10:01:01,405 - DEBUG - Stop ID is 171
2018-02-06 10:01:01,405 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 10:01:01,407 - DEBUG - Entry ID is 170
2018-02-06 10:01:01,407 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 10:01:01,408 - DEBUG - OCA ID is 1
2018-02-06 10:01:01,410 - DEBUG - Connecting to IBController
2018-02-06 10:01:02,414 - DEBUG - Connected to IBController
2018-02-06 10:01:02,414 - DEBUG - Position requested
2018-02-06 10:01:02,417 - DEBUG - Pos Mgmt 0
2018-02-06 10:01:02,417 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FDDD8>, pos=0, avgCost=0.0>
2018-02-06 10:01:02,417 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 10:01:02,417 - DEBUG - ccy2 Currency with position is USD
2018-02-06 10:01:02,417 - DEBUG - Position is 0
2018-02-06 10:01:02,418 - DEBUG - Pos Mgmt -1
2018-02-06 10:01:02,418 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FDC18>, pos=-1, avgCost=28787.1>
2018-02-06 10:01:02,418 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 10:01:02,420 - DEBUG - ccy2 Currency with position is USD
2018-02-06 10:01:02,420 - DEBUG - Position is -1
2018-02-06 10:01:02,420 - DEBUG - In Position
2018-02-06 10:01:02,420 - DEBUG - Position is 1
2018-02-06 10:01:02,421 - DEBUG - Pos Mgmt -12987
2018-02-06 10:01:02,421 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FDF28>, pos=-12987, avgCost=0.95368235>
2018-02-06 10:01:02,421 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 10:01:02,421 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 10:01:02,421 - DEBUG - Position is -12987
2018-02-06 10:01:02,421 - DEBUG - Pos Mgmt 0
2018-02-06 10:01:02,423 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FDE10>, pos=0, avgCost=0.0>
2018-02-06 10:01:02,423 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 10:01:02,423 - DEBUG - ccy2 Currency with position is USD
2018-02-06 10:01:02,423 - DEBUG - Position is 0
2018-02-06 10:01:03,415 - DEBUG - Open Orders requested
2018-02-06 10:01:03,418 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x00000000020FDF28>, order=<ib.ext.Order.Order object at 0x00000000020FDD68>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002191198>>
2018-02-06 10:01:03,418 - DEBUG - Order OrderID 171
2018-02-06 10:01:03,420 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 10:01:03,420 - DEBUG - Order status PreSubmitted
2018-02-06 10:01:03,421 - DEBUG - Order Identification 171
2018-02-06 10:01:03,421 - DEBUG - Order Identification <class 'int'>
2018-02-06 10:01:03,421 - DEBUG - Profit ID from database is 170
2018-02-06 10:01:03,421 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 10:01:03,421 - DEBUG - Stop ID database is 171
2018-02-06 10:01:03,421 - DEBUG - Entry ID database is 170
2018-02-06 10:01:03,421 - DEBUG - Stop API ID is 171
2018-02-06 10:01:05,417 - DEBUG - Connecting to database
2018-02-06 10:01:05,424 - DEBUG - Connected to database
2018-02-06 10:01:05,426 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 10:01:05,426 - DEBUG - Stop loss value is 74.22
2018-02-06 10:01:05,427 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 10:01:05,427 - DEBUG - Stop loss value is 61.3
2018-02-06 10:01:05,428 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 10:01:05,430 - DEBUG - EntryPrice value is 72.25
2018-02-06 10:01:05,430 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 10:01:05,431 - DEBUG - Stop quantity 1
2018-02-06 10:01:05,433 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 10:01:05,433 - DEBUG - Direction is Short
2018-02-06 10:01:05,434 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 10:01:05,434 - DEBUG - Count is 1
2018-02-06 10:01:05,437 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 10:01:05,437 - DEBUG - Stop Loss Flag is 1
2018-02-06 10:01:05,443 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 10:01:05,443 - DEBUG - Max ID Order is (171,)
2018-02-06 10:01:05,443 - DEBUG - Today is 2018-02-06
2018-02-06 10:01:05,444 - DEBUG - Day of the week 1
2018-02-06 10:01:05,444 - DEBUG - Yesterday is 02/05/2018
2018-02-06 10:01:05,444 - DEBUG - In Position is  1
2018-02-06 10:01:05,444 - DEBUG - In Position is  <class 'int'>
2018-02-06 10:01:05,444 - DEBUG - curStopLossFlag is  1
2018-02-06 10:01:05,444 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 10:01:05,446 - DEBUG - Checking if Entry has been filled
2018-02-06 10:01:05,446 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 10:01:05,447 - DEBUG - EntryPend is 0
2018-02-06 10:01:05,447 - DEBUG - Try to Cancel Stop
2018-02-06 10:01:05,447 - DEBUG - Stop API ID 171
2018-02-06 10:01:05,447 - DEBUG - Profit API ID 0
2018-02-06 10:01:05,448 - DEBUG - Stop API ID <class 'int'>
2018-02-06 10:01:05,448 - DEBUG - Profit API ID <class 'int'>
2018-02-06 10:01:05,448 - DEBUG - Pos is 1
2018-02-06 10:01:05,448 - DEBUG - CurCount is 1
2018-02-06 10:01:05,450 - DEBUG - In Pos 1
2018-02-06 10:01:05,450 - DEBUG - Stop ID is 171
2018-02-06 10:01:05,450 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 10:01:05,451 - DEBUG - EntryPend is 0
2018-02-06 10:01:05,451 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 10:01:05,451 - DEBUG - Entry Date is 10
2018-02-06 10:01:05,451 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 10:01:05,453 - DEBUG - Order Profit ID is 170
2018-02-06 10:01:05,453 - DEBUG - Order Entry ID is 170
2018-02-06 10:01:05,453 - DEBUG - API ID is  0
2018-02-06 10:01:05,453 - DEBUG - Current Position is 1
2018-02-06 10:01:05,453 - DEBUG - Current Position is <class 'str'>
2018-02-06 10:01:05,453 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 10:01:05,453 - DEBUG - Time is 10
2018-02-06 10:01:05,453 - DEBUG - Time is <class 'int'>
2018-02-06 10:01:05,454 - DEBUG - Time is 1
2018-02-06 10:01:05,454 - DEBUG - Time is <class 'int'>
2018-02-06 10:01:05,454 - DEBUG - Disconnected from IBController
2018-02-06 10:01:05,456 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 10:06:01,377 - DEBUG - ****************************************************
2018-02-06 10:06:01,378 - DEBUG - Current Time is 10:06AM
2018-02-06 10:06:01,378 - DEBUG - Starting Pos Mgmt H E
2018-02-06 10:06:01,378 - DEBUG - Connecting to database
2018-02-06 10:06:01,434 - DEBUG - Connected to database
2018-02-06 10:06:01,436 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 10:06:01,437 - DEBUG - Order Profit is 170
2018-02-06 10:06:01,437 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 10:06:01,440 - DEBUG - Stop ID is 171
2018-02-06 10:06:01,440 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 10:06:01,444 - DEBUG - Entry ID is 170
2018-02-06 10:06:01,446 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 10:06:01,447 - DEBUG - OCA ID is 1
2018-02-06 10:06:01,447 - DEBUG - Connecting to IBController
2018-02-06 10:06:02,454 - DEBUG - Connected to IBController
2018-02-06 10:06:02,454 - DEBUG - Position requested
2018-02-06 10:06:02,457 - DEBUG - Pos Mgmt 0
2018-02-06 10:06:02,457 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020ACD30>, pos=0, avgCost=0.0>
2018-02-06 10:06:02,457 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 10:06:02,457 - DEBUG - ccy2 Currency with position is USD
2018-02-06 10:06:02,457 - DEBUG - Position is 0
2018-02-06 10:06:02,459 - DEBUG - Pos Mgmt -1
2018-02-06 10:06:02,459 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020ACAC8>, pos=-1, avgCost=28787.1>
2018-02-06 10:06:02,459 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 10:06:02,460 - DEBUG - ccy2 Currency with position is USD
2018-02-06 10:06:02,460 - DEBUG - Position is -1
2018-02-06 10:06:02,460 - DEBUG - In Position
2018-02-06 10:06:02,460 - DEBUG - Position is 1
2018-02-06 10:06:02,460 - DEBUG - Pos Mgmt -12987
2018-02-06 10:06:02,460 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020ACF28>, pos=-12987, avgCost=0.95368235>
2018-02-06 10:06:02,460 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 10:06:02,461 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 10:06:02,461 - DEBUG - Position is -12987
2018-02-06 10:06:02,461 - DEBUG - Pos Mgmt 0
2018-02-06 10:06:02,461 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020ACB00>, pos=0, avgCost=0.0>
2018-02-06 10:06:02,463 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 10:06:02,463 - DEBUG - ccy2 Currency with position is USD
2018-02-06 10:06:02,463 - DEBUG - Position is 0
2018-02-06 10:06:03,456 - DEBUG - Open Orders requested
2018-02-06 10:06:03,457 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x00000000020ACF28>, order=<ib.ext.Order.Order object at 0x00000000020ACDA0>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002141198>>
2018-02-06 10:06:03,457 - DEBUG - Order OrderID 171
2018-02-06 10:06:03,459 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 10:06:03,459 - DEBUG - Order status PreSubmitted
2018-02-06 10:06:03,460 - DEBUG - Order Identification 171
2018-02-06 10:06:03,460 - DEBUG - Order Identification <class 'int'>
2018-02-06 10:06:03,460 - DEBUG - Profit ID from database is 170
2018-02-06 10:06:03,460 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 10:06:03,460 - DEBUG - Stop ID database is 171
2018-02-06 10:06:03,460 - DEBUG - Entry ID database is 170
2018-02-06 10:06:03,460 - DEBUG - Stop API ID is 171
2018-02-06 10:06:05,457 - DEBUG - Connecting to database
2018-02-06 10:06:05,464 - DEBUG - Connected to database
2018-02-06 10:06:05,466 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 10:06:05,467 - DEBUG - Stop loss value is 74.22
2018-02-06 10:06:05,467 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 10:06:05,469 - DEBUG - Stop loss value is 61.3
2018-02-06 10:06:05,470 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 10:06:05,470 - DEBUG - EntryPrice value is 72.25
2018-02-06 10:06:05,471 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 10:06:05,471 - DEBUG - Stop quantity 1
2018-02-06 10:06:05,473 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 10:06:05,473 - DEBUG - Direction is Short
2018-02-06 10:06:05,474 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 10:06:05,476 - DEBUG - Count is 1
2018-02-06 10:06:05,476 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 10:06:05,477 - DEBUG - Stop Loss Flag is 1
2018-02-06 10:06:05,479 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 10:06:05,479 - DEBUG - Max ID Order is (171,)
2018-02-06 10:06:05,480 - DEBUG - Today is 2018-02-06
2018-02-06 10:06:05,480 - DEBUG - Day of the week 1
2018-02-06 10:06:05,480 - DEBUG - Yesterday is 02/05/2018
2018-02-06 10:06:05,480 - DEBUG - In Position is  1
2018-02-06 10:06:05,480 - DEBUG - In Position is  <class 'int'>
2018-02-06 10:06:05,480 - DEBUG - curStopLossFlag is  1
2018-02-06 10:06:05,482 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 10:06:05,482 - DEBUG - Checking if Entry has been filled
2018-02-06 10:06:05,482 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 10:06:05,484 - DEBUG - EntryPend is 0
2018-02-06 10:06:05,484 - DEBUG - Try to Cancel Stop
2018-02-06 10:06:05,484 - DEBUG - Stop API ID 171
2018-02-06 10:06:05,486 - DEBUG - Profit API ID 0
2018-02-06 10:06:05,486 - DEBUG - Stop API ID <class 'int'>
2018-02-06 10:06:05,486 - DEBUG - Profit API ID <class 'int'>
2018-02-06 10:06:05,486 - DEBUG - Pos is 1
2018-02-06 10:06:05,486 - DEBUG - CurCount is 1
2018-02-06 10:06:05,486 - DEBUG - In Pos 1
2018-02-06 10:06:05,486 - DEBUG - Stop ID is 171
2018-02-06 10:06:05,486 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 10:06:05,489 - DEBUG - EntryPend is 0
2018-02-06 10:06:05,489 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 10:06:05,489 - DEBUG - Entry Date is 10
2018-02-06 10:06:05,490 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 10:06:05,490 - DEBUG - Order Profit ID is 170
2018-02-06 10:06:05,490 - DEBUG - Order Entry ID is 170
2018-02-06 10:06:05,490 - DEBUG - API ID is  0
2018-02-06 10:06:05,490 - DEBUG - Current Position is 1
2018-02-06 10:06:05,490 - DEBUG - Current Position is <class 'str'>
2018-02-06 10:06:05,490 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 10:06:05,490 - DEBUG - Time is 10
2018-02-06 10:06:05,492 - DEBUG - Time is <class 'int'>
2018-02-06 10:06:05,492 - DEBUG - Time is 6
2018-02-06 10:06:05,492 - DEBUG - Time is <class 'int'>
2018-02-06 10:06:05,492 - DEBUG - Disconnected from IBController
2018-02-06 10:06:05,493 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 10:11:01,377 - DEBUG - ****************************************************
2018-02-06 10:11:01,377 - DEBUG - Current Time is 10:11AM
2018-02-06 10:11:01,378 - DEBUG - Starting Pos Mgmt H E
2018-02-06 10:11:01,378 - DEBUG - Connecting to database
2018-02-06 10:11:01,426 - DEBUG - Connected to database
2018-02-06 10:11:01,426 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 10:11:01,427 - DEBUG - Order Profit is 170
2018-02-06 10:11:01,427 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 10:11:01,428 - DEBUG - Stop ID is 171
2018-02-06 10:11:01,428 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 10:11:01,430 - DEBUG - Entry ID is 170
2018-02-06 10:11:01,430 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 10:11:01,433 - DEBUG - OCA ID is 1
2018-02-06 10:11:01,433 - DEBUG - Connecting to IBController
2018-02-06 10:11:02,438 - DEBUG - Connected to IBController
2018-02-06 10:11:02,438 - DEBUG - Position requested
2018-02-06 10:11:02,440 - DEBUG - Pos Mgmt 0
2018-02-06 10:11:02,440 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211DB38>, pos=0, avgCost=0.0>
2018-02-06 10:11:02,441 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 10:11:02,441 - DEBUG - ccy2 Currency with position is USD
2018-02-06 10:11:02,441 - DEBUG - Position is 0
2018-02-06 10:11:02,443 - DEBUG - Pos Mgmt -1
2018-02-06 10:11:02,443 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211DC88>, pos=-1, avgCost=28787.1>
2018-02-06 10:11:02,443 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 10:11:02,443 - DEBUG - ccy2 Currency with position is USD
2018-02-06 10:11:02,444 - DEBUG - Position is -1
2018-02-06 10:11:02,444 - DEBUG - In Position
2018-02-06 10:11:02,444 - DEBUG - Position is 1
2018-02-06 10:11:02,444 - DEBUG - Pos Mgmt -12987
2018-02-06 10:11:02,444 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211DF28>, pos=-12987, avgCost=0.95368235>
2018-02-06 10:11:02,444 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 10:11:02,446 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 10:11:02,446 - DEBUG - Position is -12987
2018-02-06 10:11:02,446 - DEBUG - Pos Mgmt 0
2018-02-06 10:11:02,447 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211DDA0>, pos=0, avgCost=0.0>
2018-02-06 10:11:02,447 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 10:11:02,447 - DEBUG - ccy2 Currency with position is USD
2018-02-06 10:11:02,447 - DEBUG - Position is 0
2018-02-06 10:11:03,319 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x000000000211DF28>, order=<ib.ext.Order.Order object at 0x000000000211DF60>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B2198>>
2018-02-06 10:11:03,319 - DEBUG - Order OrderID 171
2018-02-06 10:11:03,321 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 10:11:03,321 - DEBUG - Order status PreSubmitted
2018-02-06 10:11:03,321 - DEBUG - Order Identification 171
2018-02-06 10:11:03,322 - DEBUG - Order Identification <class 'int'>
2018-02-06 10:11:03,322 - DEBUG - Profit ID from database is 170
2018-02-06 10:11:03,322 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 10:11:03,322 - DEBUG - Stop ID database is 171
2018-02-06 10:11:03,322 - DEBUG - Entry ID database is 170
2018-02-06 10:11:03,322 - DEBUG - Stop API ID is 171
2018-02-06 10:11:03,440 - DEBUG - Open Orders requested
2018-02-06 10:11:03,443 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x000000000211DF60>, order=<ib.ext.Order.Order object at 0x000000000211DF98>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B22E8>>
2018-02-06 10:11:03,444 - DEBUG - Order OrderID 171
2018-02-06 10:11:03,444 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 10:11:03,444 - DEBUG - Order status PreSubmitted
2018-02-06 10:11:03,444 - DEBUG - Order Identification 171
2018-02-06 10:11:03,444 - DEBUG - Order Identification <class 'int'>
2018-02-06 10:11:03,444 - DEBUG - Profit ID from database is 170
2018-02-06 10:11:03,446 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 10:11:03,446 - DEBUG - Stop ID database is 171
2018-02-06 10:11:03,446 - DEBUG - Entry ID database is 170
2018-02-06 10:11:03,446 - DEBUG - Stop API ID is 171
2018-02-06 10:11:05,444 - DEBUG - Connecting to database
2018-02-06 10:11:05,453 - DEBUG - Connected to database
2018-02-06 10:11:05,454 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 10:11:05,454 - DEBUG - Stop loss value is 74.22
2018-02-06 10:11:05,457 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 10:11:05,457 - DEBUG - Stop loss value is 61.3
2018-02-06 10:11:05,457 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 10:11:05,459 - DEBUG - EntryPrice value is 72.25
2018-02-06 10:11:05,460 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 10:11:05,460 - DEBUG - Stop quantity 1
2018-02-06 10:11:05,461 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 10:11:05,461 - DEBUG - Direction is Short
2018-02-06 10:11:05,463 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 10:11:05,463 - DEBUG - Count is 1
2018-02-06 10:11:05,464 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 10:11:05,464 - DEBUG - Stop Loss Flag is 1
2018-02-06 10:11:05,470 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 10:11:05,470 - DEBUG - Max ID Order is (171,)
2018-02-06 10:11:05,471 - DEBUG - Today is 2018-02-06
2018-02-06 10:11:05,471 - DEBUG - Day of the week 1
2018-02-06 10:11:05,473 - DEBUG - Yesterday is 02/05/2018
2018-02-06 10:11:05,473 - DEBUG - In Position is  1
2018-02-06 10:11:05,473 - DEBUG - In Position is  <class 'int'>
2018-02-06 10:11:05,473 - DEBUG - curStopLossFlag is  1
2018-02-06 10:11:05,473 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 10:11:05,473 - DEBUG - Checking if Entry has been filled
2018-02-06 10:11:05,473 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 10:11:05,483 - DEBUG - EntryPend is 0
2018-02-06 10:11:05,483 - DEBUG - Try to Cancel Stop
2018-02-06 10:11:05,484 - DEBUG - Stop API ID 171
2018-02-06 10:11:05,484 - DEBUG - Profit API ID 0
2018-02-06 10:11:05,484 - DEBUG - Stop API ID <class 'int'>
2018-02-06 10:11:05,486 - DEBUG - Profit API ID <class 'int'>
2018-02-06 10:11:05,486 - DEBUG - Pos is 1
2018-02-06 10:11:05,486 - DEBUG - CurCount is 1
2018-02-06 10:11:05,486 - DEBUG - In Pos 1
2018-02-06 10:11:05,486 - DEBUG - Stop ID is 171
2018-02-06 10:11:05,486 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 10:11:05,487 - DEBUG - EntryPend is 0
2018-02-06 10:11:05,487 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 10:11:05,489 - DEBUG - Entry Date is 10
2018-02-06 10:11:05,489 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 10:11:05,489 - DEBUG - Order Profit ID is 170
2018-02-06 10:11:05,489 - DEBUG - Order Entry ID is 170
2018-02-06 10:11:05,490 - DEBUG - API ID is  0
2018-02-06 10:11:05,490 - DEBUG - Current Position is 1
2018-02-06 10:11:05,490 - DEBUG - Current Position is <class 'str'>
2018-02-06 10:11:05,490 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 10:11:05,490 - DEBUG - Time is 10
2018-02-06 10:11:05,490 - DEBUG - Time is <class 'int'>
2018-02-06 10:11:05,490 - DEBUG - Time is 11
2018-02-06 10:11:05,490 - DEBUG - Time is <class 'int'>
2018-02-06 10:11:05,492 - DEBUG - Disconnected from IBController
2018-02-06 10:11:05,492 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 10:16:01,367 - DEBUG - ****************************************************
2018-02-06 10:16:01,368 - DEBUG - Current Time is 10:16AM
2018-02-06 10:16:01,368 - DEBUG - Starting Pos Mgmt H E
2018-02-06 10:16:01,368 - DEBUG - Connecting to database
2018-02-06 10:16:01,404 - DEBUG - Connected to database
2018-02-06 10:16:01,404 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 10:16:01,407 - DEBUG - Order Profit is 170
2018-02-06 10:16:01,407 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 10:16:01,408 - DEBUG - Stop ID is 171
2018-02-06 10:16:01,408 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 10:16:01,411 - DEBUG - Entry ID is 170
2018-02-06 10:16:01,411 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 10:16:01,411 - DEBUG - OCA ID is 1
2018-02-06 10:16:01,413 - DEBUG - Connecting to IBController
2018-02-06 10:16:02,421 - DEBUG - Connected to IBController
2018-02-06 10:16:02,421 - DEBUG - Position requested
2018-02-06 10:16:02,423 - DEBUG - Pos Mgmt 0
2018-02-06 10:16:02,423 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212DD30>, pos=0, avgCost=0.0>
2018-02-06 10:16:02,424 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 10:16:02,424 - DEBUG - ccy2 Currency with position is USD
2018-02-06 10:16:02,424 - DEBUG - Position is 0
2018-02-06 10:16:02,424 - DEBUG - Pos Mgmt -1
2018-02-06 10:16:02,424 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212DCC0>, pos=-1, avgCost=28787.1>
2018-02-06 10:16:02,424 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 10:16:02,426 - DEBUG - ccy2 Currency with position is USD
2018-02-06 10:16:02,426 - DEBUG - Position is -1
2018-02-06 10:16:02,427 - DEBUG - In Position
2018-02-06 10:16:02,428 - DEBUG - Position is 1
2018-02-06 10:16:02,428 - DEBUG - Pos Mgmt -12987
2018-02-06 10:16:02,428 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212DF28>, pos=-12987, avgCost=0.95368235>
2018-02-06 10:16:02,430 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 10:16:02,430 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 10:16:02,430 - DEBUG - Position is -12987
2018-02-06 10:16:02,430 - DEBUG - Pos Mgmt 0
2018-02-06 10:16:02,430 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212DDD8>, pos=0, avgCost=0.0>
2018-02-06 10:16:02,430 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 10:16:02,430 - DEBUG - ccy2 Currency with position is USD
2018-02-06 10:16:02,430 - DEBUG - Position is 0
2018-02-06 10:16:03,421 - DEBUG - Open Orders requested
2018-02-06 10:16:03,424 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x000000000212DF28>, order=<ib.ext.Order.Order object at 0x000000000212DDA0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C2198>>
2018-02-06 10:16:03,427 - DEBUG - Order OrderID 171
2018-02-06 10:16:03,427 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 10:16:03,427 - DEBUG - Order status PreSubmitted
2018-02-06 10:16:03,427 - DEBUG - Order Identification 171
2018-02-06 10:16:03,427 - DEBUG - Order Identification <class 'int'>
2018-02-06 10:16:03,428 - DEBUG - Profit ID from database is 170
2018-02-06 10:16:03,428 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 10:16:03,428 - DEBUG - Stop ID database is 171
2018-02-06 10:16:03,428 - DEBUG - Entry ID database is 170
2018-02-06 10:16:03,430 - DEBUG - Stop API ID is 171
2018-02-06 10:16:05,421 - DEBUG - Connecting to database
2018-02-06 10:16:05,428 - DEBUG - Connected to database
2018-02-06 10:16:05,430 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 10:16:05,430 - DEBUG - Stop loss value is 74.22
2018-02-06 10:16:05,433 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 10:16:05,433 - DEBUG - Stop loss value is 61.3
2018-02-06 10:16:05,434 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 10:16:05,434 - DEBUG - EntryPrice value is 72.25
2018-02-06 10:16:05,437 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 10:16:05,437 - DEBUG - Stop quantity 1
2018-02-06 10:16:05,437 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 10:16:05,438 - DEBUG - Direction is Short
2018-02-06 10:16:05,440 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 10:16:05,440 - DEBUG - Count is 1
2018-02-06 10:16:05,441 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 10:16:05,441 - DEBUG - Stop Loss Flag is 1
2018-02-06 10:16:05,444 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 10:16:05,444 - DEBUG - Max ID Order is (171,)
2018-02-06 10:16:05,444 - DEBUG - Today is 2018-02-06
2018-02-06 10:16:05,444 - DEBUG - Day of the week 1
2018-02-06 10:16:05,444 - DEBUG - Yesterday is 02/05/2018
2018-02-06 10:16:05,444 - DEBUG - In Position is  1
2018-02-06 10:16:05,446 - DEBUG - In Position is  <class 'int'>
2018-02-06 10:16:05,446 - DEBUG - curStopLossFlag is  1
2018-02-06 10:16:05,446 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 10:16:05,446 - DEBUG - Checking if Entry has been filled
2018-02-06 10:16:05,447 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 10:16:05,451 - DEBUG - EntryPend is 0
2018-02-06 10:16:05,451 - DEBUG - Try to Cancel Stop
2018-02-06 10:16:05,451 - DEBUG - Stop API ID 171
2018-02-06 10:16:05,453 - DEBUG - Profit API ID 0
2018-02-06 10:16:05,453 - DEBUG - Stop API ID <class 'int'>
2018-02-06 10:16:05,453 - DEBUG - Profit API ID <class 'int'>
2018-02-06 10:16:05,453 - DEBUG - Pos is 1
2018-02-06 10:16:05,453 - DEBUG - CurCount is 1
2018-02-06 10:16:05,453 - DEBUG - In Pos 1
2018-02-06 10:16:05,453 - DEBUG - Stop ID is 171
2018-02-06 10:16:05,453 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 10:16:05,456 - DEBUG - EntryPend is 0
2018-02-06 10:16:05,456 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 10:16:05,456 - DEBUG - Entry Date is 10
2018-02-06 10:16:05,456 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 10:16:05,457 - DEBUG - Order Profit ID is 170
2018-02-06 10:16:05,457 - DEBUG - Order Entry ID is 170
2018-02-06 10:16:05,457 - DEBUG - API ID is  0
2018-02-06 10:16:05,457 - DEBUG - Current Position is 1
2018-02-06 10:16:05,457 - DEBUG - Current Position is <class 'str'>
2018-02-06 10:16:05,457 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 10:16:05,457 - DEBUG - Time is 10
2018-02-06 10:16:05,457 - DEBUG - Time is <class 'int'>
2018-02-06 10:16:05,459 - DEBUG - Time is 16
2018-02-06 10:16:05,459 - DEBUG - Time is <class 'int'>
2018-02-06 10:16:05,459 - DEBUG - Disconnected from IBController
2018-02-06 10:16:05,460 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 10:21:01,368 - DEBUG - ****************************************************
2018-02-06 10:21:01,368 - DEBUG - Current Time is 10:21AM
2018-02-06 10:21:01,368 - DEBUG - Starting Pos Mgmt H E
2018-02-06 10:21:01,368 - DEBUG - Connecting to database
2018-02-06 10:21:01,400 - DEBUG - Connected to database
2018-02-06 10:21:01,400 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 10:21:01,401 - DEBUG - Order Profit is 170
2018-02-06 10:21:01,401 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 10:21:01,404 - DEBUG - Stop ID is 171
2018-02-06 10:21:01,404 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 10:21:01,404 - DEBUG - Entry ID is 170
2018-02-06 10:21:01,405 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 10:21:01,407 - DEBUG - OCA ID is 1
2018-02-06 10:21:01,407 - DEBUG - Connecting to IBController
2018-02-06 10:21:02,418 - DEBUG - Connected to IBController
2018-02-06 10:21:02,418 - DEBUG - Position requested
2018-02-06 10:21:02,421 - DEBUG - Pos Mgmt 0
2018-02-06 10:21:02,421 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000216DE10>, pos=0, avgCost=0.0>
2018-02-06 10:21:02,421 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 10:21:02,421 - DEBUG - ccy2 Currency with position is USD
2018-02-06 10:21:02,421 - DEBUG - Position is 0
2018-02-06 10:21:02,423 - DEBUG - Pos Mgmt -1
2018-02-06 10:21:02,423 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000216DC88>, pos=-1, avgCost=28787.1>
2018-02-06 10:21:02,423 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 10:21:02,423 - DEBUG - ccy2 Currency with position is USD
2018-02-06 10:21:02,424 - DEBUG - Position is -1
2018-02-06 10:21:02,424 - DEBUG - In Position
2018-02-06 10:21:02,424 - DEBUG - Position is 1
2018-02-06 10:21:02,424 - DEBUG - Pos Mgmt -12987
2018-02-06 10:21:02,424 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000216DF28>, pos=-12987, avgCost=0.95368235>
2018-02-06 10:21:02,424 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 10:21:02,424 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 10:21:02,426 - DEBUG - Position is -12987
2018-02-06 10:21:02,426 - DEBUG - Pos Mgmt 0
2018-02-06 10:21:02,426 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000216DD30>, pos=0, avgCost=0.0>
2018-02-06 10:21:02,427 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 10:21:02,427 - DEBUG - ccy2 Currency with position is USD
2018-02-06 10:21:02,427 - DEBUG - Position is 0
2018-02-06 10:21:03,420 - DEBUG - Open Orders requested
2018-02-06 10:21:03,421 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x000000000216DF28>, order=<ib.ext.Order.Order object at 0x000000000216DB38>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002201198>>
2018-02-06 10:21:03,423 - DEBUG - Order OrderID 171
2018-02-06 10:21:03,423 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 10:21:03,424 - DEBUG - Order status PreSubmitted
2018-02-06 10:21:03,424 - DEBUG - Order Identification 171
2018-02-06 10:21:03,424 - DEBUG - Order Identification <class 'int'>
2018-02-06 10:21:03,424 - DEBUG - Profit ID from database is 170
2018-02-06 10:21:03,424 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 10:21:03,424 - DEBUG - Stop ID database is 171
2018-02-06 10:21:03,424 - DEBUG - Entry ID database is 170
2018-02-06 10:21:03,424 - DEBUG - Stop API ID is 171
2018-02-06 10:21:05,421 - DEBUG - Connecting to database
2018-02-06 10:21:05,427 - DEBUG - Connected to database
2018-02-06 10:21:05,430 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 10:21:05,430 - DEBUG - Stop loss value is 74.22
2018-02-06 10:21:05,431 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 10:21:05,431 - DEBUG - Stop loss value is 61.3
2018-02-06 10:21:05,434 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 10:21:05,434 - DEBUG - EntryPrice value is 72.25
2018-02-06 10:21:05,436 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 10:21:05,436 - DEBUG - Stop quantity 1
2018-02-06 10:21:05,437 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 10:21:05,437 - DEBUG - Direction is Short
2018-02-06 10:21:05,438 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 10:21:05,438 - DEBUG - Count is 1
2018-02-06 10:21:05,440 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 10:21:05,440 - DEBUG - Stop Loss Flag is 1
2018-02-06 10:21:05,441 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 10:21:05,443 - DEBUG - Max ID Order is (171,)
2018-02-06 10:21:05,443 - DEBUG - Today is 2018-02-06
2018-02-06 10:21:05,444 - DEBUG - Day of the week 1
2018-02-06 10:21:05,444 - DEBUG - Yesterday is 02/05/2018
2018-02-06 10:21:05,444 - DEBUG - In Position is  1
2018-02-06 10:21:05,444 - DEBUG - In Position is  <class 'int'>
2018-02-06 10:21:05,444 - DEBUG - curStopLossFlag is  1
2018-02-06 10:21:05,444 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 10:21:05,446 - DEBUG - Checking if Entry has been filled
2018-02-06 10:21:05,446 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 10:21:05,447 - DEBUG - EntryPend is 0
2018-02-06 10:21:05,447 - DEBUG - Try to Cancel Stop
2018-02-06 10:21:05,447 - DEBUG - Stop API ID 171
2018-02-06 10:21:05,447 - DEBUG - Profit API ID 0
2018-02-06 10:21:05,447 - DEBUG - Stop API ID <class 'int'>
2018-02-06 10:21:05,448 - DEBUG - Profit API ID <class 'int'>
2018-02-06 10:21:05,448 - DEBUG - Pos is 1
2018-02-06 10:21:05,448 - DEBUG - CurCount is 1
2018-02-06 10:21:05,448 - DEBUG - In Pos 1
2018-02-06 10:21:05,450 - DEBUG - Stop ID is 171
2018-02-06 10:21:05,450 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 10:21:05,451 - DEBUG - EntryPend is 0
2018-02-06 10:21:05,451 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 10:21:05,451 - DEBUG - Entry Date is 10
2018-02-06 10:21:05,453 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 10:21:05,453 - DEBUG - Order Profit ID is 170
2018-02-06 10:21:05,453 - DEBUG - Order Entry ID is 170
2018-02-06 10:21:05,453 - DEBUG - API ID is  0
2018-02-06 10:21:05,453 - DEBUG - Current Position is 1
2018-02-06 10:21:05,453 - DEBUG - Current Position is <class 'str'>
2018-02-06 10:21:05,453 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 10:21:05,453 - DEBUG - Time is 10
2018-02-06 10:21:05,454 - DEBUG - Time is <class 'int'>
2018-02-06 10:21:05,454 - DEBUG - Time is 21
2018-02-06 10:21:05,454 - DEBUG - Time is <class 'int'>
2018-02-06 10:21:05,456 - DEBUG - Disconnected from IBController
2018-02-06 10:21:05,456 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 10:26:01,374 - DEBUG - ****************************************************
2018-02-06 10:26:01,374 - DEBUG - Current Time is 10:26AM
2018-02-06 10:26:01,375 - DEBUG - Starting Pos Mgmt H E
2018-02-06 10:26:01,375 - DEBUG - Connecting to database
2018-02-06 10:26:01,401 - DEBUG - Connected to database
2018-02-06 10:26:01,401 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 10:26:01,403 - DEBUG - Order Profit is 170
2018-02-06 10:26:01,403 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 10:26:01,404 - DEBUG - Stop ID is 171
2018-02-06 10:26:01,404 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 10:26:01,405 - DEBUG - Entry ID is 170
2018-02-06 10:26:01,407 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 10:26:01,407 - DEBUG - OCA ID is 1
2018-02-06 10:26:01,407 - DEBUG - Connecting to IBController
2018-02-06 10:26:02,414 - DEBUG - Connected to IBController
2018-02-06 10:26:02,414 - DEBUG - Position requested
2018-02-06 10:26:02,417 - DEBUG - Pos Mgmt 0
2018-02-06 10:26:02,417 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FCDA0>, pos=0, avgCost=0.0>
2018-02-06 10:26:02,417 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 10:26:02,417 - DEBUG - ccy2 Currency with position is USD
2018-02-06 10:26:02,417 - DEBUG - Position is 0
2018-02-06 10:26:02,418 - DEBUG - Pos Mgmt -1
2018-02-06 10:26:02,418 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FCC88>, pos=-1, avgCost=28787.1>
2018-02-06 10:26:02,418 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 10:26:02,420 - DEBUG - ccy2 Currency with position is USD
2018-02-06 10:26:02,420 - DEBUG - Position is -1
2018-02-06 10:26:02,420 - DEBUG - In Position
2018-02-06 10:26:02,420 - DEBUG - Position is 1
2018-02-06 10:26:02,421 - DEBUG - Pos Mgmt -12987
2018-02-06 10:26:02,421 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FCF28>, pos=-12987, avgCost=0.95368235>
2018-02-06 10:26:02,421 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 10:26:02,421 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 10:26:02,421 - DEBUG - Position is -12987
2018-02-06 10:26:02,421 - DEBUG - Pos Mgmt 0
2018-02-06 10:26:02,423 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FCB38>, pos=0, avgCost=0.0>
2018-02-06 10:26:02,423 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 10:26:02,423 - DEBUG - ccy2 Currency with position is USD
2018-02-06 10:26:02,424 - DEBUG - Position is 0
2018-02-06 10:26:03,415 - DEBUG - Open Orders requested
2018-02-06 10:26:03,417 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x00000000020FCF28>, order=<ib.ext.Order.Order object at 0x00000000020FCE10>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002192198>>
2018-02-06 10:26:03,418 - DEBUG - Order OrderID 171
2018-02-06 10:26:03,418 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 10:26:03,420 - DEBUG - Order status PreSubmitted
2018-02-06 10:26:03,420 - DEBUG - Order Identification 171
2018-02-06 10:26:03,420 - DEBUG - Order Identification <class 'int'>
2018-02-06 10:26:03,421 - DEBUG - Profit ID from database is 170
2018-02-06 10:26:03,421 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 10:26:03,421 - DEBUG - Stop ID database is 171
2018-02-06 10:26:03,421 - DEBUG - Entry ID database is 170
2018-02-06 10:26:03,421 - DEBUG - Stop API ID is 171
2018-02-06 10:26:05,417 - DEBUG - Connecting to database
2018-02-06 10:26:05,426 - DEBUG - Connected to database
2018-02-06 10:26:05,427 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 10:26:05,427 - DEBUG - Stop loss value is 74.22
2018-02-06 10:26:05,428 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 10:26:05,428 - DEBUG - Stop loss value is 61.3
2018-02-06 10:26:05,430 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 10:26:05,430 - DEBUG - EntryPrice value is 72.25
2018-02-06 10:26:05,433 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 10:26:05,433 - DEBUG - Stop quantity 1
2018-02-06 10:26:05,434 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 10:26:05,434 - DEBUG - Direction is Short
2018-02-06 10:26:05,436 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 10:26:05,437 - DEBUG - Count is 1
2018-02-06 10:26:05,437 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 10:26:05,437 - DEBUG - Stop Loss Flag is 1
2018-02-06 10:26:05,440 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 10:26:05,440 - DEBUG - Max ID Order is (171,)
2018-02-06 10:26:05,440 - DEBUG - Today is 2018-02-06
2018-02-06 10:26:05,440 - DEBUG - Day of the week 1
2018-02-06 10:26:05,440 - DEBUG - Yesterday is 02/05/2018
2018-02-06 10:26:05,440 - DEBUG - In Position is  1
2018-02-06 10:26:05,441 - DEBUG - In Position is  <class 'int'>
2018-02-06 10:26:05,441 - DEBUG - curStopLossFlag is  1
2018-02-06 10:26:05,441 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 10:26:05,441 - DEBUG - Checking if Entry has been filled
2018-02-06 10:26:05,443 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 10:26:05,444 - DEBUG - EntryPend is 0
2018-02-06 10:26:05,444 - DEBUG - Try to Cancel Stop
2018-02-06 10:26:05,444 - DEBUG - Stop API ID 171
2018-02-06 10:26:05,444 - DEBUG - Profit API ID 0
2018-02-06 10:26:05,444 - DEBUG - Stop API ID <class 'int'>
2018-02-06 10:26:05,444 - DEBUG - Profit API ID <class 'int'>
2018-02-06 10:26:05,446 - DEBUG - Pos is 1
2018-02-06 10:26:05,446 - DEBUG - CurCount is 1
2018-02-06 10:26:05,446 - DEBUG - In Pos 1
2018-02-06 10:26:05,447 - DEBUG - Stop ID is 171
2018-02-06 10:26:05,447 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 10:26:05,447 - DEBUG - EntryPend is 0
2018-02-06 10:26:05,448 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 10:26:05,448 - DEBUG - Entry Date is 10
2018-02-06 10:26:05,448 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 10:26:05,448 - DEBUG - Order Profit ID is 170
2018-02-06 10:26:05,450 - DEBUG - Order Entry ID is 170
2018-02-06 10:26:05,450 - DEBUG - API ID is  0
2018-02-06 10:26:05,450 - DEBUG - Current Position is 1
2018-02-06 10:26:05,450 - DEBUG - Current Position is <class 'str'>
2018-02-06 10:26:05,450 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 10:26:05,450 - DEBUG - Time is 10
2018-02-06 10:26:05,450 - DEBUG - Time is <class 'int'>
2018-02-06 10:26:05,451 - DEBUG - Time is 26
2018-02-06 10:26:05,451 - DEBUG - Time is <class 'int'>
2018-02-06 10:26:05,451 - DEBUG - Disconnected from IBController
2018-02-06 10:26:05,453 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 10:31:01,372 - DEBUG - ****************************************************
2018-02-06 10:31:01,374 - DEBUG - Current Time is 10:31AM
2018-02-06 10:31:01,374 - DEBUG - Starting Pos Mgmt H E
2018-02-06 10:31:01,374 - DEBUG - Connecting to database
2018-02-06 10:31:01,401 - DEBUG - Connected to database
2018-02-06 10:31:01,401 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 10:31:01,403 - DEBUG - Order Profit is 170
2018-02-06 10:31:01,403 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 10:31:01,404 - DEBUG - Stop ID is 171
2018-02-06 10:31:01,404 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 10:31:01,407 - DEBUG - Entry ID is 170
2018-02-06 10:31:01,407 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 10:31:01,407 - DEBUG - OCA ID is 1
2018-02-06 10:31:01,408 - DEBUG - Connecting to IBController
2018-02-06 10:31:02,415 - DEBUG - Connected to IBController
2018-02-06 10:31:02,415 - DEBUG - Position requested
2018-02-06 10:31:02,417 - DEBUG - Pos Mgmt 0
2018-02-06 10:31:02,417 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020EBB38>, pos=0, avgCost=0.0>
2018-02-06 10:31:02,418 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 10:31:02,418 - DEBUG - ccy2 Currency with position is USD
2018-02-06 10:31:02,418 - DEBUG - Position is 0
2018-02-06 10:31:02,420 - DEBUG - Pos Mgmt -1
2018-02-06 10:31:02,420 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020EBCF8>, pos=-1, avgCost=28787.1>
2018-02-06 10:31:02,420 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 10:31:02,420 - DEBUG - ccy2 Currency with position is USD
2018-02-06 10:31:02,421 - DEBUG - Position is -1
2018-02-06 10:31:02,421 - DEBUG - In Position
2018-02-06 10:31:02,421 - DEBUG - Position is 1
2018-02-06 10:31:02,421 - DEBUG - Pos Mgmt -12987
2018-02-06 10:31:02,421 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020EBF28>, pos=-12987, avgCost=0.95368235>
2018-02-06 10:31:02,421 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 10:31:02,421 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 10:31:02,423 - DEBUG - Position is -12987
2018-02-06 10:31:02,423 - DEBUG - Pos Mgmt 0
2018-02-06 10:31:02,424 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020EBD30>, pos=0, avgCost=0.0>
2018-02-06 10:31:02,424 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 10:31:02,424 - DEBUG - ccy2 Currency with position is USD
2018-02-06 10:31:02,424 - DEBUG - Position is 0
2018-02-06 10:31:03,417 - DEBUG - Open Orders requested
2018-02-06 10:31:03,420 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x00000000020EBF60>, order=<ib.ext.Order.Order object at 0x00000000020EBB00>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002180208>>
2018-02-06 10:31:03,421 - DEBUG - Order OrderID 171
2018-02-06 10:31:03,421 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 10:31:03,421 - DEBUG - Order status PreSubmitted
2018-02-06 10:31:03,421 - DEBUG - Order Identification 171
2018-02-06 10:31:03,423 - DEBUG - Order Identification <class 'int'>
2018-02-06 10:31:03,423 - DEBUG - Profit ID from database is 170
2018-02-06 10:31:03,423 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 10:31:03,423 - DEBUG - Stop ID database is 171
2018-02-06 10:31:03,424 - DEBUG - Entry ID database is 170
2018-02-06 10:31:03,424 - DEBUG - Stop API ID is 171
2018-02-06 10:31:05,421 - DEBUG - Connecting to database
2018-02-06 10:31:05,427 - DEBUG - Connected to database
2018-02-06 10:31:05,430 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 10:31:05,430 - DEBUG - Stop loss value is 74.22
2018-02-06 10:31:05,431 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 10:31:05,431 - DEBUG - Stop loss value is 61.3
2018-02-06 10:31:05,433 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 10:31:05,434 - DEBUG - EntryPrice value is 72.25
2018-02-06 10:31:05,434 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 10:31:05,436 - DEBUG - Stop quantity 1
2018-02-06 10:31:05,437 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 10:31:05,437 - DEBUG - Direction is Short
2018-02-06 10:31:05,438 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 10:31:05,438 - DEBUG - Count is 1
2018-02-06 10:31:05,440 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 10:31:05,440 - DEBUG - Stop Loss Flag is 1
2018-02-06 10:31:05,441 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 10:31:05,443 - DEBUG - Max ID Order is (171,)
2018-02-06 10:31:05,443 - DEBUG - Today is 2018-02-06
2018-02-06 10:31:05,444 - DEBUG - Day of the week 1
2018-02-06 10:31:05,444 - DEBUG - Yesterday is 02/05/2018
2018-02-06 10:31:05,444 - DEBUG - In Position is  1
2018-02-06 10:31:05,444 - DEBUG - In Position is  <class 'int'>
2018-02-06 10:31:05,444 - DEBUG - curStopLossFlag is  1
2018-02-06 10:31:05,444 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 10:31:05,444 - DEBUG - Checking if Entry has been filled
2018-02-06 10:31:05,444 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 10:31:05,447 - DEBUG - EntryPend is 0
2018-02-06 10:31:05,447 - DEBUG - Try to Cancel Stop
2018-02-06 10:31:05,447 - DEBUG - Stop API ID 171
2018-02-06 10:31:05,447 - DEBUG - Profit API ID 0
2018-02-06 10:31:05,447 - DEBUG - Stop API ID <class 'int'>
2018-02-06 10:31:05,447 - DEBUG - Profit API ID <class 'int'>
2018-02-06 10:31:05,447 - DEBUG - Pos is 1
2018-02-06 10:31:05,448 - DEBUG - CurCount is 1
2018-02-06 10:31:05,448 - DEBUG - In Pos 1
2018-02-06 10:31:05,448 - DEBUG - Stop ID is 171
2018-02-06 10:31:05,448 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 10:31:05,450 - DEBUG - EntryPend is 0
2018-02-06 10:31:05,450 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 10:31:05,450 - DEBUG - Entry Date is 10
2018-02-06 10:31:05,451 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 10:31:05,451 - DEBUG - Order Profit ID is 170
2018-02-06 10:31:05,451 - DEBUG - Order Entry ID is 170
2018-02-06 10:31:05,451 - DEBUG - API ID is  0
2018-02-06 10:31:05,453 - DEBUG - Current Position is 1
2018-02-06 10:31:05,453 - DEBUG - Current Position is <class 'str'>
2018-02-06 10:31:05,453 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 10:31:05,453 - DEBUG - Time is 10
2018-02-06 10:31:05,453 - DEBUG - Time is <class 'int'>
2018-02-06 10:31:05,453 - DEBUG - Time is 31
2018-02-06 10:31:05,454 - DEBUG - Time is <class 'int'>
2018-02-06 10:31:05,454 - DEBUG - Disconnected from IBController
2018-02-06 10:31:05,454 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 10:36:01,382 - DEBUG - ****************************************************
2018-02-06 10:36:01,384 - DEBUG - Current Time is 10:36AM
2018-02-06 10:36:01,384 - DEBUG - Starting Pos Mgmt H E
2018-02-06 10:36:01,384 - DEBUG - Connecting to database
2018-02-06 10:36:01,450 - DEBUG - Connected to database
2018-02-06 10:36:01,450 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 10:36:01,451 - DEBUG - Order Profit is 170
2018-02-06 10:36:01,451 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 10:36:01,453 - DEBUG - Stop ID is 171
2018-02-06 10:36:01,453 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 10:36:01,463 - DEBUG - Entry ID is 170
2018-02-06 10:36:01,463 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 10:36:01,464 - DEBUG - OCA ID is 1
2018-02-06 10:36:01,466 - DEBUG - Connecting to IBController
2018-02-06 10:36:02,476 - DEBUG - Connected to IBController
2018-02-06 10:36:02,476 - DEBUG - Position requested
2018-02-06 10:36:02,479 - DEBUG - Pos Mgmt 0
2018-02-06 10:36:02,479 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020DDDD8>, pos=0, avgCost=0.0>
2018-02-06 10:36:02,480 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 10:36:02,480 - DEBUG - ccy2 Currency with position is USD
2018-02-06 10:36:02,480 - DEBUG - Position is 0
2018-02-06 10:36:02,480 - DEBUG - Pos Mgmt -1
2018-02-06 10:36:02,480 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020DDBE0>, pos=-1, avgCost=28787.1>
2018-02-06 10:36:02,480 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 10:36:02,480 - DEBUG - ccy2 Currency with position is USD
2018-02-06 10:36:02,482 - DEBUG - Position is -1
2018-02-06 10:36:02,482 - DEBUG - In Position
2018-02-06 10:36:02,482 - DEBUG - Position is 1
2018-02-06 10:36:02,483 - DEBUG - Pos Mgmt -12987
2018-02-06 10:36:02,483 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020DDF28>, pos=-12987, avgCost=0.95368235>
2018-02-06 10:36:02,483 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 10:36:02,483 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 10:36:02,483 - DEBUG - Position is -12987
2018-02-06 10:36:02,483 - DEBUG - Pos Mgmt 0
2018-02-06 10:36:02,483 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020DDE10>, pos=0, avgCost=0.0>
2018-02-06 10:36:02,484 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 10:36:02,484 - DEBUG - ccy2 Currency with position is USD
2018-02-06 10:36:02,484 - DEBUG - Position is 0
2018-02-06 10:36:03,477 - DEBUG - Open Orders requested
2018-02-06 10:36:03,480 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x00000000020DDF28>, order=<ib.ext.Order.Order object at 0x00000000020DDB00>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002172198>>
2018-02-06 10:36:03,480 - DEBUG - Order OrderID 171
2018-02-06 10:36:03,480 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 10:36:03,482 - DEBUG - Order status PreSubmitted
2018-02-06 10:36:03,482 - DEBUG - Order Identification 171
2018-02-06 10:36:03,482 - DEBUG - Order Identification <class 'int'>
2018-02-06 10:36:03,483 - DEBUG - Profit ID from database is 170
2018-02-06 10:36:03,483 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 10:36:03,483 - DEBUG - Stop ID database is 171
2018-02-06 10:36:03,483 - DEBUG - Entry ID database is 170
2018-02-06 10:36:03,483 - DEBUG - Stop API ID is 171
2018-02-06 10:36:05,479 - DEBUG - Connecting to database
2018-02-06 10:36:05,486 - DEBUG - Connected to database
2018-02-06 10:36:05,487 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 10:36:05,487 - DEBUG - Stop loss value is 74.22
2018-02-06 10:36:05,490 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 10:36:05,490 - DEBUG - Stop loss value is 61.3
2018-02-06 10:36:05,492 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 10:36:05,493 - DEBUG - EntryPrice value is 72.25
2018-02-06 10:36:05,493 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 10:36:05,494 - DEBUG - Stop quantity 1
2018-02-06 10:36:05,496 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 10:36:05,496 - DEBUG - Direction is Short
2018-02-06 10:36:05,497 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 10:36:05,497 - DEBUG - Count is 1
2018-02-06 10:36:05,500 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 10:36:05,500 - DEBUG - Stop Loss Flag is 1
2018-02-06 10:36:05,502 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 10:36:05,502 - DEBUG - Max ID Order is (171,)
2018-02-06 10:36:05,502 - DEBUG - Today is 2018-02-06
2018-02-06 10:36:05,503 - DEBUG - Day of the week 1
2018-02-06 10:36:05,503 - DEBUG - Yesterday is 02/05/2018
2018-02-06 10:36:05,503 - DEBUG - In Position is  1
2018-02-06 10:36:05,503 - DEBUG - In Position is  <class 'int'>
2018-02-06 10:36:05,503 - DEBUG - curStopLossFlag is  1
2018-02-06 10:36:05,503 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 10:36:05,503 - DEBUG - Checking if Entry has been filled
2018-02-06 10:36:05,505 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 10:36:05,506 - DEBUG - EntryPend is 0
2018-02-06 10:36:05,506 - DEBUG - Try to Cancel Stop
2018-02-06 10:36:05,506 - DEBUG - Stop API ID 171
2018-02-06 10:36:05,506 - DEBUG - Profit API ID 0
2018-02-06 10:36:05,506 - DEBUG - Stop API ID <class 'int'>
2018-02-06 10:36:05,507 - DEBUG - Profit API ID <class 'int'>
2018-02-06 10:36:05,507 - DEBUG - Pos is 1
2018-02-06 10:36:05,507 - DEBUG - CurCount is 1
2018-02-06 10:36:05,507 - DEBUG - In Pos 1
2018-02-06 10:36:05,509 - DEBUG - Stop ID is 171
2018-02-06 10:36:05,509 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 10:36:05,509 - DEBUG - EntryPend is 0
2018-02-06 10:36:05,510 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 10:36:05,510 - DEBUG - Entry Date is 10
2018-02-06 10:36:05,510 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 10:36:05,510 - DEBUG - Order Profit ID is 170
2018-02-06 10:36:05,512 - DEBUG - Order Entry ID is 170
2018-02-06 10:36:05,512 - DEBUG - API ID is  0
2018-02-06 10:36:05,512 - DEBUG - Current Position is 1
2018-02-06 10:36:05,512 - DEBUG - Current Position is <class 'str'>
2018-02-06 10:36:05,513 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 10:36:05,513 - DEBUG - Time is 10
2018-02-06 10:36:05,513 - DEBUG - Time is <class 'int'>
2018-02-06 10:36:05,513 - DEBUG - Time is 36
2018-02-06 10:36:05,513 - DEBUG - Time is <class 'int'>
2018-02-06 10:36:05,513 - DEBUG - Disconnected from IBController
2018-02-06 10:36:05,513 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 10:41:01,377 - DEBUG - ****************************************************
2018-02-06 10:41:01,377 - DEBUG - Current Time is 10:41AM
2018-02-06 10:41:01,378 - DEBUG - Starting Pos Mgmt H E
2018-02-06 10:41:01,378 - DEBUG - Connecting to database
2018-02-06 10:41:01,414 - DEBUG - Connected to database
2018-02-06 10:41:01,415 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 10:41:01,417 - DEBUG - Order Profit is 170
2018-02-06 10:41:01,417 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 10:41:01,418 - DEBUG - Stop ID is 171
2018-02-06 10:41:01,418 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 10:41:01,421 - DEBUG - Entry ID is 170
2018-02-06 10:41:01,421 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 10:41:01,421 - DEBUG - OCA ID is 1
2018-02-06 10:41:01,423 - DEBUG - Connecting to IBController
2018-02-06 10:41:02,437 - DEBUG - Connected to IBController
2018-02-06 10:41:02,437 - DEBUG - Position requested
2018-02-06 10:41:02,440 - DEBUG - Pos Mgmt 0
2018-02-06 10:41:02,440 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212CB38>, pos=0, avgCost=0.0>
2018-02-06 10:41:02,440 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 10:41:02,440 - DEBUG - ccy2 Currency with position is USD
2018-02-06 10:41:02,440 - DEBUG - Position is 0
2018-02-06 10:41:02,441 - DEBUG - Pos Mgmt -1
2018-02-06 10:41:02,441 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212CCF8>, pos=-1, avgCost=28787.1>
2018-02-06 10:41:02,441 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 10:41:02,441 - DEBUG - ccy2 Currency with position is USD
2018-02-06 10:41:02,443 - DEBUG - Position is -1
2018-02-06 10:41:02,443 - DEBUG - In Position
2018-02-06 10:41:02,443 - DEBUG - Position is 1
2018-02-06 10:41:02,444 - DEBUG - Pos Mgmt -12987
2018-02-06 10:41:02,444 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212CF28>, pos=-12987, avgCost=0.95368235>
2018-02-06 10:41:02,444 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 10:41:02,444 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 10:41:02,444 - DEBUG - Position is -12987
2018-02-06 10:41:02,444 - DEBUG - Pos Mgmt 0
2018-02-06 10:41:02,444 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212CD68>, pos=0, avgCost=0.0>
2018-02-06 10:41:02,446 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 10:41:02,446 - DEBUG - ccy2 Currency with position is USD
2018-02-06 10:41:02,446 - DEBUG - Position is 0
2018-02-06 10:41:03,440 - DEBUG - Open Orders requested
2018-02-06 10:41:03,441 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x000000000212CF60>, order=<ib.ext.Order.Order object at 0x000000000212CB38>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C1208>>
2018-02-06 10:41:03,443 - DEBUG - Order OrderID 171
2018-02-06 10:41:03,443 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 10:41:03,444 - DEBUG - Order status PreSubmitted
2018-02-06 10:41:03,444 - DEBUG - Order Identification 171
2018-02-06 10:41:03,444 - DEBUG - Order Identification <class 'int'>
2018-02-06 10:41:03,444 - DEBUG - Profit ID from database is 170
2018-02-06 10:41:03,444 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 10:41:03,444 - DEBUG - Stop ID database is 171
2018-02-06 10:41:03,444 - DEBUG - Entry ID database is 170
2018-02-06 10:41:03,446 - DEBUG - Stop API ID is 171
2018-02-06 10:41:05,443 - DEBUG - Connecting to database
2018-02-06 10:41:05,450 - DEBUG - Connected to database
2018-02-06 10:41:05,451 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 10:41:05,453 - DEBUG - Stop loss value is 74.22
2018-02-06 10:41:05,453 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 10:41:05,453 - DEBUG - Stop loss value is 61.3
2018-02-06 10:41:05,456 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 10:41:05,456 - DEBUG - EntryPrice value is 72.25
2018-02-06 10:41:05,457 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 10:41:05,457 - DEBUG - Stop quantity 1
2018-02-06 10:41:05,464 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 10:41:05,464 - DEBUG - Direction is Short
2018-02-06 10:41:05,466 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 10:41:05,467 - DEBUG - Count is 1
2018-02-06 10:41:05,467 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 10:41:05,469 - DEBUG - Stop Loss Flag is 1
2018-02-06 10:41:05,470 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 10:41:05,470 - DEBUG - Max ID Order is (171,)
2018-02-06 10:41:05,470 - DEBUG - Today is 2018-02-06
2018-02-06 10:41:05,470 - DEBUG - Day of the week 1
2018-02-06 10:41:05,471 - DEBUG - Yesterday is 02/05/2018
2018-02-06 10:41:05,471 - DEBUG - In Position is  1
2018-02-06 10:41:05,471 - DEBUG - In Position is  <class 'int'>
2018-02-06 10:41:05,471 - DEBUG - curStopLossFlag is  1
2018-02-06 10:41:05,473 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 10:41:05,473 - DEBUG - Checking if Entry has been filled
2018-02-06 10:41:05,473 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 10:41:05,474 - DEBUG - EntryPend is 0
2018-02-06 10:41:05,474 - DEBUG - Try to Cancel Stop
2018-02-06 10:41:05,474 - DEBUG - Stop API ID 171
2018-02-06 10:41:05,474 - DEBUG - Profit API ID 0
2018-02-06 10:41:05,476 - DEBUG - Stop API ID <class 'int'>
2018-02-06 10:41:05,476 - DEBUG - Profit API ID <class 'int'>
2018-02-06 10:41:05,476 - DEBUG - Pos is 1
2018-02-06 10:41:05,476 - DEBUG - CurCount is 1
2018-02-06 10:41:05,476 - DEBUG - In Pos 1
2018-02-06 10:41:05,476 - DEBUG - Stop ID is 171
2018-02-06 10:41:05,476 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 10:41:05,477 - DEBUG - EntryPend is 0
2018-02-06 10:41:05,479 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 10:41:05,479 - DEBUG - Entry Date is 10
2018-02-06 10:41:05,479 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 10:41:05,479 - DEBUG - Order Profit ID is 170
2018-02-06 10:41:05,480 - DEBUG - Order Entry ID is 170
2018-02-06 10:41:05,480 - DEBUG - API ID is  0
2018-02-06 10:41:05,480 - DEBUG - Current Position is 1
2018-02-06 10:41:05,480 - DEBUG - Current Position is <class 'str'>
2018-02-06 10:41:05,480 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 10:41:05,480 - DEBUG - Time is 10
2018-02-06 10:41:05,480 - DEBUG - Time is <class 'int'>
2018-02-06 10:41:05,480 - DEBUG - Time is 41
2018-02-06 10:41:05,482 - DEBUG - Time is <class 'int'>
2018-02-06 10:41:05,482 - DEBUG - Disconnected from IBController
2018-02-06 10:41:05,482 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 10:46:01,377 - DEBUG - ****************************************************
2018-02-06 10:46:01,378 - DEBUG - Current Time is 10:46AM
2018-02-06 10:46:01,378 - DEBUG - Starting Pos Mgmt H E
2018-02-06 10:46:01,378 - DEBUG - Connecting to database
2018-02-06 10:46:01,405 - DEBUG - Connected to database
2018-02-06 10:46:01,405 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 10:46:01,407 - DEBUG - Order Profit is 170
2018-02-06 10:46:01,407 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 10:46:01,408 - DEBUG - Stop ID is 171
2018-02-06 10:46:01,408 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 10:46:01,411 - DEBUG - Entry ID is 170
2018-02-06 10:46:01,411 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 10:46:01,411 - DEBUG - OCA ID is 1
2018-02-06 10:46:01,413 - DEBUG - Connecting to IBController
2018-02-06 10:46:02,423 - DEBUG - Connected to IBController
2018-02-06 10:46:02,423 - DEBUG - Position requested
2018-02-06 10:46:02,424 - DEBUG - Pos Mgmt 0
2018-02-06 10:46:02,424 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FDDA0>, pos=0, avgCost=0.0>
2018-02-06 10:46:02,424 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 10:46:02,426 - DEBUG - ccy2 Currency with position is USD
2018-02-06 10:46:02,426 - DEBUG - Position is 0
2018-02-06 10:46:02,426 - DEBUG - Pos Mgmt -1
2018-02-06 10:46:02,427 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FDBE0>, pos=-1, avgCost=28787.1>
2018-02-06 10:46:02,427 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 10:46:02,427 - DEBUG - ccy2 Currency with position is USD
2018-02-06 10:46:02,427 - DEBUG - Position is -1
2018-02-06 10:46:02,427 - DEBUG - In Position
2018-02-06 10:46:02,427 - DEBUG - Position is 1
2018-02-06 10:46:02,427 - DEBUG - Pos Mgmt -12987
2018-02-06 10:46:02,428 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FDF28>, pos=-12987, avgCost=0.95368235>
2018-02-06 10:46:02,428 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 10:46:02,428 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 10:46:02,430 - DEBUG - Position is -12987
2018-02-06 10:46:02,430 - DEBUG - Pos Mgmt 0
2018-02-06 10:46:02,430 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FDB38>, pos=0, avgCost=0.0>
2018-02-06 10:46:02,430 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 10:46:02,430 - DEBUG - ccy2 Currency with position is USD
2018-02-06 10:46:02,430 - DEBUG - Position is 0
2018-02-06 10:46:03,424 - DEBUG - Open Orders requested
2018-02-06 10:46:03,427 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x00000000020FDF28>, order=<ib.ext.Order.Order object at 0x00000000020FDB00>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002191198>>
2018-02-06 10:46:03,427 - DEBUG - Order OrderID 171
2018-02-06 10:46:03,427 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 10:46:03,427 - DEBUG - Order status PreSubmitted
2018-02-06 10:46:03,427 - DEBUG - Order Identification 171
2018-02-06 10:46:03,428 - DEBUG - Order Identification <class 'int'>
2018-02-06 10:46:03,428 - DEBUG - Profit ID from database is 170
2018-02-06 10:46:03,428 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 10:46:03,430 - DEBUG - Stop ID database is 171
2018-02-06 10:46:03,430 - DEBUG - Entry ID database is 170
2018-02-06 10:46:03,430 - DEBUG - Stop API ID is 171
2018-02-06 10:46:05,424 - DEBUG - Connecting to database
2018-02-06 10:46:05,431 - DEBUG - Connected to database
2018-02-06 10:46:05,434 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 10:46:05,434 - DEBUG - Stop loss value is 74.22
2018-02-06 10:46:05,436 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 10:46:05,436 - DEBUG - Stop loss value is 61.3
2018-02-06 10:46:05,437 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 10:46:05,437 - DEBUG - EntryPrice value is 72.25
2018-02-06 10:46:05,438 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 10:46:05,440 - DEBUG - Stop quantity 1
2018-02-06 10:46:05,440 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 10:46:05,440 - DEBUG - Direction is Short
2018-02-06 10:46:05,443 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 10:46:05,444 - DEBUG - Count is 1
2018-02-06 10:46:05,444 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 10:46:05,446 - DEBUG - Stop Loss Flag is 1
2018-02-06 10:46:05,447 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 10:46:05,447 - DEBUG - Max ID Order is (171,)
2018-02-06 10:46:05,447 - DEBUG - Today is 2018-02-06
2018-02-06 10:46:05,447 - DEBUG - Day of the week 1
2018-02-06 10:46:05,448 - DEBUG - Yesterday is 02/05/2018
2018-02-06 10:46:05,448 - DEBUG - In Position is  1
2018-02-06 10:46:05,448 - DEBUG - In Position is  <class 'int'>
2018-02-06 10:46:05,450 - DEBUG - curStopLossFlag is  1
2018-02-06 10:46:05,450 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 10:46:05,450 - DEBUG - Checking if Entry has been filled
2018-02-06 10:46:05,450 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 10:46:05,451 - DEBUG - EntryPend is 0
2018-02-06 10:46:05,451 - DEBUG - Try to Cancel Stop
2018-02-06 10:46:05,451 - DEBUG - Stop API ID 171
2018-02-06 10:46:05,453 - DEBUG - Profit API ID 0
2018-02-06 10:46:05,453 - DEBUG - Stop API ID <class 'int'>
2018-02-06 10:46:05,453 - DEBUG - Profit API ID <class 'int'>
2018-02-06 10:46:05,453 - DEBUG - Pos is 1
2018-02-06 10:46:05,453 - DEBUG - CurCount is 1
2018-02-06 10:46:05,453 - DEBUG - In Pos 1
2018-02-06 10:46:05,453 - DEBUG - Stop ID is 171
2018-02-06 10:46:05,453 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 10:46:05,456 - DEBUG - EntryPend is 0
2018-02-06 10:46:05,456 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 10:46:05,456 - DEBUG - Entry Date is 10
2018-02-06 10:46:05,457 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 10:46:05,457 - DEBUG - Order Profit ID is 170
2018-02-06 10:46:05,457 - DEBUG - Order Entry ID is 170
2018-02-06 10:46:05,457 - DEBUG - API ID is  0
2018-02-06 10:46:05,457 - DEBUG - Current Position is 1
2018-02-06 10:46:05,457 - DEBUG - Current Position is <class 'str'>
2018-02-06 10:46:05,457 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 10:46:05,457 - DEBUG - Time is 10
2018-02-06 10:46:05,457 - DEBUG - Time is <class 'int'>
2018-02-06 10:46:05,459 - DEBUG - Time is 46
2018-02-06 10:46:05,459 - DEBUG - Time is <class 'int'>
2018-02-06 10:46:05,459 - DEBUG - Disconnected from IBController
2018-02-06 10:46:05,460 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 10:51:01,375 - DEBUG - ****************************************************
2018-02-06 10:51:01,375 - DEBUG - Current Time is 10:51AM
2018-02-06 10:51:01,377 - DEBUG - Starting Pos Mgmt H E
2018-02-06 10:51:01,377 - DEBUG - Connecting to database
2018-02-06 10:51:01,418 - DEBUG - Connected to database
2018-02-06 10:51:01,420 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 10:51:01,421 - DEBUG - Order Profit is 170
2018-02-06 10:51:01,421 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 10:51:01,423 - DEBUG - Stop ID is 171
2018-02-06 10:51:01,423 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 10:51:01,424 - DEBUG - Entry ID is 170
2018-02-06 10:51:01,424 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 10:51:01,427 - DEBUG - OCA ID is 1
2018-02-06 10:51:01,427 - DEBUG - Connecting to IBController
2018-02-06 10:51:02,433 - DEBUG - Connected to IBController
2018-02-06 10:51:02,433 - DEBUG - Position requested
2018-02-06 10:51:02,434 - DEBUG - Pos Mgmt 0
2018-02-06 10:51:02,437 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210DB38>, pos=0, avgCost=0.0>
2018-02-06 10:51:02,437 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 10:51:02,437 - DEBUG - ccy2 Currency with position is USD
2018-02-06 10:51:02,437 - DEBUG - Position is 0
2018-02-06 10:51:02,437 - DEBUG - Pos Mgmt -1
2018-02-06 10:51:02,437 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210DC50>, pos=-1, avgCost=28787.1>
2018-02-06 10:51:02,438 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 10:51:02,438 - DEBUG - ccy2 Currency with position is USD
2018-02-06 10:51:02,438 - DEBUG - Position is -1
2018-02-06 10:51:02,438 - DEBUG - In Position
2018-02-06 10:51:02,440 - DEBUG - Position is 1
2018-02-06 10:51:02,440 - DEBUG - Pos Mgmt -12987
2018-02-06 10:51:02,440 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210DF28>, pos=-12987, avgCost=0.95368235>
2018-02-06 10:51:02,440 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 10:51:02,440 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 10:51:02,440 - DEBUG - Position is -12987
2018-02-06 10:51:02,441 - DEBUG - Pos Mgmt 0
2018-02-06 10:51:02,441 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210DC18>, pos=0, avgCost=0.0>
2018-02-06 10:51:02,441 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 10:51:02,443 - DEBUG - ccy2 Currency with position is USD
2018-02-06 10:51:02,443 - DEBUG - Position is 0
2018-02-06 10:51:03,437 - DEBUG - Open Orders requested
2018-02-06 10:51:03,443 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x000000000210DF60>, order=<ib.ext.Order.Order object at 0x000000000210DB38>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A1208>>
2018-02-06 10:51:03,444 - DEBUG - Order OrderID 171
2018-02-06 10:51:03,444 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 10:51:03,444 - DEBUG - Order status PreSubmitted
2018-02-06 10:51:03,444 - DEBUG - Order Identification 171
2018-02-06 10:51:03,444 - DEBUG - Order Identification <class 'int'>
2018-02-06 10:51:03,446 - DEBUG - Profit ID from database is 170
2018-02-06 10:51:03,446 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 10:51:03,446 - DEBUG - Stop ID database is 171
2018-02-06 10:51:03,446 - DEBUG - Entry ID database is 170
2018-02-06 10:51:03,447 - DEBUG - Stop API ID is 171
2018-02-06 10:51:05,444 - DEBUG - Connecting to database
2018-02-06 10:51:05,451 - DEBUG - Connected to database
2018-02-06 10:51:05,453 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 10:51:05,453 - DEBUG - Stop loss value is 74.22
2018-02-06 10:51:05,454 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 10:51:05,456 - DEBUG - Stop loss value is 61.3
2018-02-06 10:51:05,457 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 10:51:05,457 - DEBUG - EntryPrice value is 72.25
2018-02-06 10:51:05,459 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 10:51:05,459 - DEBUG - Stop quantity 1
2018-02-06 10:51:05,460 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 10:51:05,460 - DEBUG - Direction is Short
2018-02-06 10:51:05,461 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 10:51:05,463 - DEBUG - Count is 1
2018-02-06 10:51:05,466 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 10:51:05,466 - DEBUG - Stop Loss Flag is 1
2018-02-06 10:51:05,469 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 10:51:05,469 - DEBUG - Max ID Order is (171,)
2018-02-06 10:51:05,470 - DEBUG - Today is 2018-02-06
2018-02-06 10:51:05,470 - DEBUG - Day of the week 1
2018-02-06 10:51:05,470 - DEBUG - Yesterday is 02/05/2018
2018-02-06 10:51:05,470 - DEBUG - In Position is  1
2018-02-06 10:51:05,470 - DEBUG - In Position is  <class 'int'>
2018-02-06 10:51:05,470 - DEBUG - curStopLossFlag is  1
2018-02-06 10:51:05,470 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 10:51:05,470 - DEBUG - Checking if Entry has been filled
2018-02-06 10:51:05,471 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 10:51:05,473 - DEBUG - EntryPend is 0
2018-02-06 10:51:05,473 - DEBUG - Try to Cancel Stop
2018-02-06 10:51:05,473 - DEBUG - Stop API ID 171
2018-02-06 10:51:05,473 - DEBUG - Profit API ID 0
2018-02-06 10:51:05,473 - DEBUG - Stop API ID <class 'int'>
2018-02-06 10:51:05,473 - DEBUG - Profit API ID <class 'int'>
2018-02-06 10:51:05,474 - DEBUG - Pos is 1
2018-02-06 10:51:05,474 - DEBUG - CurCount is 1
2018-02-06 10:51:05,474 - DEBUG - In Pos 1
2018-02-06 10:51:05,476 - DEBUG - Stop ID is 171
2018-02-06 10:51:05,476 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 10:51:05,477 - DEBUG - EntryPend is 0
2018-02-06 10:51:05,477 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 10:51:05,477 - DEBUG - Entry Date is 10
2018-02-06 10:51:05,477 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 10:51:05,479 - DEBUG - Order Profit ID is 170
2018-02-06 10:51:05,479 - DEBUG - Order Entry ID is 170
2018-02-06 10:51:05,479 - DEBUG - API ID is  0
2018-02-06 10:51:05,479 - DEBUG - Current Position is 1
2018-02-06 10:51:05,480 - DEBUG - Current Position is <class 'str'>
2018-02-06 10:51:05,480 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 10:51:05,480 - DEBUG - Time is 10
2018-02-06 10:51:05,480 - DEBUG - Time is <class 'int'>
2018-02-06 10:51:05,480 - DEBUG - Time is 51
2018-02-06 10:51:05,480 - DEBUG - Time is <class 'int'>
2018-02-06 10:51:05,480 - DEBUG - Disconnected from IBController
2018-02-06 10:51:05,482 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 10:56:01,375 - DEBUG - ****************************************************
2018-02-06 10:56:01,375 - DEBUG - Current Time is 10:56AM
2018-02-06 10:56:01,375 - DEBUG - Starting Pos Mgmt H E
2018-02-06 10:56:01,375 - DEBUG - Connecting to database
2018-02-06 10:56:01,398 - DEBUG - Connected to database
2018-02-06 10:56:01,398 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 10:56:01,400 - DEBUG - Order Profit is 170
2018-02-06 10:56:01,400 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 10:56:01,401 - DEBUG - Stop ID is 171
2018-02-06 10:56:01,401 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 10:56:01,403 - DEBUG - Entry ID is 170
2018-02-06 10:56:01,403 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 10:56:01,404 - DEBUG - OCA ID is 1
2018-02-06 10:56:01,404 - DEBUG - Connecting to IBController
2018-02-06 10:56:02,411 - DEBUG - Connected to IBController
2018-02-06 10:56:02,411 - DEBUG - Position requested
2018-02-06 10:56:02,413 - DEBUG - Pos Mgmt 0
2018-02-06 10:56:02,413 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212CD30>, pos=0, avgCost=0.0>
2018-02-06 10:56:02,414 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 10:56:02,414 - DEBUG - ccy2 Currency with position is USD
2018-02-06 10:56:02,414 - DEBUG - Position is 0
2018-02-06 10:56:02,414 - DEBUG - Pos Mgmt -1
2018-02-06 10:56:02,414 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212CCC0>, pos=-1, avgCost=28787.1>
2018-02-06 10:56:02,414 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 10:56:02,414 - DEBUG - ccy2 Currency with position is USD
2018-02-06 10:56:02,415 - DEBUG - Position is -1
2018-02-06 10:56:02,421 - DEBUG - In Position
2018-02-06 10:56:02,423 - DEBUG - Position is 1
2018-02-06 10:56:02,423 - DEBUG - Pos Mgmt -12987
2018-02-06 10:56:02,423 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212CF98>, pos=-12987, avgCost=0.95368235>
2018-02-06 10:56:02,424 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 10:56:02,424 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 10:56:02,424 - DEBUG - Position is -12987
2018-02-06 10:56:02,424 - DEBUG - Pos Mgmt 0
2018-02-06 10:56:02,424 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212CB38>, pos=0, avgCost=0.0>
2018-02-06 10:56:02,424 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 10:56:02,424 - DEBUG - ccy2 Currency with position is USD
2018-02-06 10:56:02,426 - DEBUG - Position is 0
2018-02-06 10:56:03,411 - DEBUG - Open Orders requested
2018-02-06 10:56:03,414 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x000000000212CF98>, order=<ib.ext.Order.Order object at 0x000000000212CD68>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C1198>>
2018-02-06 10:56:03,414 - DEBUG - Order OrderID 171
2018-02-06 10:56:03,414 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 10:56:03,415 - DEBUG - Order status PreSubmitted
2018-02-06 10:56:03,415 - DEBUG - Order Identification 171
2018-02-06 10:56:03,415 - DEBUG - Order Identification <class 'int'>
2018-02-06 10:56:03,417 - DEBUG - Profit ID from database is 170
2018-02-06 10:56:03,417 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 10:56:03,417 - DEBUG - Stop ID database is 171
2018-02-06 10:56:03,417 - DEBUG - Entry ID database is 170
2018-02-06 10:56:03,417 - DEBUG - Stop API ID is 171
2018-02-06 10:56:05,413 - DEBUG - Connecting to database
2018-02-06 10:56:05,421 - DEBUG - Connected to database
2018-02-06 10:56:05,423 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 10:56:05,423 - DEBUG - Stop loss value is 74.22
2018-02-06 10:56:05,424 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 10:56:05,424 - DEBUG - Stop loss value is 61.3
2018-02-06 10:56:05,426 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 10:56:05,427 - DEBUG - EntryPrice value is 72.25
2018-02-06 10:56:05,427 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 10:56:05,427 - DEBUG - Stop quantity 1
2018-02-06 10:56:05,430 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 10:56:05,430 - DEBUG - Direction is Short
2018-02-06 10:56:05,431 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 10:56:05,431 - DEBUG - Count is 1
2018-02-06 10:56:05,434 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 10:56:05,434 - DEBUG - Stop Loss Flag is 1
2018-02-06 10:56:05,436 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 10:56:05,436 - DEBUG - Max ID Order is (171,)
2018-02-06 10:56:05,436 - DEBUG - Today is 2018-02-06
2018-02-06 10:56:05,437 - DEBUG - Day of the week 1
2018-02-06 10:56:05,437 - DEBUG - Yesterday is 02/05/2018
2018-02-06 10:56:05,437 - DEBUG - In Position is  1
2018-02-06 10:56:05,437 - DEBUG - In Position is  <class 'int'>
2018-02-06 10:56:05,437 - DEBUG - curStopLossFlag is  1
2018-02-06 10:56:05,437 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 10:56:05,437 - DEBUG - Checking if Entry has been filled
2018-02-06 10:56:05,437 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 10:56:05,440 - DEBUG - EntryPend is 0
2018-02-06 10:56:05,440 - DEBUG - Try to Cancel Stop
2018-02-06 10:56:05,440 - DEBUG - Stop API ID 171
2018-02-06 10:56:05,440 - DEBUG - Profit API ID 0
2018-02-06 10:56:05,440 - DEBUG - Stop API ID <class 'int'>
2018-02-06 10:56:05,440 - DEBUG - Profit API ID <class 'int'>
2018-02-06 10:56:05,440 - DEBUG - Pos is 1
2018-02-06 10:56:05,441 - DEBUG - CurCount is 1
2018-02-06 10:56:05,441 - DEBUG - In Pos 1
2018-02-06 10:56:05,441 - DEBUG - Stop ID is 171
2018-02-06 10:56:05,441 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 10:56:05,444 - DEBUG - EntryPend is 0
2018-02-06 10:56:05,444 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 10:56:05,444 - DEBUG - Entry Date is 10
2018-02-06 10:56:05,444 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 10:56:05,444 - DEBUG - Order Profit ID is 170
2018-02-06 10:56:05,444 - DEBUG - Order Entry ID is 170
2018-02-06 10:56:05,444 - DEBUG - API ID is  0
2018-02-06 10:56:05,446 - DEBUG - Current Position is 1
2018-02-06 10:56:05,446 - DEBUG - Current Position is <class 'str'>
2018-02-06 10:56:05,446 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 10:56:05,446 - DEBUG - Time is 10
2018-02-06 10:56:05,447 - DEBUG - Time is <class 'int'>
2018-02-06 10:56:05,447 - DEBUG - Time is 56
2018-02-06 10:56:05,447 - DEBUG - Time is <class 'int'>
2018-02-06 10:56:05,447 - DEBUG - Disconnected from IBController
2018-02-06 10:56:05,447 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 11:01:01,401 - DEBUG - ****************************************************
2018-02-06 11:01:01,401 - DEBUG - Current Time is 11:01AM
2018-02-06 11:01:01,403 - DEBUG - Starting Pos Mgmt H E
2018-02-06 11:01:01,403 - DEBUG - Connecting to database
2018-02-06 11:01:01,430 - DEBUG - Connected to database
2018-02-06 11:01:01,430 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 11:01:01,431 - DEBUG - Order Profit is 170
2018-02-06 11:01:01,433 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 11:01:01,434 - DEBUG - Stop ID is 171
2018-02-06 11:01:01,434 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 11:01:01,436 - DEBUG - Entry ID is 170
2018-02-06 11:01:01,436 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 11:01:01,437 - DEBUG - OCA ID is 1
2018-02-06 11:01:01,437 - DEBUG - Connecting to IBController
2018-02-06 11:01:02,443 - DEBUG - Connected to IBController
2018-02-06 11:01:02,443 - DEBUG - Position requested
2018-02-06 11:01:02,444 - DEBUG - Pos Mgmt 0
2018-02-06 11:01:02,444 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000217BB38>, pos=0, avgCost=0.0>
2018-02-06 11:01:02,446 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 11:01:02,446 - DEBUG - ccy2 Currency with position is USD
2018-02-06 11:01:02,446 - DEBUG - Position is 0
2018-02-06 11:01:02,447 - DEBUG - Pos Mgmt -1
2018-02-06 11:01:02,447 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000217BC18>, pos=-1, avgCost=28787.1>
2018-02-06 11:01:02,447 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 11:01:02,447 - DEBUG - ccy2 Currency with position is USD
2018-02-06 11:01:02,447 - DEBUG - Position is -1
2018-02-06 11:01:02,447 - DEBUG - In Position
2018-02-06 11:01:02,447 - DEBUG - Position is 1
2018-02-06 11:01:02,448 - DEBUG - Pos Mgmt -12987
2018-02-06 11:01:02,448 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000217BF28>, pos=-12987, avgCost=0.95368235>
2018-02-06 11:01:02,448 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 11:01:02,450 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 11:01:02,450 - DEBUG - Position is -12987
2018-02-06 11:01:02,450 - DEBUG - Pos Mgmt 0
2018-02-06 11:01:02,450 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000217BB00>, pos=0, avgCost=0.0>
2018-02-06 11:01:02,450 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 11:01:02,450 - DEBUG - ccy2 Currency with position is USD
2018-02-06 11:01:02,450 - DEBUG - Position is 0
2018-02-06 11:01:03,444 - DEBUG - Open Orders requested
2018-02-06 11:01:03,447 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x000000000217BF60>, order=<ib.ext.Order.Order object at 0x000000000217BE48>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002210208>>
2018-02-06 11:01:03,448 - DEBUG - Order OrderID 171
2018-02-06 11:01:03,448 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 11:01:03,450 - DEBUG - Order status PreSubmitted
2018-02-06 11:01:03,450 - DEBUG - Order Identification 171
2018-02-06 11:01:03,450 - DEBUG - Order Identification <class 'int'>
2018-02-06 11:01:03,450 - DEBUG - Profit ID from database is 170
2018-02-06 11:01:03,450 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 11:01:03,450 - DEBUG - Stop ID database is 171
2018-02-06 11:01:03,451 - DEBUG - Entry ID database is 170
2018-02-06 11:01:03,451 - DEBUG - Stop API ID is 171
2018-02-06 11:01:05,448 - DEBUG - Connecting to database
2018-02-06 11:01:05,457 - DEBUG - Connected to database
2018-02-06 11:01:05,459 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 11:01:05,459 - DEBUG - Stop loss value is 74.22
2018-02-06 11:01:05,460 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 11:01:05,460 - DEBUG - Stop loss value is 61.3
2018-02-06 11:01:05,461 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 11:01:05,463 - DEBUG - EntryPrice value is 72.25
2018-02-06 11:01:05,463 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 11:01:05,463 - DEBUG - Stop quantity 1
2018-02-06 11:01:05,466 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 11:01:05,466 - DEBUG - Direction is Short
2018-02-06 11:01:05,473 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 11:01:05,473 - DEBUG - Count is 1
2018-02-06 11:01:05,476 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 11:01:05,476 - DEBUG - Stop Loss Flag is 1
2018-02-06 11:01:05,476 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 11:01:05,477 - DEBUG - Max ID Order is (171,)
2018-02-06 11:01:05,477 - DEBUG - Today is 2018-02-06
2018-02-06 11:01:05,479 - DEBUG - Day of the week 1
2018-02-06 11:01:05,479 - DEBUG - Yesterday is 02/05/2018
2018-02-06 11:01:05,479 - DEBUG - In Position is  1
2018-02-06 11:01:05,480 - DEBUG - In Position is  <class 'int'>
2018-02-06 11:01:05,480 - DEBUG - curStopLossFlag is  1
2018-02-06 11:01:05,480 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 11:01:05,480 - DEBUG - Checking if Entry has been filled
2018-02-06 11:01:05,480 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 11:01:05,482 - DEBUG - EntryPend is 0
2018-02-06 11:01:05,483 - DEBUG - Try to Cancel Stop
2018-02-06 11:01:05,483 - DEBUG - Stop API ID 171
2018-02-06 11:01:05,483 - DEBUG - Profit API ID 0
2018-02-06 11:01:05,483 - DEBUG - Stop API ID <class 'int'>
2018-02-06 11:01:05,483 - DEBUG - Profit API ID <class 'int'>
2018-02-06 11:01:05,483 - DEBUG - Pos is 1
2018-02-06 11:01:05,483 - DEBUG - CurCount is 1
2018-02-06 11:01:05,484 - DEBUG - In Pos 1
2018-02-06 11:01:05,484 - DEBUG - Stop ID is 171
2018-02-06 11:01:05,484 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 11:01:05,486 - DEBUG - EntryPend is 0
2018-02-06 11:01:05,486 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 11:01:05,486 - DEBUG - Entry Date is 10
2018-02-06 11:01:05,486 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 11:01:05,487 - DEBUG - Order Profit ID is 170
2018-02-06 11:01:05,487 - DEBUG - Order Entry ID is 170
2018-02-06 11:01:05,487 - DEBUG - API ID is  0
2018-02-06 11:01:05,487 - DEBUG - Current Position is 1
2018-02-06 11:01:05,489 - DEBUG - Current Position is <class 'str'>
2018-02-06 11:01:05,489 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 11:01:05,489 - DEBUG - Time is 11
2018-02-06 11:01:05,489 - DEBUG - Time is <class 'int'>
2018-02-06 11:01:05,490 - DEBUG - Time is 1
2018-02-06 11:01:05,490 - DEBUG - Time is <class 'int'>
2018-02-06 11:01:05,490 - DEBUG - Disconnected from IBController
2018-02-06 11:01:05,490 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 11:06:01,378 - DEBUG - ****************************************************
2018-02-06 11:06:01,378 - DEBUG - Current Time is 11:06AM
2018-02-06 11:06:01,378 - DEBUG - Starting Pos Mgmt H E
2018-02-06 11:06:01,380 - DEBUG - Connecting to database
2018-02-06 11:06:01,423 - DEBUG - Connected to database
2018-02-06 11:06:01,423 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 11:06:01,424 - DEBUG - Order Profit is 170
2018-02-06 11:06:01,424 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 11:06:01,427 - DEBUG - Stop ID is 171
2018-02-06 11:06:01,427 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 11:06:01,428 - DEBUG - Entry ID is 170
2018-02-06 11:06:01,428 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 11:06:01,430 - DEBUG - OCA ID is 1
2018-02-06 11:06:01,430 - DEBUG - Connecting to IBController
2018-02-06 11:06:02,437 - DEBUG - Connected to IBController
2018-02-06 11:06:02,437 - DEBUG - Position requested
2018-02-06 11:06:02,440 - DEBUG - Pos Mgmt 0
2018-02-06 11:06:02,440 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000215DD68>, pos=0, avgCost=0.0>
2018-02-06 11:06:02,440 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 11:06:02,440 - DEBUG - ccy2 Currency with position is USD
2018-02-06 11:06:02,440 - DEBUG - Position is 0
2018-02-06 11:06:02,441 - DEBUG - Pos Mgmt -1
2018-02-06 11:06:02,441 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000215DC18>, pos=-1, avgCost=28787.1>
2018-02-06 11:06:02,441 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 11:06:02,443 - DEBUG - ccy2 Currency with position is USD
2018-02-06 11:06:02,443 - DEBUG - Position is -1
2018-02-06 11:06:02,443 - DEBUG - In Position
2018-02-06 11:06:02,443 - DEBUG - Position is 1
2018-02-06 11:06:02,444 - DEBUG - Pos Mgmt -12987
2018-02-06 11:06:02,444 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000215DF28>, pos=-12987, avgCost=0.95368235>
2018-02-06 11:06:02,444 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 11:06:02,444 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 11:06:02,444 - DEBUG - Position is -12987
2018-02-06 11:06:02,444 - DEBUG - Pos Mgmt 0
2018-02-06 11:06:02,446 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000215DDD8>, pos=0, avgCost=0.0>
2018-02-06 11:06:02,446 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 11:06:02,446 - DEBUG - ccy2 Currency with position is USD
2018-02-06 11:06:02,446 - DEBUG - Position is 0
2018-02-06 11:06:03,438 - DEBUG - Open Orders requested
2018-02-06 11:06:03,447 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x000000000215DF28>, order=<ib.ext.Order.Order object at 0x000000000215DD68>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021F1198>>
2018-02-06 11:06:03,447 - DEBUG - Order OrderID 171
2018-02-06 11:06:03,447 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 11:06:03,448 - DEBUG - Order status PreSubmitted
2018-02-06 11:06:03,448 - DEBUG - Order Identification 171
2018-02-06 11:06:03,448 - DEBUG - Order Identification <class 'int'>
2018-02-06 11:06:03,450 - DEBUG - Profit ID from database is 170
2018-02-06 11:06:03,450 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 11:06:03,450 - DEBUG - Stop ID database is 171
2018-02-06 11:06:03,450 - DEBUG - Entry ID database is 170
2018-02-06 11:06:03,450 - DEBUG - Stop API ID is 171
2018-02-06 11:06:05,438 - DEBUG - Connecting to database
2018-02-06 11:06:05,446 - DEBUG - Connected to database
2018-02-06 11:06:05,447 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 11:06:05,447 - DEBUG - Stop loss value is 74.22
2018-02-06 11:06:05,450 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 11:06:05,450 - DEBUG - Stop loss value is 61.3
2018-02-06 11:06:05,451 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 11:06:05,451 - DEBUG - EntryPrice value is 72.25
2018-02-06 11:06:05,453 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 11:06:05,453 - DEBUG - Stop quantity 1
2018-02-06 11:06:05,454 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 11:06:05,456 - DEBUG - Direction is Short
2018-02-06 11:06:05,457 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 11:06:05,457 - DEBUG - Count is 1
2018-02-06 11:06:05,460 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 11:06:05,460 - DEBUG - Stop Loss Flag is 1
2018-02-06 11:06:05,461 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 11:06:05,461 - DEBUG - Max ID Order is (171,)
2018-02-06 11:06:05,461 - DEBUG - Today is 2018-02-06
2018-02-06 11:06:05,463 - DEBUG - Day of the week 1
2018-02-06 11:06:05,463 - DEBUG - Yesterday is 02/05/2018
2018-02-06 11:06:05,463 - DEBUG - In Position is  1
2018-02-06 11:06:05,463 - DEBUG - In Position is  <class 'int'>
2018-02-06 11:06:05,463 - DEBUG - curStopLossFlag is  1
2018-02-06 11:06:05,463 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 11:06:05,463 - DEBUG - Checking if Entry has been filled
2018-02-06 11:06:05,463 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 11:06:05,466 - DEBUG - EntryPend is 0
2018-02-06 11:06:05,466 - DEBUG - Try to Cancel Stop
2018-02-06 11:06:05,466 - DEBUG - Stop API ID 171
2018-02-06 11:06:05,467 - DEBUG - Profit API ID 0
2018-02-06 11:06:05,467 - DEBUG - Stop API ID <class 'int'>
2018-02-06 11:06:05,467 - DEBUG - Profit API ID <class 'int'>
2018-02-06 11:06:05,467 - DEBUG - Pos is 1
2018-02-06 11:06:05,467 - DEBUG - CurCount is 1
2018-02-06 11:06:05,467 - DEBUG - In Pos 1
2018-02-06 11:06:05,467 - DEBUG - Stop ID is 171
2018-02-06 11:06:05,467 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 11:06:05,470 - DEBUG - EntryPend is 0
2018-02-06 11:06:05,470 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 11:06:05,470 - DEBUG - Entry Date is 10
2018-02-06 11:06:05,470 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 11:06:05,470 - DEBUG - Order Profit ID is 170
2018-02-06 11:06:05,470 - DEBUG - Order Entry ID is 170
2018-02-06 11:06:05,471 - DEBUG - API ID is  0
2018-02-06 11:06:05,471 - DEBUG - Current Position is 1
2018-02-06 11:06:05,471 - DEBUG - Current Position is <class 'str'>
2018-02-06 11:06:05,471 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 11:06:05,473 - DEBUG - Time is 11
2018-02-06 11:06:05,473 - DEBUG - Time is <class 'int'>
2018-02-06 11:06:05,473 - DEBUG - Time is 6
2018-02-06 11:06:05,473 - DEBUG - Time is <class 'int'>
2018-02-06 11:06:05,473 - DEBUG - Disconnected from IBController
2018-02-06 11:06:05,473 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 11:11:01,388 - DEBUG - ****************************************************
2018-02-06 11:11:01,390 - DEBUG - Current Time is 11:11AM
2018-02-06 11:11:01,390 - DEBUG - Starting Pos Mgmt H E
2018-02-06 11:11:01,390 - DEBUG - Connecting to database
2018-02-06 11:11:01,415 - DEBUG - Connected to database
2018-02-06 11:11:01,415 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 11:11:01,417 - DEBUG - Order Profit is 170
2018-02-06 11:11:01,417 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 11:11:01,420 - DEBUG - Stop ID is 171
2018-02-06 11:11:01,420 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 11:11:01,421 - DEBUG - Entry ID is 170
2018-02-06 11:11:01,421 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 11:11:01,423 - DEBUG - OCA ID is 1
2018-02-06 11:11:01,423 - DEBUG - Connecting to IBController
2018-02-06 11:11:02,428 - DEBUG - Connected to IBController
2018-02-06 11:11:02,428 - DEBUG - Position requested
2018-02-06 11:11:02,430 - DEBUG - Pos Mgmt 0
2018-02-06 11:11:02,430 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000213DB38>, pos=0, avgCost=0.0>
2018-02-06 11:11:02,431 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 11:11:02,431 - DEBUG - ccy2 Currency with position is USD
2018-02-06 11:11:02,431 - DEBUG - Position is 0
2018-02-06 11:11:02,433 - DEBUG - Pos Mgmt -1
2018-02-06 11:11:02,433 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000213DCC0>, pos=-1, avgCost=28787.1>
2018-02-06 11:11:02,433 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 11:11:02,433 - DEBUG - ccy2 Currency with position is USD
2018-02-06 11:11:02,434 - DEBUG - Position is -1
2018-02-06 11:11:02,434 - DEBUG - In Position
2018-02-06 11:11:02,434 - DEBUG - Position is 1
2018-02-06 11:11:02,434 - DEBUG - Pos Mgmt -12987
2018-02-06 11:11:02,434 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000213DF28>, pos=-12987, avgCost=0.95368235>
2018-02-06 11:11:02,434 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 11:11:02,434 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 11:11:02,436 - DEBUG - Position is -12987
2018-02-06 11:11:02,436 - DEBUG - Pos Mgmt 0
2018-02-06 11:11:02,436 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000213DDA0>, pos=0, avgCost=0.0>
2018-02-06 11:11:02,436 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 11:11:02,437 - DEBUG - ccy2 Currency with position is USD
2018-02-06 11:11:02,437 - DEBUG - Position is 0
2018-02-06 11:11:03,430 - DEBUG - Open Orders requested
2018-02-06 11:11:03,433 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x000000000213DF60>, order=<ib.ext.Order.Order object at 0x000000000213DB38>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021D2208>>
2018-02-06 11:11:03,434 - DEBUG - Order OrderID 171
2018-02-06 11:11:03,434 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 11:11:03,434 - DEBUG - Order status PreSubmitted
2018-02-06 11:11:03,434 - DEBUG - Order Identification 171
2018-02-06 11:11:03,434 - DEBUG - Order Identification <class 'int'>
2018-02-06 11:11:03,436 - DEBUG - Profit ID from database is 170
2018-02-06 11:11:03,436 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 11:11:03,436 - DEBUG - Stop ID database is 171
2018-02-06 11:11:03,437 - DEBUG - Entry ID database is 170
2018-02-06 11:11:03,437 - DEBUG - Stop API ID is 171
2018-02-06 11:11:05,434 - DEBUG - Connecting to database
2018-02-06 11:11:05,440 - DEBUG - Connected to database
2018-02-06 11:11:05,443 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 11:11:05,443 - DEBUG - Stop loss value is 74.22
2018-02-06 11:11:05,444 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 11:11:05,444 - DEBUG - Stop loss value is 61.3
2018-02-06 11:11:05,446 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 11:11:05,447 - DEBUG - EntryPrice value is 72.25
2018-02-06 11:11:05,447 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 11:11:05,447 - DEBUG - Stop quantity 1
2018-02-06 11:11:05,450 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 11:11:05,450 - DEBUG - Direction is Short
2018-02-06 11:11:05,451 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 11:11:05,451 - DEBUG - Count is 1
2018-02-06 11:11:05,453 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 11:11:05,453 - DEBUG - Stop Loss Flag is 1
2018-02-06 11:11:05,454 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 11:11:05,454 - DEBUG - Max ID Order is (171,)
2018-02-06 11:11:05,456 - DEBUG - Today is 2018-02-06
2018-02-06 11:11:05,456 - DEBUG - Day of the week 1
2018-02-06 11:11:05,456 - DEBUG - Yesterday is 02/05/2018
2018-02-06 11:11:05,457 - DEBUG - In Position is  1
2018-02-06 11:11:05,457 - DEBUG - In Position is  <class 'int'>
2018-02-06 11:11:05,457 - DEBUG - curStopLossFlag is  1
2018-02-06 11:11:05,457 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 11:11:05,457 - DEBUG - Checking if Entry has been filled
2018-02-06 11:11:05,457 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 11:11:05,459 - DEBUG - EntryPend is 0
2018-02-06 11:11:05,460 - DEBUG - Try to Cancel Stop
2018-02-06 11:11:05,460 - DEBUG - Stop API ID 171
2018-02-06 11:11:05,460 - DEBUG - Profit API ID 0
2018-02-06 11:11:05,460 - DEBUG - Stop API ID <class 'int'>
2018-02-06 11:11:05,460 - DEBUG - Profit API ID <class 'int'>
2018-02-06 11:11:05,460 - DEBUG - Pos is 1
2018-02-06 11:11:05,460 - DEBUG - CurCount is 1
2018-02-06 11:11:05,460 - DEBUG - In Pos 1
2018-02-06 11:11:05,461 - DEBUG - Stop ID is 171
2018-02-06 11:11:05,461 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 11:11:05,463 - DEBUG - EntryPend is 0
2018-02-06 11:11:05,463 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 11:11:05,463 - DEBUG - Entry Date is 10
2018-02-06 11:11:05,463 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 11:11:05,464 - DEBUG - Order Profit ID is 170
2018-02-06 11:11:05,464 - DEBUG - Order Entry ID is 170
2018-02-06 11:11:05,464 - DEBUG - API ID is  0
2018-02-06 11:11:05,464 - DEBUG - Current Position is 1
2018-02-06 11:11:05,466 - DEBUG - Current Position is <class 'str'>
2018-02-06 11:11:05,466 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 11:11:05,466 - DEBUG - Time is 11
2018-02-06 11:11:05,466 - DEBUG - Time is <class 'int'>
2018-02-06 11:11:05,467 - DEBUG - Time is 11
2018-02-06 11:11:05,467 - DEBUG - Time is <class 'int'>
2018-02-06 11:11:05,467 - DEBUG - Disconnected from IBController
2018-02-06 11:11:05,467 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 11:16:01,369 - DEBUG - ****************************************************
2018-02-06 11:16:01,371 - DEBUG - Current Time is 11:16AM
2018-02-06 11:16:01,371 - DEBUG - Starting Pos Mgmt H E
2018-02-06 11:16:01,371 - DEBUG - Connecting to database
2018-02-06 11:16:01,394 - DEBUG - Connected to database
2018-02-06 11:16:01,394 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 11:16:01,395 - DEBUG - Order Profit is 170
2018-02-06 11:16:01,397 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 11:16:01,398 - DEBUG - Stop ID is 171
2018-02-06 11:16:01,398 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 11:16:01,400 - DEBUG - Entry ID is 170
2018-02-06 11:16:01,400 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 11:16:01,401 - DEBUG - OCA ID is 1
2018-02-06 11:16:01,401 - DEBUG - Connecting to IBController
2018-02-06 11:16:02,407 - DEBUG - Connected to IBController
2018-02-06 11:16:02,407 - DEBUG - Position requested
2018-02-06 11:16:02,410 - DEBUG - Pos Mgmt 0
2018-02-06 11:16:02,410 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000215DDD8>, pos=0, avgCost=0.0>
2018-02-06 11:16:02,411 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 11:16:02,411 - DEBUG - ccy2 Currency with position is USD
2018-02-06 11:16:02,411 - DEBUG - Position is 0
2018-02-06 11:16:02,411 - DEBUG - Pos Mgmt -1
2018-02-06 11:16:02,411 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000215DAC8>, pos=-1, avgCost=28787.1>
2018-02-06 11:16:02,411 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 11:16:02,413 - DEBUG - ccy2 Currency with position is USD
2018-02-06 11:16:02,413 - DEBUG - Position is -1
2018-02-06 11:16:02,413 - DEBUG - In Position
2018-02-06 11:16:02,413 - DEBUG - Position is 1
2018-02-06 11:16:02,414 - DEBUG - Pos Mgmt -12987
2018-02-06 11:16:02,414 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000215DF28>, pos=-12987, avgCost=0.95368235>
2018-02-06 11:16:02,414 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 11:16:02,414 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 11:16:02,414 - DEBUG - Position is -12987
2018-02-06 11:16:02,414 - DEBUG - Pos Mgmt 0
2018-02-06 11:16:02,415 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000215DB00>, pos=0, avgCost=0.0>
2018-02-06 11:16:02,415 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 11:16:02,415 - DEBUG - ccy2 Currency with position is USD
2018-02-06 11:16:02,415 - DEBUG - Position is 0
2018-02-06 11:16:03,408 - DEBUG - Open Orders requested
2018-02-06 11:16:03,411 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x000000000215DF28>, order=<ib.ext.Order.Order object at 0x000000000215DE10>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021F1198>>
2018-02-06 11:16:03,411 - DEBUG - Order OrderID 171
2018-02-06 11:16:03,411 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 11:16:03,413 - DEBUG - Order status PreSubmitted
2018-02-06 11:16:03,413 - DEBUG - Order Identification 171
2018-02-06 11:16:03,413 - DEBUG - Order Identification <class 'int'>
2018-02-06 11:16:03,413 - DEBUG - Profit ID from database is 170
2018-02-06 11:16:03,414 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 11:16:03,414 - DEBUG - Stop ID database is 171
2018-02-06 11:16:03,414 - DEBUG - Entry ID database is 170
2018-02-06 11:16:03,414 - DEBUG - Stop API ID is 171
2018-02-06 11:16:05,410 - DEBUG - Connecting to database
2018-02-06 11:16:05,417 - DEBUG - Connected to database
2018-02-06 11:16:05,418 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 11:16:05,420 - DEBUG - Stop loss value is 74.22
2018-02-06 11:16:05,421 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 11:16:05,421 - DEBUG - Stop loss value is 61.3
2018-02-06 11:16:05,423 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 11:16:05,423 - DEBUG - EntryPrice value is 72.25
2018-02-06 11:16:05,424 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 11:16:05,424 - DEBUG - Stop quantity 1
2018-02-06 11:16:05,426 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 11:16:05,427 - DEBUG - Direction is Short
2018-02-06 11:16:05,428 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 11:16:05,430 - DEBUG - Count is 1
2018-02-06 11:16:05,430 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 11:16:05,430 - DEBUG - Stop Loss Flag is 1
2018-02-06 11:16:05,433 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 11:16:05,433 - DEBUG - Max ID Order is (171,)
2018-02-06 11:16:05,434 - DEBUG - Today is 2018-02-06
2018-02-06 11:16:05,434 - DEBUG - Day of the week 1
2018-02-06 11:16:05,434 - DEBUG - Yesterday is 02/05/2018
2018-02-06 11:16:05,434 - DEBUG - In Position is  1
2018-02-06 11:16:05,434 - DEBUG - In Position is  <class 'int'>
2018-02-06 11:16:05,434 - DEBUG - curStopLossFlag is  1
2018-02-06 11:16:05,434 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 11:16:05,436 - DEBUG - Checking if Entry has been filled
2018-02-06 11:16:05,436 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 11:16:05,437 - DEBUG - EntryPend is 0
2018-02-06 11:16:05,437 - DEBUG - Try to Cancel Stop
2018-02-06 11:16:05,437 - DEBUG - Stop API ID 171
2018-02-06 11:16:05,437 - DEBUG - Profit API ID 0
2018-02-06 11:16:05,437 - DEBUG - Stop API ID <class 'int'>
2018-02-06 11:16:05,438 - DEBUG - Profit API ID <class 'int'>
2018-02-06 11:16:05,438 - DEBUG - Pos is 1
2018-02-06 11:16:05,438 - DEBUG - CurCount is 1
2018-02-06 11:16:05,438 - DEBUG - In Pos 1
2018-02-06 11:16:05,440 - DEBUG - Stop ID is 171
2018-02-06 11:16:05,440 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 11:16:05,440 - DEBUG - EntryPend is 0
2018-02-06 11:16:05,441 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 11:16:05,441 - DEBUG - Entry Date is 10
2018-02-06 11:16:05,441 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 11:16:05,441 - DEBUG - Order Profit ID is 170
2018-02-06 11:16:05,443 - DEBUG - Order Entry ID is 170
2018-02-06 11:16:05,443 - DEBUG - API ID is  0
2018-02-06 11:16:05,443 - DEBUG - Current Position is 1
2018-02-06 11:16:05,443 - DEBUG - Current Position is <class 'str'>
2018-02-06 11:16:05,444 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 11:16:05,444 - DEBUG - Time is 11
2018-02-06 11:16:05,444 - DEBUG - Time is <class 'int'>
2018-02-06 11:16:05,444 - DEBUG - Time is 16
2018-02-06 11:16:05,444 - DEBUG - Time is <class 'int'>
2018-02-06 11:16:05,444 - DEBUG - Disconnected from IBController
2018-02-06 11:16:05,446 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 11:21:01,380 - DEBUG - ****************************************************
2018-02-06 11:21:01,381 - DEBUG - Current Time is 11:21AM
2018-02-06 11:21:01,381 - DEBUG - Starting Pos Mgmt H E
2018-02-06 11:21:01,381 - DEBUG - Connecting to database
2018-02-06 11:21:01,431 - DEBUG - Connected to database
2018-02-06 11:21:01,433 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 11:21:01,434 - DEBUG - Order Profit is 170
2018-02-06 11:21:01,434 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 11:21:01,437 - DEBUG - Stop ID is 171
2018-02-06 11:21:01,437 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 11:21:01,437 - DEBUG - Entry ID is 170
2018-02-06 11:21:01,438 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 11:21:01,440 - DEBUG - OCA ID is 1
2018-02-06 11:21:01,440 - DEBUG - Connecting to IBController
2018-02-06 11:21:02,446 - DEBUG - Connected to IBController
2018-02-06 11:21:02,446 - DEBUG - Position requested
2018-02-06 11:21:02,447 - DEBUG - Pos Mgmt 0
2018-02-06 11:21:02,447 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210DB38>, pos=0, avgCost=0.0>
2018-02-06 11:21:02,448 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 11:21:02,448 - DEBUG - ccy2 Currency with position is USD
2018-02-06 11:21:02,448 - DEBUG - Position is 0
2018-02-06 11:21:02,450 - DEBUG - Pos Mgmt -1
2018-02-06 11:21:02,450 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210DC50>, pos=-1, avgCost=28787.1>
2018-02-06 11:21:02,450 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 11:21:02,450 - DEBUG - ccy2 Currency with position is USD
2018-02-06 11:21:02,450 - DEBUG - Position is -1
2018-02-06 11:21:02,450 - DEBUG - In Position
2018-02-06 11:21:02,450 - DEBUG - Position is 1
2018-02-06 11:21:02,451 - DEBUG - Pos Mgmt -12987
2018-02-06 11:21:02,451 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210DF28>, pos=-12987, avgCost=0.95368235>
2018-02-06 11:21:02,451 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 11:21:02,451 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 11:21:02,451 - DEBUG - Position is -12987
2018-02-06 11:21:02,453 - DEBUG - Pos Mgmt 0
2018-02-06 11:21:02,453 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210DCF8>, pos=0, avgCost=0.0>
2018-02-06 11:21:02,453 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 11:21:02,453 - DEBUG - ccy2 Currency with position is USD
2018-02-06 11:21:02,453 - DEBUG - Position is 0
2018-02-06 11:21:03,447 - DEBUG - Open Orders requested
2018-02-06 11:21:03,450 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x000000000210DF60>, order=<ib.ext.Order.Order object at 0x000000000210DC18>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A2208>>
2018-02-06 11:21:03,450 - DEBUG - Order OrderID 171
2018-02-06 11:21:03,450 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 11:21:03,451 - DEBUG - Order status PreSubmitted
2018-02-06 11:21:03,451 - DEBUG - Order Identification 171
2018-02-06 11:21:03,451 - DEBUG - Order Identification <class 'int'>
2018-02-06 11:21:03,453 - DEBUG - Profit ID from database is 170
2018-02-06 11:21:03,453 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 11:21:03,453 - DEBUG - Stop ID database is 171
2018-02-06 11:21:03,453 - DEBUG - Entry ID database is 170
2018-02-06 11:21:03,453 - DEBUG - Stop API ID is 171
2018-02-06 11:21:05,450 - DEBUG - Connecting to database
2018-02-06 11:21:05,457 - DEBUG - Connected to database
2018-02-06 11:21:05,460 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 11:21:05,460 - DEBUG - Stop loss value is 74.22
2018-02-06 11:21:05,461 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 11:21:05,461 - DEBUG - Stop loss value is 61.3
2018-02-06 11:21:05,463 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 11:21:05,463 - DEBUG - EntryPrice value is 72.25
2018-02-06 11:21:05,464 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 11:21:05,464 - DEBUG - Stop quantity 1
2018-02-06 11:21:05,467 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 11:21:05,467 - DEBUG - Direction is Short
2018-02-06 11:21:05,467 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 11:21:05,469 - DEBUG - Count is 1
2018-02-06 11:21:05,470 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 11:21:05,470 - DEBUG - Stop Loss Flag is 1
2018-02-06 11:21:05,471 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 11:21:05,471 - DEBUG - Max ID Order is (171,)
2018-02-06 11:21:05,473 - DEBUG - Today is 2018-02-06
2018-02-06 11:21:05,473 - DEBUG - Day of the week 1
2018-02-06 11:21:05,473 - DEBUG - Yesterday is 02/05/2018
2018-02-06 11:21:05,473 - DEBUG - In Position is  1
2018-02-06 11:21:05,473 - DEBUG - In Position is  <class 'int'>
2018-02-06 11:21:05,473 - DEBUG - curStopLossFlag is  1
2018-02-06 11:21:05,473 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 11:21:05,473 - DEBUG - Checking if Entry has been filled
2018-02-06 11:21:05,474 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 11:21:05,476 - DEBUG - EntryPend is 0
2018-02-06 11:21:05,476 - DEBUG - Try to Cancel Stop
2018-02-06 11:21:05,476 - DEBUG - Stop API ID 171
2018-02-06 11:21:05,476 - DEBUG - Profit API ID 0
2018-02-06 11:21:05,476 - DEBUG - Stop API ID <class 'int'>
2018-02-06 11:21:05,476 - DEBUG - Profit API ID <class 'int'>
2018-02-06 11:21:05,477 - DEBUG - Pos is 1
2018-02-06 11:21:05,477 - DEBUG - CurCount is 1
2018-02-06 11:21:05,477 - DEBUG - In Pos 1
2018-02-06 11:21:05,477 - DEBUG - Stop ID is 171
2018-02-06 11:21:05,479 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 11:21:05,484 - DEBUG - EntryPend is 0
2018-02-06 11:21:05,484 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 11:21:05,486 - DEBUG - Entry Date is 10
2018-02-06 11:21:05,486 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 11:21:05,486 - DEBUG - Order Profit ID is 170
2018-02-06 11:21:05,486 - DEBUG - Order Entry ID is 170
2018-02-06 11:21:05,486 - DEBUG - API ID is  0
2018-02-06 11:21:05,486 - DEBUG - Current Position is 1
2018-02-06 11:21:05,486 - DEBUG - Current Position is <class 'str'>
2018-02-06 11:21:05,486 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 11:21:05,487 - DEBUG - Time is 11
2018-02-06 11:21:05,487 - DEBUG - Time is <class 'int'>
2018-02-06 11:21:05,487 - DEBUG - Time is 21
2018-02-06 11:21:05,487 - DEBUG - Time is <class 'int'>
2018-02-06 11:21:05,489 - DEBUG - Disconnected from IBController
2018-02-06 11:21:05,489 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 11:26:01,378 - DEBUG - ****************************************************
2018-02-06 11:26:01,380 - DEBUG - Current Time is 11:26AM
2018-02-06 11:26:01,380 - DEBUG - Starting Pos Mgmt H E
2018-02-06 11:26:01,381 - DEBUG - Connecting to database
2018-02-06 11:26:01,411 - DEBUG - Connected to database
2018-02-06 11:26:01,411 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 11:26:01,414 - DEBUG - Order Profit is 170
2018-02-06 11:26:01,414 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 11:26:01,415 - DEBUG - Stop ID is 171
2018-02-06 11:26:01,415 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 11:26:01,417 - DEBUG - Entry ID is 170
2018-02-06 11:26:01,417 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 11:26:01,418 - DEBUG - OCA ID is 1
2018-02-06 11:26:01,420 - DEBUG - Connecting to IBController
2018-02-06 11:26:02,424 - DEBUG - Connected to IBController
2018-02-06 11:26:02,424 - DEBUG - Position requested
2018-02-06 11:26:02,427 - DEBUG - Pos Mgmt 0
2018-02-06 11:26:02,427 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210DB38>, pos=0, avgCost=0.0>
2018-02-06 11:26:02,427 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 11:26:02,427 - DEBUG - ccy2 Currency with position is USD
2018-02-06 11:26:02,427 - DEBUG - Position is 0
2018-02-06 11:26:02,428 - DEBUG - Pos Mgmt -1
2018-02-06 11:26:02,428 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210DBE0>, pos=-1, avgCost=28787.1>
2018-02-06 11:26:02,428 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 11:26:02,428 - DEBUG - ccy2 Currency with position is USD
2018-02-06 11:26:02,430 - DEBUG - Position is -1
2018-02-06 11:26:02,430 - DEBUG - In Position
2018-02-06 11:26:02,430 - DEBUG - Position is 1
2018-02-06 11:26:02,430 - DEBUG - Pos Mgmt -12987
2018-02-06 11:26:02,430 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210DF28>, pos=-12987, avgCost=0.95368235>
2018-02-06 11:26:02,430 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 11:26:02,431 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 11:26:02,431 - DEBUG - Position is -12987
2018-02-06 11:26:02,431 - DEBUG - Pos Mgmt 0
2018-02-06 11:26:02,431 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210DDD8>, pos=0, avgCost=0.0>
2018-02-06 11:26:02,433 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 11:26:02,433 - DEBUG - ccy2 Currency with position is USD
2018-02-06 11:26:02,433 - DEBUG - Position is 0
2018-02-06 11:26:03,427 - DEBUG - Open Orders requested
2018-02-06 11:26:03,428 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x000000000210DF60>, order=<ib.ext.Order.Order object at 0x000000000210DC88>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A2208>>
2018-02-06 11:26:03,430 - DEBUG - Order OrderID 171
2018-02-06 11:26:03,430 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 11:26:03,430 - DEBUG - Order status PreSubmitted
2018-02-06 11:26:03,430 - DEBUG - Order Identification 171
2018-02-06 11:26:03,430 - DEBUG - Order Identification <class 'int'>
2018-02-06 11:26:03,431 - DEBUG - Profit ID from database is 170
2018-02-06 11:26:03,431 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 11:26:03,431 - DEBUG - Stop ID database is 171
2018-02-06 11:26:03,431 - DEBUG - Entry ID database is 170
2018-02-06 11:26:03,433 - DEBUG - Stop API ID is 171
2018-02-06 11:26:05,430 - DEBUG - Connecting to database
2018-02-06 11:26:05,437 - DEBUG - Connected to database
2018-02-06 11:26:05,438 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 11:26:05,440 - DEBUG - Stop loss value is 74.22
2018-02-06 11:26:05,440 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 11:26:05,441 - DEBUG - Stop loss value is 61.3
2018-02-06 11:26:05,443 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 11:26:05,444 - DEBUG - EntryPrice value is 72.25
2018-02-06 11:26:05,444 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 11:26:05,444 - DEBUG - Stop quantity 1
2018-02-06 11:26:05,446 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 11:26:05,447 - DEBUG - Direction is Short
2018-02-06 11:26:05,447 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 11:26:05,448 - DEBUG - Count is 1
2018-02-06 11:26:05,450 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 11:26:05,450 - DEBUG - Stop Loss Flag is 1
2018-02-06 11:26:05,451 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 11:26:05,451 - DEBUG - Max ID Order is (171,)
2018-02-06 11:26:05,451 - DEBUG - Today is 2018-02-06
2018-02-06 11:26:05,453 - DEBUG - Day of the week 1
2018-02-06 11:26:05,453 - DEBUG - Yesterday is 02/05/2018
2018-02-06 11:26:05,453 - DEBUG - In Position is  1
2018-02-06 11:26:05,453 - DEBUG - In Position is  <class 'int'>
2018-02-06 11:26:05,453 - DEBUG - curStopLossFlag is  1
2018-02-06 11:26:05,453 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 11:26:05,453 - DEBUG - Checking if Entry has been filled
2018-02-06 11:26:05,453 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 11:26:05,456 - DEBUG - EntryPend is 0
2018-02-06 11:26:05,456 - DEBUG - Try to Cancel Stop
2018-02-06 11:26:05,456 - DEBUG - Stop API ID 171
2018-02-06 11:26:05,457 - DEBUG - Profit API ID 0
2018-02-06 11:26:05,457 - DEBUG - Stop API ID <class 'int'>
2018-02-06 11:26:05,457 - DEBUG - Profit API ID <class 'int'>
2018-02-06 11:26:05,457 - DEBUG - Pos is 1
2018-02-06 11:26:05,457 - DEBUG - CurCount is 1
2018-02-06 11:26:05,457 - DEBUG - In Pos 1
2018-02-06 11:26:05,457 - DEBUG - Stop ID is 171
2018-02-06 11:26:05,457 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 11:26:05,460 - DEBUG - EntryPend is 0
2018-02-06 11:26:05,460 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 11:26:05,460 - DEBUG - Entry Date is 10
2018-02-06 11:26:05,460 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 11:26:05,460 - DEBUG - Order Profit ID is 170
2018-02-06 11:26:05,460 - DEBUG - Order Entry ID is 170
2018-02-06 11:26:05,460 - DEBUG - API ID is  0
2018-02-06 11:26:05,461 - DEBUG - Current Position is 1
2018-02-06 11:26:05,461 - DEBUG - Current Position is <class 'str'>
2018-02-06 11:26:05,461 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 11:26:05,461 - DEBUG - Time is 11
2018-02-06 11:26:05,463 - DEBUG - Time is <class 'int'>
2018-02-06 11:26:05,463 - DEBUG - Time is 26
2018-02-06 11:26:05,463 - DEBUG - Time is <class 'int'>
2018-02-06 11:26:05,463 - DEBUG - Disconnected from IBController
2018-02-06 11:26:05,463 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 11:31:01,375 - DEBUG - ****************************************************
2018-02-06 11:31:01,375 - DEBUG - Current Time is 11:31AM
2018-02-06 11:31:01,375 - DEBUG - Starting Pos Mgmt H E
2018-02-06 11:31:01,375 - DEBUG - Connecting to database
2018-02-06 11:31:01,404 - DEBUG - Connected to database
2018-02-06 11:31:01,404 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 11:31:01,407 - DEBUG - Order Profit is 170
2018-02-06 11:31:01,407 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 11:31:01,408 - DEBUG - Stop ID is 171
2018-02-06 11:31:01,408 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 11:31:01,411 - DEBUG - Entry ID is 170
2018-02-06 11:31:01,411 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 11:31:01,411 - DEBUG - OCA ID is 1
2018-02-06 11:31:01,413 - DEBUG - Connecting to IBController
2018-02-06 11:31:02,421 - DEBUG - Connected to IBController
2018-02-06 11:31:02,421 - DEBUG - Position requested
2018-02-06 11:31:02,423 - DEBUG - Pos Mgmt 0
2018-02-06 11:31:02,423 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000213DDA0>, pos=0, avgCost=0.0>
2018-02-06 11:31:02,424 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 11:31:02,424 - DEBUG - ccy2 Currency with position is USD
2018-02-06 11:31:02,424 - DEBUG - Position is 0
2018-02-06 11:31:02,424 - DEBUG - Pos Mgmt -1
2018-02-06 11:31:02,424 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000213DC50>, pos=-1, avgCost=28787.1>
2018-02-06 11:31:02,426 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 11:31:02,426 - DEBUG - ccy2 Currency with position is USD
2018-02-06 11:31:02,426 - DEBUG - Position is -1
2018-02-06 11:31:02,426 - DEBUG - In Position
2018-02-06 11:31:02,426 - DEBUG - Position is 1
2018-02-06 11:31:02,427 - DEBUG - Pos Mgmt -12987
2018-02-06 11:31:02,427 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000213DF28>, pos=-12987, avgCost=0.95368235>
2018-02-06 11:31:02,427 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 11:31:02,427 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 11:31:02,427 - DEBUG - Position is -12987
2018-02-06 11:31:02,427 - DEBUG - Pos Mgmt 0
2018-02-06 11:31:02,428 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000213DDD8>, pos=0, avgCost=0.0>
2018-02-06 11:31:02,428 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 11:31:02,428 - DEBUG - ccy2 Currency with position is USD
2018-02-06 11:31:02,430 - DEBUG - Position is 0
2018-02-06 11:31:03,421 - DEBUG - Open Orders requested
2018-02-06 11:31:03,424 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x000000000213DF28>, order=<ib.ext.Order.Order object at 0x000000000213DE10>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021D2198>>
2018-02-06 11:31:03,424 - DEBUG - Order OrderID 171
2018-02-06 11:31:03,424 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 11:31:03,426 - DEBUG - Order status PreSubmitted
2018-02-06 11:31:03,426 - DEBUG - Order Identification 171
2018-02-06 11:31:03,426 - DEBUG - Order Identification <class 'int'>
2018-02-06 11:31:03,427 - DEBUG - Profit ID from database is 170
2018-02-06 11:31:03,427 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 11:31:03,427 - DEBUG - Stop ID database is 171
2018-02-06 11:31:03,427 - DEBUG - Entry ID database is 170
2018-02-06 11:31:03,427 - DEBUG - Stop API ID is 171
2018-02-06 11:31:05,423 - DEBUG - Connecting to database
2018-02-06 11:31:05,430 - DEBUG - Connected to database
2018-02-06 11:31:05,431 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 11:31:05,431 - DEBUG - Stop loss value is 74.22
2018-02-06 11:31:05,433 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 11:31:05,434 - DEBUG - Stop loss value is 61.3
2018-02-06 11:31:05,434 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 11:31:05,436 - DEBUG - EntryPrice value is 72.25
2018-02-06 11:31:05,437 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 11:31:05,437 - DEBUG - Stop quantity 1
2018-02-06 11:31:05,438 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 11:31:05,440 - DEBUG - Direction is Short
2018-02-06 11:31:05,440 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 11:31:05,440 - DEBUG - Count is 1
2018-02-06 11:31:05,443 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 11:31:05,443 - DEBUG - Stop Loss Flag is 1
2018-02-06 11:31:05,444 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 11:31:05,444 - DEBUG - Max ID Order is (171,)
2018-02-06 11:31:05,444 - DEBUG - Today is 2018-02-06
2018-02-06 11:31:05,446 - DEBUG - Day of the week 1
2018-02-06 11:31:05,446 - DEBUG - Yesterday is 02/05/2018
2018-02-06 11:31:05,446 - DEBUG - In Position is  1
2018-02-06 11:31:05,447 - DEBUG - In Position is  <class 'int'>
2018-02-06 11:31:05,447 - DEBUG - curStopLossFlag is  1
2018-02-06 11:31:05,447 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 11:31:05,447 - DEBUG - Checking if Entry has been filled
2018-02-06 11:31:05,447 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 11:31:05,448 - DEBUG - EntryPend is 0
2018-02-06 11:31:05,448 - DEBUG - Try to Cancel Stop
2018-02-06 11:31:05,450 - DEBUG - Stop API ID 171
2018-02-06 11:31:05,450 - DEBUG - Profit API ID 0
2018-02-06 11:31:05,450 - DEBUG - Stop API ID <class 'int'>
2018-02-06 11:31:05,450 - DEBUG - Profit API ID <class 'int'>
2018-02-06 11:31:05,450 - DEBUG - Pos is 1
2018-02-06 11:31:05,450 - DEBUG - CurCount is 1
2018-02-06 11:31:05,450 - DEBUG - In Pos 1
2018-02-06 11:31:05,450 - DEBUG - Stop ID is 171
2018-02-06 11:31:05,451 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 11:31:05,453 - DEBUG - EntryPend is 0
2018-02-06 11:31:05,453 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 11:31:05,453 - DEBUG - Entry Date is 10
2018-02-06 11:31:05,453 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 11:31:05,453 - DEBUG - Order Profit ID is 170
2018-02-06 11:31:05,453 - DEBUG - Order Entry ID is 170
2018-02-06 11:31:05,454 - DEBUG - API ID is  0
2018-02-06 11:31:05,454 - DEBUG - Current Position is 1
2018-02-06 11:31:05,454 - DEBUG - Current Position is <class 'str'>
2018-02-06 11:31:05,454 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 11:31:05,456 - DEBUG - Time is 11
2018-02-06 11:31:05,456 - DEBUG - Time is <class 'int'>
2018-02-06 11:31:05,456 - DEBUG - Time is 31
2018-02-06 11:31:05,456 - DEBUG - Time is <class 'int'>
2018-02-06 11:31:05,457 - DEBUG - Disconnected from IBController
2018-02-06 11:31:05,457 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 11:36:01,368 - DEBUG - ****************************************************
2018-02-06 11:36:01,368 - DEBUG - Current Time is 11:36AM
2018-02-06 11:36:01,368 - DEBUG - Starting Pos Mgmt H E
2018-02-06 11:36:01,368 - DEBUG - Connecting to database
2018-02-06 11:36:01,400 - DEBUG - Connected to database
2018-02-06 11:36:01,400 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 11:36:01,401 - DEBUG - Order Profit is 170
2018-02-06 11:36:01,401 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 11:36:01,404 - DEBUG - Stop ID is 171
2018-02-06 11:36:01,404 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 11:36:01,404 - DEBUG - Entry ID is 170
2018-02-06 11:36:01,405 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 11:36:01,407 - DEBUG - OCA ID is 1
2018-02-06 11:36:01,407 - DEBUG - Connecting to IBController
2018-02-06 11:36:02,414 - DEBUG - Connected to IBController
2018-02-06 11:36:02,414 - DEBUG - Position requested
2018-02-06 11:36:02,415 - DEBUG - Pos Mgmt 0
2018-02-06 11:36:02,415 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210DB38>, pos=0, avgCost=0.0>
2018-02-06 11:36:02,417 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 11:36:02,417 - DEBUG - ccy2 Currency with position is USD
2018-02-06 11:36:02,417 - DEBUG - Position is 0
2018-02-06 11:36:02,417 - DEBUG - Pos Mgmt -1
2018-02-06 11:36:02,417 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210DBE0>, pos=-1, avgCost=28787.1>
2018-02-06 11:36:02,417 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 11:36:02,418 - DEBUG - ccy2 Currency with position is USD
2018-02-06 11:36:02,418 - DEBUG - Position is -1
2018-02-06 11:36:02,418 - DEBUG - In Position
2018-02-06 11:36:02,418 - DEBUG - Position is 1
2018-02-06 11:36:02,420 - DEBUG - Pos Mgmt -12987
2018-02-06 11:36:02,420 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210DF28>, pos=-12987, avgCost=0.95368235>
2018-02-06 11:36:02,420 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 11:36:02,420 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 11:36:02,421 - DEBUG - Position is -12987
2018-02-06 11:36:02,421 - DEBUG - Pos Mgmt 0
2018-02-06 11:36:02,421 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210DB00>, pos=0, avgCost=0.0>
2018-02-06 11:36:02,421 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 11:36:02,421 - DEBUG - ccy2 Currency with position is USD
2018-02-06 11:36:02,421 - DEBUG - Position is 0
2018-02-06 11:36:03,415 - DEBUG - Open Orders requested
2018-02-06 11:36:03,417 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x000000000210DF60>, order=<ib.ext.Order.Order object at 0x000000000210DDD8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A1208>>
2018-02-06 11:36:03,418 - DEBUG - Order OrderID 171
2018-02-06 11:36:03,418 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 11:36:03,420 - DEBUG - Order status PreSubmitted
2018-02-06 11:36:03,420 - DEBUG - Order Identification 171
2018-02-06 11:36:03,420 - DEBUG - Order Identification <class 'int'>
2018-02-06 11:36:03,421 - DEBUG - Profit ID from database is 170
2018-02-06 11:36:03,421 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 11:36:03,421 - DEBUG - Stop ID database is 171
2018-02-06 11:36:03,421 - DEBUG - Entry ID database is 170
2018-02-06 11:36:03,421 - DEBUG - Stop API ID is 171
2018-02-06 11:36:05,418 - DEBUG - Connecting to database
2018-02-06 11:36:05,426 - DEBUG - Connected to database
2018-02-06 11:36:05,427 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 11:36:05,427 - DEBUG - Stop loss value is 74.22
2018-02-06 11:36:05,428 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 11:36:05,430 - DEBUG - Stop loss value is 61.3
2018-02-06 11:36:05,430 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 11:36:05,431 - DEBUG - EntryPrice value is 72.25
2018-02-06 11:36:05,433 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 11:36:05,433 - DEBUG - Stop quantity 1
2018-02-06 11:36:05,434 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 11:36:05,434 - DEBUG - Direction is Short
2018-02-06 11:36:05,436 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 11:36:05,437 - DEBUG - Count is 1
2018-02-06 11:36:05,437 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 11:36:05,437 - DEBUG - Stop Loss Flag is 1
2018-02-06 11:36:05,440 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 11:36:05,440 - DEBUG - Max ID Order is (171,)
2018-02-06 11:36:05,440 - DEBUG - Today is 2018-02-06
2018-02-06 11:36:05,440 - DEBUG - Day of the week 1
2018-02-06 11:36:05,440 - DEBUG - Yesterday is 02/05/2018
2018-02-06 11:36:05,440 - DEBUG - In Position is  1
2018-02-06 11:36:05,441 - DEBUG - In Position is  <class 'int'>
2018-02-06 11:36:05,441 - DEBUG - curStopLossFlag is  1
2018-02-06 11:36:05,441 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 11:36:05,443 - DEBUG - Checking if Entry has been filled
2018-02-06 11:36:05,443 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 11:36:05,444 - DEBUG - EntryPend is 0
2018-02-06 11:36:05,444 - DEBUG - Try to Cancel Stop
2018-02-06 11:36:05,444 - DEBUG - Stop API ID 171
2018-02-06 11:36:05,444 - DEBUG - Profit API ID 0
2018-02-06 11:36:05,444 - DEBUG - Stop API ID <class 'int'>
2018-02-06 11:36:05,446 - DEBUG - Profit API ID <class 'int'>
2018-02-06 11:36:05,446 - DEBUG - Pos is 1
2018-02-06 11:36:05,446 - DEBUG - CurCount is 1
2018-02-06 11:36:05,446 - DEBUG - In Pos 1
2018-02-06 11:36:05,446 - DEBUG - Stop ID is 171
2018-02-06 11:36:05,447 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 11:36:05,447 - DEBUG - EntryPend is 0
2018-02-06 11:36:05,447 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 11:36:05,448 - DEBUG - Entry Date is 10
2018-02-06 11:36:05,448 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 11:36:05,448 - DEBUG - Order Profit ID is 170
2018-02-06 11:36:05,448 - DEBUG - Order Entry ID is 170
2018-02-06 11:36:05,450 - DEBUG - API ID is  0
2018-02-06 11:36:05,450 - DEBUG - Current Position is 1
2018-02-06 11:36:05,450 - DEBUG - Current Position is <class 'str'>
2018-02-06 11:36:05,450 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 11:36:05,450 - DEBUG - Time is 11
2018-02-06 11:36:05,450 - DEBUG - Time is <class 'int'>
2018-02-06 11:36:05,450 - DEBUG - Time is 36
2018-02-06 11:36:05,450 - DEBUG - Time is <class 'int'>
2018-02-06 11:36:05,451 - DEBUG - Disconnected from IBController
2018-02-06 11:36:05,451 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 11:41:01,378 - DEBUG - ****************************************************
2018-02-06 11:41:01,378 - DEBUG - Current Time is 11:41AM
2018-02-06 11:41:01,378 - DEBUG - Starting Pos Mgmt H E
2018-02-06 11:41:01,380 - DEBUG - Connecting to database
2018-02-06 11:41:01,398 - DEBUG - Connected to database
2018-02-06 11:41:01,400 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 11:41:01,401 - DEBUG - Order Profit is 170
2018-02-06 11:41:01,401 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 11:41:01,403 - DEBUG - Stop ID is 171
2018-02-06 11:41:01,404 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 11:41:01,404 - DEBUG - Entry ID is 170
2018-02-06 11:41:01,404 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 11:41:01,407 - DEBUG - OCA ID is 1
2018-02-06 11:41:01,407 - DEBUG - Connecting to IBController
2018-02-06 11:41:02,415 - DEBUG - Connected to IBController
2018-02-06 11:41:02,415 - DEBUG - Position requested
2018-02-06 11:41:02,417 - DEBUG - Pos Mgmt 0
2018-02-06 11:41:02,417 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210CDA0>, pos=0, avgCost=0.0>
2018-02-06 11:41:02,418 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 11:41:02,418 - DEBUG - ccy2 Currency with position is USD
2018-02-06 11:41:02,418 - DEBUG - Position is 0
2018-02-06 11:41:02,420 - DEBUG - Pos Mgmt -1
2018-02-06 11:41:02,420 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210CCC0>, pos=-1, avgCost=28787.1>
2018-02-06 11:41:02,420 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 11:41:02,421 - DEBUG - ccy2 Currency with position is USD
2018-02-06 11:41:02,421 - DEBUG - Position is -1
2018-02-06 11:41:02,421 - DEBUG - In Position
2018-02-06 11:41:02,421 - DEBUG - Position is 1
2018-02-06 11:41:02,421 - DEBUG - Pos Mgmt -12987
2018-02-06 11:41:02,421 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210CF98>, pos=-12987, avgCost=0.95368235>
2018-02-06 11:41:02,421 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 11:41:02,423 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 11:41:02,423 - DEBUG - Position is -12987
2018-02-06 11:41:02,423 - DEBUG - Pos Mgmt 0
2018-02-06 11:41:02,424 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210CD68>, pos=0, avgCost=0.0>
2018-02-06 11:41:02,424 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 11:41:02,424 - DEBUG - ccy2 Currency with position is USD
2018-02-06 11:41:02,424 - DEBUG - Position is 0
2018-02-06 11:41:03,417 - DEBUG - Open Orders requested
2018-02-06 11:41:03,418 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x000000000210CF98>, order=<ib.ext.Order.Order object at 0x000000000210CB38>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A2198>>
2018-02-06 11:41:03,420 - DEBUG - Order OrderID 171
2018-02-06 11:41:03,420 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 11:41:03,421 - DEBUG - Order status PreSubmitted
2018-02-06 11:41:03,421 - DEBUG - Order Identification 171
2018-02-06 11:41:03,421 - DEBUG - Order Identification <class 'int'>
2018-02-06 11:41:03,421 - DEBUG - Profit ID from database is 170
2018-02-06 11:41:03,421 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 11:41:03,421 - DEBUG - Stop ID database is 171
2018-02-06 11:41:03,421 - DEBUG - Entry ID database is 170
2018-02-06 11:41:03,423 - DEBUG - Stop API ID is 171
2018-02-06 11:41:05,417 - DEBUG - Connecting to database
2018-02-06 11:41:05,424 - DEBUG - Connected to database
2018-02-06 11:41:05,427 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 11:41:05,427 - DEBUG - Stop loss value is 74.22
2018-02-06 11:41:05,428 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 11:41:05,428 - DEBUG - Stop loss value is 61.3
2018-02-06 11:41:05,430 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 11:41:05,430 - DEBUG - EntryPrice value is 72.25
2018-02-06 11:41:05,434 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 11:41:05,436 - DEBUG - Stop quantity 1
2018-02-06 11:41:05,437 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 11:41:05,437 - DEBUG - Direction is Short
2018-02-06 11:41:05,438 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 11:41:05,438 - DEBUG - Count is 1
2018-02-06 11:41:05,441 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 11:41:05,441 - DEBUG - Stop Loss Flag is 1
2018-02-06 11:41:05,444 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 11:41:05,444 - DEBUG - Max ID Order is (171,)
2018-02-06 11:41:05,444 - DEBUG - Today is 2018-02-06
2018-02-06 11:41:05,444 - DEBUG - Day of the week 1
2018-02-06 11:41:05,444 - DEBUG - Yesterday is 02/05/2018
2018-02-06 11:41:05,444 - DEBUG - In Position is  1
2018-02-06 11:41:05,446 - DEBUG - In Position is  <class 'int'>
2018-02-06 11:41:05,446 - DEBUG - curStopLossFlag is  1
2018-02-06 11:41:05,446 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 11:41:05,446 - DEBUG - Checking if Entry has been filled
2018-02-06 11:41:05,447 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 11:41:05,447 - DEBUG - EntryPend is 0
2018-02-06 11:41:05,447 - DEBUG - Try to Cancel Stop
2018-02-06 11:41:05,448 - DEBUG - Stop API ID 171
2018-02-06 11:41:05,448 - DEBUG - Profit API ID 0
2018-02-06 11:41:05,448 - DEBUG - Stop API ID <class 'int'>
2018-02-06 11:41:05,448 - DEBUG - Profit API ID <class 'int'>
2018-02-06 11:41:05,448 - DEBUG - Pos is 1
2018-02-06 11:41:05,450 - DEBUG - CurCount is 1
2018-02-06 11:41:05,450 - DEBUG - In Pos 1
2018-02-06 11:41:05,450 - DEBUG - Stop ID is 171
2018-02-06 11:41:05,450 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 11:41:05,451 - DEBUG - EntryPend is 0
2018-02-06 11:41:05,451 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 11:41:05,451 - DEBUG - Entry Date is 10
2018-02-06 11:41:05,453 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 11:41:05,453 - DEBUG - Order Profit ID is 170
2018-02-06 11:41:05,453 - DEBUG - Order Entry ID is 170
2018-02-06 11:41:05,453 - DEBUG - API ID is  0
2018-02-06 11:41:05,453 - DEBUG - Current Position is 1
2018-02-06 11:41:05,453 - DEBUG - Current Position is <class 'str'>
2018-02-06 11:41:05,453 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 11:41:05,453 - DEBUG - Time is 11
2018-02-06 11:41:05,454 - DEBUG - Time is <class 'int'>
2018-02-06 11:41:05,454 - DEBUG - Time is 41
2018-02-06 11:41:05,454 - DEBUG - Time is <class 'int'>
2018-02-06 11:41:05,454 - DEBUG - Disconnected from IBController
2018-02-06 11:41:05,456 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 11:46:01,374 - DEBUG - ****************************************************
2018-02-06 11:46:01,374 - DEBUG - Current Time is 11:46AM
2018-02-06 11:46:01,374 - DEBUG - Starting Pos Mgmt H E
2018-02-06 11:46:01,375 - DEBUG - Connecting to database
2018-02-06 11:46:01,404 - DEBUG - Connected to database
2018-02-06 11:46:01,405 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 11:46:01,407 - DEBUG - Order Profit is 170
2018-02-06 11:46:01,407 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 11:46:01,408 - DEBUG - Stop ID is 171
2018-02-06 11:46:01,408 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 11:46:01,411 - DEBUG - Entry ID is 170
2018-02-06 11:46:01,411 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 11:46:01,413 - DEBUG - OCA ID is 1
2018-02-06 11:46:01,413 - DEBUG - Connecting to IBController
2018-02-06 11:46:02,418 - DEBUG - Connected to IBController
2018-02-06 11:46:02,418 - DEBUG - Position requested
2018-02-06 11:46:02,421 - DEBUG - Pos Mgmt 0
2018-02-06 11:46:02,421 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210BB38>, pos=0, avgCost=0.0>
2018-02-06 11:46:02,423 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 11:46:02,423 - DEBUG - ccy2 Currency with position is USD
2018-02-06 11:46:02,423 - DEBUG - Position is 0
2018-02-06 11:46:02,424 - DEBUG - Pos Mgmt -1
2018-02-06 11:46:02,424 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210BC88>, pos=-1, avgCost=28787.1>
2018-02-06 11:46:02,424 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 11:46:02,424 - DEBUG - ccy2 Currency with position is USD
2018-02-06 11:46:02,424 - DEBUG - Position is -1
2018-02-06 11:46:02,424 - DEBUG - In Position
2018-02-06 11:46:02,424 - DEBUG - Position is 1
2018-02-06 11:46:02,426 - DEBUG - Pos Mgmt -12987
2018-02-06 11:46:02,426 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210BF28>, pos=-12987, avgCost=0.95368235>
2018-02-06 11:46:02,427 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 11:46:02,427 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 11:46:02,427 - DEBUG - Position is -12987
2018-02-06 11:46:02,427 - DEBUG - Pos Mgmt 0
2018-02-06 11:46:02,427 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210BBE0>, pos=0, avgCost=0.0>
2018-02-06 11:46:02,427 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 11:46:02,427 - DEBUG - ccy2 Currency with position is USD
2018-02-06 11:46:02,428 - DEBUG - Position is 0
2018-02-06 11:46:03,421 - DEBUG - Open Orders requested
2018-02-06 11:46:03,430 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x000000000210BF60>, order=<ib.ext.Order.Order object at 0x000000000210BB00>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A0208>>
2018-02-06 11:46:03,430 - DEBUG - Order OrderID 171
2018-02-06 11:46:03,431 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 11:46:03,431 - DEBUG - Order status PreSubmitted
2018-02-06 11:46:03,431 - DEBUG - Order Identification 171
2018-02-06 11:46:03,433 - DEBUG - Order Identification <class 'int'>
2018-02-06 11:46:03,433 - DEBUG - Profit ID from database is 170
2018-02-06 11:46:03,433 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 11:46:03,434 - DEBUG - Stop ID database is 171
2018-02-06 11:46:03,434 - DEBUG - Entry ID database is 170
2018-02-06 11:46:03,434 - DEBUG - Stop API ID is 171
2018-02-06 11:46:05,430 - DEBUG - Connecting to database
2018-02-06 11:46:05,437 - DEBUG - Connected to database
2018-02-06 11:46:05,440 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 11:46:05,440 - DEBUG - Stop loss value is 74.22
2018-02-06 11:46:05,441 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 11:46:05,441 - DEBUG - Stop loss value is 61.3
2018-02-06 11:46:05,444 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 11:46:05,444 - DEBUG - EntryPrice value is 72.25
2018-02-06 11:46:05,444 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 11:46:05,446 - DEBUG - Stop quantity 1
2018-02-06 11:46:05,447 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 11:46:05,447 - DEBUG - Direction is Short
2018-02-06 11:46:05,448 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 11:46:05,448 - DEBUG - Count is 1
2018-02-06 11:46:05,450 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 11:46:05,450 - DEBUG - Stop Loss Flag is 1
2018-02-06 11:46:05,451 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 11:46:05,451 - DEBUG - Max ID Order is (171,)
2018-02-06 11:46:05,453 - DEBUG - Today is 2018-02-06
2018-02-06 11:46:05,453 - DEBUG - Day of the week 1
2018-02-06 11:46:05,453 - DEBUG - Yesterday is 02/05/2018
2018-02-06 11:46:05,453 - DEBUG - In Position is  1
2018-02-06 11:46:05,453 - DEBUG - In Position is  <class 'int'>
2018-02-06 11:46:05,453 - DEBUG - curStopLossFlag is  1
2018-02-06 11:46:05,454 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 11:46:05,454 - DEBUG - Checking if Entry has been filled
2018-02-06 11:46:05,454 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 11:46:05,457 - DEBUG - EntryPend is 0
2018-02-06 11:46:05,457 - DEBUG - Try to Cancel Stop
2018-02-06 11:46:05,457 - DEBUG - Stop API ID 171
2018-02-06 11:46:05,457 - DEBUG - Profit API ID 0
2018-02-06 11:46:05,457 - DEBUG - Stop API ID <class 'int'>
2018-02-06 11:46:05,457 - DEBUG - Profit API ID <class 'int'>
2018-02-06 11:46:05,459 - DEBUG - Pos is 1
2018-02-06 11:46:05,459 - DEBUG - CurCount is 1
2018-02-06 11:46:05,459 - DEBUG - In Pos 1
2018-02-06 11:46:05,459 - DEBUG - Stop ID is 171
2018-02-06 11:46:05,460 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 11:46:05,460 - DEBUG - EntryPend is 0
2018-02-06 11:46:05,460 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 11:46:05,460 - DEBUG - Entry Date is 10
2018-02-06 11:46:05,461 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 11:46:05,461 - DEBUG - Order Profit ID is 170
2018-02-06 11:46:05,461 - DEBUG - Order Entry ID is 170
2018-02-06 11:46:05,463 - DEBUG - API ID is  0
2018-02-06 11:46:05,463 - DEBUG - Current Position is 1
2018-02-06 11:46:05,463 - DEBUG - Current Position is <class 'str'>
2018-02-06 11:46:05,463 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 11:46:05,463 - DEBUG - Time is 11
2018-02-06 11:46:05,463 - DEBUG - Time is <class 'int'>
2018-02-06 11:46:05,463 - DEBUG - Time is 46
2018-02-06 11:46:05,463 - DEBUG - Time is <class 'int'>
2018-02-06 11:46:05,464 - DEBUG - Disconnected from IBController
2018-02-06 11:46:05,464 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 11:51:01,368 - DEBUG - ****************************************************
2018-02-06 11:51:01,369 - DEBUG - Current Time is 11:51AM
2018-02-06 11:51:01,369 - DEBUG - Starting Pos Mgmt H E
2018-02-06 11:51:01,369 - DEBUG - Connecting to database
2018-02-06 11:51:01,395 - DEBUG - Connected to database
2018-02-06 11:51:01,397 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 11:51:01,398 - DEBUG - Order Profit is 170
2018-02-06 11:51:01,398 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 11:51:01,401 - DEBUG - Stop ID is 171
2018-02-06 11:51:01,401 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 11:51:01,403 - DEBUG - Entry ID is 170
2018-02-06 11:51:01,403 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 11:51:01,404 - DEBUG - OCA ID is 1
2018-02-06 11:51:01,404 - DEBUG - Connecting to IBController
2018-02-06 11:51:02,410 - DEBUG - Connected to IBController
2018-02-06 11:51:02,410 - DEBUG - Position requested
2018-02-06 11:51:02,411 - DEBUG - Pos Mgmt 0
2018-02-06 11:51:02,411 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000214DDA0>, pos=0, avgCost=0.0>
2018-02-06 11:51:02,411 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 11:51:02,411 - DEBUG - ccy2 Currency with position is USD
2018-02-06 11:51:02,413 - DEBUG - Position is 0
2018-02-06 11:51:02,413 - DEBUG - Pos Mgmt -1
2018-02-06 11:51:02,413 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000214DC50>, pos=-1, avgCost=28787.1>
2018-02-06 11:51:02,414 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 11:51:02,414 - DEBUG - ccy2 Currency with position is USD
2018-02-06 11:51:02,414 - DEBUG - Position is -1
2018-02-06 11:51:02,414 - DEBUG - In Position
2018-02-06 11:51:02,414 - DEBUG - Position is 1
2018-02-06 11:51:02,414 - DEBUG - Pos Mgmt -12987
2018-02-06 11:51:02,414 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000214DF28>, pos=-12987, avgCost=0.95368235>
2018-02-06 11:51:02,415 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 11:51:02,415 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 11:51:02,415 - DEBUG - Position is -12987
2018-02-06 11:51:02,415 - DEBUG - Pos Mgmt 0
2018-02-06 11:51:02,417 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000214DD68>, pos=0, avgCost=0.0>
2018-02-06 11:51:02,417 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 11:51:02,417 - DEBUG - ccy2 Currency with position is USD
2018-02-06 11:51:02,417 - DEBUG - Position is 0
2018-02-06 11:51:03,411 - DEBUG - Open Orders requested
2018-02-06 11:51:03,414 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x000000000214DF28>, order=<ib.ext.Order.Order object at 0x000000000214DDD8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021E1198>>
2018-02-06 11:51:03,414 - DEBUG - Order OrderID 171
2018-02-06 11:51:03,414 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 11:51:03,415 - DEBUG - Order status PreSubmitted
2018-02-06 11:51:03,415 - DEBUG - Order Identification 171
2018-02-06 11:51:03,415 - DEBUG - Order Identification <class 'int'>
2018-02-06 11:51:03,415 - DEBUG - Profit ID from database is 170
2018-02-06 11:51:03,417 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 11:51:03,417 - DEBUG - Stop ID database is 171
2018-02-06 11:51:03,417 - DEBUG - Entry ID database is 170
2018-02-06 11:51:03,421 - DEBUG - Stop API ID is 171
2018-02-06 11:51:05,413 - DEBUG - Connecting to database
2018-02-06 11:51:05,421 - DEBUG - Connected to database
2018-02-06 11:51:05,423 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 11:51:05,423 - DEBUG - Stop loss value is 74.22
2018-02-06 11:51:05,426 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 11:51:05,426 - DEBUG - Stop loss value is 61.3
2018-02-06 11:51:05,427 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 11:51:05,427 - DEBUG - EntryPrice value is 72.25
2018-02-06 11:51:05,428 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 11:51:05,430 - DEBUG - Stop quantity 1
2018-02-06 11:51:05,430 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 11:51:05,430 - DEBUG - Direction is Short
2018-02-06 11:51:05,433 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 11:51:05,433 - DEBUG - Count is 1
2018-02-06 11:51:05,434 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 11:51:05,434 - DEBUG - Stop Loss Flag is 1
2018-02-06 11:51:05,436 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 11:51:05,437 - DEBUG - Max ID Order is (171,)
2018-02-06 11:51:05,437 - DEBUG - Today is 2018-02-06
2018-02-06 11:51:05,437 - DEBUG - Day of the week 1
2018-02-06 11:51:05,437 - DEBUG - Yesterday is 02/05/2018
2018-02-06 11:51:05,437 - DEBUG - In Position is  1
2018-02-06 11:51:05,437 - DEBUG - In Position is  <class 'int'>
2018-02-06 11:51:05,438 - DEBUG - curStopLossFlag is  1
2018-02-06 11:51:05,438 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 11:51:05,438 - DEBUG - Checking if Entry has been filled
2018-02-06 11:51:05,438 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 11:51:05,440 - DEBUG - EntryPend is 0
2018-02-06 11:51:05,440 - DEBUG - Try to Cancel Stop
2018-02-06 11:51:05,440 - DEBUG - Stop API ID 171
2018-02-06 11:51:05,441 - DEBUG - Profit API ID 0
2018-02-06 11:51:05,441 - DEBUG - Stop API ID <class 'int'>
2018-02-06 11:51:05,441 - DEBUG - Profit API ID <class 'int'>
2018-02-06 11:51:05,441 - DEBUG - Pos is 1
2018-02-06 11:51:05,443 - DEBUG - CurCount is 1
2018-02-06 11:51:05,443 - DEBUG - In Pos 1
2018-02-06 11:51:05,443 - DEBUG - Stop ID is 171
2018-02-06 11:51:05,443 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 11:51:05,444 - DEBUG - EntryPend is 0
2018-02-06 11:51:05,444 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 11:51:05,444 - DEBUG - Entry Date is 10
2018-02-06 11:51:05,446 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 11:51:05,446 - DEBUG - Order Profit ID is 170
2018-02-06 11:51:05,446 - DEBUG - Order Entry ID is 170
2018-02-06 11:51:05,446 - DEBUG - API ID is  0
2018-02-06 11:51:05,447 - DEBUG - Current Position is 1
2018-02-06 11:51:05,447 - DEBUG - Current Position is <class 'str'>
2018-02-06 11:51:05,447 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 11:51:05,447 - DEBUG - Time is 11
2018-02-06 11:51:05,447 - DEBUG - Time is <class 'int'>
2018-02-06 11:51:05,447 - DEBUG - Time is 51
2018-02-06 11:51:05,447 - DEBUG - Time is <class 'int'>
2018-02-06 11:51:05,447 - DEBUG - Disconnected from IBController
2018-02-06 11:51:05,448 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 11:56:01,369 - DEBUG - ****************************************************
2018-02-06 11:56:01,371 - DEBUG - Current Time is 11:56AM
2018-02-06 11:56:01,371 - DEBUG - Starting Pos Mgmt H E
2018-02-06 11:56:01,371 - DEBUG - Connecting to database
2018-02-06 11:56:01,405 - DEBUG - Connected to database
2018-02-06 11:56:01,405 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 11:56:01,407 - DEBUG - Order Profit is 170
2018-02-06 11:56:01,407 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 11:56:01,410 - DEBUG - Stop ID is 171
2018-02-06 11:56:01,410 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 11:56:01,411 - DEBUG - Entry ID is 170
2018-02-06 11:56:01,411 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 11:56:01,414 - DEBUG - OCA ID is 1
2018-02-06 11:56:01,414 - DEBUG - Connecting to IBController
2018-02-06 11:56:02,420 - DEBUG - Connected to IBController
2018-02-06 11:56:02,420 - DEBUG - Position requested
2018-02-06 11:56:02,421 - DEBUG - Pos Mgmt 0
2018-02-06 11:56:02,421 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000217DB38>, pos=0, avgCost=0.0>
2018-02-06 11:56:02,423 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 11:56:02,423 - DEBUG - ccy2 Currency with position is USD
2018-02-06 11:56:02,423 - DEBUG - Position is 0
2018-02-06 11:56:02,424 - DEBUG - Pos Mgmt -1
2018-02-06 11:56:02,424 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000217DCF8>, pos=-1, avgCost=28787.1>
2018-02-06 11:56:02,424 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 11:56:02,424 - DEBUG - ccy2 Currency with position is USD
2018-02-06 11:56:02,424 - DEBUG - Position is -1
2018-02-06 11:56:02,424 - DEBUG - In Position
2018-02-06 11:56:02,424 - DEBUG - Position is 1
2018-02-06 11:56:02,426 - DEBUG - Pos Mgmt -12987
2018-02-06 11:56:02,426 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000217DF28>, pos=-12987, avgCost=0.95368235>
2018-02-06 11:56:02,426 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 11:56:02,426 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 11:56:02,427 - DEBUG - Position is -12987
2018-02-06 11:56:02,427 - DEBUG - Pos Mgmt 0
2018-02-06 11:56:02,427 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000217DE10>, pos=0, avgCost=0.0>
2018-02-06 11:56:02,427 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 11:56:02,427 - DEBUG - ccy2 Currency with position is USD
2018-02-06 11:56:02,427 - DEBUG - Position is 0
2018-02-06 11:56:03,421 - DEBUG - Open Orders requested
2018-02-06 11:56:03,424 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x000000000217DF60>, order=<ib.ext.Order.Order object at 0x000000000217DB00>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002211208>>
2018-02-06 11:56:03,424 - DEBUG - Order OrderID 171
2018-02-06 11:56:03,424 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 11:56:03,426 - DEBUG - Order status PreSubmitted
2018-02-06 11:56:03,426 - DEBUG - Order Identification 171
2018-02-06 11:56:03,426 - DEBUG - Order Identification <class 'int'>
2018-02-06 11:56:03,427 - DEBUG - Profit ID from database is 170
2018-02-06 11:56:03,427 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 11:56:03,427 - DEBUG - Stop ID database is 171
2018-02-06 11:56:03,427 - DEBUG - Entry ID database is 170
2018-02-06 11:56:03,427 - DEBUG - Stop API ID is 171
2018-02-06 11:56:05,424 - DEBUG - Connecting to database
2018-02-06 11:56:05,431 - DEBUG - Connected to database
2018-02-06 11:56:05,434 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 11:56:05,434 - DEBUG - Stop loss value is 74.22
2018-02-06 11:56:05,436 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 11:56:05,436 - DEBUG - Stop loss value is 61.3
2018-02-06 11:56:05,437 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 11:56:05,437 - DEBUG - EntryPrice value is 72.25
2018-02-06 11:56:05,438 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 11:56:05,440 - DEBUG - Stop quantity 1
2018-02-06 11:56:05,440 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 11:56:05,441 - DEBUG - Direction is Short
2018-02-06 11:56:05,443 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 11:56:05,443 - DEBUG - Count is 1
2018-02-06 11:56:05,444 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 11:56:05,444 - DEBUG - Stop Loss Flag is 1
2018-02-06 11:56:05,447 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 11:56:05,447 - DEBUG - Max ID Order is (171,)
2018-02-06 11:56:05,447 - DEBUG - Today is 2018-02-06
2018-02-06 11:56:05,447 - DEBUG - Day of the week 1
2018-02-06 11:56:05,447 - DEBUG - Yesterday is 02/05/2018
2018-02-06 11:56:05,447 - DEBUG - In Position is  1
2018-02-06 11:56:05,447 - DEBUG - In Position is  <class 'int'>
2018-02-06 11:56:05,448 - DEBUG - curStopLossFlag is  1
2018-02-06 11:56:05,448 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 11:56:05,448 - DEBUG - Checking if Entry has been filled
2018-02-06 11:56:05,448 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 11:56:05,450 - DEBUG - EntryPend is 0
2018-02-06 11:56:05,450 - DEBUG - Try to Cancel Stop
2018-02-06 11:56:05,450 - DEBUG - Stop API ID 171
2018-02-06 11:56:05,451 - DEBUG - Profit API ID 0
2018-02-06 11:56:05,451 - DEBUG - Stop API ID <class 'int'>
2018-02-06 11:56:05,451 - DEBUG - Profit API ID <class 'int'>
2018-02-06 11:56:05,451 - DEBUG - Pos is 1
2018-02-06 11:56:05,453 - DEBUG - CurCount is 1
2018-02-06 11:56:05,453 - DEBUG - In Pos 1
2018-02-06 11:56:05,453 - DEBUG - Stop ID is 171
2018-02-06 11:56:05,453 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 11:56:05,454 - DEBUG - EntryPend is 0
2018-02-06 11:56:05,454 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 11:56:05,454 - DEBUG - Entry Date is 10
2018-02-06 11:56:05,456 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 11:56:05,456 - DEBUG - Order Profit ID is 170
2018-02-06 11:56:05,456 - DEBUG - Order Entry ID is 170
2018-02-06 11:56:05,456 - DEBUG - API ID is  0
2018-02-06 11:56:05,457 - DEBUG - Current Position is 1
2018-02-06 11:56:05,457 - DEBUG - Current Position is <class 'str'>
2018-02-06 11:56:05,457 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 11:56:05,457 - DEBUG - Time is 11
2018-02-06 11:56:05,457 - DEBUG - Time is <class 'int'>
2018-02-06 11:56:05,457 - DEBUG - Time is 56
2018-02-06 11:56:05,457 - DEBUG - Time is <class 'int'>
2018-02-06 11:56:05,457 - DEBUG - Disconnected from IBController
2018-02-06 11:56:05,459 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 12:01:01,374 - DEBUG - ****************************************************
2018-02-06 12:01:01,374 - DEBUG - Current Time is 12:01PM
2018-02-06 12:01:01,375 - DEBUG - Starting Pos Mgmt H E
2018-02-06 12:01:01,375 - DEBUG - Connecting to database
2018-02-06 12:01:01,413 - DEBUG - Connected to database
2018-02-06 12:01:01,414 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 12:01:01,414 - DEBUG - Order Profit is 170
2018-02-06 12:01:01,415 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 12:01:01,417 - DEBUG - Stop ID is 171
2018-02-06 12:01:01,417 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 12:01:01,418 - DEBUG - Entry ID is 170
2018-02-06 12:01:01,420 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 12:01:01,421 - DEBUG - OCA ID is 1
2018-02-06 12:01:01,421 - DEBUG - Connecting to IBController
2018-02-06 12:01:02,427 - DEBUG - Connected to IBController
2018-02-06 12:01:02,427 - DEBUG - Position requested
2018-02-06 12:01:02,428 - DEBUG - Pos Mgmt 0
2018-02-06 12:01:02,428 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000216DDD8>, pos=0, avgCost=0.0>
2018-02-06 12:01:02,430 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 12:01:02,430 - DEBUG - ccy2 Currency with position is USD
2018-02-06 12:01:02,430 - DEBUG - Position is 0
2018-02-06 12:01:02,430 - DEBUG - Pos Mgmt -1
2018-02-06 12:01:02,430 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000216DCF8>, pos=-1, avgCost=28787.1>
2018-02-06 12:01:02,431 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 12:01:02,431 - DEBUG - ccy2 Currency with position is USD
2018-02-06 12:01:02,431 - DEBUG - Position is -1
2018-02-06 12:01:02,431 - DEBUG - In Position
2018-02-06 12:01:02,431 - DEBUG - Position is 1
2018-02-06 12:01:02,433 - DEBUG - Pos Mgmt -12987
2018-02-06 12:01:02,433 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000216DF28>, pos=-12987, avgCost=0.95368235>
2018-02-06 12:01:02,434 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 12:01:02,434 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 12:01:02,434 - DEBUG - Position is -12987
2018-02-06 12:01:02,434 - DEBUG - Pos Mgmt 0
2018-02-06 12:01:02,434 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000216DE10>, pos=0, avgCost=0.0>
2018-02-06 12:01:02,434 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 12:01:02,434 - DEBUG - ccy2 Currency with position is USD
2018-02-06 12:01:02,436 - DEBUG - Position is 0
2018-02-06 12:01:03,427 - DEBUG - Open Orders requested
2018-02-06 12:01:03,430 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x000000000216DF28>, order=<ib.ext.Order.Order object at 0x000000000216DDA0>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002202198>>
2018-02-06 12:01:03,430 - DEBUG - Order OrderID 171
2018-02-06 12:01:03,430 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 12:01:03,431 - DEBUG - Order status PreSubmitted
2018-02-06 12:01:03,431 - DEBUG - Order Identification 171
2018-02-06 12:01:03,431 - DEBUG - Order Identification <class 'int'>
2018-02-06 12:01:03,433 - DEBUG - Profit ID from database is 170
2018-02-06 12:01:03,433 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 12:01:03,433 - DEBUG - Stop ID database is 171
2018-02-06 12:01:03,434 - DEBUG - Entry ID database is 170
2018-02-06 12:01:03,434 - DEBUG - Stop API ID is 171
2018-02-06 12:01:05,428 - DEBUG - Connecting to database
2018-02-06 12:01:05,437 - DEBUG - Connected to database
2018-02-06 12:01:05,437 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 12:01:05,437 - DEBUG - Stop loss value is 74.22
2018-02-06 12:01:05,440 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 12:01:05,440 - DEBUG - Stop loss value is 61.3
2018-02-06 12:01:05,441 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 12:01:05,441 - DEBUG - EntryPrice value is 72.25
2018-02-06 12:01:05,444 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 12:01:05,444 - DEBUG - Stop quantity 1
2018-02-06 12:01:05,444 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 12:01:05,446 - DEBUG - Direction is Short
2018-02-06 12:01:05,447 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 12:01:05,447 - DEBUG - Count is 1
2018-02-06 12:01:05,448 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 12:01:05,448 - DEBUG - Stop Loss Flag is 1
2018-02-06 12:01:05,450 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 12:01:05,450 - DEBUG - Max ID Order is (171,)
2018-02-06 12:01:05,450 - DEBUG - Today is 2018-02-06
2018-02-06 12:01:05,451 - DEBUG - Day of the week 1
2018-02-06 12:01:05,451 - DEBUG - Yesterday is 02/05/2018
2018-02-06 12:01:05,451 - DEBUG - In Position is  1
2018-02-06 12:01:05,453 - DEBUG - In Position is  <class 'int'>
2018-02-06 12:01:05,453 - DEBUG - curStopLossFlag is  1
2018-02-06 12:01:05,453 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 12:01:05,453 - DEBUG - Checking if Entry has been filled
2018-02-06 12:01:05,453 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 12:01:05,454 - DEBUG - EntryPend is 0
2018-02-06 12:01:05,456 - DEBUG - Try to Cancel Stop
2018-02-06 12:01:05,456 - DEBUG - Stop API ID 171
2018-02-06 12:01:05,456 - DEBUG - Profit API ID 0
2018-02-06 12:01:05,456 - DEBUG - Stop API ID <class 'int'>
2018-02-06 12:01:05,457 - DEBUG - Profit API ID <class 'int'>
2018-02-06 12:01:05,457 - DEBUG - Pos is 1
2018-02-06 12:01:05,457 - DEBUG - CurCount is 1
2018-02-06 12:01:05,457 - DEBUG - In Pos 1
2018-02-06 12:01:05,457 - DEBUG - Stop ID is 171
2018-02-06 12:01:05,457 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 12:01:05,459 - DEBUG - EntryPend is 0
2018-02-06 12:01:05,460 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 12:01:05,460 - DEBUG - Entry Date is 10
2018-02-06 12:01:05,460 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 12:01:05,460 - DEBUG - Order Profit ID is 170
2018-02-06 12:01:05,460 - DEBUG - Order Entry ID is 170
2018-02-06 12:01:05,460 - DEBUG - API ID is  0
2018-02-06 12:01:05,460 - DEBUG - Current Position is 1
2018-02-06 12:01:05,460 - DEBUG - Current Position is <class 'str'>
2018-02-06 12:01:05,461 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 12:01:05,461 - DEBUG - Time is 12
2018-02-06 12:01:05,461 - DEBUG - Time is <class 'int'>
2018-02-06 12:01:05,461 - DEBUG - Time is 1
2018-02-06 12:01:05,463 - DEBUG - Time is <class 'int'>
2018-02-06 12:01:05,463 - DEBUG - Disconnected from IBController
2018-02-06 12:01:05,463 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 12:06:01,372 - DEBUG - ****************************************************
2018-02-06 12:06:01,374 - DEBUG - Current Time is 12:06PM
2018-02-06 12:06:01,374 - DEBUG - Starting Pos Mgmt H E
2018-02-06 12:06:01,374 - DEBUG - Connecting to database
2018-02-06 12:06:01,421 - DEBUG - Connected to database
2018-02-06 12:06:01,421 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 12:06:01,423 - DEBUG - Order Profit is 170
2018-02-06 12:06:01,424 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 12:06:01,424 - DEBUG - Stop ID is 171
2018-02-06 12:06:01,424 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 12:06:01,427 - DEBUG - Entry ID is 170
2018-02-06 12:06:01,427 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 12:06:01,428 - DEBUG - OCA ID is 1
2018-02-06 12:06:01,428 - DEBUG - Connecting to IBController
2018-02-06 12:06:02,434 - DEBUG - Connected to IBController
2018-02-06 12:06:02,434 - DEBUG - Position requested
2018-02-06 12:06:02,436 - DEBUG - Pos Mgmt 0
2018-02-06 12:06:02,436 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210DB38>, pos=0, avgCost=0.0>
2018-02-06 12:06:02,437 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 12:06:02,437 - DEBUG - ccy2 Currency with position is USD
2018-02-06 12:06:02,437 - DEBUG - Position is 0
2018-02-06 12:06:02,437 - DEBUG - Pos Mgmt -1
2018-02-06 12:06:02,437 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210DAC8>, pos=-1, avgCost=28787.1>
2018-02-06 12:06:02,437 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 12:06:02,437 - DEBUG - ccy2 Currency with position is USD
2018-02-06 12:06:02,438 - DEBUG - Position is -1
2018-02-06 12:06:02,438 - DEBUG - In Position
2018-02-06 12:06:02,438 - DEBUG - Position is 1
2018-02-06 12:06:02,440 - DEBUG - Pos Mgmt -12987
2018-02-06 12:06:02,440 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210DF28>, pos=-12987, avgCost=0.95368235>
2018-02-06 12:06:02,440 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 12:06:02,440 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 12:06:02,440 - DEBUG - Position is -12987
2018-02-06 12:06:02,440 - DEBUG - Pos Mgmt 0
2018-02-06 12:06:02,440 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210DCC0>, pos=0, avgCost=0.0>
2018-02-06 12:06:02,441 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 12:06:02,441 - DEBUG - ccy2 Currency with position is USD
2018-02-06 12:06:02,441 - DEBUG - Position is 0
2018-02-06 12:06:03,436 - DEBUG - Open Orders requested
2018-02-06 12:06:03,437 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x000000000210DF60>, order=<ib.ext.Order.Order object at 0x000000000210DD30>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A2208>>
2018-02-06 12:06:03,438 - DEBUG - Order OrderID 171
2018-02-06 12:06:03,438 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 12:06:03,440 - DEBUG - Order status PreSubmitted
2018-02-06 12:06:03,440 - DEBUG - Order Identification 171
2018-02-06 12:06:03,440 - DEBUG - Order Identification <class 'int'>
2018-02-06 12:06:03,440 - DEBUG - Profit ID from database is 170
2018-02-06 12:06:03,440 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 12:06:03,440 - DEBUG - Stop ID database is 171
2018-02-06 12:06:03,440 - DEBUG - Entry ID database is 170
2018-02-06 12:06:03,440 - DEBUG - Stop API ID is 171
2018-02-06 12:06:05,438 - DEBUG - Connecting to database
2018-02-06 12:06:05,446 - DEBUG - Connected to database
2018-02-06 12:06:05,447 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 12:06:05,447 - DEBUG - Stop loss value is 74.22
2018-02-06 12:06:05,450 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 12:06:05,450 - DEBUG - Stop loss value is 61.3
2018-02-06 12:06:05,450 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 12:06:05,451 - DEBUG - EntryPrice value is 72.25
2018-02-06 12:06:05,453 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 12:06:05,453 - DEBUG - Stop quantity 1
2018-02-06 12:06:05,454 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 12:06:05,454 - DEBUG - Direction is Short
2018-02-06 12:06:05,457 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 12:06:05,457 - DEBUG - Count is 1
2018-02-06 12:06:05,457 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 12:06:05,459 - DEBUG - Stop Loss Flag is 1
2018-02-06 12:06:05,460 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 12:06:05,460 - DEBUG - Max ID Order is (171,)
2018-02-06 12:06:05,460 - DEBUG - Today is 2018-02-06
2018-02-06 12:06:05,460 - DEBUG - Day of the week 1
2018-02-06 12:06:05,460 - DEBUG - Yesterday is 02/05/2018
2018-02-06 12:06:05,461 - DEBUG - In Position is  1
2018-02-06 12:06:05,461 - DEBUG - In Position is  <class 'int'>
2018-02-06 12:06:05,461 - DEBUG - curStopLossFlag is  1
2018-02-06 12:06:05,461 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 12:06:05,463 - DEBUG - Checking if Entry has been filled
2018-02-06 12:06:05,463 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 12:06:05,463 - DEBUG - EntryPend is 0
2018-02-06 12:06:05,464 - DEBUG - Try to Cancel Stop
2018-02-06 12:06:05,464 - DEBUG - Stop API ID 171
2018-02-06 12:06:05,464 - DEBUG - Profit API ID 0
2018-02-06 12:06:05,464 - DEBUG - Stop API ID <class 'int'>
2018-02-06 12:06:05,464 - DEBUG - Profit API ID <class 'int'>
2018-02-06 12:06:05,466 - DEBUG - Pos is 1
2018-02-06 12:06:05,466 - DEBUG - CurCount is 1
2018-02-06 12:06:05,466 - DEBUG - In Pos 1
2018-02-06 12:06:05,466 - DEBUG - Stop ID is 171
2018-02-06 12:06:05,467 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 12:06:05,467 - DEBUG - EntryPend is 0
2018-02-06 12:06:05,467 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 12:06:05,469 - DEBUG - Entry Date is 10
2018-02-06 12:06:05,469 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 12:06:05,469 - DEBUG - Order Profit ID is 170
2018-02-06 12:06:05,469 - DEBUG - Order Entry ID is 170
2018-02-06 12:06:05,470 - DEBUG - API ID is  0
2018-02-06 12:06:05,470 - DEBUG - Current Position is 1
2018-02-06 12:06:05,470 - DEBUG - Current Position is <class 'str'>
2018-02-06 12:06:05,470 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 12:06:05,470 - DEBUG - Time is 12
2018-02-06 12:06:05,470 - DEBUG - Time is <class 'int'>
2018-02-06 12:06:05,470 - DEBUG - Time is 6
2018-02-06 12:06:05,470 - DEBUG - Time is <class 'int'>
2018-02-06 12:06:05,471 - DEBUG - Disconnected from IBController
2018-02-06 12:06:05,471 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 12:11:01,369 - DEBUG - ****************************************************
2018-02-06 12:11:01,371 - DEBUG - Current Time is 12:11PM
2018-02-06 12:11:01,371 - DEBUG - Starting Pos Mgmt H E
2018-02-06 12:11:01,371 - DEBUG - Connecting to database
2018-02-06 12:11:01,414 - DEBUG - Connected to database
2018-02-06 12:11:01,414 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 12:11:01,417 - DEBUG - Order Profit is 170
2018-02-06 12:11:01,417 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 12:11:01,417 - DEBUG - Stop ID is 171
2018-02-06 12:11:01,418 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 12:11:01,420 - DEBUG - Entry ID is 170
2018-02-06 12:11:01,421 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 12:11:01,421 - DEBUG - OCA ID is 1
2018-02-06 12:11:01,421 - DEBUG - Connecting to IBController
2018-02-06 12:11:02,440 - DEBUG - Connected to IBController
2018-02-06 12:11:02,440 - DEBUG - Position requested
2018-02-06 12:11:02,443 - DEBUG - Pos Mgmt 0
2018-02-06 12:11:02,443 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212CD68>, pos=0, avgCost=0.0>
2018-02-06 12:11:02,444 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 12:11:02,444 - DEBUG - ccy2 Currency with position is USD
2018-02-06 12:11:02,444 - DEBUG - Position is 0
2018-02-06 12:11:02,444 - DEBUG - Pos Mgmt -1
2018-02-06 12:11:02,444 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212CBA8>, pos=-1, avgCost=28787.1>
2018-02-06 12:11:02,446 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 12:11:02,446 - DEBUG - ccy2 Currency with position is USD
2018-02-06 12:11:02,446 - DEBUG - Position is -1
2018-02-06 12:11:02,446 - DEBUG - In Position
2018-02-06 12:11:02,447 - DEBUG - Position is 1
2018-02-06 12:11:02,447 - DEBUG - Pos Mgmt -12987
2018-02-06 12:11:02,447 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212CF98>, pos=-12987, avgCost=0.95368235>
2018-02-06 12:11:02,447 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 12:11:02,447 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 12:11:02,447 - DEBUG - Position is -12987
2018-02-06 12:11:02,448 - DEBUG - Pos Mgmt 0
2018-02-06 12:11:02,448 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212CA58>, pos=0, avgCost=0.0>
2018-02-06 12:11:02,448 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 12:11:02,450 - DEBUG - ccy2 Currency with position is USD
2018-02-06 12:11:02,450 - DEBUG - Position is 0
2018-02-06 12:11:03,443 - DEBUG - Open Orders requested
2018-02-06 12:11:03,444 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x000000000212CF98>, order=<ib.ext.Order.Order object at 0x000000000212CDD8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C1198>>
2018-02-06 12:11:03,446 - DEBUG - Order OrderID 171
2018-02-06 12:11:03,446 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 12:11:03,447 - DEBUG - Order status PreSubmitted
2018-02-06 12:11:03,447 - DEBUG - Order Identification 171
2018-02-06 12:11:03,447 - DEBUG - Order Identification <class 'int'>
2018-02-06 12:11:03,447 - DEBUG - Profit ID from database is 170
2018-02-06 12:11:03,447 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 12:11:03,447 - DEBUG - Stop ID database is 171
2018-02-06 12:11:03,447 - DEBUG - Entry ID database is 170
2018-02-06 12:11:03,448 - DEBUG - Stop API ID is 171
2018-02-06 12:11:05,443 - DEBUG - Connecting to database
2018-02-06 12:11:05,450 - DEBUG - Connected to database
2018-02-06 12:11:05,451 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 12:11:05,451 - DEBUG - Stop loss value is 74.22
2018-02-06 12:11:05,453 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 12:11:05,453 - DEBUG - Stop loss value is 61.3
2018-02-06 12:11:05,456 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 12:11:05,456 - DEBUG - EntryPrice value is 72.25
2018-02-06 12:11:05,457 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 12:11:05,457 - DEBUG - Stop quantity 1
2018-02-06 12:11:05,459 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 12:11:05,460 - DEBUG - Direction is Short
2018-02-06 12:11:05,460 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 12:11:05,460 - DEBUG - Count is 1
2018-02-06 12:11:05,463 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 12:11:05,463 - DEBUG - Stop Loss Flag is 1
2018-02-06 12:11:05,464 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 12:11:05,464 - DEBUG - Max ID Order is (171,)
2018-02-06 12:11:05,464 - DEBUG - Today is 2018-02-06
2018-02-06 12:11:05,466 - DEBUG - Day of the week 1
2018-02-06 12:11:05,466 - DEBUG - Yesterday is 02/05/2018
2018-02-06 12:11:05,466 - DEBUG - In Position is  1
2018-02-06 12:11:05,467 - DEBUG - In Position is  <class 'int'>
2018-02-06 12:11:05,467 - DEBUG - curStopLossFlag is  1
2018-02-06 12:11:05,467 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 12:11:05,467 - DEBUG - Checking if Entry has been filled
2018-02-06 12:11:05,467 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 12:11:05,476 - DEBUG - EntryPend is 0
2018-02-06 12:11:05,476 - DEBUG - Try to Cancel Stop
2018-02-06 12:11:05,476 - DEBUG - Stop API ID 171
2018-02-06 12:11:05,476 - DEBUG - Profit API ID 0
2018-02-06 12:11:05,476 - DEBUG - Stop API ID <class 'int'>
2018-02-06 12:11:05,476 - DEBUG - Profit API ID <class 'int'>
2018-02-06 12:11:05,476 - DEBUG - Pos is 1
2018-02-06 12:11:05,477 - DEBUG - CurCount is 1
2018-02-06 12:11:05,477 - DEBUG - In Pos 1
2018-02-06 12:11:05,477 - DEBUG - Stop ID is 171
2018-02-06 12:11:05,479 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 12:11:05,480 - DEBUG - EntryPend is 0
2018-02-06 12:11:05,480 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 12:11:05,480 - DEBUG - Entry Date is 10
2018-02-06 12:11:05,480 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 12:11:05,480 - DEBUG - Order Profit ID is 170
2018-02-06 12:11:05,480 - DEBUG - Order Entry ID is 170
2018-02-06 12:11:05,482 - DEBUG - API ID is  0
2018-02-06 12:11:05,482 - DEBUG - Current Position is 1
2018-02-06 12:11:05,482 - DEBUG - Current Position is <class 'str'>
2018-02-06 12:11:05,482 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 12:11:05,483 - DEBUG - Time is 12
2018-02-06 12:11:05,483 - DEBUG - Time is <class 'int'>
2018-02-06 12:11:05,483 - DEBUG - Time is 11
2018-02-06 12:11:05,483 - DEBUG - Time is <class 'int'>
2018-02-06 12:11:05,483 - DEBUG - Disconnected from IBController
2018-02-06 12:11:05,483 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 12:16:01,375 - DEBUG - ****************************************************
2018-02-06 12:16:01,377 - DEBUG - Current Time is 12:16PM
2018-02-06 12:16:01,377 - DEBUG - Starting Pos Mgmt H E
2018-02-06 12:16:01,378 - DEBUG - Connecting to database
2018-02-06 12:16:01,401 - DEBUG - Connected to database
2018-02-06 12:16:01,401 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 12:16:01,404 - DEBUG - Order Profit is 170
2018-02-06 12:16:01,404 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 12:16:01,404 - DEBUG - Stop ID is 171
2018-02-06 12:16:01,405 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 12:16:01,407 - DEBUG - Entry ID is 170
2018-02-06 12:16:01,407 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 12:16:01,408 - DEBUG - OCA ID is 1
2018-02-06 12:16:01,408 - DEBUG - Connecting to IBController
2018-02-06 12:16:02,414 - DEBUG - Connected to IBController
2018-02-06 12:16:02,414 - DEBUG - Position requested
2018-02-06 12:16:02,417 - DEBUG - Pos Mgmt 0
2018-02-06 12:16:02,417 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210DB38>, pos=0, avgCost=0.0>
2018-02-06 12:16:02,417 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 12:16:02,417 - DEBUG - ccy2 Currency with position is USD
2018-02-06 12:16:02,417 - DEBUG - Position is 0
2018-02-06 12:16:02,418 - DEBUG - Pos Mgmt -1
2018-02-06 12:16:02,418 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210DC50>, pos=-1, avgCost=28787.1>
2018-02-06 12:16:02,418 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 12:16:02,418 - DEBUG - ccy2 Currency with position is USD
2018-02-06 12:16:02,420 - DEBUG - Position is -1
2018-02-06 12:16:02,420 - DEBUG - In Position
2018-02-06 12:16:02,420 - DEBUG - Position is 1
2018-02-06 12:16:02,420 - DEBUG - Pos Mgmt -12987
2018-02-06 12:16:02,421 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210DF28>, pos=-12987, avgCost=0.95368235>
2018-02-06 12:16:02,421 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 12:16:02,421 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 12:16:02,421 - DEBUG - Position is -12987
2018-02-06 12:16:02,421 - DEBUG - Pos Mgmt 0
2018-02-06 12:16:02,421 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210DE48>, pos=0, avgCost=0.0>
2018-02-06 12:16:02,423 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 12:16:02,423 - DEBUG - ccy2 Currency with position is USD
2018-02-06 12:16:02,423 - DEBUG - Position is 0
2018-02-06 12:16:03,426 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x000000000210DF60>, order=<ib.ext.Order.Order object at 0x000000000210DF28>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A11D0>>
2018-02-06 12:16:03,417 - DEBUG - Open Orders requested
2018-02-06 12:16:03,426 - DEBUG - Order OrderID 171
2018-02-06 12:16:03,427 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 12:16:03,427 - DEBUG - Order status PreSubmitted
2018-02-06 12:16:03,427 - DEBUG - Order Identification 171
2018-02-06 12:16:03,427 - DEBUG - Order Identification <class 'int'>
2018-02-06 12:16:03,427 - DEBUG - Profit ID from database is 170
2018-02-06 12:16:03,427 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 12:16:03,428 - DEBUG - Stop ID database is 171
2018-02-06 12:16:03,428 - DEBUG - Entry ID database is 170
2018-02-06 12:16:03,428 - DEBUG - Stop API ID is 171
2018-02-06 12:16:05,430 - DEBUG - Connecting to database
2018-02-06 12:16:05,437 - DEBUG - Connected to database
2018-02-06 12:16:05,438 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 12:16:05,440 - DEBUG - Stop loss value is 74.22
2018-02-06 12:16:05,440 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 12:16:05,440 - DEBUG - Stop loss value is 61.3
2018-02-06 12:16:05,443 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 12:16:05,443 - DEBUG - EntryPrice value is 72.25
2018-02-06 12:16:05,444 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 12:16:05,444 - DEBUG - Stop quantity 1
2018-02-06 12:16:05,446 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 12:16:05,447 - DEBUG - Direction is Short
2018-02-06 12:16:05,447 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 12:16:05,447 - DEBUG - Count is 1
2018-02-06 12:16:05,450 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 12:16:05,450 - DEBUG - Stop Loss Flag is 1
2018-02-06 12:16:05,451 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 12:16:05,451 - DEBUG - Max ID Order is (171,)
2018-02-06 12:16:05,451 - DEBUG - Today is 2018-02-06
2018-02-06 12:16:05,453 - DEBUG - Day of the week 1
2018-02-06 12:16:05,453 - DEBUG - Yesterday is 02/05/2018
2018-02-06 12:16:05,453 - DEBUG - In Position is  1
2018-02-06 12:16:05,453 - DEBUG - In Position is  <class 'int'>
2018-02-06 12:16:05,453 - DEBUG - curStopLossFlag is  1
2018-02-06 12:16:05,453 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 12:16:05,453 - DEBUG - Checking if Entry has been filled
2018-02-06 12:16:05,454 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 12:16:05,456 - DEBUG - EntryPend is 0
2018-02-06 12:16:05,456 - DEBUG - Try to Cancel Stop
2018-02-06 12:16:05,457 - DEBUG - Stop API ID 171
2018-02-06 12:16:05,457 - DEBUG - Profit API ID 0
2018-02-06 12:16:05,457 - DEBUG - Stop API ID <class 'int'>
2018-02-06 12:16:05,457 - DEBUG - Profit API ID <class 'int'>
2018-02-06 12:16:05,457 - DEBUG - Pos is 1
2018-02-06 12:16:05,457 - DEBUG - CurCount is 1
2018-02-06 12:16:05,457 - DEBUG - In Pos 1
2018-02-06 12:16:05,457 - DEBUG - Stop ID is 171
2018-02-06 12:16:05,459 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 12:16:05,460 - DEBUG - EntryPend is 0
2018-02-06 12:16:05,460 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 12:16:05,460 - DEBUG - Entry Date is 10
2018-02-06 12:16:05,460 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 12:16:05,460 - DEBUG - Order Profit ID is 170
2018-02-06 12:16:05,460 - DEBUG - Order Entry ID is 170
2018-02-06 12:16:05,460 - DEBUG - API ID is  0
2018-02-06 12:16:05,461 - DEBUG - Current Position is 1
2018-02-06 12:16:05,461 - DEBUG - Current Position is <class 'str'>
2018-02-06 12:16:05,461 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 12:16:05,461 - DEBUG - Time is 12
2018-02-06 12:16:05,463 - DEBUG - Time is <class 'int'>
2018-02-06 12:16:05,463 - DEBUG - Time is 16
2018-02-06 12:16:05,463 - DEBUG - Time is <class 'int'>
2018-02-06 12:16:05,463 - DEBUG - Disconnected from IBController
2018-02-06 12:16:05,463 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 12:21:01,385 - DEBUG - ****************************************************
2018-02-06 12:21:01,387 - DEBUG - Current Time is 12:21PM
2018-02-06 12:21:01,387 - DEBUG - Starting Pos Mgmt H E
2018-02-06 12:21:01,387 - DEBUG - Connecting to database
2018-02-06 12:21:01,424 - DEBUG - Connected to database
2018-02-06 12:21:01,424 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 12:21:01,426 - DEBUG - Order Profit is 170
2018-02-06 12:21:01,426 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 12:21:01,427 - DEBUG - Stop ID is 171
2018-02-06 12:21:01,427 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 12:21:01,428 - DEBUG - Entry ID is 170
2018-02-06 12:21:01,430 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 12:21:01,430 - DEBUG - OCA ID is 1
2018-02-06 12:21:01,430 - DEBUG - Connecting to IBController
2018-02-06 12:21:02,437 - DEBUG - Connected to IBController
2018-02-06 12:21:02,437 - DEBUG - Position requested
2018-02-06 12:21:02,440 - DEBUG - Pos Mgmt 0
2018-02-06 12:21:02,440 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020BDE10>, pos=0, avgCost=0.0>
2018-02-06 12:21:02,440 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 12:21:02,440 - DEBUG - ccy2 Currency with position is USD
2018-02-06 12:21:02,440 - DEBUG - Position is 0
2018-02-06 12:21:02,441 - DEBUG - Pos Mgmt -1
2018-02-06 12:21:02,441 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020BDCC0>, pos=-1, avgCost=28787.1>
2018-02-06 12:21:02,441 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 12:21:02,443 - DEBUG - ccy2 Currency with position is USD
2018-02-06 12:21:02,443 - DEBUG - Position is -1
2018-02-06 12:21:02,443 - DEBUG - In Position
2018-02-06 12:21:02,444 - DEBUG - Position is 1
2018-02-06 12:21:02,444 - DEBUG - Pos Mgmt -12987
2018-02-06 12:21:02,444 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020BDF28>, pos=-12987, avgCost=0.95368235>
2018-02-06 12:21:02,444 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 12:21:02,444 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 12:21:02,444 - DEBUG - Position is -12987
2018-02-06 12:21:02,446 - DEBUG - Pos Mgmt 0
2018-02-06 12:21:02,446 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020BDD30>, pos=0, avgCost=0.0>
2018-02-06 12:21:02,446 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 12:21:02,447 - DEBUG - ccy2 Currency with position is USD
2018-02-06 12:21:02,447 - DEBUG - Position is 0
2018-02-06 12:21:03,438 - DEBUG - Open Orders requested
2018-02-06 12:21:03,443 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x00000000020BDF28>, order=<ib.ext.Order.Order object at 0x00000000020BDDA0>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002151198>>
2018-02-06 12:21:03,444 - DEBUG - Order OrderID 171
2018-02-06 12:21:03,444 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 12:21:03,444 - DEBUG - Order status PreSubmitted
2018-02-06 12:21:03,444 - DEBUG - Order Identification 171
2018-02-06 12:21:03,444 - DEBUG - Order Identification <class 'int'>
2018-02-06 12:21:03,444 - DEBUG - Profit ID from database is 170
2018-02-06 12:21:03,446 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 12:21:03,446 - DEBUG - Stop ID database is 171
2018-02-06 12:21:03,446 - DEBUG - Entry ID database is 170
2018-02-06 12:21:03,446 - DEBUG - Stop API ID is 171
2018-02-06 12:21:05,441 - DEBUG - Connecting to database
2018-02-06 12:21:05,450 - DEBUG - Connected to database
2018-02-06 12:21:05,450 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 12:21:05,451 - DEBUG - Stop loss value is 74.22
2018-02-06 12:21:05,453 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 12:21:05,453 - DEBUG - Stop loss value is 61.3
2018-02-06 12:21:05,454 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 12:21:05,454 - DEBUG - EntryPrice value is 72.25
2018-02-06 12:21:05,457 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 12:21:05,457 - DEBUG - Stop quantity 1
2018-02-06 12:21:05,459 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 12:21:05,459 - DEBUG - Direction is Short
2018-02-06 12:21:05,460 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 12:21:05,460 - DEBUG - Count is 1
2018-02-06 12:21:05,463 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 12:21:05,463 - DEBUG - Stop Loss Flag is 1
2018-02-06 12:21:05,464 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 12:21:05,464 - DEBUG - Max ID Order is (171,)
2018-02-06 12:21:05,464 - DEBUG - Today is 2018-02-06
2018-02-06 12:21:05,466 - DEBUG - Day of the week 1
2018-02-06 12:21:05,466 - DEBUG - Yesterday is 02/05/2018
2018-02-06 12:21:05,466 - DEBUG - In Position is  1
2018-02-06 12:21:05,467 - DEBUG - In Position is  <class 'int'>
2018-02-06 12:21:05,467 - DEBUG - curStopLossFlag is  1
2018-02-06 12:21:05,467 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 12:21:05,467 - DEBUG - Checking if Entry has been filled
2018-02-06 12:21:05,467 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 12:21:05,469 - DEBUG - EntryPend is 0
2018-02-06 12:21:05,469 - DEBUG - Try to Cancel Stop
2018-02-06 12:21:05,470 - DEBUG - Stop API ID 171
2018-02-06 12:21:05,470 - DEBUG - Profit API ID 0
2018-02-06 12:21:05,470 - DEBUG - Stop API ID <class 'int'>
2018-02-06 12:21:05,470 - DEBUG - Profit API ID <class 'int'>
2018-02-06 12:21:05,470 - DEBUG - Pos is 1
2018-02-06 12:21:05,470 - DEBUG - CurCount is 1
2018-02-06 12:21:05,470 - DEBUG - In Pos 1
2018-02-06 12:21:05,470 - DEBUG - Stop ID is 171
2018-02-06 12:21:05,471 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 12:21:05,473 - DEBUG - EntryPend is 0
2018-02-06 12:21:05,473 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 12:21:05,473 - DEBUG - Entry Date is 10
2018-02-06 12:21:05,473 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 12:21:05,473 - DEBUG - Order Profit ID is 170
2018-02-06 12:21:05,473 - DEBUG - Order Entry ID is 170
2018-02-06 12:21:05,474 - DEBUG - API ID is  0
2018-02-06 12:21:05,474 - DEBUG - Current Position is 1
2018-02-06 12:21:05,474 - DEBUG - Current Position is <class 'str'>
2018-02-06 12:21:05,474 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 12:21:05,474 - DEBUG - Time is 12
2018-02-06 12:21:05,476 - DEBUG - Time is <class 'int'>
2018-02-06 12:21:05,476 - DEBUG - Time is 21
2018-02-06 12:21:05,476 - DEBUG - Time is <class 'int'>
2018-02-06 12:21:05,476 - DEBUG - Disconnected from IBController
2018-02-06 12:21:05,476 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 12:26:01,375 - DEBUG - ****************************************************
2018-02-06 12:26:01,375 - DEBUG - Current Time is 12:26PM
2018-02-06 12:26:01,377 - DEBUG - Starting Pos Mgmt H E
2018-02-06 12:26:01,377 - DEBUG - Connecting to database
2018-02-06 12:26:01,410 - DEBUG - Connected to database
2018-02-06 12:26:01,410 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 12:26:01,411 - DEBUG - Order Profit is 170
2018-02-06 12:26:01,411 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 12:26:01,414 - DEBUG - Stop ID is 171
2018-02-06 12:26:01,414 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 12:26:01,414 - DEBUG - Entry ID is 170
2018-02-06 12:26:01,415 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 12:26:01,417 - DEBUG - OCA ID is 1
2018-02-06 12:26:01,417 - DEBUG - Connecting to IBController
2018-02-06 12:26:02,441 - DEBUG - Connected to IBController
2018-02-06 12:26:02,441 - DEBUG - Position requested
2018-02-06 12:26:02,444 - DEBUG - Pos Mgmt 0
2018-02-06 12:26:02,444 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212CB38>, pos=0, avgCost=0.0>
2018-02-06 12:26:02,444 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 12:26:02,444 - DEBUG - ccy2 Currency with position is USD
2018-02-06 12:26:02,444 - DEBUG - Position is 0
2018-02-06 12:26:02,446 - DEBUG - Pos Mgmt -1
2018-02-06 12:26:02,446 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212CBE0>, pos=-1, avgCost=28787.1>
2018-02-06 12:26:02,446 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 12:26:02,447 - DEBUG - ccy2 Currency with position is USD
2018-02-06 12:26:02,447 - DEBUG - Position is -1
2018-02-06 12:26:02,447 - DEBUG - In Position
2018-02-06 12:26:02,447 - DEBUG - Position is 1
2018-02-06 12:26:02,447 - DEBUG - Pos Mgmt -12987
2018-02-06 12:26:02,447 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212CF28>, pos=-12987, avgCost=0.95368235>
2018-02-06 12:26:02,447 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 12:26:02,448 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 12:26:02,448 - DEBUG - Position is -12987
2018-02-06 12:26:02,448 - DEBUG - Pos Mgmt 0
2018-02-06 12:26:02,450 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212CC18>, pos=0, avgCost=0.0>
2018-02-06 12:26:02,450 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 12:26:02,450 - DEBUG - ccy2 Currency with position is USD
2018-02-06 12:26:02,450 - DEBUG - Position is 0
2018-02-06 12:26:03,444 - DEBUG - Open Orders requested
2018-02-06 12:26:03,446 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x000000000212CF60>, order=<ib.ext.Order.Order object at 0x000000000212CB38>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C2208>>
2018-02-06 12:26:03,447 - DEBUG - Order OrderID 171
2018-02-06 12:26:03,447 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 12:26:03,447 - DEBUG - Order status PreSubmitted
2018-02-06 12:26:03,447 - DEBUG - Order Identification 171
2018-02-06 12:26:03,447 - DEBUG - Order Identification <class 'int'>
2018-02-06 12:26:03,453 - DEBUG - Profit ID from database is 170
2018-02-06 12:26:03,453 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 12:26:03,453 - DEBUG - Stop ID database is 171
2018-02-06 12:26:03,453 - DEBUG - Entry ID database is 170
2018-02-06 12:26:03,453 - DEBUG - Stop API ID is 171
2018-02-06 12:26:05,447 - DEBUG - Connecting to database
2018-02-06 12:26:05,453 - DEBUG - Connected to database
2018-02-06 12:26:05,456 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 12:26:05,457 - DEBUG - Stop loss value is 74.22
2018-02-06 12:26:05,457 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 12:26:05,457 - DEBUG - Stop loss value is 61.3
2018-02-06 12:26:05,460 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 12:26:05,460 - DEBUG - EntryPrice value is 72.25
2018-02-06 12:26:05,460 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 12:26:05,461 - DEBUG - Stop quantity 1
2018-02-06 12:26:05,463 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 12:26:05,463 - DEBUG - Direction is Short
2018-02-06 12:26:05,464 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 12:26:05,464 - DEBUG - Count is 1
2018-02-06 12:26:05,467 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 12:26:05,467 - DEBUG - Stop Loss Flag is 1
2018-02-06 12:26:05,469 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 12:26:05,469 - DEBUG - Max ID Order is (171,)
2018-02-06 12:26:05,469 - DEBUG - Today is 2018-02-06
2018-02-06 12:26:05,470 - DEBUG - Day of the week 1
2018-02-06 12:26:05,470 - DEBUG - Yesterday is 02/05/2018
2018-02-06 12:26:05,470 - DEBUG - In Position is  1
2018-02-06 12:26:05,470 - DEBUG - In Position is  <class 'int'>
2018-02-06 12:26:05,470 - DEBUG - curStopLossFlag is  1
2018-02-06 12:26:05,470 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 12:26:05,471 - DEBUG - Checking if Entry has been filled
2018-02-06 12:26:05,471 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 12:26:05,473 - DEBUG - EntryPend is 0
2018-02-06 12:26:05,473 - DEBUG - Try to Cancel Stop
2018-02-06 12:26:05,473 - DEBUG - Stop API ID 171
2018-02-06 12:26:05,473 - DEBUG - Profit API ID 0
2018-02-06 12:26:05,474 - DEBUG - Stop API ID <class 'int'>
2018-02-06 12:26:05,474 - DEBUG - Profit API ID <class 'int'>
2018-02-06 12:26:05,474 - DEBUG - Pos is 1
2018-02-06 12:26:05,474 - DEBUG - CurCount is 1
2018-02-06 12:26:05,476 - DEBUG - In Pos 1
2018-02-06 12:26:05,476 - DEBUG - Stop ID is 171
2018-02-06 12:26:05,476 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 12:26:05,477 - DEBUG - EntryPend is 0
2018-02-06 12:26:05,477 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 12:26:05,477 - DEBUG - Entry Date is 10
2018-02-06 12:26:05,477 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 12:26:05,479 - DEBUG - Order Profit ID is 170
2018-02-06 12:26:05,479 - DEBUG - Order Entry ID is 170
2018-02-06 12:26:05,479 - DEBUG - API ID is  0
2018-02-06 12:26:05,479 - DEBUG - Current Position is 1
2018-02-06 12:26:05,480 - DEBUG - Current Position is <class 'str'>
2018-02-06 12:26:05,480 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 12:26:05,480 - DEBUG - Time is 12
2018-02-06 12:26:05,480 - DEBUG - Time is <class 'int'>
2018-02-06 12:26:05,480 - DEBUG - Time is 26
2018-02-06 12:26:05,480 - DEBUG - Time is <class 'int'>
2018-02-06 12:26:05,480 - DEBUG - Disconnected from IBController
2018-02-06 12:26:05,482 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 12:31:01,388 - DEBUG - ****************************************************
2018-02-06 12:31:01,390 - DEBUG - Current Time is 12:31PM
2018-02-06 12:31:01,390 - DEBUG - Starting Pos Mgmt H E
2018-02-06 12:31:01,391 - DEBUG - Connecting to database
2018-02-06 12:31:01,415 - DEBUG - Connected to database
2018-02-06 12:31:01,417 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 12:31:01,418 - DEBUG - Order Profit is 170
2018-02-06 12:31:01,418 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 12:31:01,420 - DEBUG - Stop ID is 171
2018-02-06 12:31:01,421 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 12:31:01,421 - DEBUG - Entry ID is 170
2018-02-06 12:31:01,421 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 12:31:01,424 - DEBUG - OCA ID is 1
2018-02-06 12:31:01,424 - DEBUG - Connecting to IBController
2018-02-06 12:31:02,428 - DEBUG - Connected to IBController
2018-02-06 12:31:02,428 - DEBUG - Position requested
2018-02-06 12:31:02,433 - DEBUG - Pos Mgmt 0
2018-02-06 12:31:02,433 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212DB38>, pos=0, avgCost=0.0>
2018-02-06 12:31:02,434 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 12:31:02,434 - DEBUG - ccy2 Currency with position is USD
2018-02-06 12:31:02,434 - DEBUG - Position is 0
2018-02-06 12:31:02,434 - DEBUG - Pos Mgmt -1
2018-02-06 12:31:02,434 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212DCF8>, pos=-1, avgCost=28787.1>
2018-02-06 12:31:02,436 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 12:31:02,436 - DEBUG - ccy2 Currency with position is USD
2018-02-06 12:31:02,436 - DEBUG - Position is -1
2018-02-06 12:31:02,436 - DEBUG - In Position
2018-02-06 12:31:02,437 - DEBUG - Position is 1
2018-02-06 12:31:02,437 - DEBUG - Pos Mgmt -12987
2018-02-06 12:31:02,437 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212DF28>, pos=-12987, avgCost=0.95368235>
2018-02-06 12:31:02,437 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 12:31:02,437 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 12:31:02,437 - DEBUG - Position is -12987
2018-02-06 12:31:02,438 - DEBUG - Pos Mgmt 0
2018-02-06 12:31:02,438 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212DD30>, pos=0, avgCost=0.0>
2018-02-06 12:31:02,438 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 12:31:02,440 - DEBUG - ccy2 Currency with position is USD
2018-02-06 12:31:02,440 - DEBUG - Position is 0
2018-02-06 12:31:03,433 - DEBUG - Open Orders requested
2018-02-06 12:31:03,434 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x000000000212DF60>, order=<ib.ext.Order.Order object at 0x000000000212DB00>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C2208>>
2018-02-06 12:31:03,436 - DEBUG - Order OrderID 171
2018-02-06 12:31:03,436 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 12:31:03,437 - DEBUG - Order status PreSubmitted
2018-02-06 12:31:03,437 - DEBUG - Order Identification 171
2018-02-06 12:31:03,437 - DEBUG - Order Identification <class 'int'>
2018-02-06 12:31:03,437 - DEBUG - Profit ID from database is 170
2018-02-06 12:31:03,437 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 12:31:03,437 - DEBUG - Stop ID database is 171
2018-02-06 12:31:03,437 - DEBUG - Entry ID database is 170
2018-02-06 12:31:03,437 - DEBUG - Stop API ID is 171
2018-02-06 12:31:03,819 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x000000000212DF60>, order=<ib.ext.Order.Order object at 0x000000000212DB00>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C20B8>>
2018-02-06 12:31:03,821 - DEBUG - Order OrderID 171
2018-02-06 12:31:03,821 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 12:31:03,822 - DEBUG - Order status PreSubmitted
2018-02-06 12:31:03,822 - DEBUG - Order Identification 171
2018-02-06 12:31:03,822 - DEBUG - Order Identification <class 'int'>
2018-02-06 12:31:03,822 - DEBUG - Profit ID from database is 170
2018-02-06 12:31:03,822 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 12:31:03,822 - DEBUG - Stop ID database is 171
2018-02-06 12:31:03,822 - DEBUG - Entry ID database is 170
2018-02-06 12:31:03,822 - DEBUG - Stop API ID is 171
2018-02-06 12:31:05,436 - DEBUG - Connecting to database
2018-02-06 12:31:05,444 - DEBUG - Connected to database
2018-02-06 12:31:05,444 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 12:31:05,446 - DEBUG - Stop loss value is 74.22
2018-02-06 12:31:05,447 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 12:31:05,447 - DEBUG - Stop loss value is 61.3
2018-02-06 12:31:05,448 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 12:31:05,448 - DEBUG - EntryPrice value is 72.25
2018-02-06 12:31:05,450 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 12:31:05,450 - DEBUG - Stop quantity 1
2018-02-06 12:31:05,453 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 12:31:05,453 - DEBUG - Direction is Short
2018-02-06 12:31:05,453 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 12:31:05,454 - DEBUG - Count is 1
2018-02-06 12:31:05,456 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 12:31:05,456 - DEBUG - Stop Loss Flag is 1
2018-02-06 12:31:05,457 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 12:31:05,457 - DEBUG - Max ID Order is (171,)
2018-02-06 12:31:05,459 - DEBUG - Today is 2018-02-06
2018-02-06 12:31:05,459 - DEBUG - Day of the week 1
2018-02-06 12:31:05,460 - DEBUG - Yesterday is 02/05/2018
2018-02-06 12:31:05,460 - DEBUG - In Position is  1
2018-02-06 12:31:05,460 - DEBUG - In Position is  <class 'int'>
2018-02-06 12:31:05,460 - DEBUG - curStopLossFlag is  1
2018-02-06 12:31:05,460 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 12:31:05,460 - DEBUG - Checking if Entry has been filled
2018-02-06 12:31:05,460 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 12:31:05,463 - DEBUG - EntryPend is 0
2018-02-06 12:31:05,463 - DEBUG - Try to Cancel Stop
2018-02-06 12:31:05,463 - DEBUG - Stop API ID 171
2018-02-06 12:31:05,463 - DEBUG - Profit API ID 0
2018-02-06 12:31:05,463 - DEBUG - Stop API ID <class 'int'>
2018-02-06 12:31:05,463 - DEBUG - Profit API ID <class 'int'>
2018-02-06 12:31:05,463 - DEBUG - Pos is 1
2018-02-06 12:31:05,463 - DEBUG - CurCount is 1
2018-02-06 12:31:05,464 - DEBUG - In Pos 1
2018-02-06 12:31:05,464 - DEBUG - Stop ID is 171
2018-02-06 12:31:05,464 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 12:31:05,467 - DEBUG - EntryPend is 0
2018-02-06 12:31:05,467 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 12:31:05,467 - DEBUG - Entry Date is 10
2018-02-06 12:31:05,467 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 12:31:05,467 - DEBUG - Order Profit ID is 170
2018-02-06 12:31:05,467 - DEBUG - Order Entry ID is 170
2018-02-06 12:31:05,469 - DEBUG - API ID is  0
2018-02-06 12:31:05,469 - DEBUG - Current Position is 1
2018-02-06 12:31:05,469 - DEBUG - Current Position is <class 'str'>
2018-02-06 12:31:05,469 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 12:31:05,470 - DEBUG - Time is 12
2018-02-06 12:31:05,470 - DEBUG - Time is <class 'int'>
2018-02-06 12:31:05,470 - DEBUG - Time is 31
2018-02-06 12:31:05,470 - DEBUG - Time is <class 'int'>
2018-02-06 12:31:05,470 - DEBUG - Disconnected from IBController
2018-02-06 12:31:05,470 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 12:36:01,374 - DEBUG - ****************************************************
2018-02-06 12:36:01,374 - DEBUG - Current Time is 12:36PM
2018-02-06 12:36:01,375 - DEBUG - Starting Pos Mgmt H E
2018-02-06 12:36:01,375 - DEBUG - Connecting to database
2018-02-06 12:36:01,400 - DEBUG - Connected to database
2018-02-06 12:36:01,401 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 12:36:01,401 - DEBUG - Order Profit is 170
2018-02-06 12:36:01,403 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 12:36:01,404 - DEBUG - Stop ID is 171
2018-02-06 12:36:01,404 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 12:36:01,405 - DEBUG - Entry ID is 170
2018-02-06 12:36:01,405 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 12:36:01,407 - DEBUG - OCA ID is 1
2018-02-06 12:36:01,407 - DEBUG - Connecting to IBController
2018-02-06 12:36:02,414 - DEBUG - Connected to IBController
2018-02-06 12:36:02,414 - DEBUG - Position requested
2018-02-06 12:36:02,414 - DEBUG - Pos Mgmt 0
2018-02-06 12:36:02,415 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211CDA0>, pos=0, avgCost=0.0>
2018-02-06 12:36:02,415 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 12:36:02,417 - DEBUG - ccy2 Currency with position is USD
2018-02-06 12:36:02,417 - DEBUG - Position is 0
2018-02-06 12:36:02,417 - DEBUG - Pos Mgmt -1
2018-02-06 12:36:02,417 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211CAC8>, pos=-1, avgCost=28787.1>
2018-02-06 12:36:02,417 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 12:36:02,417 - DEBUG - ccy2 Currency with position is USD
2018-02-06 12:36:02,417 - DEBUG - Position is -1
2018-02-06 12:36:02,418 - DEBUG - In Position
2018-02-06 12:36:02,418 - DEBUG - Position is 1
2018-02-06 12:36:02,420 - DEBUG - Pos Mgmt -12987
2018-02-06 12:36:02,420 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211CF28>, pos=-12987, avgCost=0.95368235>
2018-02-06 12:36:02,421 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 12:36:02,421 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 12:36:02,421 - DEBUG - Position is -12987
2018-02-06 12:36:02,421 - DEBUG - Pos Mgmt 0
2018-02-06 12:36:02,421 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211CD30>, pos=0, avgCost=0.0>
2018-02-06 12:36:02,421 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 12:36:02,423 - DEBUG - ccy2 Currency with position is USD
2018-02-06 12:36:02,423 - DEBUG - Position is 0
2018-02-06 12:36:03,414 - DEBUG - Open Orders requested
2018-02-06 12:36:03,424 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x000000000211CF28>, order=<ib.ext.Order.Order object at 0x000000000211CD68>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B1198>>
2018-02-06 12:36:03,424 - DEBUG - Order OrderID 171
2018-02-06 12:36:03,424 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 12:36:03,424 - DEBUG - Order status PreSubmitted
2018-02-06 12:36:03,426 - DEBUG - Order Identification 171
2018-02-06 12:36:03,426 - DEBUG - Order Identification <class 'int'>
2018-02-06 12:36:03,426 - DEBUG - Profit ID from database is 170
2018-02-06 12:36:03,427 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 12:36:03,427 - DEBUG - Stop ID database is 171
2018-02-06 12:36:03,427 - DEBUG - Entry ID database is 170
2018-02-06 12:36:03,427 - DEBUG - Stop API ID is 171
2018-02-06 12:36:05,414 - DEBUG - Connecting to database
2018-02-06 12:36:05,426 - DEBUG - Connected to database
2018-02-06 12:36:05,427 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 12:36:05,427 - DEBUG - Stop loss value is 74.22
2018-02-06 12:36:05,428 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 12:36:05,428 - DEBUG - Stop loss value is 61.3
2018-02-06 12:36:05,430 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 12:36:05,430 - DEBUG - EntryPrice value is 72.25
2018-02-06 12:36:05,433 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 12:36:05,433 - DEBUG - Stop quantity 1
2018-02-06 12:36:05,434 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 12:36:05,434 - DEBUG - Direction is Short
2018-02-06 12:36:05,436 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 12:36:05,437 - DEBUG - Count is 1
2018-02-06 12:36:05,437 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 12:36:05,438 - DEBUG - Stop Loss Flag is 1
2018-02-06 12:36:05,440 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 12:36:05,440 - DEBUG - Max ID Order is (171,)
2018-02-06 12:36:05,440 - DEBUG - Today is 2018-02-06
2018-02-06 12:36:05,440 - DEBUG - Day of the week 1
2018-02-06 12:36:05,440 - DEBUG - Yesterday is 02/05/2018
2018-02-06 12:36:05,441 - DEBUG - In Position is  1
2018-02-06 12:36:05,441 - DEBUG - In Position is  <class 'int'>
2018-02-06 12:36:05,441 - DEBUG - curStopLossFlag is  1
2018-02-06 12:36:05,443 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 12:36:05,443 - DEBUG - Checking if Entry has been filled
2018-02-06 12:36:05,443 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 12:36:05,444 - DEBUG - EntryPend is 0
2018-02-06 12:36:05,444 - DEBUG - Try to Cancel Stop
2018-02-06 12:36:05,444 - DEBUG - Stop API ID 171
2018-02-06 12:36:05,444 - DEBUG - Profit API ID 0
2018-02-06 12:36:05,446 - DEBUG - Stop API ID <class 'int'>
2018-02-06 12:36:05,446 - DEBUG - Profit API ID <class 'int'>
2018-02-06 12:36:05,446 - DEBUG - Pos is 1
2018-02-06 12:36:05,447 - DEBUG - CurCount is 1
2018-02-06 12:36:05,447 - DEBUG - In Pos 1
2018-02-06 12:36:05,447 - DEBUG - Stop ID is 171
2018-02-06 12:36:05,447 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 12:36:05,448 - DEBUG - EntryPend is 0
2018-02-06 12:36:05,448 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 12:36:05,448 - DEBUG - Entry Date is 10
2018-02-06 12:36:05,448 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 12:36:05,450 - DEBUG - Order Profit ID is 170
2018-02-06 12:36:05,450 - DEBUG - Order Entry ID is 170
2018-02-06 12:36:05,450 - DEBUG - API ID is  0
2018-02-06 12:36:05,450 - DEBUG - Current Position is 1
2018-02-06 12:36:05,450 - DEBUG - Current Position is <class 'str'>
2018-02-06 12:36:05,450 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 12:36:05,450 - DEBUG - Time is 12
2018-02-06 12:36:05,450 - DEBUG - Time is <class 'int'>
2018-02-06 12:36:05,451 - DEBUG - Time is 36
2018-02-06 12:36:05,451 - DEBUG - Time is <class 'int'>
2018-02-06 12:36:05,451 - DEBUG - Disconnected from IBController
2018-02-06 12:36:05,453 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 12:41:01,384 - DEBUG - ****************************************************
2018-02-06 12:41:01,384 - DEBUG - Current Time is 12:41PM
2018-02-06 12:41:01,384 - DEBUG - Starting Pos Mgmt H E
2018-02-06 12:41:01,385 - DEBUG - Connecting to database
2018-02-06 12:41:01,444 - DEBUG - Connected to database
2018-02-06 12:41:01,444 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 12:41:01,447 - DEBUG - Order Profit is 170
2018-02-06 12:41:01,447 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 12:41:01,448 - DEBUG - Stop ID is 171
2018-02-06 12:41:01,448 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 12:41:01,450 - DEBUG - Entry ID is 170
2018-02-06 12:41:01,450 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 12:41:01,453 - DEBUG - OCA ID is 1
2018-02-06 12:41:01,453 - DEBUG - Connecting to IBController
2018-02-06 12:41:02,467 - DEBUG - Connected to IBController
2018-02-06 12:41:02,467 - DEBUG - Position requested
2018-02-06 12:41:02,469 - DEBUG - Pos Mgmt 0
2018-02-06 12:41:02,469 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211CB38>, pos=0, avgCost=0.0>
2018-02-06 12:41:02,470 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 12:41:02,470 - DEBUG - ccy2 Currency with position is USD
2018-02-06 12:41:02,470 - DEBUG - Position is 0
2018-02-06 12:41:02,470 - DEBUG - Pos Mgmt -1
2018-02-06 12:41:02,470 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211CAC8>, pos=-1, avgCost=28787.1>
2018-02-06 12:41:02,470 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 12:41:02,470 - DEBUG - ccy2 Currency with position is USD
2018-02-06 12:41:02,471 - DEBUG - Position is -1
2018-02-06 12:41:02,471 - DEBUG - In Position
2018-02-06 12:41:02,471 - DEBUG - Position is 1
2018-02-06 12:41:02,471 - DEBUG - Pos Mgmt -12987
2018-02-06 12:41:02,473 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211CF28>, pos=-12987, avgCost=0.95368235>
2018-02-06 12:41:02,473 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 12:41:02,473 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 12:41:02,473 - DEBUG - Position is -12987
2018-02-06 12:41:02,473 - DEBUG - Pos Mgmt 0
2018-02-06 12:41:02,473 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211CD68>, pos=0, avgCost=0.0>
2018-02-06 12:41:02,473 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 12:41:02,474 - DEBUG - ccy2 Currency with position is USD
2018-02-06 12:41:02,474 - DEBUG - Position is 0
2018-02-06 12:41:03,469 - DEBUG - Open Orders requested
2018-02-06 12:41:03,470 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x000000000211CF60>, order=<ib.ext.Order.Order object at 0x000000000211CB38>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B2208>>
2018-02-06 12:41:03,471 - DEBUG - Order OrderID 171
2018-02-06 12:41:03,471 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 12:41:03,473 - DEBUG - Order status PreSubmitted
2018-02-06 12:41:03,473 - DEBUG - Order Identification 171
2018-02-06 12:41:03,473 - DEBUG - Order Identification <class 'int'>
2018-02-06 12:41:03,473 - DEBUG - Profit ID from database is 170
2018-02-06 12:41:03,473 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 12:41:03,473 - DEBUG - Stop ID database is 171
2018-02-06 12:41:03,473 - DEBUG - Entry ID database is 170
2018-02-06 12:41:03,473 - DEBUG - Stop API ID is 171
2018-02-06 12:41:05,471 - DEBUG - Connecting to database
2018-02-06 12:41:05,480 - DEBUG - Connected to database
2018-02-06 12:41:05,480 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 12:41:05,482 - DEBUG - Stop loss value is 74.22
2018-02-06 12:41:05,483 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 12:41:05,483 - DEBUG - Stop loss value is 61.3
2018-02-06 12:41:05,484 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 12:41:05,484 - DEBUG - EntryPrice value is 72.25
2018-02-06 12:41:05,486 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 12:41:05,486 - DEBUG - Stop quantity 1
2018-02-06 12:41:05,489 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 12:41:05,489 - DEBUG - Direction is Short
2018-02-06 12:41:05,490 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 12:41:05,490 - DEBUG - Count is 1
2018-02-06 12:41:05,492 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 12:41:05,492 - DEBUG - Stop Loss Flag is 1
2018-02-06 12:41:05,493 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 12:41:05,493 - DEBUG - Max ID Order is (171,)
2018-02-06 12:41:05,494 - DEBUG - Today is 2018-02-06
2018-02-06 12:41:05,494 - DEBUG - Day of the week 1
2018-02-06 12:41:05,494 - DEBUG - Yesterday is 02/05/2018
2018-02-06 12:41:05,496 - DEBUG - In Position is  1
2018-02-06 12:41:05,496 - DEBUG - In Position is  <class 'int'>
2018-02-06 12:41:05,496 - DEBUG - curStopLossFlag is  1
2018-02-06 12:41:05,496 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 12:41:05,496 - DEBUG - Checking if Entry has been filled
2018-02-06 12:41:05,496 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 12:41:05,497 - DEBUG - EntryPend is 0
2018-02-06 12:41:05,499 - DEBUG - Try to Cancel Stop
2018-02-06 12:41:05,499 - DEBUG - Stop API ID 171
2018-02-06 12:41:05,499 - DEBUG - Profit API ID 0
2018-02-06 12:41:05,499 - DEBUG - Stop API ID <class 'int'>
2018-02-06 12:41:05,500 - DEBUG - Profit API ID <class 'int'>
2018-02-06 12:41:05,500 - DEBUG - Pos is 1
2018-02-06 12:41:05,500 - DEBUG - CurCount is 1
2018-02-06 12:41:05,500 - DEBUG - In Pos 1
2018-02-06 12:41:05,500 - DEBUG - Stop ID is 171
2018-02-06 12:41:05,500 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 12:41:05,502 - DEBUG - EntryPend is 0
2018-02-06 12:41:05,502 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 12:41:05,503 - DEBUG - Entry Date is 10
2018-02-06 12:41:05,503 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 12:41:05,503 - DEBUG - Order Profit ID is 170
2018-02-06 12:41:05,503 - DEBUG - Order Entry ID is 170
2018-02-06 12:41:05,503 - DEBUG - API ID is  0
2018-02-06 12:41:05,503 - DEBUG - Current Position is 1
2018-02-06 12:41:05,503 - DEBUG - Current Position is <class 'str'>
2018-02-06 12:41:05,505 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 12:41:05,505 - DEBUG - Time is 12
2018-02-06 12:41:05,505 - DEBUG - Time is <class 'int'>
2018-02-06 12:41:05,505 - DEBUG - Time is 41
2018-02-06 12:41:05,505 - DEBUG - Time is <class 'int'>
2018-02-06 12:41:05,506 - DEBUG - Disconnected from IBController
2018-02-06 12:41:05,506 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 12:46:01,400 - DEBUG - ****************************************************
2018-02-06 12:46:01,401 - DEBUG - Current Time is 12:46PM
2018-02-06 12:46:01,401 - DEBUG - Starting Pos Mgmt H E
2018-02-06 12:46:01,401 - DEBUG - Connecting to database
2018-02-06 12:46:01,423 - DEBUG - Connected to database
2018-02-06 12:46:01,423 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 12:46:01,424 - DEBUG - Order Profit is 170
2018-02-06 12:46:01,424 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 12:46:01,427 - DEBUG - Stop ID is 171
2018-02-06 12:46:01,427 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 12:46:01,428 - DEBUG - Entry ID is 170
2018-02-06 12:46:01,428 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 12:46:01,430 - DEBUG - OCA ID is 1
2018-02-06 12:46:01,430 - DEBUG - Connecting to IBController
2018-02-06 12:46:02,436 - DEBUG - Connected to IBController
2018-02-06 12:46:02,436 - DEBUG - Position requested
2018-02-06 12:46:02,437 - DEBUG - Pos Mgmt 0
2018-02-06 12:46:02,437 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FDE10>, pos=0, avgCost=0.0>
2018-02-06 12:46:02,437 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 12:46:02,437 - DEBUG - ccy2 Currency with position is USD
2018-02-06 12:46:02,438 - DEBUG - Position is 0
2018-02-06 12:46:02,438 - DEBUG - Pos Mgmt -1
2018-02-06 12:46:02,438 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FDCF8>, pos=-1, avgCost=28787.1>
2018-02-06 12:46:02,440 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 12:46:02,440 - DEBUG - ccy2 Currency with position is USD
2018-02-06 12:46:02,440 - DEBUG - Position is -1
2018-02-06 12:46:02,440 - DEBUG - In Position
2018-02-06 12:46:02,440 - DEBUG - Position is 1
2018-02-06 12:46:02,440 - DEBUG - Pos Mgmt -12987
2018-02-06 12:46:02,440 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FDF28>, pos=-12987, avgCost=0.95368235>
2018-02-06 12:46:02,441 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 12:46:02,441 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 12:46:02,441 - DEBUG - Position is -12987
2018-02-06 12:46:02,443 - DEBUG - Pos Mgmt 0
2018-02-06 12:46:02,443 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FDDA0>, pos=0, avgCost=0.0>
2018-02-06 12:46:02,443 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 12:46:02,444 - DEBUG - ccy2 Currency with position is USD
2018-02-06 12:46:02,444 - DEBUG - Position is 0
2018-02-06 12:46:03,437 - DEBUG - Open Orders requested
2018-02-06 12:46:03,438 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x00000000020FDF28>, order=<ib.ext.Order.Order object at 0x00000000020FDE10>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002191198>>
2018-02-06 12:46:03,438 - DEBUG - Order OrderID 171
2018-02-06 12:46:03,440 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 12:46:03,440 - DEBUG - Order status PreSubmitted
2018-02-06 12:46:03,440 - DEBUG - Order Identification 171
2018-02-06 12:46:03,440 - DEBUG - Order Identification <class 'int'>
2018-02-06 12:46:03,440 - DEBUG - Profit ID from database is 170
2018-02-06 12:46:03,441 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 12:46:03,441 - DEBUG - Stop ID database is 171
2018-02-06 12:46:03,441 - DEBUG - Entry ID database is 170
2018-02-06 12:46:03,443 - DEBUG - Stop API ID is 171
2018-02-06 12:46:05,437 - DEBUG - Connecting to database
2018-02-06 12:46:05,446 - DEBUG - Connected to database
2018-02-06 12:46:05,447 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 12:46:05,447 - DEBUG - Stop loss value is 74.22
2018-02-06 12:46:05,448 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 12:46:05,448 - DEBUG - Stop loss value is 61.3
2018-02-06 12:46:05,450 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 12:46:05,450 - DEBUG - EntryPrice value is 72.25
2018-02-06 12:46:05,453 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 12:46:05,453 - DEBUG - Stop quantity 1
2018-02-06 12:46:05,454 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 12:46:05,456 - DEBUG - Direction is Short
2018-02-06 12:46:05,457 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 12:46:05,457 - DEBUG - Count is 1
2018-02-06 12:46:05,459 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 12:46:05,459 - DEBUG - Stop Loss Flag is 1
2018-02-06 12:46:05,460 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 12:46:05,460 - DEBUG - Max ID Order is (171,)
2018-02-06 12:46:05,460 - DEBUG - Today is 2018-02-06
2018-02-06 12:46:05,461 - DEBUG - Day of the week 1
2018-02-06 12:46:05,461 - DEBUG - Yesterday is 02/05/2018
2018-02-06 12:46:05,461 - DEBUG - In Position is  1
2018-02-06 12:46:05,463 - DEBUG - In Position is  <class 'int'>
2018-02-06 12:46:05,463 - DEBUG - curStopLossFlag is  1
2018-02-06 12:46:05,463 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 12:46:05,463 - DEBUG - Checking if Entry has been filled
2018-02-06 12:46:05,463 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 12:46:05,464 - DEBUG - EntryPend is 0
2018-02-06 12:46:05,464 - DEBUG - Try to Cancel Stop
2018-02-06 12:46:05,466 - DEBUG - Stop API ID 171
2018-02-06 12:46:05,466 - DEBUG - Profit API ID 0
2018-02-06 12:46:05,466 - DEBUG - Stop API ID <class 'int'>
2018-02-06 12:46:05,466 - DEBUG - Profit API ID <class 'int'>
2018-02-06 12:46:05,466 - DEBUG - Pos is 1
2018-02-06 12:46:05,467 - DEBUG - CurCount is 1
2018-02-06 12:46:05,467 - DEBUG - In Pos 1
2018-02-06 12:46:05,467 - DEBUG - Stop ID is 171
2018-02-06 12:46:05,467 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 12:46:05,469 - DEBUG - EntryPend is 0
2018-02-06 12:46:05,469 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 12:46:05,469 - DEBUG - Entry Date is 10
2018-02-06 12:46:05,470 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 12:46:05,470 - DEBUG - Order Profit ID is 170
2018-02-06 12:46:05,470 - DEBUG - Order Entry ID is 170
2018-02-06 12:46:05,470 - DEBUG - API ID is  0
2018-02-06 12:46:05,470 - DEBUG - Current Position is 1
2018-02-06 12:46:05,470 - DEBUG - Current Position is <class 'str'>
2018-02-06 12:46:05,470 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 12:46:05,470 - DEBUG - Time is 12
2018-02-06 12:46:05,471 - DEBUG - Time is <class 'int'>
2018-02-06 12:46:05,471 - DEBUG - Time is 46
2018-02-06 12:46:05,471 - DEBUG - Time is <class 'int'>
2018-02-06 12:46:05,473 - DEBUG - Disconnected from IBController
2018-02-06 12:46:05,473 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 12:51:01,371 - DEBUG - ****************************************************
2018-02-06 12:51:01,371 - DEBUG - Current Time is 12:51PM
2018-02-06 12:51:01,371 - DEBUG - Starting Pos Mgmt H E
2018-02-06 12:51:01,371 - DEBUG - Connecting to database
2018-02-06 12:51:01,407 - DEBUG - Connected to database
2018-02-06 12:51:01,407 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 12:51:01,410 - DEBUG - Order Profit is 170
2018-02-06 12:51:01,410 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 12:51:01,411 - DEBUG - Stop ID is 171
2018-02-06 12:51:01,411 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 12:51:01,413 - DEBUG - Entry ID is 170
2018-02-06 12:51:01,414 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 12:51:01,414 - DEBUG - OCA ID is 1
2018-02-06 12:51:01,414 - DEBUG - Connecting to IBController
2018-02-06 12:51:02,420 - DEBUG - Connected to IBController
2018-02-06 12:51:02,420 - DEBUG - Position requested
2018-02-06 12:51:02,421 - DEBUG - Pos Mgmt 0
2018-02-06 12:51:02,421 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212DB38>, pos=0, avgCost=0.0>
2018-02-06 12:51:02,423 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 12:51:02,423 - DEBUG - ccy2 Currency with position is USD
2018-02-06 12:51:02,423 - DEBUG - Position is 0
2018-02-06 12:51:02,423 - DEBUG - Pos Mgmt -1
2018-02-06 12:51:02,424 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212DC18>, pos=-1, avgCost=28787.1>
2018-02-06 12:51:02,424 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 12:51:02,424 - DEBUG - ccy2 Currency with position is USD
2018-02-06 12:51:02,424 - DEBUG - Position is -1
2018-02-06 12:51:02,424 - DEBUG - In Position
2018-02-06 12:51:02,424 - DEBUG - Position is 1
2018-02-06 12:51:02,424 - DEBUG - Pos Mgmt -12987
2018-02-06 12:51:02,426 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212DF28>, pos=-12987, avgCost=0.95368235>
2018-02-06 12:51:02,426 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 12:51:02,426 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 12:51:02,427 - DEBUG - Position is -12987
2018-02-06 12:51:02,427 - DEBUG - Pos Mgmt 0
2018-02-06 12:51:02,427 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212DC50>, pos=0, avgCost=0.0>
2018-02-06 12:51:02,427 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 12:51:02,427 - DEBUG - ccy2 Currency with position is USD
2018-02-06 12:51:02,427 - DEBUG - Position is 0
2018-02-06 12:51:03,421 - DEBUG - Open Orders requested
2018-02-06 12:51:03,424 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x000000000212DF60>, order=<ib.ext.Order.Order object at 0x000000000212DD30>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C1208>>
2018-02-06 12:51:03,424 - DEBUG - Order OrderID 171
2018-02-06 12:51:03,424 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 12:51:03,426 - DEBUG - Order status PreSubmitted
2018-02-06 12:51:03,426 - DEBUG - Order Identification 171
2018-02-06 12:51:03,426 - DEBUG - Order Identification <class 'int'>
2018-02-06 12:51:03,426 - DEBUG - Profit ID from database is 170
2018-02-06 12:51:03,427 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 12:51:03,427 - DEBUG - Stop ID database is 171
2018-02-06 12:51:03,427 - DEBUG - Entry ID database is 170
2018-02-06 12:51:03,427 - DEBUG - Stop API ID is 171
2018-02-06 12:51:05,424 - DEBUG - Connecting to database
2018-02-06 12:51:05,431 - DEBUG - Connected to database
2018-02-06 12:51:05,434 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 12:51:05,434 - DEBUG - Stop loss value is 74.22
2018-02-06 12:51:05,436 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 12:51:05,436 - DEBUG - Stop loss value is 61.3
2018-02-06 12:51:05,437 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 12:51:05,437 - DEBUG - EntryPrice value is 72.25
2018-02-06 12:51:05,438 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 12:51:05,440 - DEBUG - Stop quantity 1
2018-02-06 12:51:05,440 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 12:51:05,440 - DEBUG - Direction is Short
2018-02-06 12:51:05,443 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 12:51:05,443 - DEBUG - Count is 1
2018-02-06 12:51:05,444 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 12:51:05,444 - DEBUG - Stop Loss Flag is 1
2018-02-06 12:51:05,447 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 12:51:05,447 - DEBUG - Max ID Order is (171,)
2018-02-06 12:51:05,447 - DEBUG - Today is 2018-02-06
2018-02-06 12:51:05,447 - DEBUG - Day of the week 1
2018-02-06 12:51:05,447 - DEBUG - Yesterday is 02/05/2018
2018-02-06 12:51:05,447 - DEBUG - In Position is  1
2018-02-06 12:51:05,448 - DEBUG - In Position is  <class 'int'>
2018-02-06 12:51:05,448 - DEBUG - curStopLossFlag is  1
2018-02-06 12:51:05,448 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 12:51:05,448 - DEBUG - Checking if Entry has been filled
2018-02-06 12:51:05,450 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 12:51:05,450 - DEBUG - EntryPend is 0
2018-02-06 12:51:05,451 - DEBUG - Try to Cancel Stop
2018-02-06 12:51:05,451 - DEBUG - Stop API ID 171
2018-02-06 12:51:05,451 - DEBUG - Profit API ID 0
2018-02-06 12:51:05,451 - DEBUG - Stop API ID <class 'int'>
2018-02-06 12:51:05,453 - DEBUG - Profit API ID <class 'int'>
2018-02-06 12:51:05,453 - DEBUG - Pos is 1
2018-02-06 12:51:05,453 - DEBUG - CurCount is 1
2018-02-06 12:51:05,453 - DEBUG - In Pos 1
2018-02-06 12:51:05,453 - DEBUG - Stop ID is 171
2018-02-06 12:51:05,453 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 12:51:05,454 - DEBUG - EntryPend is 0
2018-02-06 12:51:05,456 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 12:51:05,456 - DEBUG - Entry Date is 10
2018-02-06 12:51:05,456 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 12:51:05,456 - DEBUG - Order Profit ID is 170
2018-02-06 12:51:05,457 - DEBUG - Order Entry ID is 170
2018-02-06 12:51:05,457 - DEBUG - API ID is  0
2018-02-06 12:51:05,457 - DEBUG - Current Position is 1
2018-02-06 12:51:05,457 - DEBUG - Current Position is <class 'str'>
2018-02-06 12:51:05,457 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 12:51:05,457 - DEBUG - Time is 12
2018-02-06 12:51:05,457 - DEBUG - Time is <class 'int'>
2018-02-06 12:51:05,459 - DEBUG - Time is 51
2018-02-06 12:51:05,459 - DEBUG - Time is <class 'int'>
2018-02-06 12:51:05,459 - DEBUG - Disconnected from IBController
2018-02-06 12:51:05,460 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 12:56:01,375 - DEBUG - ****************************************************
2018-02-06 12:56:01,375 - DEBUG - Current Time is 12:56PM
2018-02-06 12:56:01,375 - DEBUG - Starting Pos Mgmt H E
2018-02-06 12:56:01,375 - DEBUG - Connecting to database
2018-02-06 12:56:01,410 - DEBUG - Connected to database
2018-02-06 12:56:01,411 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 12:56:01,411 - DEBUG - Order Profit is 170
2018-02-06 12:56:01,413 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 12:56:01,414 - DEBUG - Stop ID is 171
2018-02-06 12:56:01,414 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 12:56:01,415 - DEBUG - Entry ID is 170
2018-02-06 12:56:01,415 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 12:56:01,417 - DEBUG - OCA ID is 1
2018-02-06 12:56:01,417 - DEBUG - Connecting to IBController
2018-02-06 12:56:02,423 - DEBUG - Connected to IBController
2018-02-06 12:56:02,423 - DEBUG - Position requested
2018-02-06 12:56:02,427 - DEBUG - Pos Mgmt 0
2018-02-06 12:56:02,427 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020EDDD8>, pos=0, avgCost=0.0>
2018-02-06 12:56:02,427 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 12:56:02,427 - DEBUG - ccy2 Currency with position is USD
2018-02-06 12:56:02,428 - DEBUG - Position is 0
2018-02-06 12:56:02,428 - DEBUG - Pos Mgmt -1
2018-02-06 12:56:02,428 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020EDBE0>, pos=-1, avgCost=28787.1>
2018-02-06 12:56:02,430 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 12:56:02,430 - DEBUG - ccy2 Currency with position is USD
2018-02-06 12:56:02,430 - DEBUG - Position is -1
2018-02-06 12:56:02,430 - DEBUG - In Position
2018-02-06 12:56:02,430 - DEBUG - Position is 1
2018-02-06 12:56:02,430 - DEBUG - Pos Mgmt -12987
2018-02-06 12:56:02,430 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020EDF28>, pos=-12987, avgCost=0.95368235>
2018-02-06 12:56:02,431 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 12:56:02,431 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 12:56:02,431 - DEBUG - Position is -12987
2018-02-06 12:56:02,433 - DEBUG - Pos Mgmt 0
2018-02-06 12:56:02,433 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020EDB38>, pos=0, avgCost=0.0>
2018-02-06 12:56:02,433 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 12:56:02,434 - DEBUG - ccy2 Currency with position is USD
2018-02-06 12:56:02,434 - DEBUG - Position is 0
2018-02-06 12:56:03,427 - DEBUG - Open Orders requested
2018-02-06 12:56:03,428 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x00000000020EDF28>, order=<ib.ext.Order.Order object at 0x00000000020EDE10>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002181198>>
2018-02-06 12:56:03,428 - DEBUG - Order OrderID 171
2018-02-06 12:56:03,430 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 12:56:03,430 - DEBUG - Order status PreSubmitted
2018-02-06 12:56:03,430 - DEBUG - Order Identification 171
2018-02-06 12:56:03,430 - DEBUG - Order Identification <class 'int'>
2018-02-06 12:56:03,430 - DEBUG - Profit ID from database is 170
2018-02-06 12:56:03,431 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 12:56:03,431 - DEBUG - Stop ID database is 171
2018-02-06 12:56:03,431 - DEBUG - Entry ID database is 170
2018-02-06 12:56:03,431 - DEBUG - Stop API ID is 171
2018-02-06 12:56:05,427 - DEBUG - Connecting to database
2018-02-06 12:56:05,436 - DEBUG - Connected to database
2018-02-06 12:56:05,437 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 12:56:05,437 - DEBUG - Stop loss value is 74.22
2018-02-06 12:56:05,438 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 12:56:05,438 - DEBUG - Stop loss value is 61.3
2018-02-06 12:56:05,440 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 12:56:05,440 - DEBUG - EntryPrice value is 72.25
2018-02-06 12:56:05,443 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 12:56:05,443 - DEBUG - Stop quantity 1
2018-02-06 12:56:05,444 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 12:56:05,444 - DEBUG - Direction is Short
2018-02-06 12:56:05,446 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 12:56:05,446 - DEBUG - Count is 1
2018-02-06 12:56:05,447 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 12:56:05,447 - DEBUG - Stop Loss Flag is 1
2018-02-06 12:56:05,450 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 12:56:05,450 - DEBUG - Max ID Order is (171,)
2018-02-06 12:56:05,450 - DEBUG - Today is 2018-02-06
2018-02-06 12:56:05,450 - DEBUG - Day of the week 1
2018-02-06 12:56:05,450 - DEBUG - Yesterday is 02/05/2018
2018-02-06 12:56:05,451 - DEBUG - In Position is  1
2018-02-06 12:56:05,451 - DEBUG - In Position is  <class 'int'>
2018-02-06 12:56:05,451 - DEBUG - curStopLossFlag is  1
2018-02-06 12:56:05,451 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 12:56:05,453 - DEBUG - Checking if Entry has been filled
2018-02-06 12:56:05,453 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 12:56:05,453 - DEBUG - EntryPend is 0
2018-02-06 12:56:05,454 - DEBUG - Try to Cancel Stop
2018-02-06 12:56:05,454 - DEBUG - Stop API ID 171
2018-02-06 12:56:05,454 - DEBUG - Profit API ID 0
2018-02-06 12:56:05,454 - DEBUG - Stop API ID <class 'int'>
2018-02-06 12:56:05,456 - DEBUG - Profit API ID <class 'int'>
2018-02-06 12:56:05,456 - DEBUG - Pos is 1
2018-02-06 12:56:05,456 - DEBUG - CurCount is 1
2018-02-06 12:56:05,457 - DEBUG - In Pos 1
2018-02-06 12:56:05,457 - DEBUG - Stop ID is 171
2018-02-06 12:56:05,457 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 12:56:05,457 - DEBUG - EntryPend is 0
2018-02-06 12:56:05,459 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 12:56:05,459 - DEBUG - Entry Date is 10
2018-02-06 12:56:05,459 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 12:56:05,459 - DEBUG - Order Profit ID is 170
2018-02-06 12:56:05,460 - DEBUG - Order Entry ID is 170
2018-02-06 12:56:05,460 - DEBUG - API ID is  0
2018-02-06 12:56:05,460 - DEBUG - Current Position is 1
2018-02-06 12:56:05,460 - DEBUG - Current Position is <class 'str'>
2018-02-06 12:56:05,460 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 12:56:05,460 - DEBUG - Time is 12
2018-02-06 12:56:05,460 - DEBUG - Time is <class 'int'>
2018-02-06 12:56:05,460 - DEBUG - Time is 56
2018-02-06 12:56:05,461 - DEBUG - Time is <class 'int'>
2018-02-06 12:56:05,461 - DEBUG - Disconnected from IBController
2018-02-06 12:56:05,463 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 13:01:01,390 - DEBUG - ****************************************************
2018-02-06 13:01:01,391 - DEBUG - Current Time is 01:01PM
2018-02-06 13:01:01,391 - DEBUG - Starting Pos Mgmt H E
2018-02-06 13:01:01,391 - DEBUG - Connecting to database
2018-02-06 13:01:01,434 - DEBUG - Connected to database
2018-02-06 13:01:01,436 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 13:01:01,437 - DEBUG - Order Profit is 170
2018-02-06 13:01:01,438 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 13:01:01,440 - DEBUG - Stop ID is 171
2018-02-06 13:01:01,440 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 13:01:01,443 - DEBUG - Entry ID is 170
2018-02-06 13:01:01,443 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 13:01:01,444 - DEBUG - OCA ID is 1
2018-02-06 13:01:01,444 - DEBUG - Connecting to IBController
2018-02-06 13:01:02,451 - DEBUG - Connected to IBController
2018-02-06 13:01:02,451 - DEBUG - Position requested
2018-02-06 13:01:02,453 - DEBUG - Pos Mgmt 0
2018-02-06 13:01:02,453 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000213CB38>, pos=0, avgCost=0.0>
2018-02-06 13:01:02,454 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 13:01:02,454 - DEBUG - ccy2 Currency with position is USD
2018-02-06 13:01:02,454 - DEBUG - Position is 0
2018-02-06 13:01:02,456 - DEBUG - Pos Mgmt -1
2018-02-06 13:01:02,456 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000213CBA8>, pos=-1, avgCost=28787.1>
2018-02-06 13:01:02,456 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 13:01:02,457 - DEBUG - ccy2 Currency with position is USD
2018-02-06 13:01:02,457 - DEBUG - Position is -1
2018-02-06 13:01:02,457 - DEBUG - In Position
2018-02-06 13:01:02,457 - DEBUG - Position is 1
2018-02-06 13:01:02,457 - DEBUG - Pos Mgmt -12987
2018-02-06 13:01:02,457 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000213CF98>, pos=-12987, avgCost=0.95368235>
2018-02-06 13:01:02,457 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 13:01:02,459 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 13:01:02,459 - DEBUG - Position is -12987
2018-02-06 13:01:02,459 - DEBUG - Pos Mgmt 0
2018-02-06 13:01:02,460 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000213CA58>, pos=0, avgCost=0.0>
2018-02-06 13:01:02,460 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 13:01:02,460 - DEBUG - ccy2 Currency with position is USD
2018-02-06 13:01:02,460 - DEBUG - Position is 0
2018-02-06 13:01:03,453 - DEBUG - Open Orders requested
2018-02-06 13:01:03,456 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x000000000213CEB8>, order=<ib.ext.Order.Order object at 0x000000000213CE10>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021D2208>>
2018-02-06 13:01:03,457 - DEBUG - Order OrderID 171
2018-02-06 13:01:03,457 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 13:01:03,457 - DEBUG - Order status PreSubmitted
2018-02-06 13:01:03,457 - DEBUG - Order Identification 171
2018-02-06 13:01:03,457 - DEBUG - Order Identification <class 'int'>
2018-02-06 13:01:03,459 - DEBUG - Profit ID from database is 170
2018-02-06 13:01:03,459 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 13:01:03,459 - DEBUG - Stop ID database is 171
2018-02-06 13:01:03,459 - DEBUG - Entry ID database is 170
2018-02-06 13:01:03,460 - DEBUG - Stop API ID is 171
2018-02-06 13:01:05,457 - DEBUG - Connecting to database
2018-02-06 13:01:05,464 - DEBUG - Connected to database
2018-02-06 13:01:05,466 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 13:01:05,467 - DEBUG - Stop loss value is 74.22
2018-02-06 13:01:05,467 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 13:01:05,467 - DEBUG - Stop loss value is 61.3
2018-02-06 13:01:05,470 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 13:01:05,470 - DEBUG - EntryPrice value is 72.25
2018-02-06 13:01:05,471 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 13:01:05,471 - DEBUG - Stop quantity 1
2018-02-06 13:01:05,473 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 13:01:05,473 - DEBUG - Direction is Short
2018-02-06 13:01:05,476 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 13:01:05,476 - DEBUG - Count is 1
2018-02-06 13:01:05,476 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 13:01:05,477 - DEBUG - Stop Loss Flag is 1
2018-02-06 13:01:05,479 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 13:01:05,480 - DEBUG - Max ID Order is (171,)
2018-02-06 13:01:05,480 - DEBUG - Today is 2018-02-06
2018-02-06 13:01:05,480 - DEBUG - Day of the week 1
2018-02-06 13:01:05,480 - DEBUG - Yesterday is 02/05/2018
2018-02-06 13:01:05,480 - DEBUG - In Position is  1
2018-02-06 13:01:05,480 - DEBUG - In Position is  <class 'int'>
2018-02-06 13:01:05,482 - DEBUG - curStopLossFlag is  1
2018-02-06 13:01:05,482 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 13:01:05,482 - DEBUG - Checking if Entry has been filled
2018-02-06 13:01:05,482 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 13:01:05,483 - DEBUG - EntryPend is 0
2018-02-06 13:01:05,483 - DEBUG - Try to Cancel Stop
2018-02-06 13:01:05,484 - DEBUG - Stop API ID 171
2018-02-06 13:01:05,484 - DEBUG - Profit API ID 0
2018-02-06 13:01:05,484 - DEBUG - Stop API ID <class 'int'>
2018-02-06 13:01:05,484 - DEBUG - Profit API ID <class 'int'>
2018-02-06 13:01:05,486 - DEBUG - Pos is 1
2018-02-06 13:01:05,486 - DEBUG - CurCount is 1
2018-02-06 13:01:05,486 - DEBUG - In Pos 1
2018-02-06 13:01:05,486 - DEBUG - Stop ID is 171
2018-02-06 13:01:05,486 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 13:01:05,487 - DEBUG - EntryPend is 0
2018-02-06 13:01:05,487 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 13:01:05,489 - DEBUG - Entry Date is 10
2018-02-06 13:01:05,489 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 13:01:05,489 - DEBUG - Order Profit ID is 170
2018-02-06 13:01:05,489 - DEBUG - Order Entry ID is 170
2018-02-06 13:01:05,490 - DEBUG - API ID is  0
2018-02-06 13:01:05,490 - DEBUG - Current Position is 1
2018-02-06 13:01:05,490 - DEBUG - Current Position is <class 'str'>
2018-02-06 13:01:05,490 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 13:01:05,490 - DEBUG - Time is 13
2018-02-06 13:01:05,490 - DEBUG - Time is <class 'int'>
2018-02-06 13:01:05,490 - DEBUG - Time is 1
2018-02-06 13:01:05,490 - DEBUG - Time is <class 'int'>
2018-02-06 13:01:05,492 - DEBUG - Disconnected from IBController
2018-02-06 13:01:05,492 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 13:06:01,385 - DEBUG - ****************************************************
2018-02-06 13:06:01,387 - DEBUG - Current Time is 01:06PM
2018-02-06 13:06:01,387 - DEBUG - Starting Pos Mgmt H E
2018-02-06 13:06:01,388 - DEBUG - Connecting to database
2018-02-06 13:06:01,423 - DEBUG - Connected to database
2018-02-06 13:06:01,424 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 13:06:01,426 - DEBUG - Order Profit is 170
2018-02-06 13:06:01,426 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 13:06:01,427 - DEBUG - Stop ID is 171
2018-02-06 13:06:01,427 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 13:06:01,428 - DEBUG - Entry ID is 170
2018-02-06 13:06:01,430 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 13:06:01,430 - DEBUG - OCA ID is 1
2018-02-06 13:06:01,431 - DEBUG - Connecting to IBController
2018-02-06 13:06:02,437 - DEBUG - Connected to IBController
2018-02-06 13:06:02,437 - DEBUG - Position requested
2018-02-06 13:06:02,438 - DEBUG - Pos Mgmt 0
2018-02-06 13:06:02,438 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210CDD8>, pos=0, avgCost=0.0>
2018-02-06 13:06:02,440 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 13:06:02,440 - DEBUG - ccy2 Currency with position is USD
2018-02-06 13:06:02,440 - DEBUG - Position is 0
2018-02-06 13:06:02,440 - DEBUG - Pos Mgmt -1
2018-02-06 13:06:02,440 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210CBE0>, pos=-1, avgCost=28787.1>
2018-02-06 13:06:02,440 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 13:06:02,440 - DEBUG - ccy2 Currency with position is USD
2018-02-06 13:06:02,441 - DEBUG - Position is -1
2018-02-06 13:06:02,441 - DEBUG - In Position
2018-02-06 13:06:02,441 - DEBUG - Position is 1
2018-02-06 13:06:02,443 - DEBUG - Pos Mgmt -12987
2018-02-06 13:06:02,443 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210CF98>, pos=-12987, avgCost=0.95368235>
2018-02-06 13:06:02,443 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 13:06:02,443 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 13:06:02,444 - DEBUG - Position is -12987
2018-02-06 13:06:02,444 - DEBUG - Pos Mgmt 0
2018-02-06 13:06:02,444 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210CD68>, pos=0, avgCost=0.0>
2018-02-06 13:06:02,444 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 13:06:02,444 - DEBUG - ccy2 Currency with position is USD
2018-02-06 13:06:02,444 - DEBUG - Position is 0
2018-02-06 13:06:03,437 - DEBUG - Open Orders requested
2018-02-06 13:06:03,440 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x000000000210CF98>, order=<ib.ext.Order.Order object at 0x000000000210CDA0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A1198>>
2018-02-06 13:06:03,440 - DEBUG - Order OrderID 171
2018-02-06 13:06:03,440 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 13:06:03,440 - DEBUG - Order status PreSubmitted
2018-02-06 13:06:03,441 - DEBUG - Order Identification 171
2018-02-06 13:06:03,441 - DEBUG - Order Identification <class 'int'>
2018-02-06 13:06:03,441 - DEBUG - Profit ID from database is 170
2018-02-06 13:06:03,443 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 13:06:03,443 - DEBUG - Stop ID database is 171
2018-02-06 13:06:03,443 - DEBUG - Entry ID database is 170
2018-02-06 13:06:03,443 - DEBUG - Stop API ID is 171
2018-02-06 13:06:05,438 - DEBUG - Connecting to database
2018-02-06 13:06:05,447 - DEBUG - Connected to database
2018-02-06 13:06:05,447 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 13:06:05,448 - DEBUG - Stop loss value is 74.22
2018-02-06 13:06:05,450 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 13:06:05,450 - DEBUG - Stop loss value is 61.3
2018-02-06 13:06:05,451 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 13:06:05,451 - DEBUG - EntryPrice value is 72.25
2018-02-06 13:06:05,453 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 13:06:05,453 - DEBUG - Stop quantity 1
2018-02-06 13:06:05,454 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 13:06:05,456 - DEBUG - Direction is Short
2018-02-06 13:06:05,457 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 13:06:05,457 - DEBUG - Count is 1
2018-02-06 13:06:05,459 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 13:06:05,459 - DEBUG - Stop Loss Flag is 1
2018-02-06 13:06:05,460 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 13:06:05,460 - DEBUG - Max ID Order is (171,)
2018-02-06 13:06:05,460 - DEBUG - Today is 2018-02-06
2018-02-06 13:06:05,461 - DEBUG - Day of the week 1
2018-02-06 13:06:05,461 - DEBUG - Yesterday is 02/05/2018
2018-02-06 13:06:05,461 - DEBUG - In Position is  1
2018-02-06 13:06:05,463 - DEBUG - In Position is  <class 'int'>
2018-02-06 13:06:05,463 - DEBUG - curStopLossFlag is  1
2018-02-06 13:06:05,463 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 13:06:05,463 - DEBUG - Checking if Entry has been filled
2018-02-06 13:06:05,463 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 13:06:05,464 - DEBUG - EntryPend is 0
2018-02-06 13:06:05,464 - DEBUG - Try to Cancel Stop
2018-02-06 13:06:05,466 - DEBUG - Stop API ID 171
2018-02-06 13:06:05,466 - DEBUG - Profit API ID 0
2018-02-06 13:06:05,466 - DEBUG - Stop API ID <class 'int'>
2018-02-06 13:06:05,466 - DEBUG - Profit API ID <class 'int'>
2018-02-06 13:06:05,467 - DEBUG - Pos is 1
2018-02-06 13:06:05,467 - DEBUG - CurCount is 1
2018-02-06 13:06:05,467 - DEBUG - In Pos 1
2018-02-06 13:06:05,467 - DEBUG - Stop ID is 171
2018-02-06 13:06:05,467 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 13:06:05,469 - DEBUG - EntryPend is 0
2018-02-06 13:06:05,469 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 13:06:05,469 - DEBUG - Entry Date is 10
2018-02-06 13:06:05,470 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 13:06:05,470 - DEBUG - Order Profit ID is 170
2018-02-06 13:06:05,470 - DEBUG - Order Entry ID is 170
2018-02-06 13:06:05,470 - DEBUG - API ID is  0
2018-02-06 13:06:05,470 - DEBUG - Current Position is 1
2018-02-06 13:06:05,470 - DEBUG - Current Position is <class 'str'>
2018-02-06 13:06:05,470 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 13:06:05,471 - DEBUG - Time is 13
2018-02-06 13:06:05,471 - DEBUG - Time is <class 'int'>
2018-02-06 13:06:05,471 - DEBUG - Time is 6
2018-02-06 13:06:05,471 - DEBUG - Time is <class 'int'>
2018-02-06 13:06:05,473 - DEBUG - Disconnected from IBController
2018-02-06 13:06:05,473 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 13:11:01,371 - DEBUG - ****************************************************
2018-02-06 13:11:01,372 - DEBUG - Current Time is 01:11PM
2018-02-06 13:11:01,372 - DEBUG - Starting Pos Mgmt H E
2018-02-06 13:11:01,372 - DEBUG - Connecting to database
2018-02-06 13:11:01,418 - DEBUG - Connected to database
2018-02-06 13:11:01,418 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 13:11:01,421 - DEBUG - Order Profit is 170
2018-02-06 13:11:01,421 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 13:11:01,423 - DEBUG - Stop ID is 171
2018-02-06 13:11:01,423 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 13:11:01,424 - DEBUG - Entry ID is 170
2018-02-06 13:11:01,424 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 13:11:01,426 - DEBUG - OCA ID is 1
2018-02-06 13:11:01,427 - DEBUG - Connecting to IBController
2018-02-06 13:11:02,431 - DEBUG - Connected to IBController
2018-02-06 13:11:02,431 - DEBUG - Position requested
2018-02-06 13:11:02,434 - DEBUG - Pos Mgmt 0
2018-02-06 13:11:02,434 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210DB38>, pos=0, avgCost=0.0>
2018-02-06 13:11:02,434 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 13:11:02,434 - DEBUG - ccy2 Currency with position is USD
2018-02-06 13:11:02,434 - DEBUG - Position is 0
2018-02-06 13:11:02,436 - DEBUG - Pos Mgmt -1
2018-02-06 13:11:02,436 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210DAC8>, pos=-1, avgCost=28787.1>
2018-02-06 13:11:02,436 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 13:11:02,436 - DEBUG - ccy2 Currency with position is USD
2018-02-06 13:11:02,437 - DEBUG - Position is -1
2018-02-06 13:11:02,437 - DEBUG - In Position
2018-02-06 13:11:02,437 - DEBUG - Position is 1
2018-02-06 13:11:02,437 - DEBUG - Pos Mgmt -12987
2018-02-06 13:11:02,437 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210DF28>, pos=-12987, avgCost=0.95368235>
2018-02-06 13:11:02,437 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 13:11:02,437 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 13:11:02,438 - DEBUG - Position is -12987
2018-02-06 13:11:02,438 - DEBUG - Pos Mgmt 0
2018-02-06 13:11:02,438 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210DD30>, pos=0, avgCost=0.0>
2018-02-06 13:11:02,440 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 13:11:02,440 - DEBUG - ccy2 Currency with position is USD
2018-02-06 13:11:02,440 - DEBUG - Position is 0
2018-02-06 13:11:03,434 - DEBUG - Open Orders requested
2018-02-06 13:11:03,436 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x000000000210DF60>, order=<ib.ext.Order.Order object at 0x000000000210DB00>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A1208>>
2018-02-06 13:11:03,437 - DEBUG - Order OrderID 171
2018-02-06 13:11:03,437 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 13:11:03,437 - DEBUG - Order status PreSubmitted
2018-02-06 13:11:03,437 - DEBUG - Order Identification 171
2018-02-06 13:11:03,437 - DEBUG - Order Identification <class 'int'>
2018-02-06 13:11:03,437 - DEBUG - Profit ID from database is 170
2018-02-06 13:11:03,438 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 13:11:03,438 - DEBUG - Stop ID database is 171
2018-02-06 13:11:03,438 - DEBUG - Entry ID database is 170
2018-02-06 13:11:03,438 - DEBUG - Stop API ID is 171
2018-02-06 13:11:05,437 - DEBUG - Connecting to database
2018-02-06 13:11:05,444 - DEBUG - Connected to database
2018-02-06 13:11:05,446 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 13:11:05,446 - DEBUG - Stop loss value is 74.22
2018-02-06 13:11:05,447 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 13:11:05,447 - DEBUG - Stop loss value is 61.3
2018-02-06 13:11:05,450 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 13:11:05,450 - DEBUG - EntryPrice value is 72.25
2018-02-06 13:11:05,450 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 13:11:05,451 - DEBUG - Stop quantity 1
2018-02-06 13:11:05,453 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 13:11:05,453 - DEBUG - Direction is Short
2018-02-06 13:11:05,454 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 13:11:05,456 - DEBUG - Count is 1
2018-02-06 13:11:05,457 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 13:11:05,457 - DEBUG - Stop Loss Flag is 1
2018-02-06 13:11:05,459 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 13:11:05,459 - DEBUG - Max ID Order is (171,)
2018-02-06 13:11:05,459 - DEBUG - Today is 2018-02-06
2018-02-06 13:11:05,460 - DEBUG - Day of the week 1
2018-02-06 13:11:05,460 - DEBUG - Yesterday is 02/05/2018
2018-02-06 13:11:05,460 - DEBUG - In Position is  1
2018-02-06 13:11:05,460 - DEBUG - In Position is  <class 'int'>
2018-02-06 13:11:05,460 - DEBUG - curStopLossFlag is  1
2018-02-06 13:11:05,460 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 13:11:05,460 - DEBUG - Checking if Entry has been filled
2018-02-06 13:11:05,461 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 13:11:05,463 - DEBUG - EntryPend is 0
2018-02-06 13:11:05,463 - DEBUG - Try to Cancel Stop
2018-02-06 13:11:05,463 - DEBUG - Stop API ID 171
2018-02-06 13:11:05,463 - DEBUG - Profit API ID 0
2018-02-06 13:11:05,463 - DEBUG - Stop API ID <class 'int'>
2018-02-06 13:11:05,463 - DEBUG - Profit API ID <class 'int'>
2018-02-06 13:11:05,464 - DEBUG - Pos is 1
2018-02-06 13:11:05,464 - DEBUG - CurCount is 1
2018-02-06 13:11:05,464 - DEBUG - In Pos 1
2018-02-06 13:11:05,464 - DEBUG - Stop ID is 171
2018-02-06 13:11:05,466 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 13:11:05,467 - DEBUG - EntryPend is 0
2018-02-06 13:11:05,467 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 13:11:05,467 - DEBUG - Entry Date is 10
2018-02-06 13:11:05,467 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 13:11:05,467 - DEBUG - Order Profit ID is 170
2018-02-06 13:11:05,467 - DEBUG - Order Entry ID is 170
2018-02-06 13:11:05,467 - DEBUG - API ID is  0
2018-02-06 13:11:05,469 - DEBUG - Current Position is 1
2018-02-06 13:11:05,469 - DEBUG - Current Position is <class 'str'>
2018-02-06 13:11:05,469 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 13:11:05,469 - DEBUG - Time is 13
2018-02-06 13:11:05,470 - DEBUG - Time is <class 'int'>
2018-02-06 13:11:05,470 - DEBUG - Time is 11
2018-02-06 13:11:05,470 - DEBUG - Time is <class 'int'>
2018-02-06 13:11:05,470 - DEBUG - Disconnected from IBController
2018-02-06 13:11:05,470 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 13:16:01,374 - DEBUG - ****************************************************
2018-02-06 13:16:01,374 - DEBUG - Current Time is 01:16PM
2018-02-06 13:16:01,375 - DEBUG - Starting Pos Mgmt H E
2018-02-06 13:16:01,375 - DEBUG - Connecting to database
2018-02-06 13:16:01,403 - DEBUG - Connected to database
2018-02-06 13:16:01,403 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 13:16:01,404 - DEBUG - Order Profit is 170
2018-02-06 13:16:01,404 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 13:16:01,407 - DEBUG - Stop ID is 171
2018-02-06 13:16:01,407 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 13:16:01,407 - DEBUG - Entry ID is 170
2018-02-06 13:16:01,408 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 13:16:01,410 - DEBUG - OCA ID is 1
2018-02-06 13:16:01,411 - DEBUG - Connecting to IBController
2018-02-06 13:16:02,415 - DEBUG - Connected to IBController
2018-02-06 13:16:02,415 - DEBUG - Position requested
2018-02-06 13:16:02,417 - DEBUG - Pos Mgmt 0
2018-02-06 13:16:02,417 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211CD68>, pos=0, avgCost=0.0>
2018-02-06 13:16:02,418 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 13:16:02,418 - DEBUG - ccy2 Currency with position is USD
2018-02-06 13:16:02,418 - DEBUG - Position is 0
2018-02-06 13:16:02,420 - DEBUG - Pos Mgmt -1
2018-02-06 13:16:02,420 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211CCF8>, pos=-1, avgCost=28787.1>
2018-02-06 13:16:02,420 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 13:16:02,420 - DEBUG - ccy2 Currency with position is USD
2018-02-06 13:16:02,421 - DEBUG - Position is -1
2018-02-06 13:16:02,421 - DEBUG - In Position
2018-02-06 13:16:02,421 - DEBUG - Position is 1
2018-02-06 13:16:02,421 - DEBUG - Pos Mgmt -12987
2018-02-06 13:16:02,421 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211CF28>, pos=-12987, avgCost=0.95368235>
2018-02-06 13:16:02,421 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 13:16:02,421 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 13:16:02,423 - DEBUG - Position is -12987
2018-02-06 13:16:02,423 - DEBUG - Pos Mgmt 0
2018-02-06 13:16:02,423 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211CDD8>, pos=0, avgCost=0.0>
2018-02-06 13:16:02,424 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 13:16:02,424 - DEBUG - ccy2 Currency with position is USD
2018-02-06 13:16:02,424 - DEBUG - Position is 0
2018-02-06 13:16:03,417 - DEBUG - Open Orders requested
2018-02-06 13:16:03,418 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x000000000211CF28>, order=<ib.ext.Order.Order object at 0x000000000211CB00>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B1198>>
2018-02-06 13:16:03,418 - DEBUG - Order OrderID 171
2018-02-06 13:16:03,420 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 13:16:03,420 - DEBUG - Order status PreSubmitted
2018-02-06 13:16:03,421 - DEBUG - Order Identification 171
2018-02-06 13:16:03,421 - DEBUG - Order Identification <class 'int'>
2018-02-06 13:16:03,421 - DEBUG - Profit ID from database is 170
2018-02-06 13:16:03,421 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 13:16:03,421 - DEBUG - Stop ID database is 171
2018-02-06 13:16:03,421 - DEBUG - Entry ID database is 170
2018-02-06 13:16:03,421 - DEBUG - Stop API ID is 171
2018-02-06 13:16:05,417 - DEBUG - Connecting to database
2018-02-06 13:16:05,426 - DEBUG - Connected to database
2018-02-06 13:16:05,427 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 13:16:05,428 - DEBUG - Stop loss value is 74.22
2018-02-06 13:16:05,430 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 13:16:05,430 - DEBUG - Stop loss value is 61.3
2018-02-06 13:16:05,431 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 13:16:05,433 - DEBUG - EntryPrice value is 72.25
2018-02-06 13:16:05,434 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 13:16:05,434 - DEBUG - Stop quantity 1
2018-02-06 13:16:05,436 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 13:16:05,436 - DEBUG - Direction is Short
2018-02-06 13:16:05,437 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 13:16:05,437 - DEBUG - Count is 1
2018-02-06 13:16:05,438 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 13:16:05,440 - DEBUG - Stop Loss Flag is 1
2018-02-06 13:16:05,440 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 13:16:05,441 - DEBUG - Max ID Order is (171,)
2018-02-06 13:16:05,441 - DEBUG - Today is 2018-02-06
2018-02-06 13:16:05,441 - DEBUG - Day of the week 1
2018-02-06 13:16:05,443 - DEBUG - Yesterday is 02/05/2018
2018-02-06 13:16:05,443 - DEBUG - In Position is  1
2018-02-06 13:16:05,443 - DEBUG - In Position is  <class 'int'>
2018-02-06 13:16:05,443 - DEBUG - curStopLossFlag is  1
2018-02-06 13:16:05,444 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 13:16:05,444 - DEBUG - Checking if Entry has been filled
2018-02-06 13:16:05,444 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 13:16:05,446 - DEBUG - EntryPend is 0
2018-02-06 13:16:05,446 - DEBUG - Try to Cancel Stop
2018-02-06 13:16:05,446 - DEBUG - Stop API ID 171
2018-02-06 13:16:05,447 - DEBUG - Profit API ID 0
2018-02-06 13:16:05,447 - DEBUG - Stop API ID <class 'int'>
2018-02-06 13:16:05,447 - DEBUG - Profit API ID <class 'int'>
2018-02-06 13:16:05,447 - DEBUG - Pos is 1
2018-02-06 13:16:05,447 - DEBUG - CurCount is 1
2018-02-06 13:16:05,447 - DEBUG - In Pos 1
2018-02-06 13:16:05,447 - DEBUG - Stop ID is 171
2018-02-06 13:16:05,447 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 13:16:05,450 - DEBUG - EntryPend is 0
2018-02-06 13:16:05,450 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 13:16:05,450 - DEBUG - Entry Date is 10
2018-02-06 13:16:05,450 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 13:16:05,450 - DEBUG - Order Profit ID is 170
2018-02-06 13:16:05,450 - DEBUG - Order Entry ID is 170
2018-02-06 13:16:05,450 - DEBUG - API ID is  0
2018-02-06 13:16:05,451 - DEBUG - Current Position is 1
2018-02-06 13:16:05,451 - DEBUG - Current Position is <class 'str'>
2018-02-06 13:16:05,451 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 13:16:05,451 - DEBUG - Time is 13
2018-02-06 13:16:05,453 - DEBUG - Time is <class 'int'>
2018-02-06 13:16:05,453 - DEBUG - Time is 16
2018-02-06 13:16:05,453 - DEBUG - Time is <class 'int'>
2018-02-06 13:16:05,453 - DEBUG - Disconnected from IBController
2018-02-06 13:16:05,453 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 13:21:01,371 - DEBUG - ****************************************************
2018-02-06 13:21:01,372 - DEBUG - Current Time is 01:21PM
2018-02-06 13:21:01,372 - DEBUG - Starting Pos Mgmt H E
2018-02-06 13:21:01,372 - DEBUG - Connecting to database
2018-02-06 13:21:01,417 - DEBUG - Connected to database
2018-02-06 13:21:01,417 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 13:21:01,420 - DEBUG - Order Profit is 170
2018-02-06 13:21:01,420 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 13:21:01,421 - DEBUG - Stop ID is 171
2018-02-06 13:21:01,421 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 13:21:01,423 - DEBUG - Entry ID is 170
2018-02-06 13:21:01,424 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 13:21:01,426 - DEBUG - OCA ID is 1
2018-02-06 13:21:01,426 - DEBUG - Connecting to IBController
2018-02-06 13:21:02,430 - DEBUG - Connected to IBController
2018-02-06 13:21:02,430 - DEBUG - Position requested
2018-02-06 13:21:02,433 - DEBUG - Pos Mgmt 0
2018-02-06 13:21:02,433 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211DB38>, pos=0, avgCost=0.0>
2018-02-06 13:21:02,434 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 13:21:02,434 - DEBUG - ccy2 Currency with position is USD
2018-02-06 13:21:02,434 - DEBUG - Position is 0
2018-02-06 13:21:02,434 - DEBUG - Pos Mgmt -1
2018-02-06 13:21:02,434 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211DCF8>, pos=-1, avgCost=28787.1>
2018-02-06 13:21:02,434 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 13:21:02,436 - DEBUG - ccy2 Currency with position is USD
2018-02-06 13:21:02,436 - DEBUG - Position is -1
2018-02-06 13:21:02,436 - DEBUG - In Position
2018-02-06 13:21:02,436 - DEBUG - Position is 1
2018-02-06 13:21:02,437 - DEBUG - Pos Mgmt -12987
2018-02-06 13:21:02,437 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211DF28>, pos=-12987, avgCost=0.95368235>
2018-02-06 13:21:02,437 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 13:21:02,437 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 13:21:02,437 - DEBUG - Position is -12987
2018-02-06 13:21:02,437 - DEBUG - Pos Mgmt 0
2018-02-06 13:21:02,437 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211DB00>, pos=0, avgCost=0.0>
2018-02-06 13:21:02,438 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 13:21:02,438 - DEBUG - ccy2 Currency with position is USD
2018-02-06 13:21:02,438 - DEBUG - Position is 0
2018-02-06 13:21:03,433 - DEBUG - Open Orders requested
2018-02-06 13:21:03,434 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x000000000211DF60>, order=<ib.ext.Order.Order object at 0x000000000211DAC8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B1208>>
2018-02-06 13:21:03,436 - DEBUG - Order OrderID 171
2018-02-06 13:21:03,436 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 13:21:03,437 - DEBUG - Order status PreSubmitted
2018-02-06 13:21:03,437 - DEBUG - Order Identification 171
2018-02-06 13:21:03,437 - DEBUG - Order Identification <class 'int'>
2018-02-06 13:21:03,437 - DEBUG - Profit ID from database is 170
2018-02-06 13:21:03,437 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 13:21:03,437 - DEBUG - Stop ID database is 171
2018-02-06 13:21:03,437 - DEBUG - Entry ID database is 170
2018-02-06 13:21:03,438 - DEBUG - Stop API ID is 171
2018-02-06 13:21:05,436 - DEBUG - Connecting to database
2018-02-06 13:21:05,444 - DEBUG - Connected to database
2018-02-06 13:21:05,447 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 13:21:05,447 - DEBUG - Stop loss value is 74.22
2018-02-06 13:21:05,448 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 13:21:05,450 - DEBUG - Stop loss value is 61.3
2018-02-06 13:21:05,450 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 13:21:05,450 - DEBUG - EntryPrice value is 72.25
2018-02-06 13:21:05,453 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 13:21:05,453 - DEBUG - Stop quantity 1
2018-02-06 13:21:05,453 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 13:21:05,454 - DEBUG - Direction is Short
2018-02-06 13:21:05,456 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 13:21:05,457 - DEBUG - Count is 1
2018-02-06 13:21:05,457 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 13:21:05,457 - DEBUG - Stop Loss Flag is 1
2018-02-06 13:21:05,460 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 13:21:05,460 - DEBUG - Max ID Order is (171,)
2018-02-06 13:21:05,460 - DEBUG - Today is 2018-02-06
2018-02-06 13:21:05,460 - DEBUG - Day of the week 1
2018-02-06 13:21:05,461 - DEBUG - Yesterday is 02/05/2018
2018-02-06 13:21:05,461 - DEBUG - In Position is  1
2018-02-06 13:21:05,461 - DEBUG - In Position is  <class 'int'>
2018-02-06 13:21:05,461 - DEBUG - curStopLossFlag is  1
2018-02-06 13:21:05,463 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 13:21:05,463 - DEBUG - Checking if Entry has been filled
2018-02-06 13:21:05,463 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 13:21:05,464 - DEBUG - EntryPend is 0
2018-02-06 13:21:05,464 - DEBUG - Try to Cancel Stop
2018-02-06 13:21:05,464 - DEBUG - Stop API ID 171
2018-02-06 13:21:05,466 - DEBUG - Profit API ID 0
2018-02-06 13:21:05,466 - DEBUG - Stop API ID <class 'int'>
2018-02-06 13:21:05,466 - DEBUG - Profit API ID <class 'int'>
2018-02-06 13:21:05,466 - DEBUG - Pos is 1
2018-02-06 13:21:05,467 - DEBUG - CurCount is 1
2018-02-06 13:21:05,467 - DEBUG - In Pos 1
2018-02-06 13:21:05,467 - DEBUG - Stop ID is 171
2018-02-06 13:21:05,467 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 13:21:05,469 - DEBUG - EntryPend is 0
2018-02-06 13:21:05,469 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 13:21:05,469 - DEBUG - Entry Date is 10
2018-02-06 13:21:05,469 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 13:21:05,470 - DEBUG - Order Profit ID is 170
2018-02-06 13:21:05,470 - DEBUG - Order Entry ID is 170
2018-02-06 13:21:05,470 - DEBUG - API ID is  0
2018-02-06 13:21:05,470 - DEBUG - Current Position is 1
2018-02-06 13:21:05,470 - DEBUG - Current Position is <class 'str'>
2018-02-06 13:21:05,470 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 13:21:05,470 - DEBUG - Time is 13
2018-02-06 13:21:05,470 - DEBUG - Time is <class 'int'>
2018-02-06 13:21:05,471 - DEBUG - Time is 21
2018-02-06 13:21:05,471 - DEBUG - Time is <class 'int'>
2018-02-06 13:21:05,471 - DEBUG - Disconnected from IBController
2018-02-06 13:21:05,473 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 13:26:01,368 - DEBUG - ****************************************************
2018-02-06 13:26:01,368 - DEBUG - Current Time is 01:26PM
2018-02-06 13:26:01,369 - DEBUG - Starting Pos Mgmt H E
2018-02-06 13:26:01,369 - DEBUG - Connecting to database
2018-02-06 13:26:01,394 - DEBUG - Connected to database
2018-02-06 13:26:01,395 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 13:26:01,397 - DEBUG - Order Profit is 170
2018-02-06 13:26:01,398 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 13:26:01,398 - DEBUG - Stop ID is 171
2018-02-06 13:26:01,400 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 13:26:01,401 - DEBUG - Entry ID is 170
2018-02-06 13:26:01,401 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 13:26:01,403 - DEBUG - OCA ID is 1
2018-02-06 13:26:01,403 - DEBUG - Connecting to IBController
2018-02-06 13:26:02,411 - DEBUG - Connected to IBController
2018-02-06 13:26:02,411 - DEBUG - Position requested
2018-02-06 13:26:02,414 - DEBUG - Pos Mgmt 0
2018-02-06 13:26:02,414 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210DB38>, pos=0, avgCost=0.0>
2018-02-06 13:26:02,414 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 13:26:02,414 - DEBUG - ccy2 Currency with position is USD
2018-02-06 13:26:02,414 - DEBUG - Position is 0
2018-02-06 13:26:02,415 - DEBUG - Pos Mgmt -1
2018-02-06 13:26:02,415 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210DC18>, pos=-1, avgCost=28787.1>
2018-02-06 13:26:02,415 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 13:26:02,415 - DEBUG - ccy2 Currency with position is USD
2018-02-06 13:26:02,417 - DEBUG - Position is -1
2018-02-06 13:26:02,417 - DEBUG - In Position
2018-02-06 13:26:02,417 - DEBUG - Position is 1
2018-02-06 13:26:02,417 - DEBUG - Pos Mgmt -12987
2018-02-06 13:26:02,417 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210DF28>, pos=-12987, avgCost=0.95368235>
2018-02-06 13:26:02,417 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 13:26:02,417 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 13:26:02,418 - DEBUG - Position is -12987
2018-02-06 13:26:02,418 - DEBUG - Pos Mgmt 0
2018-02-06 13:26:02,418 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210DD30>, pos=0, avgCost=0.0>
2018-02-06 13:26:02,420 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 13:26:02,420 - DEBUG - ccy2 Currency with position is USD
2018-02-06 13:26:02,420 - DEBUG - Position is 0
2018-02-06 13:26:03,414 - DEBUG - Open Orders requested
2018-02-06 13:26:03,415 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x000000000210DF60>, order=<ib.ext.Order.Order object at 0x000000000210DB00>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A2208>>
2018-02-06 13:26:03,417 - DEBUG - Order OrderID 171
2018-02-06 13:26:03,417 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 13:26:03,417 - DEBUG - Order status PreSubmitted
2018-02-06 13:26:03,417 - DEBUG - Order Identification 171
2018-02-06 13:26:03,417 - DEBUG - Order Identification <class 'int'>
2018-02-06 13:26:03,418 - DEBUG - Profit ID from database is 170
2018-02-06 13:26:03,418 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 13:26:03,418 - DEBUG - Stop ID database is 171
2018-02-06 13:26:03,418 - DEBUG - Entry ID database is 170
2018-02-06 13:26:03,418 - DEBUG - Stop API ID is 171
2018-02-06 13:26:05,417 - DEBUG - Connecting to database
2018-02-06 13:26:05,426 - DEBUG - Connected to database
2018-02-06 13:26:05,427 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 13:26:05,427 - DEBUG - Stop loss value is 74.22
2018-02-06 13:26:05,428 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 13:26:05,428 - DEBUG - Stop loss value is 61.3
2018-02-06 13:26:05,430 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 13:26:05,430 - DEBUG - EntryPrice value is 72.25
2018-02-06 13:26:05,431 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 13:26:05,433 - DEBUG - Stop quantity 1
2018-02-06 13:26:05,434 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 13:26:05,434 - DEBUG - Direction is Short
2018-02-06 13:26:05,436 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 13:26:05,436 - DEBUG - Count is 1
2018-02-06 13:26:05,437 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 13:26:05,437 - DEBUG - Stop Loss Flag is 1
2018-02-06 13:26:05,438 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 13:26:05,440 - DEBUG - Max ID Order is (171,)
2018-02-06 13:26:05,440 - DEBUG - Today is 2018-02-06
2018-02-06 13:26:05,440 - DEBUG - Day of the week 1
2018-02-06 13:26:05,440 - DEBUG - Yesterday is 02/05/2018
2018-02-06 13:26:05,440 - DEBUG - In Position is  1
2018-02-06 13:26:05,440 - DEBUG - In Position is  <class 'int'>
2018-02-06 13:26:05,441 - DEBUG - curStopLossFlag is  1
2018-02-06 13:26:05,441 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 13:26:05,441 - DEBUG - Checking if Entry has been filled
2018-02-06 13:26:05,443 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 13:26:05,444 - DEBUG - EntryPend is 0
2018-02-06 13:26:05,444 - DEBUG - Try to Cancel Stop
2018-02-06 13:26:05,444 - DEBUG - Stop API ID 171
2018-02-06 13:26:05,444 - DEBUG - Profit API ID 0
2018-02-06 13:26:05,446 - DEBUG - Stop API ID <class 'int'>
2018-02-06 13:26:05,446 - DEBUG - Profit API ID <class 'int'>
2018-02-06 13:26:05,446 - DEBUG - Pos is 1
2018-02-06 13:26:05,447 - DEBUG - CurCount is 1
2018-02-06 13:26:05,447 - DEBUG - In Pos 1
2018-02-06 13:26:05,447 - DEBUG - Stop ID is 171
2018-02-06 13:26:05,447 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 13:26:05,448 - DEBUG - EntryPend is 0
2018-02-06 13:26:05,448 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 13:26:05,448 - DEBUG - Entry Date is 10
2018-02-06 13:26:05,450 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 13:26:05,450 - DEBUG - Order Profit ID is 170
2018-02-06 13:26:05,450 - DEBUG - Order Entry ID is 170
2018-02-06 13:26:05,450 - DEBUG - API ID is  0
2018-02-06 13:26:05,450 - DEBUG - Current Position is 1
2018-02-06 13:26:05,450 - DEBUG - Current Position is <class 'str'>
2018-02-06 13:26:05,450 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 13:26:05,450 - DEBUG - Time is 13
2018-02-06 13:26:05,450 - DEBUG - Time is <class 'int'>
2018-02-06 13:26:05,451 - DEBUG - Time is 26
2018-02-06 13:26:05,451 - DEBUG - Time is <class 'int'>
2018-02-06 13:26:05,451 - DEBUG - Disconnected from IBController
2018-02-06 13:26:05,453 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 13:31:01,372 - DEBUG - ****************************************************
2018-02-06 13:31:01,374 - DEBUG - Current Time is 01:31PM
2018-02-06 13:31:01,374 - DEBUG - Starting Pos Mgmt H E
2018-02-06 13:31:01,375 - DEBUG - Connecting to database
2018-02-06 13:31:01,394 - DEBUG - Connected to database
2018-02-06 13:31:01,394 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 13:31:01,397 - DEBUG - Order Profit is 170
2018-02-06 13:31:01,397 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 13:31:01,398 - DEBUG - Stop ID is 171
2018-02-06 13:31:01,398 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 13:31:01,403 - DEBUG - Entry ID is 170
2018-02-06 13:31:01,404 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 13:31:01,405 - DEBUG - OCA ID is 1
2018-02-06 13:31:01,405 - DEBUG - Connecting to IBController
2018-02-06 13:31:02,411 - DEBUG - Connected to IBController
2018-02-06 13:31:02,411 - DEBUG - Position requested
2018-02-06 13:31:02,414 - DEBUG - Pos Mgmt 0
2018-02-06 13:31:02,414 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000213CE10>, pos=0, avgCost=0.0>
2018-02-06 13:31:02,414 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 13:31:02,414 - DEBUG - ccy2 Currency with position is USD
2018-02-06 13:31:02,414 - DEBUG - Position is 0
2018-02-06 13:31:02,415 - DEBUG - Pos Mgmt -1
2018-02-06 13:31:02,415 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000213CCC0>, pos=-1, avgCost=28787.1>
2018-02-06 13:31:02,417 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 13:31:02,417 - DEBUG - ccy2 Currency with position is USD
2018-02-06 13:31:02,417 - DEBUG - Position is -1
2018-02-06 13:31:02,417 - DEBUG - In Position
2018-02-06 13:31:02,417 - DEBUG - Position is 1
2018-02-06 13:31:02,417 - DEBUG - Pos Mgmt -12987
2018-02-06 13:31:02,417 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000213CF28>, pos=-12987, avgCost=0.95368235>
2018-02-06 13:31:02,417 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 13:31:02,418 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 13:31:02,418 - DEBUG - Position is -12987
2018-02-06 13:31:02,418 - DEBUG - Pos Mgmt 0
2018-02-06 13:31:02,420 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000213CDA0>, pos=0, avgCost=0.0>
2018-02-06 13:31:02,420 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 13:31:02,420 - DEBUG - ccy2 Currency with position is USD
2018-02-06 13:31:02,420 - DEBUG - Position is 0
2018-02-06 13:31:03,413 - DEBUG - Open Orders requested
2018-02-06 13:31:03,414 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x000000000213CF28>, order=<ib.ext.Order.Order object at 0x000000000213CD30>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021D1198>>
2018-02-06 13:31:03,415 - DEBUG - Order OrderID 171
2018-02-06 13:31:03,415 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 13:31:03,417 - DEBUG - Order status PreSubmitted
2018-02-06 13:31:03,417 - DEBUG - Order Identification 171
2018-02-06 13:31:03,417 - DEBUG - Order Identification <class 'int'>
2018-02-06 13:31:03,417 - DEBUG - Profit ID from database is 170
2018-02-06 13:31:03,417 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 13:31:03,417 - DEBUG - Stop ID database is 171
2018-02-06 13:31:03,417 - DEBUG - Entry ID database is 170
2018-02-06 13:31:03,417 - DEBUG - Stop API ID is 171
2018-02-06 13:31:05,414 - DEBUG - Connecting to database
2018-02-06 13:31:05,421 - DEBUG - Connected to database
2018-02-06 13:31:05,423 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 13:31:05,424 - DEBUG - Stop loss value is 74.22
2018-02-06 13:31:05,424 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 13:31:05,426 - DEBUG - Stop loss value is 61.3
2018-02-06 13:31:05,427 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 13:31:05,427 - DEBUG - EntryPrice value is 72.25
2018-02-06 13:31:05,428 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 13:31:05,428 - DEBUG - Stop quantity 1
2018-02-06 13:31:05,430 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 13:31:05,430 - DEBUG - Direction is Short
2018-02-06 13:31:05,431 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 13:31:05,433 - DEBUG - Count is 1
2018-02-06 13:31:05,434 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 13:31:05,434 - DEBUG - Stop Loss Flag is 1
2018-02-06 13:31:05,436 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 13:31:05,436 - DEBUG - Max ID Order is (171,)
2018-02-06 13:31:05,437 - DEBUG - Today is 2018-02-06
2018-02-06 13:31:05,437 - DEBUG - Day of the week 1
2018-02-06 13:31:05,437 - DEBUG - Yesterday is 02/05/2018
2018-02-06 13:31:05,437 - DEBUG - In Position is  1
2018-02-06 13:31:05,437 - DEBUG - In Position is  <class 'int'>
2018-02-06 13:31:05,437 - DEBUG - curStopLossFlag is  1
2018-02-06 13:31:05,438 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 13:31:05,438 - DEBUG - Checking if Entry has been filled
2018-02-06 13:31:05,438 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 13:31:05,440 - DEBUG - EntryPend is 0
2018-02-06 13:31:05,440 - DEBUG - Try to Cancel Stop
2018-02-06 13:31:05,440 - DEBUG - Stop API ID 171
2018-02-06 13:31:05,440 - DEBUG - Profit API ID 0
2018-02-06 13:31:05,441 - DEBUG - Stop API ID <class 'int'>
2018-02-06 13:31:05,441 - DEBUG - Profit API ID <class 'int'>
2018-02-06 13:31:05,441 - DEBUG - Pos is 1
2018-02-06 13:31:05,441 - DEBUG - CurCount is 1
2018-02-06 13:31:05,443 - DEBUG - In Pos 1
2018-02-06 13:31:05,443 - DEBUG - Stop ID is 171
2018-02-06 13:31:05,443 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 13:31:05,444 - DEBUG - EntryPend is 0
2018-02-06 13:31:05,444 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 13:31:05,444 - DEBUG - Entry Date is 10
2018-02-06 13:31:05,444 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 13:31:05,446 - DEBUG - Order Profit ID is 170
2018-02-06 13:31:05,446 - DEBUG - Order Entry ID is 170
2018-02-06 13:31:05,446 - DEBUG - API ID is  0
2018-02-06 13:31:05,446 - DEBUG - Current Position is 1
2018-02-06 13:31:05,447 - DEBUG - Current Position is <class 'str'>
2018-02-06 13:31:05,447 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 13:31:05,447 - DEBUG - Time is 13
2018-02-06 13:31:05,447 - DEBUG - Time is <class 'int'>
2018-02-06 13:31:05,447 - DEBUG - Time is 31
2018-02-06 13:31:05,447 - DEBUG - Time is <class 'int'>
2018-02-06 13:31:05,447 - DEBUG - Disconnected from IBController
2018-02-06 13:31:05,448 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-06 13:36:01,371 - DEBUG - ****************************************************
2018-02-06 13:36:01,371 - DEBUG - Current Time is 01:36PM
2018-02-06 13:36:01,371 - DEBUG - Starting Pos Mgmt H E
2018-02-06 13:36:01,371 - DEBUG - Connecting to database
2018-02-06 13:36:01,420 - DEBUG - Connected to database
2018-02-06 13:36:01,421 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-06 13:36:01,421 - DEBUG - Order Profit is 170
2018-02-06 13:36:01,421 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-06 13:36:01,424 - DEBUG - Stop ID is 171
2018-02-06 13:36:01,424 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-06 13:36:01,426 - DEBUG - Entry ID is 170
2018-02-06 13:36:01,426 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-06 13:36:01,427 - DEBUG - OCA ID is 1
2018-02-06 13:36:01,427 - DEBUG - Connecting to IBController
2018-02-06 13:36:02,433 - DEBUG - Connected to IBController
2018-02-06 13:36:02,433 - DEBUG - Position requested
2018-02-06 13:36:02,434 - DEBUG - Pos Mgmt 0
2018-02-06 13:36:02,436 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FCB38>, pos=0, avgCost=0.0>
2018-02-06 13:36:02,436 - DEBUG - ccy1 Symbol with position is ES
2018-02-06 13:36:02,437 - DEBUG - ccy2 Currency with position is USD
2018-02-06 13:36:02,437 - DEBUG - Position is 0
2018-02-06 13:36:02,437 - DEBUG - Pos Mgmt -1
2018-02-06 13:36:02,437 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FCCC0>, pos=-1, avgCost=28787.1>
2018-02-06 13:36:02,437 - DEBUG - ccy1 Symbol with position is HE
2018-02-06 13:36:02,437 - DEBUG - ccy2 Currency with position is USD
2018-02-06 13:36:02,437 - DEBUG - Position is -1
2018-02-06 13:36:02,437 - DEBUG - In Position
2018-02-06 13:36:02,438 - DEBUG - Position is 1
2018-02-06 13:36:02,438 - DEBUG - Pos Mgmt -12987
2018-02-06 13:36:02,438 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FCF28>, pos=-12987, avgCost=0.95368235>
2018-02-06 13:36:02,440 - DEBUG - ccy1 Symbol with position is NZD
2018-02-06 13:36:02,440 - DEBUG - ccy2 Currency with position is CAD
2018-02-06 13:36:02,440 - DEBUG - Position is -12987
2018-02-06 13:36:02,440 - DEBUG - Pos Mgmt 0
2018-02-06 13:36:02,440 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FCE10>, pos=0, avgCost=0.0>
2018-02-06 13:36:02,440 - DEBUG - ccy1 Symbol with position is LE
2018-02-06 13:36:02,440 - DEBUG - ccy2 Currency with position is USD
2018-02-06 13:36:02,440 - DEBUG - Position is 0
2018-02-06 13:36:03,436 - DEBUG - Open Orders requested
2018-02-06 13:36:03,437 - DEBUG - Reply Handler Orders is <openOrder orderId=171, contract=<ib.ext.Contract.Contract object at 0x00000000020FCF60>, order=<ib.ext.Order.Order object at 0x00000000020FCB00>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002192208>>
2018-02-06 13:36:03,438 - DEBUG - Order OrderID 171
2018-02-06 13:36:03,438 - DEBUG - reply handler status <orderStatus orderId=171, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=507067155, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-06 13:36:03,440 - DEBUG - Order status PreSubmitted
2018-02-06 13:36:03,440 - DEBUG - Order Identification 171
2018-02-06 13:36:03,440 - DEBUG - Order Identification <class 'int'>
2018-02-06 13:36:03,440 - DEBUG - Profit ID from database is 170
2018-02-06 13:36:03,440 - DEBUG - Profit ID from database is <class 'str'>
2018-02-06 13:36:03,440 - DEBUG - Stop ID database is 171
2018-02-06 13:36:03,441 - DEBUG - Entry ID database is 170
2018-02-06 13:36:03,441 - DEBUG - Stop API ID is 171
2018-02-06 13:36:05,438 - DEBUG - Connecting to database
2018-02-06 13:36:05,446 - DEBUG - Connected to database
2018-02-06 13:36:05,447 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-06 13:36:05,448 - DEBUG - Stop loss value is 74.22
2018-02-06 13:36:05,450 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-06 13:36:05,450 - DEBUG - Stop loss value is 61.3
2018-02-06 13:36:05,451 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-06 13:36:05,451 - DEBUG - EntryPrice value is 72.25
2018-02-06 13:36:05,453 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-06 13:36:05,453 - DEBUG - Stop quantity 1
2018-02-06 13:36:05,454 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-06 13:36:05,456 - DEBUG - Direction is Short
2018-02-06 13:36:05,457 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-06 13:36:05,457 - DEBUG - Count is 1
2018-02-06 13:36:05,459 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-06 13:36:05,459 - DEBUG - Stop Loss Flag is 1
2018-02-06 13:36:05,460 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-06 13:36:05,460 - DEBUG - Max ID Order is (171,)
2018-02-06 13:36:05,461 - DEBUG - Today is 2018-02-06
2018-02-06 13:36:05,461 - DEBUG - Day of the week 1
2018-02-06 13:36:05,461 - DEBUG - Yesterday is 02/05/2018
2018-02-06 13:36:05,461 - DEBUG - In Position is  1
2018-02-06 13:36:05,463 - DEBUG - In Position is  <class 'int'>
2018-02-06 13:36:05,463 - DEBUG - curStopLossFlag is  1
2018-02-06 13:36:05,463 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-06 13:36:05,463 - DEBUG - Checking if Entry has been filled
2018-02-06 13:36:05,463 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 13:36:05,464 - DEBUG - EntryPend is 0
2018-02-06 13:36:05,466 - DEBUG - Try to Cancel Stop
2018-02-06 13:36:05,466 - DEBUG - Stop API ID 171
2018-02-06 13:36:05,466 - DEBUG - Profit API ID 0
2018-02-06 13:36:05,466 - DEBUG - Stop API ID <class 'int'>
2018-02-06 13:36:05,467 - DEBUG - Profit API ID <class 'int'>
2018-02-06 13:36:05,467 - DEBUG - Pos is 1
2018-02-06 13:36:05,467 - DEBUG - CurCount is 1
2018-02-06 13:36:05,467 - DEBUG - In Pos 1
2018-02-06 13:36:05,467 - DEBUG - Stop ID is 171
2018-02-06 13:36:05,467 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-06 13:36:05,470 - DEBUG - EntryPend is 0
2018-02-06 13:36:05,470 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-06 13:36:05,470 - DEBUG - Entry Date is 10
2018-02-06 13:36:05,470 - DEBUG - confirming yesterday is 02/05/2018
2018-02-06 13:36:05,470 - DEBUG - Order Profit ID is 170
2018-02-06 13:36:05,470 - DEBUG - Order Entry ID is 170
2018-02-06 13:36:05,470 - DEBUG - API ID is  0
2018-02-06 13:36:05,470 - DEBUG - Current Position is 1
2018-02-06 13:36:05,470 - DEBUG - Current Position is <class 'str'>
2018-02-06 13:36:05,471 - DEBUG - Checking if Positions should be close at EOD
2018-02-06 13:36:05,471 - DEBUG - Time is 13
2018-02-06 13:36:05,471 - DEBUG - Time is <class 'int'>
2018-02-06 13:36:05,471 - DEBUG - Time is 36
2018-02-06 13:36:05,473 - DEBUG - Time is <class 'int'>
2018-02-06 13:36:05,473 - DEBUG - Disconnected from IBController
2018-02-06 13:36:05,473 - DEBUG - END POS MGMT SCRIPT :-!
