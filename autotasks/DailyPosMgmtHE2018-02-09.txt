2018-02-09 09:36:01,507 - DEBUG - ****************************************************
2018-02-09 09:36:01,507 - DEBUG - Current Time is 09:36AM
2018-02-09 09:36:01,508 - DEBUG - Starting Pos Mgmt H E
2018-02-09 09:36:01,508 - DEBUG - Connecting to database
2018-02-09 09:36:01,531 - DEBUG - Connected to database
2018-02-09 09:36:01,531 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 09:36:01,533 - DEBUG - Order Profit is 186
2018-02-09 09:36:01,533 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 09:36:01,534 - DEBUG - Stop ID is 0
2018-02-09 09:36:01,535 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 09:36:01,536 - DEBUG - Entry ID is 186
2018-02-09 09:36:01,537 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 09:36:01,538 - DEBUG - OCA ID is 1
2018-02-09 09:36:01,538 - DEBUG - Connecting to IBController
2018-02-09 09:36:02,546 - DEBUG - Connected to IBController
2018-02-09 09:36:02,546 - DEBUG - Position requested
2018-02-09 09:36:02,548 - DEBUG - Pos Mgmt -12987
2018-02-09 09:36:02,549 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000214CA90>, pos=-12987, avgCost=0.95368235>
2018-02-09 09:36:02,549 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 09:36:02,549 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 09:36:02,549 - DEBUG - Position is -12987
2018-02-09 09:36:03,546 - DEBUG - Open Orders requested
2018-02-09 09:36:03,548 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x000000000214CC88>, order=<ib.ext.Order.Order object at 0x000000000214CBA8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021E2160>>
2018-02-09 09:36:03,549 - DEBUG - Order OrderID 185
2018-02-09 09:36:03,549 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 09:36:03,550 - DEBUG - Order status PreSubmitted
2018-02-09 09:36:03,550 - DEBUG - Order Identification 185
2018-02-09 09:36:03,550 - DEBUG - Order Identification <class 'int'>
2018-02-09 09:36:03,550 - DEBUG - Profit ID from database is 186
2018-02-09 09:36:03,551 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 09:36:03,551 - DEBUG - Stop ID database is 0
2018-02-09 09:36:03,551 - DEBUG - Entry ID database is 186
2018-02-09 09:36:03,552 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x000000000214CC88>, order=<ib.ext.Order.Order object at 0x000000000214CBA8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021E21D0>>
2018-02-09 09:36:03,552 - DEBUG - Order OrderID 184
2018-02-09 09:36:03,553 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 09:36:03,553 - DEBUG - Order status PreSubmitted
2018-02-09 09:36:03,553 - DEBUG - Order Identification 184
2018-02-09 09:36:03,554 - DEBUG - Order Identification <class 'int'>
2018-02-09 09:36:03,554 - DEBUG - Profit ID from database is 186
2018-02-09 09:36:03,554 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 09:36:03,554 - DEBUG - Stop ID database is 0
2018-02-09 09:36:03,554 - DEBUG - Entry ID database is 186
2018-02-09 09:36:03,555 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x000000000214CC88>, order=<ib.ext.Order.Order object at 0x000000000214CBA8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021E22B0>>
2018-02-09 09:36:03,556 - DEBUG - Order OrderID 186
2018-02-09 09:36:03,556 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 09:36:03,557 - DEBUG - Order status PreSubmitted
2018-02-09 09:36:03,557 - DEBUG - Order Identification 186
2018-02-09 09:36:03,557 - DEBUG - Order Identification <class 'int'>
2018-02-09 09:36:03,557 - DEBUG - Profit ID from database is 186
2018-02-09 09:36:03,558 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 09:36:03,558 - DEBUG - Stop ID database is 0
2018-02-09 09:36:03,558 - DEBUG - Entry ID database is 186
2018-02-09 09:36:03,558 - DEBUG - Profit API ID is 186
2018-02-09 09:36:03,559 - DEBUG - Entry API ID is 186
2018-02-09 09:36:05,546 - DEBUG - Connecting to database
2018-02-09 09:36:05,553 - DEBUG - Connected to database
2018-02-09 09:36:05,554 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 09:36:05,555 - DEBUG - Stop loss value is 70.02
2018-02-09 09:36:05,556 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 09:36:05,557 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 09:36:05,558 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 09:36:05,559 - DEBUG - EntryPrice value is 68.725
2018-02-09 09:36:05,560 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 09:36:05,560 - DEBUG - Stop quantity 1
2018-02-09 09:36:05,562 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 09:36:05,562 - DEBUG - Direction is Short
2018-02-09 09:36:05,563 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 09:36:05,564 - DEBUG - Count is 0
2018-02-09 09:36:05,565 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 09:36:05,565 - DEBUG - Stop Loss Flag is 0
2018-02-09 09:36:05,567 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 09:36:05,567 - DEBUG - Max ID Order is (186,)
2018-02-09 09:36:05,567 - DEBUG - Today is 2018-02-09
2018-02-09 09:36:05,568 - DEBUG - Day of the week 4
2018-02-09 09:36:05,568 - DEBUG - Yesterday is 02/08/2018
2018-02-09 09:36:05,568 - DEBUG - In Position is  0
2018-02-09 09:36:05,568 - DEBUG - In Position is  <class 'int'>
2018-02-09 09:36:05,569 - DEBUG - curStopLossFlag is  0
2018-02-09 09:36:05,569 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 09:36:05,569 - DEBUG - Checking if Entry has been filled
2018-02-09 09:36:05,569 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 09:36:05,571 - DEBUG - EntryPend is 1
2018-02-09 09:36:05,571 - DEBUG - Try to Cancel Stop
2018-02-09 09:36:05,571 - DEBUG - Stop API ID 0
2018-02-09 09:36:05,571 - DEBUG - Profit API ID 186
2018-02-09 09:36:05,572 - DEBUG - Stop API ID <class 'int'>
2018-02-09 09:36:05,572 - DEBUG - Profit API ID <class 'int'>
2018-02-09 09:36:05,572 - DEBUG - Pos is 0
2018-02-09 09:36:05,572 - DEBUG - CurCount is 0
2018-02-09 09:36:05,572 - DEBUG - In Pos 0
2018-02-09 09:36:05,573 - DEBUG - Stop ID is 0
2018-02-09 09:36:05,573 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 09:36:05,574 - DEBUG - EntryPend is 1
2018-02-09 09:36:05,574 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 09:36:05,575 - DEBUG - Entry Date is 10
2018-02-09 09:36:05,575 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 09:36:05,575 - DEBUG - Order Profit ID is 186
2018-02-09 09:36:05,575 - DEBUG - Order Entry ID is 186
2018-02-09 09:36:05,576 - DEBUG - API ID is  0
2018-02-09 09:36:05,576 - DEBUG - Current Position is 0
2018-02-09 09:36:05,576 - DEBUG - Current Position is <class 'str'>
2018-02-09 09:36:05,576 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 09:36:05,576 - DEBUG - Time is 9
2018-02-09 09:36:05,577 - DEBUG - Time is <class 'int'>
2018-02-09 09:36:05,577 - DEBUG - Time is 36
2018-02-09 09:36:05,577 - DEBUG - Time is <class 'int'>
2018-02-09 09:36:05,577 - DEBUG - Disconnected from IBController
2018-02-09 09:36:05,578 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 09:41:01,395 - DEBUG - ****************************************************
2018-02-09 09:41:01,396 - DEBUG - Current Time is 09:41AM
2018-02-09 09:41:01,396 - DEBUG - Starting Pos Mgmt H E
2018-02-09 09:41:01,396 - DEBUG - Connecting to database
2018-02-09 09:41:01,424 - DEBUG - Connected to database
2018-02-09 09:41:01,425 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 09:41:01,426 - DEBUG - Order Profit is 186
2018-02-09 09:41:01,426 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 09:41:01,428 - DEBUG - Stop ID is 0
2018-02-09 09:41:01,428 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 09:41:01,430 - DEBUG - Entry ID is 186
2018-02-09 09:41:01,430 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 09:41:01,431 - DEBUG - OCA ID is 1
2018-02-09 09:41:01,432 - DEBUG - Connecting to IBController
2018-02-09 09:41:02,440 - DEBUG - Connected to IBController
2018-02-09 09:41:02,440 - DEBUG - Position requested
2018-02-09 09:41:02,441 - DEBUG - Pos Mgmt -12987
2018-02-09 09:41:02,442 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000215DE48>, pos=-12987, avgCost=0.95368235>
2018-02-09 09:41:02,442 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 09:41:02,442 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 09:41:02,443 - DEBUG - Position is -12987
2018-02-09 09:41:03,442 - DEBUG - Open Orders requested
2018-02-09 09:41:03,456 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x000000000215DC18>, order=<ib.ext.Order.Order object at 0x000000000215DCF8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021F2160>>
2018-02-09 09:41:03,457 - DEBUG - Order OrderID 185
2018-02-09 09:41:03,457 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 09:41:03,458 - DEBUG - Order status PreSubmitted
2018-02-09 09:41:03,458 - DEBUG - Order Identification 185
2018-02-09 09:41:03,458 - DEBUG - Order Identification <class 'int'>
2018-02-09 09:41:03,458 - DEBUG - Profit ID from database is 186
2018-02-09 09:41:03,458 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 09:41:03,459 - DEBUG - Stop ID database is 0
2018-02-09 09:41:03,459 - DEBUG - Entry ID database is 186
2018-02-09 09:41:03,460 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x000000000215DC18>, order=<ib.ext.Order.Order object at 0x000000000215DCF8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021F21D0>>
2018-02-09 09:41:03,460 - DEBUG - Order OrderID 184
2018-02-09 09:41:03,461 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 09:41:03,461 - DEBUG - Order status PreSubmitted
2018-02-09 09:41:03,461 - DEBUG - Order Identification 184
2018-02-09 09:41:03,461 - DEBUG - Order Identification <class 'int'>
2018-02-09 09:41:03,462 - DEBUG - Profit ID from database is 186
2018-02-09 09:41:03,462 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 09:41:03,462 - DEBUG - Stop ID database is 0
2018-02-09 09:41:03,462 - DEBUG - Entry ID database is 186
2018-02-09 09:41:03,463 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x000000000215DC18>, order=<ib.ext.Order.Order object at 0x000000000215DCF8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021F22B0>>
2018-02-09 09:41:03,464 - DEBUG - Order OrderID 186
2018-02-09 09:41:03,464 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 09:41:03,464 - DEBUG - Order status PreSubmitted
2018-02-09 09:41:03,465 - DEBUG - Order Identification 186
2018-02-09 09:41:03,465 - DEBUG - Order Identification <class 'int'>
2018-02-09 09:41:03,465 - DEBUG - Profit ID from database is 186
2018-02-09 09:41:03,465 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 09:41:03,466 - DEBUG - Stop ID database is 0
2018-02-09 09:41:03,466 - DEBUG - Entry ID database is 186
2018-02-09 09:41:03,466 - DEBUG - Profit API ID is 186
2018-02-09 09:41:03,466 - DEBUG - Entry API ID is 186
2018-02-09 09:41:05,454 - DEBUG - Connecting to database
2018-02-09 09:41:05,461 - DEBUG - Connected to database
2018-02-09 09:41:05,462 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 09:41:05,463 - DEBUG - Stop loss value is 70.02
2018-02-09 09:41:05,464 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 09:41:05,465 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 09:41:05,466 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 09:41:05,466 - DEBUG - EntryPrice value is 68.725
2018-02-09 09:41:05,467 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 09:41:05,468 - DEBUG - Stop quantity 1
2018-02-09 09:41:05,469 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 09:41:05,469 - DEBUG - Direction is Short
2018-02-09 09:41:05,471 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 09:41:05,471 - DEBUG - Count is 0
2018-02-09 09:41:05,472 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 09:41:05,473 - DEBUG - Stop Loss Flag is 0
2018-02-09 09:41:05,474 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 09:41:05,474 - DEBUG - Max ID Order is (186,)
2018-02-09 09:41:05,475 - DEBUG - Today is 2018-02-09
2018-02-09 09:41:05,475 - DEBUG - Day of the week 4
2018-02-09 09:41:05,475 - DEBUG - Yesterday is 02/08/2018
2018-02-09 09:41:05,476 - DEBUG - In Position is  0
2018-02-09 09:41:05,476 - DEBUG - In Position is  <class 'int'>
2018-02-09 09:41:05,476 - DEBUG - curStopLossFlag is  0
2018-02-09 09:41:05,476 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 09:41:05,476 - DEBUG - Checking if Entry has been filled
2018-02-09 09:41:05,477 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 09:41:05,478 - DEBUG - EntryPend is 1
2018-02-09 09:41:05,478 - DEBUG - Try to Cancel Stop
2018-02-09 09:41:05,479 - DEBUG - Stop API ID 0
2018-02-09 09:41:05,479 - DEBUG - Profit API ID 186
2018-02-09 09:41:05,479 - DEBUG - Stop API ID <class 'int'>
2018-02-09 09:41:05,479 - DEBUG - Profit API ID <class 'int'>
2018-02-09 09:41:05,480 - DEBUG - Pos is 0
2018-02-09 09:41:05,480 - DEBUG - CurCount is 0
2018-02-09 09:41:05,480 - DEBUG - In Pos 0
2018-02-09 09:41:05,480 - DEBUG - Stop ID is 0
2018-02-09 09:41:05,480 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 09:41:05,482 - DEBUG - EntryPend is 1
2018-02-09 09:41:05,482 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 09:41:05,482 - DEBUG - Entry Date is 10
2018-02-09 09:41:05,482 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 09:41:05,483 - DEBUG - Order Profit ID is 186
2018-02-09 09:41:05,483 - DEBUG - Order Entry ID is 186
2018-02-09 09:41:05,483 - DEBUG - API ID is  0
2018-02-09 09:41:05,483 - DEBUG - Current Position is 0
2018-02-09 09:41:05,483 - DEBUG - Current Position is <class 'str'>
2018-02-09 09:41:05,484 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 09:41:05,484 - DEBUG - Time is 9
2018-02-09 09:41:05,484 - DEBUG - Time is <class 'int'>
2018-02-09 09:41:05,484 - DEBUG - Time is 41
2018-02-09 09:41:05,485 - DEBUG - Time is <class 'int'>
2018-02-09 09:41:05,485 - DEBUG - Disconnected from IBController
2018-02-09 09:41:05,485 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 09:46:01,372 - DEBUG - ****************************************************
2018-02-09 09:46:01,372 - DEBUG - Current Time is 09:46AM
2018-02-09 09:46:01,373 - DEBUG - Starting Pos Mgmt H E
2018-02-09 09:46:01,373 - DEBUG - Connecting to database
2018-02-09 09:46:01,394 - DEBUG - Connected to database
2018-02-09 09:46:01,395 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 09:46:01,396 - DEBUG - Order Profit is 186
2018-02-09 09:46:01,397 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 09:46:01,399 - DEBUG - Stop ID is 0
2018-02-09 09:46:01,399 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 09:46:01,401 - DEBUG - Entry ID is 186
2018-02-09 09:46:01,401 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 09:46:01,402 - DEBUG - OCA ID is 1
2018-02-09 09:46:01,403 - DEBUG - Connecting to IBController
2018-02-09 09:46:02,411 - DEBUG - Connected to IBController
2018-02-09 09:46:02,411 - DEBUG - Position requested
2018-02-09 09:46:02,413 - DEBUG - Pos Mgmt -12987
2018-02-09 09:46:02,413 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020DBD68>, pos=-12987, avgCost=0.95368235>
2018-02-09 09:46:02,414 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 09:46:02,414 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 09:46:02,414 - DEBUG - Position is -12987
2018-02-09 09:46:03,411 - DEBUG - Open Orders requested
2018-02-09 09:46:03,413 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x00000000020DBBA8>, order=<ib.ext.Order.Order object at 0x00000000020DBC18>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002170160>>
2018-02-09 09:46:03,414 - DEBUG - Order OrderID 185
2018-02-09 09:46:03,414 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 09:46:03,415 - DEBUG - Order status PreSubmitted
2018-02-09 09:46:03,415 - DEBUG - Order Identification 185
2018-02-09 09:46:03,415 - DEBUG - Order Identification <class 'int'>
2018-02-09 09:46:03,415 - DEBUG - Profit ID from database is 186
2018-02-09 09:46:03,416 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 09:46:03,416 - DEBUG - Stop ID database is 0
2018-02-09 09:46:03,416 - DEBUG - Entry ID database is 186
2018-02-09 09:46:03,417 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x00000000020DBBA8>, order=<ib.ext.Order.Order object at 0x00000000020DBC18>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021701D0>>
2018-02-09 09:46:03,418 - DEBUG - Order OrderID 184
2018-02-09 09:46:03,418 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 09:46:03,418 - DEBUG - Order status PreSubmitted
2018-02-09 09:46:03,419 - DEBUG - Order Identification 184
2018-02-09 09:46:03,419 - DEBUG - Order Identification <class 'int'>
2018-02-09 09:46:03,419 - DEBUG - Profit ID from database is 186
2018-02-09 09:46:03,419 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 09:46:03,419 - DEBUG - Stop ID database is 0
2018-02-09 09:46:03,419 - DEBUG - Entry ID database is 186
2018-02-09 09:46:03,422 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x00000000020DBBA8>, order=<ib.ext.Order.Order object at 0x00000000020DBC18>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021702B0>>
2018-02-09 09:46:03,422 - DEBUG - Order OrderID 186
2018-02-09 09:46:03,422 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 09:46:03,423 - DEBUG - Order status PreSubmitted
2018-02-09 09:46:03,423 - DEBUG - Order Identification 186
2018-02-09 09:46:03,423 - DEBUG - Order Identification <class 'int'>
2018-02-09 09:46:03,423 - DEBUG - Profit ID from database is 186
2018-02-09 09:46:03,424 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 09:46:03,424 - DEBUG - Stop ID database is 0
2018-02-09 09:46:03,424 - DEBUG - Entry ID database is 186
2018-02-09 09:46:03,424 - DEBUG - Profit API ID is 186
2018-02-09 09:46:03,425 - DEBUG - Entry API ID is 186
2018-02-09 09:46:05,411 - DEBUG - Connecting to database
2018-02-09 09:46:05,418 - DEBUG - Connected to database
2018-02-09 09:46:05,419 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 09:46:05,420 - DEBUG - Stop loss value is 70.02
2018-02-09 09:46:05,421 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 09:46:05,422 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 09:46:05,423 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 09:46:05,423 - DEBUG - EntryPrice value is 68.725
2018-02-09 09:46:05,424 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 09:46:05,425 - DEBUG - Stop quantity 1
2018-02-09 09:46:05,426 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 09:46:05,427 - DEBUG - Direction is Short
2018-02-09 09:46:05,428 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 09:46:05,429 - DEBUG - Count is 0
2018-02-09 09:46:05,430 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 09:46:05,430 - DEBUG - Stop Loss Flag is 0
2018-02-09 09:46:05,432 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 09:46:05,432 - DEBUG - Max ID Order is (186,)
2018-02-09 09:46:05,433 - DEBUG - Today is 2018-02-09
2018-02-09 09:46:05,433 - DEBUG - Day of the week 4
2018-02-09 09:46:05,433 - DEBUG - Yesterday is 02/08/2018
2018-02-09 09:46:05,433 - DEBUG - In Position is  0
2018-02-09 09:46:05,434 - DEBUG - In Position is  <class 'int'>
2018-02-09 09:46:05,434 - DEBUG - curStopLossFlag is  0
2018-02-09 09:46:05,434 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 09:46:05,434 - DEBUG - Checking if Entry has been filled
2018-02-09 09:46:05,435 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 09:46:05,436 - DEBUG - EntryPend is 1
2018-02-09 09:46:05,436 - DEBUG - Try to Cancel Stop
2018-02-09 09:46:05,437 - DEBUG - Stop API ID 0
2018-02-09 09:46:05,437 - DEBUG - Profit API ID 186
2018-02-09 09:46:05,437 - DEBUG - Stop API ID <class 'int'>
2018-02-09 09:46:05,437 - DEBUG - Profit API ID <class 'int'>
2018-02-09 09:46:05,437 - DEBUG - Pos is 0
2018-02-09 09:46:05,438 - DEBUG - CurCount is 0
2018-02-09 09:46:05,438 - DEBUG - In Pos 0
2018-02-09 09:46:05,438 - DEBUG - Stop ID is 0
2018-02-09 09:46:05,438 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 09:46:05,440 - DEBUG - EntryPend is 1
2018-02-09 09:46:05,440 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 09:46:05,440 - DEBUG - Entry Date is 10
2018-02-09 09:46:05,441 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 09:46:05,441 - DEBUG - Order Profit ID is 186
2018-02-09 09:46:05,441 - DEBUG - Order Entry ID is 186
2018-02-09 09:46:05,441 - DEBUG - API ID is  0
2018-02-09 09:46:05,442 - DEBUG - Current Position is 0
2018-02-09 09:46:05,442 - DEBUG - Current Position is <class 'str'>
2018-02-09 09:46:05,442 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 09:46:05,442 - DEBUG - Time is 9
2018-02-09 09:46:05,442 - DEBUG - Time is <class 'int'>
2018-02-09 09:46:05,443 - DEBUG - Time is 46
2018-02-09 09:46:05,443 - DEBUG - Time is <class 'int'>
2018-02-09 09:46:05,443 - DEBUG - Disconnected from IBController
2018-02-09 09:46:05,444 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 09:51:01,319 - DEBUG - ****************************************************
2018-02-09 09:51:01,320 - DEBUG - Current Time is 09:51AM
2018-02-09 09:51:01,320 - DEBUG - Starting Pos Mgmt H E
2018-02-09 09:51:01,320 - DEBUG - Connecting to database
2018-02-09 09:51:01,378 - DEBUG - Connected to database
2018-02-09 09:51:01,378 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 09:51:01,380 - DEBUG - Order Profit is 186
2018-02-09 09:51:01,380 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 09:51:01,381 - DEBUG - Stop ID is 0
2018-02-09 09:51:01,382 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 09:51:01,383 - DEBUG - Entry ID is 186
2018-02-09 09:51:01,384 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 09:51:01,385 - DEBUG - OCA ID is 1
2018-02-09 09:51:01,385 - DEBUG - Connecting to IBController
2018-02-09 09:51:02,391 - DEBUG - Connected to IBController
2018-02-09 09:51:02,391 - DEBUG - Position requested
2018-02-09 09:51:02,392 - DEBUG - Pos Mgmt -12987
2018-02-09 09:51:02,393 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FDDD8>, pos=-12987, avgCost=0.95368235>
2018-02-09 09:51:02,393 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 09:51:02,393 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 09:51:02,394 - DEBUG - Position is -12987
2018-02-09 09:51:03,392 - DEBUG - Open Orders requested
2018-02-09 09:51:03,394 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x00000000020FDC88>, order=<ib.ext.Order.Order object at 0x00000000020FDB00>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002192160>>
2018-02-09 09:51:03,395 - DEBUG - Order OrderID 185
2018-02-09 09:51:03,395 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 09:51:03,396 - DEBUG - Order status PreSubmitted
2018-02-09 09:51:03,396 - DEBUG - Order Identification 185
2018-02-09 09:51:03,396 - DEBUG - Order Identification <class 'int'>
2018-02-09 09:51:03,396 - DEBUG - Profit ID from database is 186
2018-02-09 09:51:03,397 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 09:51:03,397 - DEBUG - Stop ID database is 0
2018-02-09 09:51:03,397 - DEBUG - Entry ID database is 186
2018-02-09 09:51:03,398 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x00000000020FDC88>, order=<ib.ext.Order.Order object at 0x00000000020FDB00>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021921D0>>
2018-02-09 09:51:03,398 - DEBUG - Order OrderID 184
2018-02-09 09:51:03,399 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 09:51:03,399 - DEBUG - Order status PreSubmitted
2018-02-09 09:51:03,399 - DEBUG - Order Identification 184
2018-02-09 09:51:03,400 - DEBUG - Order Identification <class 'int'>
2018-02-09 09:51:03,403 - DEBUG - Profit ID from database is 186
2018-02-09 09:51:03,404 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 09:51:03,404 - DEBUG - Stop ID database is 0
2018-02-09 09:51:03,404 - DEBUG - Entry ID database is 186
2018-02-09 09:51:03,405 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x00000000020FDC88>, order=<ib.ext.Order.Order object at 0x00000000020FDB00>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021922B0>>
2018-02-09 09:51:03,406 - DEBUG - Order OrderID 186
2018-02-09 09:51:03,406 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 09:51:03,406 - DEBUG - Order status PreSubmitted
2018-02-09 09:51:03,407 - DEBUG - Order Identification 186
2018-02-09 09:51:03,407 - DEBUG - Order Identification <class 'int'>
2018-02-09 09:51:03,407 - DEBUG - Profit ID from database is 186
2018-02-09 09:51:03,407 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 09:51:03,408 - DEBUG - Stop ID database is 0
2018-02-09 09:51:03,408 - DEBUG - Entry ID database is 186
2018-02-09 09:51:03,408 - DEBUG - Profit API ID is 186
2018-02-09 09:51:03,408 - DEBUG - Entry API ID is 186
2018-02-09 09:51:05,392 - DEBUG - Connecting to database
2018-02-09 09:51:05,399 - DEBUG - Connected to database
2018-02-09 09:51:05,400 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 09:51:05,401 - DEBUG - Stop loss value is 70.02
2018-02-09 09:51:05,402 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 09:51:05,402 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 09:51:05,404 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 09:51:05,404 - DEBUG - EntryPrice value is 68.725
2018-02-09 09:51:05,405 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 09:51:05,406 - DEBUG - Stop quantity 1
2018-02-09 09:51:05,407 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 09:51:05,407 - DEBUG - Direction is Short
2018-02-09 09:51:05,409 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 09:51:05,409 - DEBUG - Count is 0
2018-02-09 09:51:05,410 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 09:51:05,411 - DEBUG - Stop Loss Flag is 0
2018-02-09 09:51:05,412 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 09:51:05,412 - DEBUG - Max ID Order is (186,)
2018-02-09 09:51:05,413 - DEBUG - Today is 2018-02-09
2018-02-09 09:51:05,413 - DEBUG - Day of the week 4
2018-02-09 09:51:05,413 - DEBUG - Yesterday is 02/08/2018
2018-02-09 09:51:05,413 - DEBUG - In Position is  0
2018-02-09 09:51:05,414 - DEBUG - In Position is  <class 'int'>
2018-02-09 09:51:05,414 - DEBUG - curStopLossFlag is  0
2018-02-09 09:51:05,414 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 09:51:05,414 - DEBUG - Checking if Entry has been filled
2018-02-09 09:51:05,415 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 09:51:05,416 - DEBUG - EntryPend is 1
2018-02-09 09:51:05,416 - DEBUG - Try to Cancel Stop
2018-02-09 09:51:05,416 - DEBUG - Stop API ID 0
2018-02-09 09:51:05,417 - DEBUG - Profit API ID 186
2018-02-09 09:51:05,417 - DEBUG - Stop API ID <class 'int'>
2018-02-09 09:51:05,417 - DEBUG - Profit API ID <class 'int'>
2018-02-09 09:51:05,417 - DEBUG - Pos is 0
2018-02-09 09:51:05,417 - DEBUG - CurCount is 0
2018-02-09 09:51:05,418 - DEBUG - In Pos 0
2018-02-09 09:51:05,418 - DEBUG - Stop ID is 0
2018-02-09 09:51:05,418 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 09:51:05,422 - DEBUG - EntryPend is 1
2018-02-09 09:51:05,422 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 09:51:05,422 - DEBUG - Entry Date is 10
2018-02-09 09:51:05,422 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 09:51:05,422 - DEBUG - Order Profit ID is 186
2018-02-09 09:51:05,423 - DEBUG - Order Entry ID is 186
2018-02-09 09:51:05,423 - DEBUG - API ID is  0
2018-02-09 09:51:05,423 - DEBUG - Current Position is 0
2018-02-09 09:51:05,423 - DEBUG - Current Position is <class 'str'>
2018-02-09 09:51:05,424 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 09:51:05,424 - DEBUG - Time is 9
2018-02-09 09:51:05,424 - DEBUG - Time is <class 'int'>
2018-02-09 09:51:05,424 - DEBUG - Time is 51
2018-02-09 09:51:05,424 - DEBUG - Time is <class 'int'>
2018-02-09 09:51:05,425 - DEBUG - Disconnected from IBController
2018-02-09 09:51:05,425 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 09:56:01,324 - DEBUG - ****************************************************
2018-02-09 09:56:01,325 - DEBUG - Current Time is 09:56AM
2018-02-09 09:56:01,325 - DEBUG - Starting Pos Mgmt H E
2018-02-09 09:56:01,325 - DEBUG - Connecting to database
2018-02-09 09:56:01,386 - DEBUG - Connected to database
2018-02-09 09:56:01,386 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 09:56:01,388 - DEBUG - Order Profit is 186
2018-02-09 09:56:01,388 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 09:56:01,390 - DEBUG - Stop ID is 0
2018-02-09 09:56:01,390 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 09:56:01,391 - DEBUG - Entry ID is 186
2018-02-09 09:56:01,391 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 09:56:01,393 - DEBUG - OCA ID is 1
2018-02-09 09:56:01,393 - DEBUG - Connecting to IBController
2018-02-09 09:56:02,401 - DEBUG - Connected to IBController
2018-02-09 09:56:02,401 - DEBUG - Position requested
2018-02-09 09:56:02,402 - DEBUG - Pos Mgmt -12987
2018-02-09 09:56:02,403 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020DDE48>, pos=-12987, avgCost=0.95368235>
2018-02-09 09:56:02,403 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 09:56:02,403 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 09:56:02,404 - DEBUG - Position is -12987
2018-02-09 09:56:03,403 - DEBUG - Open Orders requested
2018-02-09 09:56:03,405 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x00000000020DDCC0>, order=<ib.ext.Order.Order object at 0x00000000020DDA90>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021711D0>>
2018-02-09 09:56:03,406 - DEBUG - Order OrderID 185
2018-02-09 09:56:03,406 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 09:56:03,406 - DEBUG - Order status PreSubmitted
2018-02-09 09:56:03,407 - DEBUG - Order Identification 185
2018-02-09 09:56:03,407 - DEBUG - Order Identification <class 'int'>
2018-02-09 09:56:03,407 - DEBUG - Profit ID from database is 186
2018-02-09 09:56:03,408 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 09:56:03,408 - DEBUG - Stop ID database is 0
2018-02-09 09:56:03,408 - DEBUG - Entry ID database is 186
2018-02-09 09:56:03,409 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x00000000020DDCC0>, order=<ib.ext.Order.Order object at 0x00000000020DDA90>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002171048>>
2018-02-09 09:56:03,409 - DEBUG - Order OrderID 184
2018-02-09 09:56:03,410 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 09:56:03,410 - DEBUG - Order status PreSubmitted
2018-02-09 09:56:03,410 - DEBUG - Order Identification 184
2018-02-09 09:56:03,411 - DEBUG - Order Identification <class 'int'>
2018-02-09 09:56:03,411 - DEBUG - Profit ID from database is 186
2018-02-09 09:56:03,411 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 09:56:03,411 - DEBUG - Stop ID database is 0
2018-02-09 09:56:03,411 - DEBUG - Entry ID database is 186
2018-02-09 09:56:03,412 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x00000000020DDCC0>, order=<ib.ext.Order.Order object at 0x00000000020DDA90>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002171240>>
2018-02-09 09:56:03,413 - DEBUG - Order OrderID 186
2018-02-09 09:56:03,413 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 09:56:03,414 - DEBUG - Order status PreSubmitted
2018-02-09 09:56:03,414 - DEBUG - Order Identification 186
2018-02-09 09:56:03,414 - DEBUG - Order Identification <class 'int'>
2018-02-09 09:56:03,414 - DEBUG - Profit ID from database is 186
2018-02-09 09:56:03,415 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 09:56:03,415 - DEBUG - Stop ID database is 0
2018-02-09 09:56:03,415 - DEBUG - Entry ID database is 186
2018-02-09 09:56:03,415 - DEBUG - Profit API ID is 186
2018-02-09 09:56:03,415 - DEBUG - Entry API ID is 186
2018-02-09 09:56:05,405 - DEBUG - Connecting to database
2018-02-09 09:56:05,412 - DEBUG - Connected to database
2018-02-09 09:56:05,414 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 09:56:05,414 - DEBUG - Stop loss value is 70.02
2018-02-09 09:56:05,416 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 09:56:05,416 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 09:56:05,417 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 09:56:05,418 - DEBUG - EntryPrice value is 68.725
2018-02-09 09:56:05,419 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 09:56:05,419 - DEBUG - Stop quantity 1
2018-02-09 09:56:05,421 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 09:56:05,421 - DEBUG - Direction is Short
2018-02-09 09:56:05,422 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 09:56:05,423 - DEBUG - Count is 0
2018-02-09 09:56:05,424 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 09:56:05,424 - DEBUG - Stop Loss Flag is 0
2018-02-09 09:56:05,426 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 09:56:05,426 - DEBUG - Max ID Order is (186,)
2018-02-09 09:56:05,426 - DEBUG - Today is 2018-02-09
2018-02-09 09:56:05,427 - DEBUG - Day of the week 4
2018-02-09 09:56:05,427 - DEBUG - Yesterday is 02/08/2018
2018-02-09 09:56:05,427 - DEBUG - In Position is  0
2018-02-09 09:56:05,427 - DEBUG - In Position is  <class 'int'>
2018-02-09 09:56:05,428 - DEBUG - curStopLossFlag is  0
2018-02-09 09:56:05,428 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 09:56:05,428 - DEBUG - Checking if Entry has been filled
2018-02-09 09:56:05,428 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 09:56:05,430 - DEBUG - EntryPend is 1
2018-02-09 09:56:05,430 - DEBUG - Try to Cancel Stop
2018-02-09 09:56:05,430 - DEBUG - Stop API ID 0
2018-02-09 09:56:05,430 - DEBUG - Profit API ID 186
2018-02-09 09:56:05,431 - DEBUG - Stop API ID <class 'int'>
2018-02-09 09:56:05,431 - DEBUG - Profit API ID <class 'int'>
2018-02-09 09:56:05,431 - DEBUG - Pos is 0
2018-02-09 09:56:05,431 - DEBUG - CurCount is 0
2018-02-09 09:56:05,431 - DEBUG - In Pos 0
2018-02-09 09:56:05,432 - DEBUG - Stop ID is 0
2018-02-09 09:56:05,432 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 09:56:05,433 - DEBUG - EntryPend is 1
2018-02-09 09:56:05,434 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 09:56:05,434 - DEBUG - Entry Date is 10
2018-02-09 09:56:05,434 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 09:56:05,434 - DEBUG - Order Profit ID is 186
2018-02-09 09:56:05,435 - DEBUG - Order Entry ID is 186
2018-02-09 09:56:05,435 - DEBUG - API ID is  0
2018-02-09 09:56:05,435 - DEBUG - Current Position is 0
2018-02-09 09:56:05,435 - DEBUG - Current Position is <class 'str'>
2018-02-09 09:56:05,436 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 09:56:05,436 - DEBUG - Time is 9
2018-02-09 09:56:05,436 - DEBUG - Time is <class 'int'>
2018-02-09 09:56:05,436 - DEBUG - Time is 56
2018-02-09 09:56:05,436 - DEBUG - Time is <class 'int'>
2018-02-09 09:56:05,437 - DEBUG - Disconnected from IBController
2018-02-09 09:56:05,437 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 10:01:01,354 - DEBUG - ****************************************************
2018-02-09 10:01:01,355 - DEBUG - Current Time is 10:01AM
2018-02-09 10:01:01,355 - DEBUG - Starting Pos Mgmt H E
2018-02-09 10:01:01,355 - DEBUG - Connecting to database
2018-02-09 10:01:01,381 - DEBUG - Connected to database
2018-02-09 10:01:01,381 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 10:01:01,382 - DEBUG - Order Profit is 186
2018-02-09 10:01:01,383 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 10:01:01,384 - DEBUG - Stop ID is 0
2018-02-09 10:01:01,384 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 10:01:01,385 - DEBUG - Entry ID is 186
2018-02-09 10:01:01,386 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 10:01:01,387 - DEBUG - OCA ID is 1
2018-02-09 10:01:01,387 - DEBUG - Connecting to IBController
2018-02-09 10:01:02,395 - DEBUG - Connected to IBController
2018-02-09 10:01:02,395 - DEBUG - Position requested
2018-02-09 10:01:02,396 - DEBUG - Pos Mgmt -12987
2018-02-09 10:01:02,397 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FDE48>, pos=-12987, avgCost=0.95368235>
2018-02-09 10:01:02,397 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 10:01:02,397 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 10:01:02,398 - DEBUG - Position is -12987
2018-02-09 10:01:03,397 - DEBUG - Open Orders requested
2018-02-09 10:01:03,399 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x00000000020FDB00>, order=<ib.ext.Order.Order object at 0x00000000020FDDA0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021921D0>>
2018-02-09 10:01:03,400 - DEBUG - Order OrderID 185
2018-02-09 10:01:03,400 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 10:01:03,401 - DEBUG - Order status PreSubmitted
2018-02-09 10:01:03,401 - DEBUG - Order Identification 185
2018-02-09 10:01:03,401 - DEBUG - Order Identification <class 'int'>
2018-02-09 10:01:03,401 - DEBUG - Profit ID from database is 186
2018-02-09 10:01:03,402 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 10:01:03,402 - DEBUG - Stop ID database is 0
2018-02-09 10:01:03,402 - DEBUG - Entry ID database is 186
2018-02-09 10:01:03,403 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x00000000020FDB00>, order=<ib.ext.Order.Order object at 0x00000000020FDDA0>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002192080>>
2018-02-09 10:01:03,403 - DEBUG - Order OrderID 184
2018-02-09 10:01:03,404 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 10:01:03,404 - DEBUG - Order status PreSubmitted
2018-02-09 10:01:03,404 - DEBUG - Order Identification 184
2018-02-09 10:01:03,405 - DEBUG - Order Identification <class 'int'>
2018-02-09 10:01:03,405 - DEBUG - Profit ID from database is 186
2018-02-09 10:01:03,405 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 10:01:03,405 - DEBUG - Stop ID database is 0
2018-02-09 10:01:03,406 - DEBUG - Entry ID database is 186
2018-02-09 10:01:03,407 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x00000000020FDB00>, order=<ib.ext.Order.Order object at 0x00000000020FDDA0>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002192240>>
2018-02-09 10:01:03,407 - DEBUG - Order OrderID 186
2018-02-09 10:01:03,407 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 10:01:03,408 - DEBUG - Order status PreSubmitted
2018-02-09 10:01:03,408 - DEBUG - Order Identification 186
2018-02-09 10:01:03,408 - DEBUG - Order Identification <class 'int'>
2018-02-09 10:01:03,408 - DEBUG - Profit ID from database is 186
2018-02-09 10:01:03,409 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 10:01:03,409 - DEBUG - Stop ID database is 0
2018-02-09 10:01:03,409 - DEBUG - Entry ID database is 186
2018-02-09 10:01:03,409 - DEBUG - Profit API ID is 186
2018-02-09 10:01:03,410 - DEBUG - Entry API ID is 186
2018-02-09 10:01:05,400 - DEBUG - Connecting to database
2018-02-09 10:01:05,407 - DEBUG - Connected to database
2018-02-09 10:01:05,409 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 10:01:05,409 - DEBUG - Stop loss value is 70.02
2018-02-09 10:01:05,411 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 10:01:05,411 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 10:01:05,412 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 10:01:05,413 - DEBUG - EntryPrice value is 68.725
2018-02-09 10:01:05,414 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 10:01:05,414 - DEBUG - Stop quantity 1
2018-02-09 10:01:05,416 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 10:01:05,416 - DEBUG - Direction is Short
2018-02-09 10:01:05,417 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 10:01:05,417 - DEBUG - Count is 0
2018-02-09 10:01:05,419 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 10:01:05,419 - DEBUG - Stop Loss Flag is 0
2018-02-09 10:01:05,421 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 10:01:05,421 - DEBUG - Max ID Order is (186,)
2018-02-09 10:01:05,421 - DEBUG - Today is 2018-02-09
2018-02-09 10:01:05,422 - DEBUG - Day of the week 4
2018-02-09 10:01:05,422 - DEBUG - Yesterday is 02/08/2018
2018-02-09 10:01:05,422 - DEBUG - In Position is  0
2018-02-09 10:01:05,422 - DEBUG - In Position is  <class 'int'>
2018-02-09 10:01:05,423 - DEBUG - curStopLossFlag is  0
2018-02-09 10:01:05,423 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 10:01:05,423 - DEBUG - Checking if Entry has been filled
2018-02-09 10:01:05,423 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 10:01:05,425 - DEBUG - EntryPend is 1
2018-02-09 10:01:05,425 - DEBUG - Try to Cancel Stop
2018-02-09 10:01:05,425 - DEBUG - Stop API ID 0
2018-02-09 10:01:05,425 - DEBUG - Profit API ID 186
2018-02-09 10:01:05,426 - DEBUG - Stop API ID <class 'int'>
2018-02-09 10:01:05,426 - DEBUG - Profit API ID <class 'int'>
2018-02-09 10:01:05,426 - DEBUG - Pos is 0
2018-02-09 10:01:05,426 - DEBUG - CurCount is 0
2018-02-09 10:01:05,427 - DEBUG - In Pos 0
2018-02-09 10:01:05,427 - DEBUG - Stop ID is 0
2018-02-09 10:01:05,427 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 10:01:05,428 - DEBUG - EntryPend is 1
2018-02-09 10:01:05,429 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 10:01:05,429 - DEBUG - Entry Date is 10
2018-02-09 10:01:05,429 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 10:01:05,429 - DEBUG - Order Profit ID is 186
2018-02-09 10:01:05,430 - DEBUG - Order Entry ID is 186
2018-02-09 10:01:05,430 - DEBUG - API ID is  0
2018-02-09 10:01:05,430 - DEBUG - Current Position is 0
2018-02-09 10:01:05,430 - DEBUG - Current Position is <class 'str'>
2018-02-09 10:01:05,430 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 10:01:05,431 - DEBUG - Time is 10
2018-02-09 10:01:05,431 - DEBUG - Time is <class 'int'>
2018-02-09 10:01:05,431 - DEBUG - Time is 1
2018-02-09 10:01:05,431 - DEBUG - Time is <class 'int'>
2018-02-09 10:01:05,432 - DEBUG - Disconnected from IBController
2018-02-09 10:01:05,432 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 10:06:01,348 - DEBUG - ****************************************************
2018-02-09 10:06:01,348 - DEBUG - Current Time is 10:06AM
2018-02-09 10:06:01,349 - DEBUG - Starting Pos Mgmt H E
2018-02-09 10:06:01,349 - DEBUG - Connecting to database
2018-02-09 10:06:01,382 - DEBUG - Connected to database
2018-02-09 10:06:01,383 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 10:06:01,387 - DEBUG - Order Profit is 186
2018-02-09 10:06:01,388 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 10:06:01,389 - DEBUG - Stop ID is 0
2018-02-09 10:06:01,389 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 10:06:01,390 - DEBUG - Entry ID is 186
2018-02-09 10:06:01,391 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 10:06:01,392 - DEBUG - OCA ID is 1
2018-02-09 10:06:01,392 - DEBUG - Connecting to IBController
2018-02-09 10:06:02,401 - DEBUG - Connected to IBController
2018-02-09 10:06:02,401 - DEBUG - Position requested
2018-02-09 10:06:02,402 - DEBUG - Pos Mgmt -12987
2018-02-09 10:06:02,403 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000217BE48>, pos=-12987, avgCost=0.95368235>
2018-02-09 10:06:02,403 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 10:06:02,403 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 10:06:02,404 - DEBUG - Position is -12987
2018-02-09 10:06:03,403 - DEBUG - Open Orders requested
2018-02-09 10:06:03,405 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x000000000217BCC0>, order=<ib.ext.Order.Order object at 0x000000000217BD30>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000022101D0>>
2018-02-09 10:06:03,406 - DEBUG - Order OrderID 185
2018-02-09 10:06:03,406 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 10:06:03,406 - DEBUG - Order status PreSubmitted
2018-02-09 10:06:03,407 - DEBUG - Order Identification 185
2018-02-09 10:06:03,407 - DEBUG - Order Identification <class 'int'>
2018-02-09 10:06:03,407 - DEBUG - Profit ID from database is 186
2018-02-09 10:06:03,407 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 10:06:03,408 - DEBUG - Stop ID database is 0
2018-02-09 10:06:03,408 - DEBUG - Entry ID database is 186
2018-02-09 10:06:03,409 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x000000000217BCC0>, order=<ib.ext.Order.Order object at 0x000000000217BD30>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002210080>>
2018-02-09 10:06:03,409 - DEBUG - Order OrderID 184
2018-02-09 10:06:03,410 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 10:06:03,410 - DEBUG - Order status PreSubmitted
2018-02-09 10:06:03,410 - DEBUG - Order Identification 184
2018-02-09 10:06:03,411 - DEBUG - Order Identification <class 'int'>
2018-02-09 10:06:03,411 - DEBUG - Profit ID from database is 186
2018-02-09 10:06:03,411 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 10:06:03,411 - DEBUG - Stop ID database is 0
2018-02-09 10:06:03,411 - DEBUG - Entry ID database is 186
2018-02-09 10:06:03,412 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x000000000217BCC0>, order=<ib.ext.Order.Order object at 0x000000000217BD30>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002210240>>
2018-02-09 10:06:03,413 - DEBUG - Order OrderID 186
2018-02-09 10:06:03,413 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 10:06:03,414 - DEBUG - Order status PreSubmitted
2018-02-09 10:06:03,414 - DEBUG - Order Identification 186
2018-02-09 10:06:03,414 - DEBUG - Order Identification <class 'int'>
2018-02-09 10:06:03,414 - DEBUG - Profit ID from database is 186
2018-02-09 10:06:03,415 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 10:06:03,415 - DEBUG - Stop ID database is 0
2018-02-09 10:06:03,415 - DEBUG - Entry ID database is 186
2018-02-09 10:06:03,415 - DEBUG - Profit API ID is 186
2018-02-09 10:06:03,415 - DEBUG - Entry API ID is 186
2018-02-09 10:06:05,405 - DEBUG - Connecting to database
2018-02-09 10:06:05,412 - DEBUG - Connected to database
2018-02-09 10:06:05,414 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 10:06:05,414 - DEBUG - Stop loss value is 70.02
2018-02-09 10:06:05,415 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 10:06:05,416 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 10:06:05,417 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 10:06:05,417 - DEBUG - EntryPrice value is 68.725
2018-02-09 10:06:05,419 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 10:06:05,419 - DEBUG - Stop quantity 1
2018-02-09 10:06:05,420 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 10:06:05,421 - DEBUG - Direction is Short
2018-02-09 10:06:05,422 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 10:06:05,422 - DEBUG - Count is 0
2018-02-09 10:06:05,424 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 10:06:05,424 - DEBUG - Stop Loss Flag is 0
2018-02-09 10:06:05,425 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 10:06:05,426 - DEBUG - Max ID Order is (186,)
2018-02-09 10:06:05,426 - DEBUG - Today is 2018-02-09
2018-02-09 10:06:05,427 - DEBUG - Day of the week 4
2018-02-09 10:06:05,427 - DEBUG - Yesterday is 02/08/2018
2018-02-09 10:06:05,427 - DEBUG - In Position is  0
2018-02-09 10:06:05,427 - DEBUG - In Position is  <class 'int'>
2018-02-09 10:06:05,427 - DEBUG - curStopLossFlag is  0
2018-02-09 10:06:05,428 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 10:06:05,428 - DEBUG - Checking if Entry has been filled
2018-02-09 10:06:05,428 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 10:06:05,429 - DEBUG - EntryPend is 1
2018-02-09 10:06:05,430 - DEBUG - Try to Cancel Stop
2018-02-09 10:06:05,430 - DEBUG - Stop API ID 0
2018-02-09 10:06:05,430 - DEBUG - Profit API ID 186
2018-02-09 10:06:05,430 - DEBUG - Stop API ID <class 'int'>
2018-02-09 10:06:05,431 - DEBUG - Profit API ID <class 'int'>
2018-02-09 10:06:05,431 - DEBUG - Pos is 0
2018-02-09 10:06:05,431 - DEBUG - CurCount is 0
2018-02-09 10:06:05,431 - DEBUG - In Pos 0
2018-02-09 10:06:05,431 - DEBUG - Stop ID is 0
2018-02-09 10:06:05,432 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 10:06:05,433 - DEBUG - EntryPend is 1
2018-02-09 10:06:05,433 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 10:06:05,434 - DEBUG - Entry Date is 10
2018-02-09 10:06:05,434 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 10:06:05,434 - DEBUG - Order Profit ID is 186
2018-02-09 10:06:05,434 - DEBUG - Order Entry ID is 186
2018-02-09 10:06:05,434 - DEBUG - API ID is  0
2018-02-09 10:06:05,435 - DEBUG - Current Position is 0
2018-02-09 10:06:05,435 - DEBUG - Current Position is <class 'str'>
2018-02-09 10:06:05,435 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 10:06:05,435 - DEBUG - Time is 10
2018-02-09 10:06:05,436 - DEBUG - Time is <class 'int'>
2018-02-09 10:06:05,436 - DEBUG - Time is 6
2018-02-09 10:06:05,436 - DEBUG - Time is <class 'int'>
2018-02-09 10:06:05,436 - DEBUG - Disconnected from IBController
2018-02-09 10:06:05,437 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 10:11:01,346 - DEBUG - ****************************************************
2018-02-09 10:11:01,347 - DEBUG - Current Time is 10:11AM
2018-02-09 10:11:01,347 - DEBUG - Starting Pos Mgmt H E
2018-02-09 10:11:01,347 - DEBUG - Connecting to database
2018-02-09 10:11:01,404 - DEBUG - Connected to database
2018-02-09 10:11:01,404 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 10:11:01,405 - DEBUG - Order Profit is 186
2018-02-09 10:11:01,406 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 10:11:01,407 - DEBUG - Stop ID is 0
2018-02-09 10:11:01,407 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 10:11:01,409 - DEBUG - Entry ID is 186
2018-02-09 10:11:01,409 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 10:11:01,410 - DEBUG - OCA ID is 1
2018-02-09 10:11:01,411 - DEBUG - Connecting to IBController
2018-02-09 10:11:02,419 - DEBUG - Connected to IBController
2018-02-09 10:11:02,419 - DEBUG - Position requested
2018-02-09 10:11:02,420 - DEBUG - Pos Mgmt -12987
2018-02-09 10:11:02,421 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000215CBE0>, pos=-12987, avgCost=0.95368235>
2018-02-09 10:11:02,421 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 10:11:02,421 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 10:11:02,422 - DEBUG - Position is -12987
2018-02-09 10:11:03,420 - DEBUG - Open Orders requested
2018-02-09 10:11:03,422 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x000000000215CE10>, order=<ib.ext.Order.Order object at 0x000000000215CC88>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021F21D0>>
2018-02-09 10:11:03,423 - DEBUG - Order OrderID 185
2018-02-09 10:11:03,423 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 10:11:03,424 - DEBUG - Order status PreSubmitted
2018-02-09 10:11:03,424 - DEBUG - Order Identification 185
2018-02-09 10:11:03,424 - DEBUG - Order Identification <class 'int'>
2018-02-09 10:11:03,425 - DEBUG - Profit ID from database is 186
2018-02-09 10:11:03,425 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 10:11:03,425 - DEBUG - Stop ID database is 0
2018-02-09 10:11:03,425 - DEBUG - Entry ID database is 186
2018-02-09 10:11:03,426 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x000000000215CE10>, order=<ib.ext.Order.Order object at 0x000000000215CC88>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021F2080>>
2018-02-09 10:11:03,427 - DEBUG - Order OrderID 184
2018-02-09 10:11:03,427 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 10:11:03,428 - DEBUG - Order status PreSubmitted
2018-02-09 10:11:03,428 - DEBUG - Order Identification 184
2018-02-09 10:11:03,428 - DEBUG - Order Identification <class 'int'>
2018-02-09 10:11:03,428 - DEBUG - Profit ID from database is 186
2018-02-09 10:11:03,429 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 10:11:03,429 - DEBUG - Stop ID database is 0
2018-02-09 10:11:03,429 - DEBUG - Entry ID database is 186
2018-02-09 10:11:03,430 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x000000000215CE10>, order=<ib.ext.Order.Order object at 0x000000000215CC88>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021F2240>>
2018-02-09 10:11:03,430 - DEBUG - Order OrderID 186
2018-02-09 10:11:03,431 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 10:11:03,431 - DEBUG - Order status PreSubmitted
2018-02-09 10:11:03,431 - DEBUG - Order Identification 186
2018-02-09 10:11:03,432 - DEBUG - Order Identification <class 'int'>
2018-02-09 10:11:03,432 - DEBUG - Profit ID from database is 186
2018-02-09 10:11:03,432 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 10:11:03,432 - DEBUG - Stop ID database is 0
2018-02-09 10:11:03,433 - DEBUG - Entry ID database is 186
2018-02-09 10:11:03,433 - DEBUG - Profit API ID is 186
2018-02-09 10:11:03,433 - DEBUG - Entry API ID is 186
2018-02-09 10:11:05,423 - DEBUG - Connecting to database
2018-02-09 10:11:05,431 - DEBUG - Connected to database
2018-02-09 10:11:05,432 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 10:11:05,433 - DEBUG - Stop loss value is 70.02
2018-02-09 10:11:05,434 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 10:11:05,434 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 10:11:05,436 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 10:11:05,436 - DEBUG - EntryPrice value is 68.725
2018-02-09 10:11:05,437 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 10:11:05,438 - DEBUG - Stop quantity 1
2018-02-09 10:11:05,439 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 10:11:05,439 - DEBUG - Direction is Short
2018-02-09 10:11:05,441 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 10:11:05,441 - DEBUG - Count is 0
2018-02-09 10:11:05,442 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 10:11:05,443 - DEBUG - Stop Loss Flag is 0
2018-02-09 10:11:05,444 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 10:11:05,444 - DEBUG - Max ID Order is (186,)
2018-02-09 10:11:05,445 - DEBUG - Today is 2018-02-09
2018-02-09 10:11:05,445 - DEBUG - Day of the week 4
2018-02-09 10:11:05,445 - DEBUG - Yesterday is 02/08/2018
2018-02-09 10:11:05,446 - DEBUG - In Position is  0
2018-02-09 10:11:05,446 - DEBUG - In Position is  <class 'int'>
2018-02-09 10:11:05,446 - DEBUG - curStopLossFlag is  0
2018-02-09 10:11:05,446 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 10:11:05,447 - DEBUG - Checking if Entry has been filled
2018-02-09 10:11:05,447 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 10:11:05,448 - DEBUG - EntryPend is 1
2018-02-09 10:11:05,449 - DEBUG - Try to Cancel Stop
2018-02-09 10:11:05,449 - DEBUG - Stop API ID 0
2018-02-09 10:11:05,449 - DEBUG - Profit API ID 186
2018-02-09 10:11:05,449 - DEBUG - Stop API ID <class 'int'>
2018-02-09 10:11:05,450 - DEBUG - Profit API ID <class 'int'>
2018-02-09 10:11:05,450 - DEBUG - Pos is 0
2018-02-09 10:11:05,450 - DEBUG - CurCount is 0
2018-02-09 10:11:05,450 - DEBUG - In Pos 0
2018-02-09 10:11:05,450 - DEBUG - Stop ID is 0
2018-02-09 10:11:05,451 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 10:11:05,452 - DEBUG - EntryPend is 1
2018-02-09 10:11:05,452 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 10:11:05,453 - DEBUG - Entry Date is 10
2018-02-09 10:11:05,453 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 10:11:05,453 - DEBUG - Order Profit ID is 186
2018-02-09 10:11:05,453 - DEBUG - Order Entry ID is 186
2018-02-09 10:11:05,454 - DEBUG - API ID is  0
2018-02-09 10:11:05,454 - DEBUG - Current Position is 0
2018-02-09 10:11:05,454 - DEBUG - Current Position is <class 'str'>
2018-02-09 10:11:05,454 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 10:11:05,454 - DEBUG - Time is 10
2018-02-09 10:11:05,455 - DEBUG - Time is <class 'int'>
2018-02-09 10:11:05,455 - DEBUG - Time is 11
2018-02-09 10:11:05,455 - DEBUG - Time is <class 'int'>
2018-02-09 10:11:05,455 - DEBUG - Disconnected from IBController
2018-02-09 10:11:05,456 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 10:16:01,355 - DEBUG - ****************************************************
2018-02-09 10:16:01,355 - DEBUG - Current Time is 10:16AM
2018-02-09 10:16:01,356 - DEBUG - Starting Pos Mgmt H E
2018-02-09 10:16:01,356 - DEBUG - Connecting to database
2018-02-09 10:16:01,394 - DEBUG - Connected to database
2018-02-09 10:16:01,394 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 10:16:01,396 - DEBUG - Order Profit is 186
2018-02-09 10:16:01,396 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 10:16:01,397 - DEBUG - Stop ID is 0
2018-02-09 10:16:01,398 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 10:16:01,399 - DEBUG - Entry ID is 186
2018-02-09 10:16:01,399 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 10:16:01,401 - DEBUG - OCA ID is 1
2018-02-09 10:16:01,401 - DEBUG - Connecting to IBController
2018-02-09 10:16:02,409 - DEBUG - Connected to IBController
2018-02-09 10:16:02,409 - DEBUG - Position requested
2018-02-09 10:16:02,410 - DEBUG - Pos Mgmt -12987
2018-02-09 10:16:02,411 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000214DE48>, pos=-12987, avgCost=0.95368235>
2018-02-09 10:16:02,411 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 10:16:02,411 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 10:16:02,412 - DEBUG - Position is -12987
2018-02-09 10:16:03,411 - DEBUG - Open Orders requested
2018-02-09 10:16:03,413 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x000000000214DCC0>, order=<ib.ext.Order.Order object at 0x000000000214DC50>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021E11D0>>
2018-02-09 10:16:03,414 - DEBUG - Order OrderID 185
2018-02-09 10:16:03,414 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 10:16:03,414 - DEBUG - Order status PreSubmitted
2018-02-09 10:16:03,415 - DEBUG - Order Identification 185
2018-02-09 10:16:03,415 - DEBUG - Order Identification <class 'int'>
2018-02-09 10:16:03,415 - DEBUG - Profit ID from database is 186
2018-02-09 10:16:03,416 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 10:16:03,416 - DEBUG - Stop ID database is 0
2018-02-09 10:16:03,416 - DEBUG - Entry ID database is 186
2018-02-09 10:16:03,417 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x000000000214DCC0>, order=<ib.ext.Order.Order object at 0x000000000214DC50>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021E1080>>
2018-02-09 10:16:03,417 - DEBUG - Order OrderID 184
2018-02-09 10:16:03,418 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 10:16:03,418 - DEBUG - Order status PreSubmitted
2018-02-09 10:16:03,418 - DEBUG - Order Identification 184
2018-02-09 10:16:03,419 - DEBUG - Order Identification <class 'int'>
2018-02-09 10:16:03,419 - DEBUG - Profit ID from database is 186
2018-02-09 10:16:03,419 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 10:16:03,419 - DEBUG - Stop ID database is 0
2018-02-09 10:16:03,419 - DEBUG - Entry ID database is 186
2018-02-09 10:16:03,421 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x000000000214DCC0>, order=<ib.ext.Order.Order object at 0x000000000214DC50>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021E1240>>
2018-02-09 10:16:03,421 - DEBUG - Order OrderID 186
2018-02-09 10:16:03,421 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 10:16:03,422 - DEBUG - Order status PreSubmitted
2018-02-09 10:16:03,422 - DEBUG - Order Identification 186
2018-02-09 10:16:03,422 - DEBUG - Order Identification <class 'int'>
2018-02-09 10:16:03,422 - DEBUG - Profit ID from database is 186
2018-02-09 10:16:03,423 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 10:16:03,423 - DEBUG - Stop ID database is 0
2018-02-09 10:16:03,423 - DEBUG - Entry ID database is 186
2018-02-09 10:16:03,423 - DEBUG - Profit API ID is 186
2018-02-09 10:16:03,424 - DEBUG - Entry API ID is 186
2018-02-09 10:16:05,413 - DEBUG - Connecting to database
2018-02-09 10:16:05,420 - DEBUG - Connected to database
2018-02-09 10:16:05,421 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 10:16:05,422 - DEBUG - Stop loss value is 70.02
2018-02-09 10:16:05,423 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 10:16:05,424 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 10:16:05,425 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 10:16:05,425 - DEBUG - EntryPrice value is 68.725
2018-02-09 10:16:05,426 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 10:16:05,427 - DEBUG - Stop quantity 1
2018-02-09 10:16:05,428 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 10:16:05,428 - DEBUG - Direction is Short
2018-02-09 10:16:05,430 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 10:16:05,430 - DEBUG - Count is 0
2018-02-09 10:16:05,431 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 10:16:05,432 - DEBUG - Stop Loss Flag is 0
2018-02-09 10:16:05,433 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 10:16:05,433 - DEBUG - Max ID Order is (186,)
2018-02-09 10:16:05,434 - DEBUG - Today is 2018-02-09
2018-02-09 10:16:05,434 - DEBUG - Day of the week 4
2018-02-09 10:16:05,434 - DEBUG - Yesterday is 02/08/2018
2018-02-09 10:16:05,435 - DEBUG - In Position is  0
2018-02-09 10:16:05,435 - DEBUG - In Position is  <class 'int'>
2018-02-09 10:16:05,435 - DEBUG - curStopLossFlag is  0
2018-02-09 10:16:05,435 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 10:16:05,435 - DEBUG - Checking if Entry has been filled
2018-02-09 10:16:05,436 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 10:16:05,437 - DEBUG - EntryPend is 1
2018-02-09 10:16:05,437 - DEBUG - Try to Cancel Stop
2018-02-09 10:16:05,438 - DEBUG - Stop API ID 0
2018-02-09 10:16:05,438 - DEBUG - Profit API ID 186
2018-02-09 10:16:05,438 - DEBUG - Stop API ID <class 'int'>
2018-02-09 10:16:05,438 - DEBUG - Profit API ID <class 'int'>
2018-02-09 10:16:05,439 - DEBUG - Pos is 0
2018-02-09 10:16:05,439 - DEBUG - CurCount is 0
2018-02-09 10:16:05,439 - DEBUG - In Pos 0
2018-02-09 10:16:05,439 - DEBUG - Stop ID is 0
2018-02-09 10:16:05,440 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 10:16:05,441 - DEBUG - EntryPend is 1
2018-02-09 10:16:05,441 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 10:16:05,441 - DEBUG - Entry Date is 10
2018-02-09 10:16:05,442 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 10:16:05,442 - DEBUG - Order Profit ID is 186
2018-02-09 10:16:05,442 - DEBUG - Order Entry ID is 186
2018-02-09 10:16:05,442 - DEBUG - API ID is  0
2018-02-09 10:16:05,443 - DEBUG - Current Position is 0
2018-02-09 10:16:05,443 - DEBUG - Current Position is <class 'str'>
2018-02-09 10:16:05,443 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 10:16:05,443 - DEBUG - Time is 10
2018-02-09 10:16:05,443 - DEBUG - Time is <class 'int'>
2018-02-09 10:16:05,444 - DEBUG - Time is 16
2018-02-09 10:16:05,444 - DEBUG - Time is <class 'int'>
2018-02-09 10:16:05,444 - DEBUG - Disconnected from IBController
2018-02-09 10:16:05,445 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 10:21:01,348 - DEBUG - ****************************************************
2018-02-09 10:21:01,349 - DEBUG - Current Time is 10:21AM
2018-02-09 10:21:01,349 - DEBUG - Starting Pos Mgmt H E
2018-02-09 10:21:01,349 - DEBUG - Connecting to database
2018-02-09 10:21:01,372 - DEBUG - Connected to database
2018-02-09 10:21:01,373 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 10:21:01,374 - DEBUG - Order Profit is 186
2018-02-09 10:21:01,374 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 10:21:01,376 - DEBUG - Stop ID is 0
2018-02-09 10:21:01,376 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 10:21:01,377 - DEBUG - Entry ID is 186
2018-02-09 10:21:01,378 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 10:21:01,379 - DEBUG - OCA ID is 1
2018-02-09 10:21:01,379 - DEBUG - Connecting to IBController
2018-02-09 10:21:02,390 - DEBUG - Connected to IBController
2018-02-09 10:21:02,390 - DEBUG - Position requested
2018-02-09 10:21:02,391 - DEBUG - Pos Mgmt -12987
2018-02-09 10:21:02,392 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212BDD8>, pos=-12987, avgCost=0.95368235>
2018-02-09 10:21:02,392 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 10:21:02,393 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 10:21:02,393 - DEBUG - Position is -12987
2018-02-09 10:21:03,391 - DEBUG - Open Orders requested
2018-02-09 10:21:03,393 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x000000000212BE10>, order=<ib.ext.Order.Order object at 0x000000000212BCC0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C01D0>>
2018-02-09 10:21:03,394 - DEBUG - Order OrderID 185
2018-02-09 10:21:03,394 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 10:21:03,395 - DEBUG - Order status PreSubmitted
2018-02-09 10:21:03,395 - DEBUG - Order Identification 185
2018-02-09 10:21:03,395 - DEBUG - Order Identification <class 'int'>
2018-02-09 10:21:03,395 - DEBUG - Profit ID from database is 186
2018-02-09 10:21:03,396 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 10:21:03,396 - DEBUG - Stop ID database is 0
2018-02-09 10:21:03,396 - DEBUG - Entry ID database is 186
2018-02-09 10:21:03,397 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x000000000212BE10>, order=<ib.ext.Order.Order object at 0x000000000212BCC0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C0048>>
2018-02-09 10:21:03,398 - DEBUG - Order OrderID 184
2018-02-09 10:21:03,398 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 10:21:03,398 - DEBUG - Order status PreSubmitted
2018-02-09 10:21:03,399 - DEBUG - Order Identification 184
2018-02-09 10:21:03,399 - DEBUG - Order Identification <class 'int'>
2018-02-09 10:21:03,399 - DEBUG - Profit ID from database is 186
2018-02-09 10:21:03,399 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 10:21:03,399 - DEBUG - Stop ID database is 0
2018-02-09 10:21:03,400 - DEBUG - Entry ID database is 186
2018-02-09 10:21:03,401 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x000000000212BE10>, order=<ib.ext.Order.Order object at 0x000000000212BCC0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C0240>>
2018-02-09 10:21:03,401 - DEBUG - Order OrderID 186
2018-02-09 10:21:03,401 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 10:21:03,402 - DEBUG - Order status PreSubmitted
2018-02-09 10:21:03,402 - DEBUG - Order Identification 186
2018-02-09 10:21:03,402 - DEBUG - Order Identification <class 'int'>
2018-02-09 10:21:03,402 - DEBUG - Profit ID from database is 186
2018-02-09 10:21:03,403 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 10:21:03,403 - DEBUG - Stop ID database is 0
2018-02-09 10:21:03,403 - DEBUG - Entry ID database is 186
2018-02-09 10:21:03,403 - DEBUG - Profit API ID is 186
2018-02-09 10:21:03,404 - DEBUG - Entry API ID is 186
2018-02-09 10:21:05,394 - DEBUG - Connecting to database
2018-02-09 10:21:05,401 - DEBUG - Connected to database
2018-02-09 10:21:05,402 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 10:21:05,403 - DEBUG - Stop loss value is 70.02
2018-02-09 10:21:05,404 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 10:21:05,404 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 10:21:05,406 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 10:21:05,406 - DEBUG - EntryPrice value is 68.725
2018-02-09 10:21:05,408 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 10:21:05,408 - DEBUG - Stop quantity 1
2018-02-09 10:21:05,409 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 10:21:05,410 - DEBUG - Direction is Short
2018-02-09 10:21:05,411 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 10:21:05,411 - DEBUG - Count is 0
2018-02-09 10:21:05,413 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 10:21:05,413 - DEBUG - Stop Loss Flag is 0
2018-02-09 10:21:05,414 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 10:21:05,414 - DEBUG - Max ID Order is (186,)
2018-02-09 10:21:05,415 - DEBUG - Today is 2018-02-09
2018-02-09 10:21:05,415 - DEBUG - Day of the week 4
2018-02-09 10:21:05,416 - DEBUG - Yesterday is 02/08/2018
2018-02-09 10:21:05,416 - DEBUG - In Position is  0
2018-02-09 10:21:05,416 - DEBUG - In Position is  <class 'int'>
2018-02-09 10:21:05,416 - DEBUG - curStopLossFlag is  0
2018-02-09 10:21:05,416 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 10:21:05,417 - DEBUG - Checking if Entry has been filled
2018-02-09 10:21:05,417 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 10:21:05,418 - DEBUG - EntryPend is 1
2018-02-09 10:21:05,419 - DEBUG - Try to Cancel Stop
2018-02-09 10:21:05,419 - DEBUG - Stop API ID 0
2018-02-09 10:21:05,419 - DEBUG - Profit API ID 186
2018-02-09 10:21:05,419 - DEBUG - Stop API ID <class 'int'>
2018-02-09 10:21:05,419 - DEBUG - Profit API ID <class 'int'>
2018-02-09 10:21:05,420 - DEBUG - Pos is 0
2018-02-09 10:21:05,420 - DEBUG - CurCount is 0
2018-02-09 10:21:05,420 - DEBUG - In Pos 0
2018-02-09 10:21:05,420 - DEBUG - Stop ID is 0
2018-02-09 10:21:05,420 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 10:21:05,422 - DEBUG - EntryPend is 1
2018-02-09 10:21:05,422 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 10:21:05,422 - DEBUG - Entry Date is 10
2018-02-09 10:21:05,423 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 10:21:05,423 - DEBUG - Order Profit ID is 186
2018-02-09 10:21:05,423 - DEBUG - Order Entry ID is 186
2018-02-09 10:21:05,423 - DEBUG - API ID is  0
2018-02-09 10:21:05,424 - DEBUG - Current Position is 0
2018-02-09 10:21:05,424 - DEBUG - Current Position is <class 'str'>
2018-02-09 10:21:05,424 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 10:21:05,424 - DEBUG - Time is 10
2018-02-09 10:21:05,424 - DEBUG - Time is <class 'int'>
2018-02-09 10:21:05,425 - DEBUG - Time is 21
2018-02-09 10:21:05,425 - DEBUG - Time is <class 'int'>
2018-02-09 10:21:05,425 - DEBUG - Disconnected from IBController
2018-02-09 10:21:05,426 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 10:26:01,348 - DEBUG - ****************************************************
2018-02-09 10:26:01,348 - DEBUG - Current Time is 10:26AM
2018-02-09 10:26:01,349 - DEBUG - Starting Pos Mgmt H E
2018-02-09 10:26:01,349 - DEBUG - Connecting to database
2018-02-09 10:26:01,387 - DEBUG - Connected to database
2018-02-09 10:26:01,388 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 10:26:01,389 - DEBUG - Order Profit is 186
2018-02-09 10:26:01,390 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 10:26:01,391 - DEBUG - Stop ID is 0
2018-02-09 10:26:01,391 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 10:26:01,392 - DEBUG - Entry ID is 186
2018-02-09 10:26:01,393 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 10:26:01,394 - DEBUG - OCA ID is 1
2018-02-09 10:26:01,394 - DEBUG - Connecting to IBController
2018-02-09 10:26:02,406 - DEBUG - Connected to IBController
2018-02-09 10:26:02,406 - DEBUG - Position requested
2018-02-09 10:26:02,408 - DEBUG - Pos Mgmt -12987
2018-02-09 10:26:02,409 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212CCF8>, pos=-12987, avgCost=0.95368235>
2018-02-09 10:26:02,409 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 10:26:02,409 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 10:26:02,410 - DEBUG - Position is -12987
2018-02-09 10:26:03,406 - DEBUG - Open Orders requested
2018-02-09 10:26:03,408 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x000000000212CBE0>, order=<ib.ext.Order.Order object at 0x000000000212CBA8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C2160>>
2018-02-09 10:26:03,409 - DEBUG - Order OrderID 185
2018-02-09 10:26:03,409 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 10:26:03,410 - DEBUG - Order status PreSubmitted
2018-02-09 10:26:03,410 - DEBUG - Order Identification 185
2018-02-09 10:26:03,410 - DEBUG - Order Identification <class 'int'>
2018-02-09 10:26:03,411 - DEBUG - Profit ID from database is 186
2018-02-09 10:26:03,411 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 10:26:03,411 - DEBUG - Stop ID database is 0
2018-02-09 10:26:03,411 - DEBUG - Entry ID database is 186
2018-02-09 10:26:03,412 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x000000000212CBE0>, order=<ib.ext.Order.Order object at 0x000000000212CBA8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C21D0>>
2018-02-09 10:26:03,413 - DEBUG - Order OrderID 184
2018-02-09 10:26:03,413 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 10:26:03,414 - DEBUG - Order status PreSubmitted
2018-02-09 10:26:03,414 - DEBUG - Order Identification 184
2018-02-09 10:26:03,414 - DEBUG - Order Identification <class 'int'>
2018-02-09 10:26:03,414 - DEBUG - Profit ID from database is 186
2018-02-09 10:26:03,414 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 10:26:03,415 - DEBUG - Stop ID database is 0
2018-02-09 10:26:03,415 - DEBUG - Entry ID database is 186
2018-02-09 10:26:03,416 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x000000000212CBE0>, order=<ib.ext.Order.Order object at 0x000000000212CBA8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C22B0>>
2018-02-09 10:26:03,416 - DEBUG - Order OrderID 186
2018-02-09 10:26:03,417 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 10:26:03,417 - DEBUG - Order status PreSubmitted
2018-02-09 10:26:03,417 - DEBUG - Order Identification 186
2018-02-09 10:26:03,417 - DEBUG - Order Identification <class 'int'>
2018-02-09 10:26:03,418 - DEBUG - Profit ID from database is 186
2018-02-09 10:26:03,418 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 10:26:03,418 - DEBUG - Stop ID database is 0
2018-02-09 10:26:03,418 - DEBUG - Entry ID database is 186
2018-02-09 10:26:03,419 - DEBUG - Profit API ID is 186
2018-02-09 10:26:03,419 - DEBUG - Entry API ID is 186
2018-02-09 10:26:05,406 - DEBUG - Connecting to database
2018-02-09 10:26:05,413 - DEBUG - Connected to database
2018-02-09 10:26:05,415 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 10:26:05,415 - DEBUG - Stop loss value is 70.02
2018-02-09 10:26:05,417 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 10:26:05,417 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 10:26:05,418 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 10:26:05,419 - DEBUG - EntryPrice value is 68.725
2018-02-09 10:26:05,420 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 10:26:05,420 - DEBUG - Stop quantity 1
2018-02-09 10:26:05,422 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 10:26:05,422 - DEBUG - Direction is Short
2018-02-09 10:26:05,424 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 10:26:05,424 - DEBUG - Count is 0
2018-02-09 10:26:05,425 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 10:26:05,426 - DEBUG - Stop Loss Flag is 0
2018-02-09 10:26:05,427 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 10:26:05,427 - DEBUG - Max ID Order is (186,)
2018-02-09 10:26:05,428 - DEBUG - Today is 2018-02-09
2018-02-09 10:26:05,428 - DEBUG - Day of the week 4
2018-02-09 10:26:05,428 - DEBUG - Yesterday is 02/08/2018
2018-02-09 10:26:05,428 - DEBUG - In Position is  0
2018-02-09 10:26:05,429 - DEBUG - In Position is  <class 'int'>
2018-02-09 10:26:05,429 - DEBUG - curStopLossFlag is  0
2018-02-09 10:26:05,429 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 10:26:05,429 - DEBUG - Checking if Entry has been filled
2018-02-09 10:26:05,430 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 10:26:05,431 - DEBUG - EntryPend is 1
2018-02-09 10:26:05,431 - DEBUG - Try to Cancel Stop
2018-02-09 10:26:05,431 - DEBUG - Stop API ID 0
2018-02-09 10:26:05,432 - DEBUG - Profit API ID 186
2018-02-09 10:26:05,432 - DEBUG - Stop API ID <class 'int'>
2018-02-09 10:26:05,432 - DEBUG - Profit API ID <class 'int'>
2018-02-09 10:26:05,432 - DEBUG - Pos is 0
2018-02-09 10:26:05,433 - DEBUG - CurCount is 0
2018-02-09 10:26:05,433 - DEBUG - In Pos 0
2018-02-09 10:26:05,433 - DEBUG - Stop ID is 0
2018-02-09 10:26:05,433 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 10:26:05,435 - DEBUG - EntryPend is 1
2018-02-09 10:26:05,435 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 10:26:05,435 - DEBUG - Entry Date is 10
2018-02-09 10:26:05,435 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 10:26:05,435 - DEBUG - Order Profit ID is 186
2018-02-09 10:26:05,436 - DEBUG - Order Entry ID is 186
2018-02-09 10:26:05,436 - DEBUG - API ID is  0
2018-02-09 10:26:05,436 - DEBUG - Current Position is 0
2018-02-09 10:26:05,436 - DEBUG - Current Position is <class 'str'>
2018-02-09 10:26:05,437 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 10:26:05,437 - DEBUG - Time is 10
2018-02-09 10:26:05,437 - DEBUG - Time is <class 'int'>
2018-02-09 10:26:05,437 - DEBUG - Time is 26
2018-02-09 10:26:05,437 - DEBUG - Time is <class 'int'>
2018-02-09 10:26:05,438 - DEBUG - Disconnected from IBController
2018-02-09 10:26:05,438 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 10:31:01,356 - DEBUG - ****************************************************
2018-02-09 10:31:01,356 - DEBUG - Current Time is 10:31AM
2018-02-09 10:31:01,357 - DEBUG - Starting Pos Mgmt H E
2018-02-09 10:31:01,357 - DEBUG - Connecting to database
2018-02-09 10:31:01,388 - DEBUG - Connected to database
2018-02-09 10:31:01,388 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 10:31:01,390 - DEBUG - Order Profit is 186
2018-02-09 10:31:01,390 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 10:31:01,392 - DEBUG - Stop ID is 0
2018-02-09 10:31:01,392 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 10:31:01,393 - DEBUG - Entry ID is 186
2018-02-09 10:31:01,394 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 10:31:01,395 - DEBUG - OCA ID is 1
2018-02-09 10:31:01,395 - DEBUG - Connecting to IBController
2018-02-09 10:31:02,404 - DEBUG - Connected to IBController
2018-02-09 10:31:02,404 - DEBUG - Position requested
2018-02-09 10:31:02,405 - DEBUG - Pos Mgmt -12987
2018-02-09 10:31:02,406 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212CD30>, pos=-12987, avgCost=0.95368235>
2018-02-09 10:31:02,406 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 10:31:02,406 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 10:31:02,407 - DEBUG - Position is -12987
2018-02-09 10:31:03,405 - DEBUG - Open Orders requested
2018-02-09 10:31:03,407 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x000000000212CD68>, order=<ib.ext.Order.Order object at 0x000000000212CC18>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C21D0>>
2018-02-09 10:31:03,407 - DEBUG - Order OrderID 185
2018-02-09 10:31:03,408 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 10:31:03,408 - DEBUG - Order status PreSubmitted
2018-02-09 10:31:03,409 - DEBUG - Order Identification 185
2018-02-09 10:31:03,409 - DEBUG - Order Identification <class 'int'>
2018-02-09 10:31:03,409 - DEBUG - Profit ID from database is 186
2018-02-09 10:31:03,409 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 10:31:03,409 - DEBUG - Stop ID database is 0
2018-02-09 10:31:03,410 - DEBUG - Entry ID database is 186
2018-02-09 10:31:03,411 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x000000000212CD68>, order=<ib.ext.Order.Order object at 0x000000000212CC18>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C2080>>
2018-02-09 10:31:03,411 - DEBUG - Order OrderID 184
2018-02-09 10:31:03,411 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 10:31:03,412 - DEBUG - Order status PreSubmitted
2018-02-09 10:31:03,412 - DEBUG - Order Identification 184
2018-02-09 10:31:03,412 - DEBUG - Order Identification <class 'int'>
2018-02-09 10:31:03,412 - DEBUG - Profit ID from database is 186
2018-02-09 10:31:03,413 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 10:31:03,413 - DEBUG - Stop ID database is 0
2018-02-09 10:31:03,413 - DEBUG - Entry ID database is 186
2018-02-09 10:31:03,414 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x000000000212CD68>, order=<ib.ext.Order.Order object at 0x000000000212CC18>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C2240>>
2018-02-09 10:31:03,414 - DEBUG - Order OrderID 186
2018-02-09 10:31:03,415 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 10:31:03,415 - DEBUG - Order status PreSubmitted
2018-02-09 10:31:03,415 - DEBUG - Order Identification 186
2018-02-09 10:31:03,416 - DEBUG - Order Identification <class 'int'>
2018-02-09 10:31:03,416 - DEBUG - Profit ID from database is 186
2018-02-09 10:31:03,416 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 10:31:03,416 - DEBUG - Stop ID database is 0
2018-02-09 10:31:03,417 - DEBUG - Entry ID database is 186
2018-02-09 10:31:03,417 - DEBUG - Profit API ID is 186
2018-02-09 10:31:03,417 - DEBUG - Entry API ID is 186
2018-02-09 10:31:05,407 - DEBUG - Connecting to database
2018-02-09 10:31:05,414 - DEBUG - Connected to database
2018-02-09 10:31:05,416 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 10:31:05,416 - DEBUG - Stop loss value is 70.02
2018-02-09 10:31:05,417 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 10:31:05,418 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 10:31:05,419 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 10:31:05,420 - DEBUG - EntryPrice value is 68.725
2018-02-09 10:31:05,421 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 10:31:05,421 - DEBUG - Stop quantity 1
2018-02-09 10:31:05,422 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 10:31:05,423 - DEBUG - Direction is Short
2018-02-09 10:31:05,424 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 10:31:05,425 - DEBUG - Count is 0
2018-02-09 10:31:05,426 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 10:31:05,426 - DEBUG - Stop Loss Flag is 0
2018-02-09 10:31:05,428 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 10:31:05,428 - DEBUG - Max ID Order is (186,)
2018-02-09 10:31:05,428 - DEBUG - Today is 2018-02-09
2018-02-09 10:31:05,429 - DEBUG - Day of the week 4
2018-02-09 10:31:05,429 - DEBUG - Yesterday is 02/08/2018
2018-02-09 10:31:05,429 - DEBUG - In Position is  0
2018-02-09 10:31:05,429 - DEBUG - In Position is  <class 'int'>
2018-02-09 10:31:05,430 - DEBUG - curStopLossFlag is  0
2018-02-09 10:31:05,430 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 10:31:05,430 - DEBUG - Checking if Entry has been filled
2018-02-09 10:31:05,430 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 10:31:05,432 - DEBUG - EntryPend is 1
2018-02-09 10:31:05,432 - DEBUG - Try to Cancel Stop
2018-02-09 10:31:05,432 - DEBUG - Stop API ID 0
2018-02-09 10:31:05,433 - DEBUG - Profit API ID 186
2018-02-09 10:31:05,433 - DEBUG - Stop API ID <class 'int'>
2018-02-09 10:31:05,433 - DEBUG - Profit API ID <class 'int'>
2018-02-09 10:31:05,433 - DEBUG - Pos is 0
2018-02-09 10:31:05,433 - DEBUG - CurCount is 0
2018-02-09 10:31:05,434 - DEBUG - In Pos 0
2018-02-09 10:31:05,434 - DEBUG - Stop ID is 0
2018-02-09 10:31:05,434 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 10:31:05,436 - DEBUG - EntryPend is 1
2018-02-09 10:31:05,436 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 10:31:05,436 - DEBUG - Entry Date is 10
2018-02-09 10:31:05,436 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 10:31:05,437 - DEBUG - Order Profit ID is 186
2018-02-09 10:31:05,437 - DEBUG - Order Entry ID is 186
2018-02-09 10:31:05,437 - DEBUG - API ID is  0
2018-02-09 10:31:05,437 - DEBUG - Current Position is 0
2018-02-09 10:31:05,438 - DEBUG - Current Position is <class 'str'>
2018-02-09 10:31:05,438 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 10:31:05,438 - DEBUG - Time is 10
2018-02-09 10:31:05,438 - DEBUG - Time is <class 'int'>
2018-02-09 10:31:05,438 - DEBUG - Time is 31
2018-02-09 10:31:05,439 - DEBUG - Time is <class 'int'>
2018-02-09 10:31:05,439 - DEBUG - Disconnected from IBController
2018-02-09 10:31:05,439 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 10:36:01,396 - DEBUG - ****************************************************
2018-02-09 10:36:01,397 - DEBUG - Current Time is 10:36AM
2018-02-09 10:36:01,397 - DEBUG - Starting Pos Mgmt H E
2018-02-09 10:36:01,397 - DEBUG - Connecting to database
2018-02-09 10:36:01,443 - DEBUG - Connected to database
2018-02-09 10:36:01,444 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 10:36:01,445 - DEBUG - Order Profit is 186
2018-02-09 10:36:01,446 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 10:36:01,447 - DEBUG - Stop ID is 0
2018-02-09 10:36:01,447 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 10:36:01,449 - DEBUG - Entry ID is 186
2018-02-09 10:36:01,449 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 10:36:01,450 - DEBUG - OCA ID is 1
2018-02-09 10:36:01,451 - DEBUG - Connecting to IBController
2018-02-09 10:36:02,464 - DEBUG - Connected to IBController
2018-02-09 10:36:02,464 - DEBUG - Position requested
2018-02-09 10:36:02,466 - DEBUG - Pos Mgmt -12987
2018-02-09 10:36:02,466 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210DD68>, pos=-12987, avgCost=0.95368235>
2018-02-09 10:36:02,467 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 10:36:02,467 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 10:36:02,467 - DEBUG - Position is -12987
2018-02-09 10:36:03,464 - DEBUG - Open Orders requested
2018-02-09 10:36:03,467 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x000000000210DC18>, order=<ib.ext.Order.Order object at 0x000000000210DBE0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A1160>>
2018-02-09 10:36:03,467 - DEBUG - Order OrderID 185
2018-02-09 10:36:03,467 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 10:36:03,468 - DEBUG - Order status PreSubmitted
2018-02-09 10:36:03,468 - DEBUG - Order Identification 185
2018-02-09 10:36:03,468 - DEBUG - Order Identification <class 'int'>
2018-02-09 10:36:03,469 - DEBUG - Profit ID from database is 186
2018-02-09 10:36:03,469 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 10:36:03,469 - DEBUG - Stop ID database is 0
2018-02-09 10:36:03,469 - DEBUG - Entry ID database is 186
2018-02-09 10:36:03,471 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x000000000210DC18>, order=<ib.ext.Order.Order object at 0x000000000210DBE0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A11D0>>
2018-02-09 10:36:03,471 - DEBUG - Order OrderID 184
2018-02-09 10:36:03,471 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 10:36:03,472 - DEBUG - Order status PreSubmitted
2018-02-09 10:36:03,472 - DEBUG - Order Identification 184
2018-02-09 10:36:03,472 - DEBUG - Order Identification <class 'int'>
2018-02-09 10:36:03,472 - DEBUG - Profit ID from database is 186
2018-02-09 10:36:03,473 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 10:36:03,473 - DEBUG - Stop ID database is 0
2018-02-09 10:36:03,473 - DEBUG - Entry ID database is 186
2018-02-09 10:36:03,474 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x000000000210DC18>, order=<ib.ext.Order.Order object at 0x000000000210DBE0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A12B0>>
2018-02-09 10:36:03,474 - DEBUG - Order OrderID 186
2018-02-09 10:36:03,475 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 10:36:03,475 - DEBUG - Order status PreSubmitted
2018-02-09 10:36:03,475 - DEBUG - Order Identification 186
2018-02-09 10:36:03,476 - DEBUG - Order Identification <class 'int'>
2018-02-09 10:36:03,476 - DEBUG - Profit ID from database is 186
2018-02-09 10:36:03,476 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 10:36:03,476 - DEBUG - Stop ID database is 0
2018-02-09 10:36:03,477 - DEBUG - Entry ID database is 186
2018-02-09 10:36:03,477 - DEBUG - Profit API ID is 186
2018-02-09 10:36:03,477 - DEBUG - Entry API ID is 186
2018-02-09 10:36:05,464 - DEBUG - Connecting to database
2018-02-09 10:36:05,471 - DEBUG - Connected to database
2018-02-09 10:36:05,473 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 10:36:05,473 - DEBUG - Stop loss value is 70.02
2018-02-09 10:36:05,475 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 10:36:05,475 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 10:36:05,476 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 10:36:05,477 - DEBUG - EntryPrice value is 68.725
2018-02-09 10:36:05,478 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 10:36:05,478 - DEBUG - Stop quantity 1
2018-02-09 10:36:05,480 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 10:36:05,480 - DEBUG - Direction is Short
2018-02-09 10:36:05,481 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 10:36:05,482 - DEBUG - Count is 0
2018-02-09 10:36:05,483 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 10:36:05,483 - DEBUG - Stop Loss Flag is 0
2018-02-09 10:36:05,485 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 10:36:05,485 - DEBUG - Max ID Order is (186,)
2018-02-09 10:36:05,485 - DEBUG - Today is 2018-02-09
2018-02-09 10:36:05,486 - DEBUG - Day of the week 4
2018-02-09 10:36:05,486 - DEBUG - Yesterday is 02/08/2018
2018-02-09 10:36:05,486 - DEBUG - In Position is  0
2018-02-09 10:36:05,486 - DEBUG - In Position is  <class 'int'>
2018-02-09 10:36:05,487 - DEBUG - curStopLossFlag is  0
2018-02-09 10:36:05,487 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 10:36:05,487 - DEBUG - Checking if Entry has been filled
2018-02-09 10:36:05,487 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 10:36:05,489 - DEBUG - EntryPend is 1
2018-02-09 10:36:05,489 - DEBUG - Try to Cancel Stop
2018-02-09 10:36:05,489 - DEBUG - Stop API ID 0
2018-02-09 10:36:05,490 - DEBUG - Profit API ID 186
2018-02-09 10:36:05,490 - DEBUG - Stop API ID <class 'int'>
2018-02-09 10:36:05,490 - DEBUG - Profit API ID <class 'int'>
2018-02-09 10:36:05,490 - DEBUG - Pos is 0
2018-02-09 10:36:05,490 - DEBUG - CurCount is 0
2018-02-09 10:36:05,491 - DEBUG - In Pos 0
2018-02-09 10:36:05,491 - DEBUG - Stop ID is 0
2018-02-09 10:36:05,491 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 10:36:05,492 - DEBUG - EntryPend is 1
2018-02-09 10:36:05,493 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 10:36:05,493 - DEBUG - Entry Date is 10
2018-02-09 10:36:05,493 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 10:36:05,493 - DEBUG - Order Profit ID is 186
2018-02-09 10:36:05,494 - DEBUG - Order Entry ID is 186
2018-02-09 10:36:05,494 - DEBUG - API ID is  0
2018-02-09 10:36:05,494 - DEBUG - Current Position is 0
2018-02-09 10:36:05,494 - DEBUG - Current Position is <class 'str'>
2018-02-09 10:36:05,495 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 10:36:05,495 - DEBUG - Time is 10
2018-02-09 10:36:05,495 - DEBUG - Time is <class 'int'>
2018-02-09 10:36:05,495 - DEBUG - Time is 36
2018-02-09 10:36:05,495 - DEBUG - Time is <class 'int'>
2018-02-09 10:36:05,496 - DEBUG - Disconnected from IBController
2018-02-09 10:36:05,498 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 10:41:01,350 - DEBUG - ****************************************************
2018-02-09 10:41:01,351 - DEBUG - Current Time is 10:41AM
2018-02-09 10:41:01,351 - DEBUG - Starting Pos Mgmt H E
2018-02-09 10:41:01,351 - DEBUG - Connecting to database
2018-02-09 10:41:01,370 - DEBUG - Connected to database
2018-02-09 10:41:01,371 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 10:41:01,372 - DEBUG - Order Profit is 186
2018-02-09 10:41:01,372 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 10:41:01,374 - DEBUG - Stop ID is 0
2018-02-09 10:41:01,374 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 10:41:01,377 - DEBUG - Entry ID is 186
2018-02-09 10:41:01,377 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 10:41:01,378 - DEBUG - OCA ID is 1
2018-02-09 10:41:01,379 - DEBUG - Connecting to IBController
2018-02-09 10:41:02,388 - DEBUG - Connected to IBController
2018-02-09 10:41:02,388 - DEBUG - Position requested
2018-02-09 10:41:02,389 - DEBUG - Pos Mgmt -12987
2018-02-09 10:41:02,390 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FDC50>, pos=-12987, avgCost=0.95368235>
2018-02-09 10:41:02,390 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 10:41:02,390 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 10:41:02,391 - DEBUG - Position is -12987
2018-02-09 10:41:03,389 - DEBUG - Open Orders requested
2018-02-09 10:41:03,391 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x00000000020FDA90>, order=<ib.ext.Order.Order object at 0x00000000020FDCF8>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002191160>>
2018-02-09 10:41:03,392 - DEBUG - Order OrderID 185
2018-02-09 10:41:03,392 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 10:41:03,393 - DEBUG - Order status PreSubmitted
2018-02-09 10:41:03,393 - DEBUG - Order Identification 185
2018-02-09 10:41:03,393 - DEBUG - Order Identification <class 'int'>
2018-02-09 10:41:03,393 - DEBUG - Profit ID from database is 186
2018-02-09 10:41:03,394 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 10:41:03,394 - DEBUG - Stop ID database is 0
2018-02-09 10:41:03,394 - DEBUG - Entry ID database is 186
2018-02-09 10:41:03,395 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x00000000020FDA90>, order=<ib.ext.Order.Order object at 0x00000000020FDCF8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021911D0>>
2018-02-09 10:41:03,395 - DEBUG - Order OrderID 184
2018-02-09 10:41:03,396 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 10:41:03,396 - DEBUG - Order status PreSubmitted
2018-02-09 10:41:03,396 - DEBUG - Order Identification 184
2018-02-09 10:41:03,397 - DEBUG - Order Identification <class 'int'>
2018-02-09 10:41:03,397 - DEBUG - Profit ID from database is 186
2018-02-09 10:41:03,397 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 10:41:03,397 - DEBUG - Stop ID database is 0
2018-02-09 10:41:03,398 - DEBUG - Entry ID database is 186
2018-02-09 10:41:03,399 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x00000000020FDA90>, order=<ib.ext.Order.Order object at 0x00000000020FDCF8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021912B0>>
2018-02-09 10:41:03,399 - DEBUG - Order OrderID 186
2018-02-09 10:41:03,399 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 10:41:03,400 - DEBUG - Order status PreSubmitted
2018-02-09 10:41:03,400 - DEBUG - Order Identification 186
2018-02-09 10:41:03,400 - DEBUG - Order Identification <class 'int'>
2018-02-09 10:41:03,400 - DEBUG - Profit ID from database is 186
2018-02-09 10:41:03,401 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 10:41:03,401 - DEBUG - Stop ID database is 0
2018-02-09 10:41:03,401 - DEBUG - Entry ID database is 186
2018-02-09 10:41:03,401 - DEBUG - Profit API ID is 186
2018-02-09 10:41:03,401 - DEBUG - Entry API ID is 186
2018-02-09 10:41:05,390 - DEBUG - Connecting to database
2018-02-09 10:41:05,397 - DEBUG - Connected to database
2018-02-09 10:41:05,399 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 10:41:05,399 - DEBUG - Stop loss value is 70.02
2018-02-09 10:41:05,400 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 10:41:05,401 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 10:41:05,402 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 10:41:05,402 - DEBUG - EntryPrice value is 68.725
2018-02-09 10:41:05,404 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 10:41:05,404 - DEBUG - Stop quantity 1
2018-02-09 10:41:05,405 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 10:41:05,406 - DEBUG - Direction is Short
2018-02-09 10:41:05,407 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 10:41:05,408 - DEBUG - Count is 0
2018-02-09 10:41:05,409 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 10:41:05,409 - DEBUG - Stop Loss Flag is 0
2018-02-09 10:41:05,411 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 10:41:05,411 - DEBUG - Max ID Order is (186,)
2018-02-09 10:41:05,411 - DEBUG - Today is 2018-02-09
2018-02-09 10:41:05,412 - DEBUG - Day of the week 4
2018-02-09 10:41:05,412 - DEBUG - Yesterday is 02/08/2018
2018-02-09 10:41:05,412 - DEBUG - In Position is  0
2018-02-09 10:41:05,412 - DEBUG - In Position is  <class 'int'>
2018-02-09 10:41:05,413 - DEBUG - curStopLossFlag is  0
2018-02-09 10:41:05,413 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 10:41:05,413 - DEBUG - Checking if Entry has been filled
2018-02-09 10:41:05,413 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 10:41:05,415 - DEBUG - EntryPend is 1
2018-02-09 10:41:05,415 - DEBUG - Try to Cancel Stop
2018-02-09 10:41:05,415 - DEBUG - Stop API ID 0
2018-02-09 10:41:05,415 - DEBUG - Profit API ID 186
2018-02-09 10:41:05,416 - DEBUG - Stop API ID <class 'int'>
2018-02-09 10:41:05,416 - DEBUG - Profit API ID <class 'int'>
2018-02-09 10:41:05,416 - DEBUG - Pos is 0
2018-02-09 10:41:05,416 - DEBUG - CurCount is 0
2018-02-09 10:41:05,416 - DEBUG - In Pos 0
2018-02-09 10:41:05,417 - DEBUG - Stop ID is 0
2018-02-09 10:41:05,417 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 10:41:05,418 - DEBUG - EntryPend is 1
2018-02-09 10:41:05,419 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 10:41:05,419 - DEBUG - Entry Date is 10
2018-02-09 10:41:05,419 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 10:41:05,419 - DEBUG - Order Profit ID is 186
2018-02-09 10:41:05,419 - DEBUG - Order Entry ID is 186
2018-02-09 10:41:05,420 - DEBUG - API ID is  0
2018-02-09 10:41:05,420 - DEBUG - Current Position is 0
2018-02-09 10:41:05,420 - DEBUG - Current Position is <class 'str'>
2018-02-09 10:41:05,420 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 10:41:05,421 - DEBUG - Time is 10
2018-02-09 10:41:05,421 - DEBUG - Time is <class 'int'>
2018-02-09 10:41:05,421 - DEBUG - Time is 41
2018-02-09 10:41:05,421 - DEBUG - Time is <class 'int'>
2018-02-09 10:41:05,422 - DEBUG - Disconnected from IBController
2018-02-09 10:41:05,422 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 10:46:01,364 - DEBUG - ****************************************************
2018-02-09 10:46:01,366 - DEBUG - Current Time is 10:46AM
2018-02-09 10:46:01,366 - DEBUG - Starting Pos Mgmt H E
2018-02-09 10:46:01,367 - DEBUG - Connecting to database
2018-02-09 10:46:01,388 - DEBUG - Connected to database
2018-02-09 10:46:01,388 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 10:46:01,390 - DEBUG - Order Profit is 186
2018-02-09 10:46:01,390 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 10:46:01,392 - DEBUG - Stop ID is 0
2018-02-09 10:46:01,392 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 10:46:01,394 - DEBUG - Entry ID is 186
2018-02-09 10:46:01,394 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 10:46:01,396 - DEBUG - OCA ID is 1
2018-02-09 10:46:01,396 - DEBUG - Connecting to IBController
2018-02-09 10:46:02,410 - DEBUG - Connected to IBController
2018-02-09 10:46:02,410 - DEBUG - Position requested
2018-02-09 10:46:02,411 - DEBUG - Pos Mgmt -12987
2018-02-09 10:46:02,414 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212DE48>, pos=-12987, avgCost=0.95368235>
2018-02-09 10:46:02,414 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 10:46:02,414 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 10:46:02,415 - DEBUG - Position is -12987
2018-02-09 10:46:03,413 - DEBUG - Open Orders requested
2018-02-09 10:46:03,416 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x000000000212DCC0>, order=<ib.ext.Order.Order object at 0x000000000212DD30>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C11D0>>
2018-02-09 10:46:03,416 - DEBUG - Order OrderID 185
2018-02-09 10:46:03,417 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 10:46:03,417 - DEBUG - Order status PreSubmitted
2018-02-09 10:46:03,417 - DEBUG - Order Identification 185
2018-02-09 10:46:03,417 - DEBUG - Order Identification <class 'int'>
2018-02-09 10:46:03,418 - DEBUG - Profit ID from database is 186
2018-02-09 10:46:03,418 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 10:46:03,418 - DEBUG - Stop ID database is 0
2018-02-09 10:46:03,418 - DEBUG - Entry ID database is 186
2018-02-09 10:46:03,419 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x000000000212DCC0>, order=<ib.ext.Order.Order object at 0x000000000212DD30>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C1080>>
2018-02-09 10:46:03,420 - DEBUG - Order OrderID 184
2018-02-09 10:46:03,420 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 10:46:03,421 - DEBUG - Order status PreSubmitted
2018-02-09 10:46:03,421 - DEBUG - Order Identification 184
2018-02-09 10:46:03,421 - DEBUG - Order Identification <class 'int'>
2018-02-09 10:46:03,421 - DEBUG - Profit ID from database is 186
2018-02-09 10:46:03,421 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 10:46:03,422 - DEBUG - Stop ID database is 0
2018-02-09 10:46:03,422 - DEBUG - Entry ID database is 186
2018-02-09 10:46:03,423 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x000000000212DCC0>, order=<ib.ext.Order.Order object at 0x000000000212DD30>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C1240>>
2018-02-09 10:46:03,423 - DEBUG - Order OrderID 186
2018-02-09 10:46:03,424 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 10:46:03,424 - DEBUG - Order status PreSubmitted
2018-02-09 10:46:03,426 - DEBUG - Order Identification 186
2018-02-09 10:46:03,426 - DEBUG - Order Identification <class 'int'>
2018-02-09 10:46:03,426 - DEBUG - Profit ID from database is 186
2018-02-09 10:46:03,427 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 10:46:03,427 - DEBUG - Stop ID database is 0
2018-02-09 10:46:03,427 - DEBUG - Entry ID database is 186
2018-02-09 10:46:03,427 - DEBUG - Profit API ID is 186
2018-02-09 10:46:03,427 - DEBUG - Entry API ID is 186
2018-02-09 10:46:05,416 - DEBUG - Connecting to database
2018-02-09 10:46:05,423 - DEBUG - Connected to database
2018-02-09 10:46:05,424 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 10:46:05,425 - DEBUG - Stop loss value is 70.02
2018-02-09 10:46:05,426 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 10:46:05,426 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 10:46:05,428 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 10:46:05,428 - DEBUG - EntryPrice value is 68.725
2018-02-09 10:46:05,429 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 10:46:05,430 - DEBUG - Stop quantity 1
2018-02-09 10:46:05,431 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 10:46:05,431 - DEBUG - Direction is Short
2018-02-09 10:46:05,433 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 10:46:05,433 - DEBUG - Count is 0
2018-02-09 10:46:05,434 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 10:46:05,435 - DEBUG - Stop Loss Flag is 0
2018-02-09 10:46:05,436 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 10:46:05,436 - DEBUG - Max ID Order is (186,)
2018-02-09 10:46:05,437 - DEBUG - Today is 2018-02-09
2018-02-09 10:46:05,437 - DEBUG - Day of the week 4
2018-02-09 10:46:05,437 - DEBUG - Yesterday is 02/08/2018
2018-02-09 10:46:05,438 - DEBUG - In Position is  0
2018-02-09 10:46:05,438 - DEBUG - In Position is  <class 'int'>
2018-02-09 10:46:05,438 - DEBUG - curStopLossFlag is  0
2018-02-09 10:46:05,438 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 10:46:05,438 - DEBUG - Checking if Entry has been filled
2018-02-09 10:46:05,439 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 10:46:05,440 - DEBUG - EntryPend is 1
2018-02-09 10:46:05,441 - DEBUG - Try to Cancel Stop
2018-02-09 10:46:05,441 - DEBUG - Stop API ID 0
2018-02-09 10:46:05,441 - DEBUG - Profit API ID 186
2018-02-09 10:46:05,441 - DEBUG - Stop API ID <class 'int'>
2018-02-09 10:46:05,442 - DEBUG - Profit API ID <class 'int'>
2018-02-09 10:46:05,442 - DEBUG - Pos is 0
2018-02-09 10:46:05,442 - DEBUG - CurCount is 0
2018-02-09 10:46:05,442 - DEBUG - In Pos 0
2018-02-09 10:46:05,442 - DEBUG - Stop ID is 0
2018-02-09 10:46:05,443 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 10:46:05,444 - DEBUG - EntryPend is 1
2018-02-09 10:46:05,444 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 10:46:05,444 - DEBUG - Entry Date is 10
2018-02-09 10:46:05,445 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 10:46:05,445 - DEBUG - Order Profit ID is 186
2018-02-09 10:46:05,445 - DEBUG - Order Entry ID is 186
2018-02-09 10:46:05,445 - DEBUG - API ID is  0
2018-02-09 10:46:05,446 - DEBUG - Current Position is 0
2018-02-09 10:46:05,446 - DEBUG - Current Position is <class 'str'>
2018-02-09 10:46:05,446 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 10:46:05,446 - DEBUG - Time is 10
2018-02-09 10:46:05,446 - DEBUG - Time is <class 'int'>
2018-02-09 10:46:05,447 - DEBUG - Time is 46
2018-02-09 10:46:05,447 - DEBUG - Time is <class 'int'>
2018-02-09 10:46:05,447 - DEBUG - Disconnected from IBController
2018-02-09 10:46:05,447 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 10:51:01,354 - DEBUG - ****************************************************
2018-02-09 10:51:01,355 - DEBUG - Current Time is 10:51AM
2018-02-09 10:51:01,355 - DEBUG - Starting Pos Mgmt H E
2018-02-09 10:51:01,355 - DEBUG - Connecting to database
2018-02-09 10:51:01,405 - DEBUG - Connected to database
2018-02-09 10:51:01,405 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 10:51:01,407 - DEBUG - Order Profit is 186
2018-02-09 10:51:01,407 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 10:51:01,409 - DEBUG - Stop ID is 0
2018-02-09 10:51:01,409 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 10:51:01,410 - DEBUG - Entry ID is 186
2018-02-09 10:51:01,411 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 10:51:01,412 - DEBUG - OCA ID is 1
2018-02-09 10:51:01,412 - DEBUG - Connecting to IBController
2018-02-09 10:51:02,442 - DEBUG - Connected to IBController
2018-02-09 10:51:02,442 - DEBUG - Position requested
2018-02-09 10:51:02,444 - DEBUG - Pos Mgmt -12987
2018-02-09 10:51:02,446 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212DD30>, pos=-12987, avgCost=0.95368235>
2018-02-09 10:51:02,446 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 10:51:02,447 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 10:51:02,447 - DEBUG - Position is -12987
2018-02-09 10:51:03,443 - DEBUG - Open Orders requested
2018-02-09 10:51:03,445 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x000000000212DCF8>, order=<ib.ext.Order.Order object at 0x000000000212DC18>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C1160>>
2018-02-09 10:51:03,446 - DEBUG - Order OrderID 185
2018-02-09 10:51:03,446 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 10:51:03,447 - DEBUG - Order status PreSubmitted
2018-02-09 10:51:03,447 - DEBUG - Order Identification 185
2018-02-09 10:51:03,447 - DEBUG - Order Identification <class 'int'>
2018-02-09 10:51:03,448 - DEBUG - Profit ID from database is 186
2018-02-09 10:51:03,448 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 10:51:03,448 - DEBUG - Stop ID database is 0
2018-02-09 10:51:03,448 - DEBUG - Entry ID database is 186
2018-02-09 10:51:03,449 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x000000000212DCF8>, order=<ib.ext.Order.Order object at 0x000000000212DC18>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C11D0>>
2018-02-09 10:51:03,450 - DEBUG - Order OrderID 184
2018-02-09 10:51:03,450 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 10:51:03,450 - DEBUG - Order status PreSubmitted
2018-02-09 10:51:03,451 - DEBUG - Order Identification 184
2018-02-09 10:51:03,451 - DEBUG - Order Identification <class 'int'>
2018-02-09 10:51:03,451 - DEBUG - Profit ID from database is 186
2018-02-09 10:51:03,451 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 10:51:03,451 - DEBUG - Stop ID database is 0
2018-02-09 10:51:03,452 - DEBUG - Entry ID database is 186
2018-02-09 10:51:03,453 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x000000000212DCF8>, order=<ib.ext.Order.Order object at 0x000000000212DC18>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C12B0>>
2018-02-09 10:51:03,453 - DEBUG - Order OrderID 186
2018-02-09 10:51:03,453 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 10:51:03,454 - DEBUG - Order status PreSubmitted
2018-02-09 10:51:03,454 - DEBUG - Order Identification 186
2018-02-09 10:51:03,454 - DEBUG - Order Identification <class 'int'>
2018-02-09 10:51:03,454 - DEBUG - Profit ID from database is 186
2018-02-09 10:51:03,455 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 10:51:03,455 - DEBUG - Stop ID database is 0
2018-02-09 10:51:03,455 - DEBUG - Entry ID database is 186
2018-02-09 10:51:03,455 - DEBUG - Profit API ID is 186
2018-02-09 10:51:03,456 - DEBUG - Entry API ID is 186
2018-02-09 10:51:05,444 - DEBUG - Connecting to database
2018-02-09 10:51:05,451 - DEBUG - Connected to database
2018-02-09 10:51:05,453 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 10:51:05,453 - DEBUG - Stop loss value is 70.02
2018-02-09 10:51:05,455 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 10:51:05,455 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 10:51:05,457 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 10:51:05,457 - DEBUG - EntryPrice value is 68.725
2018-02-09 10:51:05,458 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 10:51:05,459 - DEBUG - Stop quantity 1
2018-02-09 10:51:05,460 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 10:51:05,460 - DEBUG - Direction is Short
2018-02-09 10:51:05,462 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 10:51:05,462 - DEBUG - Count is 0
2018-02-09 10:51:05,463 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 10:51:05,464 - DEBUG - Stop Loss Flag is 0
2018-02-09 10:51:05,465 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 10:51:05,465 - DEBUG - Max ID Order is (186,)
2018-02-09 10:51:05,466 - DEBUG - Today is 2018-02-09
2018-02-09 10:51:05,466 - DEBUG - Day of the week 4
2018-02-09 10:51:05,466 - DEBUG - Yesterday is 02/08/2018
2018-02-09 10:51:05,467 - DEBUG - In Position is  0
2018-02-09 10:51:05,467 - DEBUG - In Position is  <class 'int'>
2018-02-09 10:51:05,467 - DEBUG - curStopLossFlag is  0
2018-02-09 10:51:05,467 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 10:51:05,467 - DEBUG - Checking if Entry has been filled
2018-02-09 10:51:05,468 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 10:51:05,469 - DEBUG - EntryPend is 1
2018-02-09 10:51:05,469 - DEBUG - Try to Cancel Stop
2018-02-09 10:51:05,470 - DEBUG - Stop API ID 0
2018-02-09 10:51:05,470 - DEBUG - Profit API ID 186
2018-02-09 10:51:05,470 - DEBUG - Stop API ID <class 'int'>
2018-02-09 10:51:05,470 - DEBUG - Profit API ID <class 'int'>
2018-02-09 10:51:05,470 - DEBUG - Pos is 0
2018-02-09 10:51:05,471 - DEBUG - CurCount is 0
2018-02-09 10:51:05,471 - DEBUG - In Pos 0
2018-02-09 10:51:05,471 - DEBUG - Stop ID is 0
2018-02-09 10:51:05,471 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 10:51:05,473 - DEBUG - EntryPend is 1
2018-02-09 10:51:05,473 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 10:51:05,473 - DEBUG - Entry Date is 10
2018-02-09 10:51:05,474 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 10:51:05,474 - DEBUG - Order Profit ID is 186
2018-02-09 10:51:05,474 - DEBUG - Order Entry ID is 186
2018-02-09 10:51:05,474 - DEBUG - API ID is  0
2018-02-09 10:51:05,474 - DEBUG - Current Position is 0
2018-02-09 10:51:05,475 - DEBUG - Current Position is <class 'str'>
2018-02-09 10:51:05,475 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 10:51:05,475 - DEBUG - Time is 10
2018-02-09 10:51:05,475 - DEBUG - Time is <class 'int'>
2018-02-09 10:51:05,476 - DEBUG - Time is 51
2018-02-09 10:51:05,476 - DEBUG - Time is <class 'int'>
2018-02-09 10:51:05,476 - DEBUG - Disconnected from IBController
2018-02-09 10:51:05,476 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 10:56:01,349 - DEBUG - ****************************************************
2018-02-09 10:56:01,350 - DEBUG - Current Time is 10:56AM
2018-02-09 10:56:01,350 - DEBUG - Starting Pos Mgmt H E
2018-02-09 10:56:01,350 - DEBUG - Connecting to database
2018-02-09 10:56:01,382 - DEBUG - Connected to database
2018-02-09 10:56:01,382 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 10:56:01,384 - DEBUG - Order Profit is 186
2018-02-09 10:56:01,384 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 10:56:01,386 - DEBUG - Stop ID is 0
2018-02-09 10:56:01,386 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 10:56:01,387 - DEBUG - Entry ID is 186
2018-02-09 10:56:01,388 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 10:56:01,389 - DEBUG - OCA ID is 1
2018-02-09 10:56:01,390 - DEBUG - Connecting to IBController
2018-02-09 10:56:02,398 - DEBUG - Connected to IBController
2018-02-09 10:56:02,398 - DEBUG - Position requested
2018-02-09 10:56:02,399 - DEBUG - Pos Mgmt -12987
2018-02-09 10:56:02,400 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020EDE48>, pos=-12987, avgCost=0.95368235>
2018-02-09 10:56:02,400 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 10:56:02,400 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 10:56:02,401 - DEBUG - Position is -12987
2018-02-09 10:56:03,400 - DEBUG - Open Orders requested
2018-02-09 10:56:03,410 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x00000000020EDBA8>, order=<ib.ext.Order.Order object at 0x00000000020EDBE0>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002181160>>
2018-02-09 10:56:03,411 - DEBUG - Order OrderID 185
2018-02-09 10:56:03,411 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 10:56:03,412 - DEBUG - Order status PreSubmitted
2018-02-09 10:56:03,412 - DEBUG - Order Identification 185
2018-02-09 10:56:03,412 - DEBUG - Order Identification <class 'int'>
2018-02-09 10:56:03,412 - DEBUG - Profit ID from database is 186
2018-02-09 10:56:03,413 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 10:56:03,413 - DEBUG - Stop ID database is 0
2018-02-09 10:56:03,413 - DEBUG - Entry ID database is 186
2018-02-09 10:56:03,414 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x00000000020EDBA8>, order=<ib.ext.Order.Order object at 0x00000000020EDBE0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021811D0>>
2018-02-09 10:56:03,415 - DEBUG - Order OrderID 184
2018-02-09 10:56:03,415 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 10:56:03,415 - DEBUG - Order status PreSubmitted
2018-02-09 10:56:03,415 - DEBUG - Order Identification 184
2018-02-09 10:56:03,416 - DEBUG - Order Identification <class 'int'>
2018-02-09 10:56:03,416 - DEBUG - Profit ID from database is 186
2018-02-09 10:56:03,416 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 10:56:03,416 - DEBUG - Stop ID database is 0
2018-02-09 10:56:03,417 - DEBUG - Entry ID database is 186
2018-02-09 10:56:03,418 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x00000000020EDBA8>, order=<ib.ext.Order.Order object at 0x00000000020EDBE0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021812B0>>
2018-02-09 10:56:03,418 - DEBUG - Order OrderID 186
2018-02-09 10:56:03,418 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 10:56:03,419 - DEBUG - Order status PreSubmitted
2018-02-09 10:56:03,419 - DEBUG - Order Identification 186
2018-02-09 10:56:03,419 - DEBUG - Order Identification <class 'int'>
2018-02-09 10:56:03,419 - DEBUG - Profit ID from database is 186
2018-02-09 10:56:03,420 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 10:56:03,420 - DEBUG - Stop ID database is 0
2018-02-09 10:56:03,420 - DEBUG - Entry ID database is 186
2018-02-09 10:56:03,420 - DEBUG - Profit API ID is 186
2018-02-09 10:56:03,421 - DEBUG - Entry API ID is 186
2018-02-09 10:56:05,400 - DEBUG - Connecting to database
2018-02-09 10:56:05,407 - DEBUG - Connected to database
2018-02-09 10:56:05,409 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 10:56:05,409 - DEBUG - Stop loss value is 70.02
2018-02-09 10:56:05,411 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 10:56:05,411 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 10:56:05,412 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 10:56:05,413 - DEBUG - EntryPrice value is 68.725
2018-02-09 10:56:05,414 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 10:56:05,414 - DEBUG - Stop quantity 1
2018-02-09 10:56:05,416 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 10:56:05,416 - DEBUG - Direction is Short
2018-02-09 10:56:05,417 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 10:56:05,418 - DEBUG - Count is 0
2018-02-09 10:56:05,419 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 10:56:05,420 - DEBUG - Stop Loss Flag is 0
2018-02-09 10:56:05,421 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 10:56:05,421 - DEBUG - Max ID Order is (186,)
2018-02-09 10:56:05,422 - DEBUG - Today is 2018-02-09
2018-02-09 10:56:05,422 - DEBUG - Day of the week 4
2018-02-09 10:56:05,422 - DEBUG - Yesterday is 02/08/2018
2018-02-09 10:56:05,423 - DEBUG - In Position is  0
2018-02-09 10:56:05,423 - DEBUG - In Position is  <class 'int'>
2018-02-09 10:56:05,423 - DEBUG - curStopLossFlag is  0
2018-02-09 10:56:05,423 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 10:56:05,423 - DEBUG - Checking if Entry has been filled
2018-02-09 10:56:05,424 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 10:56:05,425 - DEBUG - EntryPend is 1
2018-02-09 10:56:05,425 - DEBUG - Try to Cancel Stop
2018-02-09 10:56:05,425 - DEBUG - Stop API ID 0
2018-02-09 10:56:05,426 - DEBUG - Profit API ID 186
2018-02-09 10:56:05,426 - DEBUG - Stop API ID <class 'int'>
2018-02-09 10:56:05,426 - DEBUG - Profit API ID <class 'int'>
2018-02-09 10:56:05,426 - DEBUG - Pos is 0
2018-02-09 10:56:05,427 - DEBUG - CurCount is 0
2018-02-09 10:56:05,427 - DEBUG - In Pos 0
2018-02-09 10:56:05,427 - DEBUG - Stop ID is 0
2018-02-09 10:56:05,427 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 10:56:05,429 - DEBUG - EntryPend is 1
2018-02-09 10:56:05,429 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 10:56:05,429 - DEBUG - Entry Date is 10
2018-02-09 10:56:05,429 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 10:56:05,429 - DEBUG - Order Profit ID is 186
2018-02-09 10:56:05,430 - DEBUG - Order Entry ID is 186
2018-02-09 10:56:05,430 - DEBUG - API ID is  0
2018-02-09 10:56:05,430 - DEBUG - Current Position is 0
2018-02-09 10:56:05,430 - DEBUG - Current Position is <class 'str'>
2018-02-09 10:56:05,431 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 10:56:05,431 - DEBUG - Time is 10
2018-02-09 10:56:05,431 - DEBUG - Time is <class 'int'>
2018-02-09 10:56:05,431 - DEBUG - Time is 56
2018-02-09 10:56:05,431 - DEBUG - Time is <class 'int'>
2018-02-09 10:56:05,432 - DEBUG - Disconnected from IBController
2018-02-09 10:56:05,432 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 11:01:01,349 - DEBUG - ****************************************************
2018-02-09 11:01:01,350 - DEBUG - Current Time is 11:01AM
2018-02-09 11:01:01,350 - DEBUG - Starting Pos Mgmt H E
2018-02-09 11:01:01,350 - DEBUG - Connecting to database
2018-02-09 11:01:01,384 - DEBUG - Connected to database
2018-02-09 11:01:01,384 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 11:01:01,386 - DEBUG - Order Profit is 186
2018-02-09 11:01:01,386 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 11:01:01,387 - DEBUG - Stop ID is 0
2018-02-09 11:01:01,388 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 11:01:01,389 - DEBUG - Entry ID is 186
2018-02-09 11:01:01,389 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 11:01:01,391 - DEBUG - OCA ID is 1
2018-02-09 11:01:01,391 - DEBUG - Connecting to IBController
2018-02-09 11:01:02,396 - DEBUG - Connected to IBController
2018-02-09 11:01:02,396 - DEBUG - Position requested
2018-02-09 11:01:02,397 - DEBUG - Pos Mgmt -12987
2018-02-09 11:01:02,398 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212DE48>, pos=-12987, avgCost=0.95368235>
2018-02-09 11:01:02,398 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 11:01:02,398 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 11:01:02,399 - DEBUG - Position is -12987
2018-02-09 11:01:03,398 - DEBUG - Open Orders requested
2018-02-09 11:01:03,400 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x000000000212DC18>, order=<ib.ext.Order.Order object at 0x000000000212DAC8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C21D0>>
2018-02-09 11:01:03,401 - DEBUG - Order OrderID 185
2018-02-09 11:01:03,401 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 11:01:03,402 - DEBUG - Order status PreSubmitted
2018-02-09 11:01:03,402 - DEBUG - Order Identification 185
2018-02-09 11:01:03,402 - DEBUG - Order Identification <class 'int'>
2018-02-09 11:01:03,402 - DEBUG - Profit ID from database is 186
2018-02-09 11:01:03,403 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 11:01:03,403 - DEBUG - Stop ID database is 0
2018-02-09 11:01:03,403 - DEBUG - Entry ID database is 186
2018-02-09 11:01:03,404 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x000000000212DC18>, order=<ib.ext.Order.Order object at 0x000000000212DAC8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C2080>>
2018-02-09 11:01:03,404 - DEBUG - Order OrderID 184
2018-02-09 11:01:03,405 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 11:01:03,405 - DEBUG - Order status PreSubmitted
2018-02-09 11:01:03,405 - DEBUG - Order Identification 184
2018-02-09 11:01:03,406 - DEBUG - Order Identification <class 'int'>
2018-02-09 11:01:03,406 - DEBUG - Profit ID from database is 186
2018-02-09 11:01:03,406 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 11:01:03,406 - DEBUG - Stop ID database is 0
2018-02-09 11:01:03,407 - DEBUG - Entry ID database is 186
2018-02-09 11:01:03,408 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x000000000212DC18>, order=<ib.ext.Order.Order object at 0x000000000212DAC8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C2240>>
2018-02-09 11:01:03,408 - DEBUG - Order OrderID 186
2018-02-09 11:01:03,408 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 11:01:03,409 - DEBUG - Order status PreSubmitted
2018-02-09 11:01:03,409 - DEBUG - Order Identification 186
2018-02-09 11:01:03,409 - DEBUG - Order Identification <class 'int'>
2018-02-09 11:01:03,409 - DEBUG - Profit ID from database is 186
2018-02-09 11:01:03,410 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 11:01:03,410 - DEBUG - Stop ID database is 0
2018-02-09 11:01:03,410 - DEBUG - Entry ID database is 186
2018-02-09 11:01:03,410 - DEBUG - Profit API ID is 186
2018-02-09 11:01:03,411 - DEBUG - Entry API ID is 186
2018-02-09 11:01:05,401 - DEBUG - Connecting to database
2018-02-09 11:01:05,408 - DEBUG - Connected to database
2018-02-09 11:01:05,410 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 11:01:05,410 - DEBUG - Stop loss value is 70.02
2018-02-09 11:01:05,412 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 11:01:05,412 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 11:01:05,413 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 11:01:05,414 - DEBUG - EntryPrice value is 68.725
2018-02-09 11:01:05,415 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 11:01:05,415 - DEBUG - Stop quantity 1
2018-02-09 11:01:05,417 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 11:01:05,417 - DEBUG - Direction is Short
2018-02-09 11:01:05,418 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 11:01:05,419 - DEBUG - Count is 0
2018-02-09 11:01:05,420 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 11:01:05,420 - DEBUG - Stop Loss Flag is 0
2018-02-09 11:01:05,422 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 11:01:05,422 - DEBUG - Max ID Order is (186,)
2018-02-09 11:01:05,423 - DEBUG - Today is 2018-02-09
2018-02-09 11:01:05,423 - DEBUG - Day of the week 4
2018-02-09 11:01:05,423 - DEBUG - Yesterday is 02/08/2018
2018-02-09 11:01:05,423 - DEBUG - In Position is  0
2018-02-09 11:01:05,424 - DEBUG - In Position is  <class 'int'>
2018-02-09 11:01:05,424 - DEBUG - curStopLossFlag is  0
2018-02-09 11:01:05,424 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 11:01:05,424 - DEBUG - Checking if Entry has been filled
2018-02-09 11:01:05,425 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 11:01:05,426 - DEBUG - EntryPend is 1
2018-02-09 11:01:05,426 - DEBUG - Try to Cancel Stop
2018-02-09 11:01:05,426 - DEBUG - Stop API ID 0
2018-02-09 11:01:05,427 - DEBUG - Profit API ID 186
2018-02-09 11:01:05,427 - DEBUG - Stop API ID <class 'int'>
2018-02-09 11:01:05,427 - DEBUG - Profit API ID <class 'int'>
2018-02-09 11:01:05,427 - DEBUG - Pos is 0
2018-02-09 11:01:05,427 - DEBUG - CurCount is 0
2018-02-09 11:01:05,428 - DEBUG - In Pos 0
2018-02-09 11:01:05,428 - DEBUG - Stop ID is 0
2018-02-09 11:01:05,428 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 11:01:05,430 - DEBUG - EntryPend is 1
2018-02-09 11:01:05,430 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 11:01:05,430 - DEBUG - Entry Date is 10
2018-02-09 11:01:05,430 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 11:01:05,430 - DEBUG - Order Profit ID is 186
2018-02-09 11:01:05,431 - DEBUG - Order Entry ID is 186
2018-02-09 11:01:05,431 - DEBUG - API ID is  0
2018-02-09 11:01:05,431 - DEBUG - Current Position is 0
2018-02-09 11:01:05,431 - DEBUG - Current Position is <class 'str'>
2018-02-09 11:01:05,431 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 11:01:05,432 - DEBUG - Time is 11
2018-02-09 11:01:05,432 - DEBUG - Time is <class 'int'>
2018-02-09 11:01:05,432 - DEBUG - Time is 1
2018-02-09 11:01:05,432 - DEBUG - Time is <class 'int'>
2018-02-09 11:01:05,433 - DEBUG - Disconnected from IBController
2018-02-09 11:01:05,433 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 11:06:01,352 - DEBUG - ****************************************************
2018-02-09 11:06:01,353 - DEBUG - Current Time is 11:06AM
2018-02-09 11:06:01,353 - DEBUG - Starting Pos Mgmt H E
2018-02-09 11:06:01,353 - DEBUG - Connecting to database
2018-02-09 11:06:01,377 - DEBUG - Connected to database
2018-02-09 11:06:01,378 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 11:06:01,379 - DEBUG - Order Profit is 186
2018-02-09 11:06:01,380 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 11:06:01,381 - DEBUG - Stop ID is 0
2018-02-09 11:06:01,381 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 11:06:01,383 - DEBUG - Entry ID is 186
2018-02-09 11:06:01,383 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 11:06:01,384 - DEBUG - OCA ID is 1
2018-02-09 11:06:01,385 - DEBUG - Connecting to IBController
2018-02-09 11:06:02,393 - DEBUG - Connected to IBController
2018-02-09 11:06:02,393 - DEBUG - Position requested
2018-02-09 11:06:02,394 - DEBUG - Pos Mgmt -12987
2018-02-09 11:06:02,395 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210DDA0>, pos=-12987, avgCost=0.95368235>
2018-02-09 11:06:02,395 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 11:06:02,395 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 11:06:02,396 - DEBUG - Position is -12987
2018-02-09 11:06:03,393 - DEBUG - Open Orders requested
2018-02-09 11:06:03,395 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x000000000210DA90>, order=<ib.ext.Order.Order object at 0x000000000210DC88>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A1160>>
2018-02-09 11:06:03,395 - DEBUG - Order OrderID 185
2018-02-09 11:06:03,395 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 11:06:03,396 - DEBUG - Order status PreSubmitted
2018-02-09 11:06:03,396 - DEBUG - Order Identification 185
2018-02-09 11:06:03,396 - DEBUG - Order Identification <class 'int'>
2018-02-09 11:06:03,397 - DEBUG - Profit ID from database is 186
2018-02-09 11:06:03,397 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 11:06:03,397 - DEBUG - Stop ID database is 0
2018-02-09 11:06:03,397 - DEBUG - Entry ID database is 186
2018-02-09 11:06:03,398 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x000000000210DA90>, order=<ib.ext.Order.Order object at 0x000000000210DC88>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A11D0>>
2018-02-09 11:06:03,399 - DEBUG - Order OrderID 184
2018-02-09 11:06:03,399 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 11:06:03,400 - DEBUG - Order status PreSubmitted
2018-02-09 11:06:03,400 - DEBUG - Order Identification 184
2018-02-09 11:06:03,400 - DEBUG - Order Identification <class 'int'>
2018-02-09 11:06:03,400 - DEBUG - Profit ID from database is 186
2018-02-09 11:06:03,401 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 11:06:03,401 - DEBUG - Stop ID database is 0
2018-02-09 11:06:03,401 - DEBUG - Entry ID database is 186
2018-02-09 11:06:03,402 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x000000000210DA90>, order=<ib.ext.Order.Order object at 0x000000000210DC88>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A12B0>>
2018-02-09 11:06:03,402 - DEBUG - Order OrderID 186
2018-02-09 11:06:03,403 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 11:06:03,403 - DEBUG - Order status PreSubmitted
2018-02-09 11:06:03,403 - DEBUG - Order Identification 186
2018-02-09 11:06:03,404 - DEBUG - Order Identification <class 'int'>
2018-02-09 11:06:03,404 - DEBUG - Profit ID from database is 186
2018-02-09 11:06:03,404 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 11:06:03,404 - DEBUG - Stop ID database is 0
2018-02-09 11:06:03,404 - DEBUG - Entry ID database is 186
2018-02-09 11:06:03,405 - DEBUG - Profit API ID is 186
2018-02-09 11:06:03,405 - DEBUG - Entry API ID is 186
2018-02-09 11:06:05,394 - DEBUG - Connecting to database
2018-02-09 11:06:05,402 - DEBUG - Connected to database
2018-02-09 11:06:05,404 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 11:06:05,404 - DEBUG - Stop loss value is 70.02
2018-02-09 11:06:05,405 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 11:06:05,406 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 11:06:05,407 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 11:06:05,408 - DEBUG - EntryPrice value is 68.725
2018-02-09 11:06:05,409 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 11:06:05,409 - DEBUG - Stop quantity 1
2018-02-09 11:06:05,411 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 11:06:05,411 - DEBUG - Direction is Short
2018-02-09 11:06:05,412 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 11:06:05,413 - DEBUG - Count is 0
2018-02-09 11:06:05,414 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 11:06:05,414 - DEBUG - Stop Loss Flag is 0
2018-02-09 11:06:05,416 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 11:06:05,416 - DEBUG - Max ID Order is (186,)
2018-02-09 11:06:05,416 - DEBUG - Today is 2018-02-09
2018-02-09 11:06:05,417 - DEBUG - Day of the week 4
2018-02-09 11:06:05,417 - DEBUG - Yesterday is 02/08/2018
2018-02-09 11:06:05,417 - DEBUG - In Position is  0
2018-02-09 11:06:05,417 - DEBUG - In Position is  <class 'int'>
2018-02-09 11:06:05,418 - DEBUG - curStopLossFlag is  0
2018-02-09 11:06:05,418 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 11:06:05,418 - DEBUG - Checking if Entry has been filled
2018-02-09 11:06:05,418 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 11:06:05,420 - DEBUG - EntryPend is 1
2018-02-09 11:06:05,420 - DEBUG - Try to Cancel Stop
2018-02-09 11:06:05,420 - DEBUG - Stop API ID 0
2018-02-09 11:06:05,420 - DEBUG - Profit API ID 186
2018-02-09 11:06:05,421 - DEBUG - Stop API ID <class 'int'>
2018-02-09 11:06:05,421 - DEBUG - Profit API ID <class 'int'>
2018-02-09 11:06:05,421 - DEBUG - Pos is 0
2018-02-09 11:06:05,421 - DEBUG - CurCount is 0
2018-02-09 11:06:05,421 - DEBUG - In Pos 0
2018-02-09 11:06:05,422 - DEBUG - Stop ID is 0
2018-02-09 11:06:05,422 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 11:06:05,423 - DEBUG - EntryPend is 1
2018-02-09 11:06:05,424 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 11:06:05,424 - DEBUG - Entry Date is 10
2018-02-09 11:06:05,424 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 11:06:05,424 - DEBUG - Order Profit ID is 186
2018-02-09 11:06:05,424 - DEBUG - Order Entry ID is 186
2018-02-09 11:06:05,425 - DEBUG - API ID is  0
2018-02-09 11:06:05,425 - DEBUG - Current Position is 0
2018-02-09 11:06:05,425 - DEBUG - Current Position is <class 'str'>
2018-02-09 11:06:05,425 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 11:06:05,426 - DEBUG - Time is 11
2018-02-09 11:06:05,426 - DEBUG - Time is <class 'int'>
2018-02-09 11:06:05,426 - DEBUG - Time is 6
2018-02-09 11:06:05,426 - DEBUG - Time is <class 'int'>
2018-02-09 11:06:05,427 - DEBUG - Disconnected from IBController
2018-02-09 11:06:05,427 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 11:11:01,348 - DEBUG - ****************************************************
2018-02-09 11:11:01,348 - DEBUG - Current Time is 11:11AM
2018-02-09 11:11:01,349 - DEBUG - Starting Pos Mgmt H E
2018-02-09 11:11:01,349 - DEBUG - Connecting to database
2018-02-09 11:11:01,378 - DEBUG - Connected to database
2018-02-09 11:11:01,379 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 11:11:01,381 - DEBUG - Order Profit is 186
2018-02-09 11:11:01,381 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 11:11:01,383 - DEBUG - Stop ID is 0
2018-02-09 11:11:01,383 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 11:11:01,385 - DEBUG - Entry ID is 186
2018-02-09 11:11:01,385 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 11:11:01,386 - DEBUG - OCA ID is 1
2018-02-09 11:11:01,387 - DEBUG - Connecting to IBController
2018-02-09 11:11:02,395 - DEBUG - Connected to IBController
2018-02-09 11:11:02,395 - DEBUG - Position requested
2018-02-09 11:11:02,396 - DEBUG - Pos Mgmt -12987
2018-02-09 11:11:02,397 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000214CCF8>, pos=-12987, avgCost=0.95368235>
2018-02-09 11:11:02,397 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 11:11:02,397 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 11:11:02,398 - DEBUG - Position is -12987
2018-02-09 11:11:03,396 - DEBUG - Open Orders requested
2018-02-09 11:11:03,397 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x000000000214CD68>, order=<ib.ext.Order.Order object at 0x000000000214CCC0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021E11D0>>
2018-02-09 11:11:03,398 - DEBUG - Order OrderID 185
2018-02-09 11:11:03,399 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 11:11:03,399 - DEBUG - Order status PreSubmitted
2018-02-09 11:11:03,399 - DEBUG - Order Identification 185
2018-02-09 11:11:03,400 - DEBUG - Order Identification <class 'int'>
2018-02-09 11:11:03,400 - DEBUG - Profit ID from database is 186
2018-02-09 11:11:03,400 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 11:11:03,400 - DEBUG - Stop ID database is 0
2018-02-09 11:11:03,401 - DEBUG - Entry ID database is 186
2018-02-09 11:11:03,402 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x000000000214CD68>, order=<ib.ext.Order.Order object at 0x000000000214CCC0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021E1048>>
2018-02-09 11:11:03,402 - DEBUG - Order OrderID 184
2018-02-09 11:11:03,403 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 11:11:03,403 - DEBUG - Order status PreSubmitted
2018-02-09 11:11:03,403 - DEBUG - Order Identification 184
2018-02-09 11:11:03,403 - DEBUG - Order Identification <class 'int'>
2018-02-09 11:11:03,404 - DEBUG - Profit ID from database is 186
2018-02-09 11:11:03,404 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 11:11:03,404 - DEBUG - Stop ID database is 0
2018-02-09 11:11:03,404 - DEBUG - Entry ID database is 186
2018-02-09 11:11:03,405 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x000000000214CD68>, order=<ib.ext.Order.Order object at 0x000000000214CCC0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021E1240>>
2018-02-09 11:11:03,406 - DEBUG - Order OrderID 186
2018-02-09 11:11:03,406 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 11:11:03,406 - DEBUG - Order status PreSubmitted
2018-02-09 11:11:03,407 - DEBUG - Order Identification 186
2018-02-09 11:11:03,407 - DEBUG - Order Identification <class 'int'>
2018-02-09 11:11:03,407 - DEBUG - Profit ID from database is 186
2018-02-09 11:11:03,407 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 11:11:03,407 - DEBUG - Stop ID database is 0
2018-02-09 11:11:03,408 - DEBUG - Entry ID database is 186
2018-02-09 11:11:03,408 - DEBUG - Profit API ID is 186
2018-02-09 11:11:03,408 - DEBUG - Entry API ID is 186
2018-02-09 11:11:05,398 - DEBUG - Connecting to database
2018-02-09 11:11:05,405 - DEBUG - Connected to database
2018-02-09 11:11:05,407 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 11:11:05,407 - DEBUG - Stop loss value is 70.02
2018-02-09 11:11:05,408 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 11:11:05,409 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 11:11:05,410 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 11:11:05,410 - DEBUG - EntryPrice value is 68.725
2018-02-09 11:11:05,412 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 11:11:05,412 - DEBUG - Stop quantity 1
2018-02-09 11:11:05,413 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 11:11:05,414 - DEBUG - Direction is Short
2018-02-09 11:11:05,415 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 11:11:05,415 - DEBUG - Count is 0
2018-02-09 11:11:05,416 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 11:11:05,417 - DEBUG - Stop Loss Flag is 0
2018-02-09 11:11:05,418 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 11:11:05,418 - DEBUG - Max ID Order is (186,)
2018-02-09 11:11:05,419 - DEBUG - Today is 2018-02-09
2018-02-09 11:11:05,419 - DEBUG - Day of the week 4
2018-02-09 11:11:05,420 - DEBUG - Yesterday is 02/08/2018
2018-02-09 11:11:05,420 - DEBUG - In Position is  0
2018-02-09 11:11:05,420 - DEBUG - In Position is  <class 'int'>
2018-02-09 11:11:05,420 - DEBUG - curStopLossFlag is  0
2018-02-09 11:11:05,420 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 11:11:05,421 - DEBUG - Checking if Entry has been filled
2018-02-09 11:11:05,421 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 11:11:05,422 - DEBUG - EntryPend is 1
2018-02-09 11:11:05,423 - DEBUG - Try to Cancel Stop
2018-02-09 11:11:05,423 - DEBUG - Stop API ID 0
2018-02-09 11:11:05,423 - DEBUG - Profit API ID 186
2018-02-09 11:11:05,423 - DEBUG - Stop API ID <class 'int'>
2018-02-09 11:11:05,423 - DEBUG - Profit API ID <class 'int'>
2018-02-09 11:11:05,424 - DEBUG - Pos is 0
2018-02-09 11:11:05,424 - DEBUG - CurCount is 0
2018-02-09 11:11:05,424 - DEBUG - In Pos 0
2018-02-09 11:11:05,424 - DEBUG - Stop ID is 0
2018-02-09 11:11:05,425 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 11:11:05,426 - DEBUG - EntryPend is 1
2018-02-09 11:11:05,426 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 11:11:05,426 - DEBUG - Entry Date is 10
2018-02-09 11:11:05,427 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 11:11:05,427 - DEBUG - Order Profit ID is 186
2018-02-09 11:11:05,427 - DEBUG - Order Entry ID is 186
2018-02-09 11:11:05,427 - DEBUG - API ID is  0
2018-02-09 11:11:05,427 - DEBUG - Current Position is 0
2018-02-09 11:11:05,428 - DEBUG - Current Position is <class 'str'>
2018-02-09 11:11:05,428 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 11:11:05,428 - DEBUG - Time is 11
2018-02-09 11:11:05,428 - DEBUG - Time is <class 'int'>
2018-02-09 11:11:05,429 - DEBUG - Time is 11
2018-02-09 11:11:05,429 - DEBUG - Time is <class 'int'>
2018-02-09 11:11:05,429 - DEBUG - Disconnected from IBController
2018-02-09 11:11:05,430 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 11:16:01,402 - DEBUG - ****************************************************
2018-02-09 11:16:01,402 - DEBUG - Current Time is 11:16AM
2018-02-09 11:16:01,402 - DEBUG - Starting Pos Mgmt H E
2018-02-09 11:16:01,403 - DEBUG - Connecting to database
2018-02-09 11:16:01,428 - DEBUG - Connected to database
2018-02-09 11:16:01,429 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 11:16:01,430 - DEBUG - Order Profit is 186
2018-02-09 11:16:01,431 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 11:16:01,432 - DEBUG - Stop ID is 0
2018-02-09 11:16:01,432 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 11:16:01,434 - DEBUG - Entry ID is 186
2018-02-09 11:16:01,434 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 11:16:01,436 - DEBUG - OCA ID is 1
2018-02-09 11:16:01,436 - DEBUG - Connecting to IBController
2018-02-09 11:16:02,444 - DEBUG - Connected to IBController
2018-02-09 11:16:02,444 - DEBUG - Position requested
2018-02-09 11:16:02,445 - DEBUG - Pos Mgmt -12987
2018-02-09 11:16:02,446 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210DE48>, pos=-12987, avgCost=0.95368235>
2018-02-09 11:16:02,446 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 11:16:02,446 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 11:16:02,447 - DEBUG - Position is -12987
2018-02-09 11:16:03,446 - DEBUG - Open Orders requested
2018-02-09 11:16:03,448 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x000000000210DC50>, order=<ib.ext.Order.Order object at 0x000000000210DAC8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A1160>>
2018-02-09 11:16:03,449 - DEBUG - Order OrderID 185
2018-02-09 11:16:03,449 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 11:16:03,450 - DEBUG - Order status PreSubmitted
2018-02-09 11:16:03,450 - DEBUG - Order Identification 185
2018-02-09 11:16:03,450 - DEBUG - Order Identification <class 'int'>
2018-02-09 11:16:03,450 - DEBUG - Profit ID from database is 186
2018-02-09 11:16:03,451 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 11:16:03,451 - DEBUG - Stop ID database is 0
2018-02-09 11:16:03,451 - DEBUG - Entry ID database is 186
2018-02-09 11:16:03,452 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x000000000210DC50>, order=<ib.ext.Order.Order object at 0x000000000210DAC8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A11D0>>
2018-02-09 11:16:03,452 - DEBUG - Order OrderID 184
2018-02-09 11:16:03,453 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 11:16:03,453 - DEBUG - Order status PreSubmitted
2018-02-09 11:16:03,453 - DEBUG - Order Identification 184
2018-02-09 11:16:03,454 - DEBUG - Order Identification <class 'int'>
2018-02-09 11:16:03,454 - DEBUG - Profit ID from database is 186
2018-02-09 11:16:03,454 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 11:16:03,454 - DEBUG - Stop ID database is 0
2018-02-09 11:16:03,454 - DEBUG - Entry ID database is 186
2018-02-09 11:16:03,455 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x000000000210DC50>, order=<ib.ext.Order.Order object at 0x000000000210DAC8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A12B0>>
2018-02-09 11:16:03,456 - DEBUG - Order OrderID 186
2018-02-09 11:16:03,456 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 11:16:03,456 - DEBUG - Order status PreSubmitted
2018-02-09 11:16:03,457 - DEBUG - Order Identification 186
2018-02-09 11:16:03,457 - DEBUG - Order Identification <class 'int'>
2018-02-09 11:16:03,457 - DEBUG - Profit ID from database is 186
2018-02-09 11:16:03,457 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 11:16:03,458 - DEBUG - Stop ID database is 0
2018-02-09 11:16:03,458 - DEBUG - Entry ID database is 186
2018-02-09 11:16:03,458 - DEBUG - Profit API ID is 186
2018-02-09 11:16:03,458 - DEBUG - Entry API ID is 186
2018-02-09 11:16:05,447 - DEBUG - Connecting to database
2018-02-09 11:16:05,454 - DEBUG - Connected to database
2018-02-09 11:16:05,455 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 11:16:05,456 - DEBUG - Stop loss value is 70.02
2018-02-09 11:16:05,457 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 11:16:05,458 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 11:16:05,459 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 11:16:05,459 - DEBUG - EntryPrice value is 68.725
2018-02-09 11:16:05,460 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 11:16:05,461 - DEBUG - Stop quantity 1
2018-02-09 11:16:05,462 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 11:16:05,462 - DEBUG - Direction is Short
2018-02-09 11:16:05,464 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 11:16:05,464 - DEBUG - Count is 0
2018-02-09 11:16:05,466 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 11:16:05,466 - DEBUG - Stop Loss Flag is 0
2018-02-09 11:16:05,467 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 11:16:05,468 - DEBUG - Max ID Order is (186,)
2018-02-09 11:16:05,468 - DEBUG - Today is 2018-02-09
2018-02-09 11:16:05,468 - DEBUG - Day of the week 4
2018-02-09 11:16:05,469 - DEBUG - Yesterday is 02/08/2018
2018-02-09 11:16:05,469 - DEBUG - In Position is  0
2018-02-09 11:16:05,469 - DEBUG - In Position is  <class 'int'>
2018-02-09 11:16:05,469 - DEBUG - curStopLossFlag is  0
2018-02-09 11:16:05,470 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 11:16:05,470 - DEBUG - Checking if Entry has been filled
2018-02-09 11:16:05,470 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 11:16:05,471 - DEBUG - EntryPend is 1
2018-02-09 11:16:05,472 - DEBUG - Try to Cancel Stop
2018-02-09 11:16:05,472 - DEBUG - Stop API ID 0
2018-02-09 11:16:05,472 - DEBUG - Profit API ID 186
2018-02-09 11:16:05,472 - DEBUG - Stop API ID <class 'int'>
2018-02-09 11:16:05,473 - DEBUG - Profit API ID <class 'int'>
2018-02-09 11:16:05,473 - DEBUG - Pos is 0
2018-02-09 11:16:05,473 - DEBUG - CurCount is 0
2018-02-09 11:16:05,473 - DEBUG - In Pos 0
2018-02-09 11:16:05,473 - DEBUG - Stop ID is 0
2018-02-09 11:16:05,474 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 11:16:05,475 - DEBUG - EntryPend is 1
2018-02-09 11:16:05,475 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 11:16:05,475 - DEBUG - Entry Date is 10
2018-02-09 11:16:05,476 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 11:16:05,476 - DEBUG - Order Profit ID is 186
2018-02-09 11:16:05,476 - DEBUG - Order Entry ID is 186
2018-02-09 11:16:05,476 - DEBUG - API ID is  0
2018-02-09 11:16:05,476 - DEBUG - Current Position is 0
2018-02-09 11:16:05,477 - DEBUG - Current Position is <class 'str'>
2018-02-09 11:16:05,477 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 11:16:05,477 - DEBUG - Time is 11
2018-02-09 11:16:05,477 - DEBUG - Time is <class 'int'>
2018-02-09 11:16:05,477 - DEBUG - Time is 16
2018-02-09 11:16:05,478 - DEBUG - Time is <class 'int'>
2018-02-09 11:16:05,478 - DEBUG - Disconnected from IBController
2018-02-09 11:16:05,478 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 11:21:01,398 - DEBUG - ****************************************************
2018-02-09 11:21:01,398 - DEBUG - Current Time is 11:21AM
2018-02-09 11:21:01,399 - DEBUG - Starting Pos Mgmt H E
2018-02-09 11:21:01,399 - DEBUG - Connecting to database
2018-02-09 11:21:01,435 - DEBUG - Connected to database
2018-02-09 11:21:01,436 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 11:21:01,437 - DEBUG - Order Profit is 186
2018-02-09 11:21:01,438 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 11:21:01,439 - DEBUG - Stop ID is 0
2018-02-09 11:21:01,439 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 11:21:01,441 - DEBUG - Entry ID is 186
2018-02-09 11:21:01,441 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 11:21:01,442 - DEBUG - OCA ID is 1
2018-02-09 11:21:01,443 - DEBUG - Connecting to IBController
2018-02-09 11:21:02,458 - DEBUG - Connected to IBController
2018-02-09 11:21:02,458 - DEBUG - Position requested
2018-02-09 11:21:02,459 - DEBUG - Pos Mgmt -12987
2018-02-09 11:21:02,459 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212CBA8>, pos=-12987, avgCost=0.95368235>
2018-02-09 11:21:02,460 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 11:21:02,460 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 11:21:02,460 - DEBUG - Position is -12987
2018-02-09 11:21:03,459 - DEBUG - Open Orders requested
2018-02-09 11:21:03,460 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x000000000212CD68>, order=<ib.ext.Order.Order object at 0x000000000212CA58>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C11D0>>
2018-02-09 11:21:03,461 - DEBUG - Order OrderID 185
2018-02-09 11:21:03,462 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 11:21:03,462 - DEBUG - Order status PreSubmitted
2018-02-09 11:21:03,462 - DEBUG - Order Identification 185
2018-02-09 11:21:03,463 - DEBUG - Order Identification <class 'int'>
2018-02-09 11:21:03,463 - DEBUG - Profit ID from database is 186
2018-02-09 11:21:03,463 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 11:21:03,463 - DEBUG - Stop ID database is 0
2018-02-09 11:21:03,464 - DEBUG - Entry ID database is 186
2018-02-09 11:21:03,465 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x000000000212CD68>, order=<ib.ext.Order.Order object at 0x000000000212CA58>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C1048>>
2018-02-09 11:21:03,465 - DEBUG - Order OrderID 184
2018-02-09 11:21:03,465 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 11:21:03,466 - DEBUG - Order status PreSubmitted
2018-02-09 11:21:03,466 - DEBUG - Order Identification 184
2018-02-09 11:21:03,466 - DEBUG - Order Identification <class 'int'>
2018-02-09 11:21:03,466 - DEBUG - Profit ID from database is 186
2018-02-09 11:21:03,467 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 11:21:03,467 - DEBUG - Stop ID database is 0
2018-02-09 11:21:03,467 - DEBUG - Entry ID database is 186
2018-02-09 11:21:03,468 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x000000000212CD68>, order=<ib.ext.Order.Order object at 0x000000000212CA58>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C1240>>
2018-02-09 11:21:03,468 - DEBUG - Order OrderID 186
2018-02-09 11:21:03,469 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 11:21:03,469 - DEBUG - Order status PreSubmitted
2018-02-09 11:21:03,469 - DEBUG - Order Identification 186
2018-02-09 11:21:03,469 - DEBUG - Order Identification <class 'int'>
2018-02-09 11:21:03,470 - DEBUG - Profit ID from database is 186
2018-02-09 11:21:03,470 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 11:21:03,470 - DEBUG - Stop ID database is 0
2018-02-09 11:21:03,470 - DEBUG - Entry ID database is 186
2018-02-09 11:21:03,471 - DEBUG - Profit API ID is 186
2018-02-09 11:21:03,471 - DEBUG - Entry API ID is 186
2018-02-09 11:21:05,461 - DEBUG - Connecting to database
2018-02-09 11:21:05,468 - DEBUG - Connected to database
2018-02-09 11:21:05,470 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 11:21:05,470 - DEBUG - Stop loss value is 70.02
2018-02-09 11:21:05,472 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 11:21:05,472 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 11:21:05,473 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 11:21:05,474 - DEBUG - EntryPrice value is 68.725
2018-02-09 11:21:05,475 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 11:21:05,475 - DEBUG - Stop quantity 1
2018-02-09 11:21:05,477 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 11:21:05,477 - DEBUG - Direction is Short
2018-02-09 11:21:05,478 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 11:21:05,479 - DEBUG - Count is 0
2018-02-09 11:21:05,480 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 11:21:05,480 - DEBUG - Stop Loss Flag is 0
2018-02-09 11:21:05,482 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 11:21:05,482 - DEBUG - Max ID Order is (186,)
2018-02-09 11:21:05,482 - DEBUG - Today is 2018-02-09
2018-02-09 11:21:05,483 - DEBUG - Day of the week 4
2018-02-09 11:21:05,483 - DEBUG - Yesterday is 02/08/2018
2018-02-09 11:21:05,483 - DEBUG - In Position is  0
2018-02-09 11:21:05,483 - DEBUG - In Position is  <class 'int'>
2018-02-09 11:21:05,484 - DEBUG - curStopLossFlag is  0
2018-02-09 11:21:05,484 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 11:21:05,484 - DEBUG - Checking if Entry has been filled
2018-02-09 11:21:05,484 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 11:21:05,486 - DEBUG - EntryPend is 1
2018-02-09 11:21:05,486 - DEBUG - Try to Cancel Stop
2018-02-09 11:21:05,486 - DEBUG - Stop API ID 0
2018-02-09 11:21:05,486 - DEBUG - Profit API ID 186
2018-02-09 11:21:05,487 - DEBUG - Stop API ID <class 'int'>
2018-02-09 11:21:05,487 - DEBUG - Profit API ID <class 'int'>
2018-02-09 11:21:05,487 - DEBUG - Pos is 0
2018-02-09 11:21:05,487 - DEBUG - CurCount is 0
2018-02-09 11:21:05,487 - DEBUG - In Pos 0
2018-02-09 11:21:05,488 - DEBUG - Stop ID is 0
2018-02-09 11:21:05,488 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 11:21:05,489 - DEBUG - EntryPend is 1
2018-02-09 11:21:05,489 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 11:21:05,490 - DEBUG - Entry Date is 10
2018-02-09 11:21:05,490 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 11:21:05,490 - DEBUG - Order Profit ID is 186
2018-02-09 11:21:05,490 - DEBUG - Order Entry ID is 186
2018-02-09 11:21:05,491 - DEBUG - API ID is  0
2018-02-09 11:21:05,491 - DEBUG - Current Position is 0
2018-02-09 11:21:05,491 - DEBUG - Current Position is <class 'str'>
2018-02-09 11:21:05,491 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 11:21:05,492 - DEBUG - Time is 11
2018-02-09 11:21:05,492 - DEBUG - Time is <class 'int'>
2018-02-09 11:21:05,492 - DEBUG - Time is 21
2018-02-09 11:21:05,492 - DEBUG - Time is <class 'int'>
2018-02-09 11:21:05,493 - DEBUG - Disconnected from IBController
2018-02-09 11:21:05,493 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 11:26:01,343 - DEBUG - ****************************************************
2018-02-09 11:26:01,344 - DEBUG - Current Time is 11:26AM
2018-02-09 11:26:01,344 - DEBUG - Starting Pos Mgmt H E
2018-02-09 11:26:01,344 - DEBUG - Connecting to database
2018-02-09 11:26:01,380 - DEBUG - Connected to database
2018-02-09 11:26:01,381 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 11:26:01,382 - DEBUG - Order Profit is 186
2018-02-09 11:26:01,383 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 11:26:01,384 - DEBUG - Stop ID is 0
2018-02-09 11:26:01,384 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 11:26:01,386 - DEBUG - Entry ID is 186
2018-02-09 11:26:01,386 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 11:26:01,387 - DEBUG - OCA ID is 1
2018-02-09 11:26:01,388 - DEBUG - Connecting to IBController
2018-02-09 11:26:02,395 - DEBUG - Connected to IBController
2018-02-09 11:26:02,395 - DEBUG - Position requested
2018-02-09 11:26:02,396 - DEBUG - Pos Mgmt -12987
2018-02-09 11:26:02,397 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020DDE48>, pos=-12987, avgCost=0.95368235>
2018-02-09 11:26:02,397 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 11:26:02,397 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 11:26:02,398 - DEBUG - Position is -12987
2018-02-09 11:26:03,397 - DEBUG - Open Orders requested
2018-02-09 11:26:03,399 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x00000000020DDBE0>, order=<ib.ext.Order.Order object at 0x00000000020DDC18>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021721D0>>
2018-02-09 11:26:03,399 - DEBUG - Order OrderID 185
2018-02-09 11:26:03,400 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 11:26:03,400 - DEBUG - Order status PreSubmitted
2018-02-09 11:26:03,401 - DEBUG - Order Identification 185
2018-02-09 11:26:03,401 - DEBUG - Order Identification <class 'int'>
2018-02-09 11:26:03,401 - DEBUG - Profit ID from database is 186
2018-02-09 11:26:03,401 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 11:26:03,401 - DEBUG - Stop ID database is 0
2018-02-09 11:26:03,402 - DEBUG - Entry ID database is 186
2018-02-09 11:26:03,403 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x00000000020DDBE0>, order=<ib.ext.Order.Order object at 0x00000000020DDC18>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002172048>>
2018-02-09 11:26:03,403 - DEBUG - Order OrderID 184
2018-02-09 11:26:03,403 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 11:26:03,404 - DEBUG - Order status PreSubmitted
2018-02-09 11:26:03,404 - DEBUG - Order Identification 184
2018-02-09 11:26:03,404 - DEBUG - Order Identification <class 'int'>
2018-02-09 11:26:03,404 - DEBUG - Profit ID from database is 186
2018-02-09 11:26:03,405 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 11:26:03,405 - DEBUG - Stop ID database is 0
2018-02-09 11:26:03,405 - DEBUG - Entry ID database is 186
2018-02-09 11:26:03,406 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x00000000020DDBE0>, order=<ib.ext.Order.Order object at 0x00000000020DDC18>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002172240>>
2018-02-09 11:26:03,406 - DEBUG - Order OrderID 186
2018-02-09 11:26:03,407 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 11:26:03,407 - DEBUG - Order status PreSubmitted
2018-02-09 11:26:03,408 - DEBUG - Order Identification 186
2018-02-09 11:26:03,408 - DEBUG - Order Identification <class 'int'>
2018-02-09 11:26:03,408 - DEBUG - Profit ID from database is 186
2018-02-09 11:26:03,408 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 11:26:03,408 - DEBUG - Stop ID database is 0
2018-02-09 11:26:03,409 - DEBUG - Entry ID database is 186
2018-02-09 11:26:03,409 - DEBUG - Profit API ID is 186
2018-02-09 11:26:03,409 - DEBUG - Entry API ID is 186
2018-02-09 11:26:05,399 - DEBUG - Connecting to database
2018-02-09 11:26:05,407 - DEBUG - Connected to database
2018-02-09 11:26:05,409 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 11:26:05,409 - DEBUG - Stop loss value is 70.02
2018-02-09 11:26:05,410 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 11:26:05,411 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 11:26:05,412 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 11:26:05,412 - DEBUG - EntryPrice value is 68.725
2018-02-09 11:26:05,414 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 11:26:05,414 - DEBUG - Stop quantity 1
2018-02-09 11:26:05,415 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 11:26:05,416 - DEBUG - Direction is Short
2018-02-09 11:26:05,417 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 11:26:05,417 - DEBUG - Count is 0
2018-02-09 11:26:05,419 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 11:26:05,419 - DEBUG - Stop Loss Flag is 0
2018-02-09 11:26:05,420 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 11:26:05,421 - DEBUG - Max ID Order is (186,)
2018-02-09 11:26:05,421 - DEBUG - Today is 2018-02-09
2018-02-09 11:26:05,421 - DEBUG - Day of the week 4
2018-02-09 11:26:05,422 - DEBUG - Yesterday is 02/08/2018
2018-02-09 11:26:05,422 - DEBUG - In Position is  0
2018-02-09 11:26:05,422 - DEBUG - In Position is  <class 'int'>
2018-02-09 11:26:05,422 - DEBUG - curStopLossFlag is  0
2018-02-09 11:26:05,423 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 11:26:05,423 - DEBUG - Checking if Entry has been filled
2018-02-09 11:26:05,423 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 11:26:05,424 - DEBUG - EntryPend is 1
2018-02-09 11:26:05,425 - DEBUG - Try to Cancel Stop
2018-02-09 11:26:05,425 - DEBUG - Stop API ID 0
2018-02-09 11:26:05,425 - DEBUG - Profit API ID 186
2018-02-09 11:26:05,425 - DEBUG - Stop API ID <class 'int'>
2018-02-09 11:26:05,426 - DEBUG - Profit API ID <class 'int'>
2018-02-09 11:26:05,426 - DEBUG - Pos is 0
2018-02-09 11:26:05,426 - DEBUG - CurCount is 0
2018-02-09 11:26:05,426 - DEBUG - In Pos 0
2018-02-09 11:26:05,427 - DEBUG - Stop ID is 0
2018-02-09 11:26:05,427 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 11:26:05,428 - DEBUG - EntryPend is 1
2018-02-09 11:26:05,428 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 11:26:05,429 - DEBUG - Entry Date is 10
2018-02-09 11:26:05,429 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 11:26:05,429 - DEBUG - Order Profit ID is 186
2018-02-09 11:26:05,429 - DEBUG - Order Entry ID is 186
2018-02-09 11:26:05,429 - DEBUG - API ID is  0
2018-02-09 11:26:05,430 - DEBUG - Current Position is 0
2018-02-09 11:26:05,430 - DEBUG - Current Position is <class 'str'>
2018-02-09 11:26:05,430 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 11:26:05,430 - DEBUG - Time is 11
2018-02-09 11:26:05,431 - DEBUG - Time is <class 'int'>
2018-02-09 11:26:05,431 - DEBUG - Time is 26
2018-02-09 11:26:05,431 - DEBUG - Time is <class 'int'>
2018-02-09 11:26:05,431 - DEBUG - Disconnected from IBController
2018-02-09 11:26:05,432 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 11:31:01,353 - DEBUG - ****************************************************
2018-02-09 11:31:01,353 - DEBUG - Current Time is 11:31AM
2018-02-09 11:31:01,354 - DEBUG - Starting Pos Mgmt H E
2018-02-09 11:31:01,354 - DEBUG - Connecting to database
2018-02-09 11:31:01,377 - DEBUG - Connected to database
2018-02-09 11:31:01,377 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 11:31:01,379 - DEBUG - Order Profit is 186
2018-02-09 11:31:01,379 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 11:31:01,381 - DEBUG - Stop ID is 0
2018-02-09 11:31:01,381 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 11:31:01,382 - DEBUG - Entry ID is 186
2018-02-09 11:31:01,383 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 11:31:01,384 - DEBUG - OCA ID is 1
2018-02-09 11:31:01,384 - DEBUG - Connecting to IBController
2018-02-09 11:31:02,392 - DEBUG - Connected to IBController
2018-02-09 11:31:02,392 - DEBUG - Position requested
2018-02-09 11:31:02,393 - DEBUG - Pos Mgmt -12987
2018-02-09 11:31:02,394 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020DDBA8>, pos=-12987, avgCost=0.95368235>
2018-02-09 11:31:02,394 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 11:31:02,394 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 11:31:02,395 - DEBUG - Position is -12987
2018-02-09 11:31:03,392 - DEBUG - Open Orders requested
2018-02-09 11:31:03,399 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x00000000020DDC88>, order=<ib.ext.Order.Order object at 0x00000000020DDCC0>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002172160>>
2018-02-09 11:31:03,400 - DEBUG - Order OrderID 185
2018-02-09 11:31:03,401 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 11:31:03,402 - DEBUG - Order status PreSubmitted
2018-02-09 11:31:03,402 - DEBUG - Order Identification 185
2018-02-09 11:31:03,402 - DEBUG - Order Identification <class 'int'>
2018-02-09 11:31:03,403 - DEBUG - Profit ID from database is 186
2018-02-09 11:31:03,403 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 11:31:03,403 - DEBUG - Stop ID database is 0
2018-02-09 11:31:03,403 - DEBUG - Entry ID database is 186
2018-02-09 11:31:03,404 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x00000000020DDC88>, order=<ib.ext.Order.Order object at 0x00000000020DDCC0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021721D0>>
2018-02-09 11:31:03,405 - DEBUG - Order OrderID 184
2018-02-09 11:31:03,405 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 11:31:03,405 - DEBUG - Order status PreSubmitted
2018-02-09 11:31:03,406 - DEBUG - Order Identification 184
2018-02-09 11:31:03,406 - DEBUG - Order Identification <class 'int'>
2018-02-09 11:31:03,406 - DEBUG - Profit ID from database is 186
2018-02-09 11:31:03,406 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 11:31:03,406 - DEBUG - Stop ID database is 0
2018-02-09 11:31:03,407 - DEBUG - Entry ID database is 186
2018-02-09 11:31:03,408 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x00000000020DDC88>, order=<ib.ext.Order.Order object at 0x00000000020DDCC0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021722B0>>
2018-02-09 11:31:03,408 - DEBUG - Order OrderID 186
2018-02-09 11:31:03,408 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 11:31:03,409 - DEBUG - Order status PreSubmitted
2018-02-09 11:31:03,409 - DEBUG - Order Identification 186
2018-02-09 11:31:03,409 - DEBUG - Order Identification <class 'int'>
2018-02-09 11:31:03,409 - DEBUG - Profit ID from database is 186
2018-02-09 11:31:03,410 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 11:31:03,410 - DEBUG - Stop ID database is 0
2018-02-09 11:31:03,410 - DEBUG - Entry ID database is 186
2018-02-09 11:31:03,410 - DEBUG - Profit API ID is 186
2018-02-09 11:31:03,410 - DEBUG - Entry API ID is 186
2018-02-09 11:31:05,392 - DEBUG - Connecting to database
2018-02-09 11:31:05,399 - DEBUG - Connected to database
2018-02-09 11:31:05,401 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 11:31:05,401 - DEBUG - Stop loss value is 70.02
2018-02-09 11:31:05,402 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 11:31:05,403 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 11:31:05,404 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 11:31:05,404 - DEBUG - EntryPrice value is 68.725
2018-02-09 11:31:05,406 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 11:31:05,406 - DEBUG - Stop quantity 1
2018-02-09 11:31:05,407 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 11:31:05,408 - DEBUG - Direction is Short
2018-02-09 11:31:05,409 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 11:31:05,409 - DEBUG - Count is 0
2018-02-09 11:31:05,411 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 11:31:05,411 - DEBUG - Stop Loss Flag is 0
2018-02-09 11:31:05,413 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 11:31:05,413 - DEBUG - Max ID Order is (186,)
2018-02-09 11:31:05,413 - DEBUG - Today is 2018-02-09
2018-02-09 11:31:05,414 - DEBUG - Day of the week 4
2018-02-09 11:31:05,414 - DEBUG - Yesterday is 02/08/2018
2018-02-09 11:31:05,414 - DEBUG - In Position is  0
2018-02-09 11:31:05,414 - DEBUG - In Position is  <class 'int'>
2018-02-09 11:31:05,415 - DEBUG - curStopLossFlag is  0
2018-02-09 11:31:05,415 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 11:31:05,415 - DEBUG - Checking if Entry has been filled
2018-02-09 11:31:05,415 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 11:31:05,417 - DEBUG - EntryPend is 1
2018-02-09 11:31:05,417 - DEBUG - Try to Cancel Stop
2018-02-09 11:31:05,417 - DEBUG - Stop API ID 0
2018-02-09 11:31:05,418 - DEBUG - Profit API ID 186
2018-02-09 11:31:05,418 - DEBUG - Stop API ID <class 'int'>
2018-02-09 11:31:05,418 - DEBUG - Profit API ID <class 'int'>
2018-02-09 11:31:05,418 - DEBUG - Pos is 0
2018-02-09 11:31:05,418 - DEBUG - CurCount is 0
2018-02-09 11:31:05,419 - DEBUG - In Pos 0
2018-02-09 11:31:05,419 - DEBUG - Stop ID is 0
2018-02-09 11:31:05,419 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 11:31:05,421 - DEBUG - EntryPend is 1
2018-02-09 11:31:05,421 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 11:31:05,421 - DEBUG - Entry Date is 10
2018-02-09 11:31:05,421 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 11:31:05,421 - DEBUG - Order Profit ID is 186
2018-02-09 11:31:05,422 - DEBUG - Order Entry ID is 186
2018-02-09 11:31:05,422 - DEBUG - API ID is  0
2018-02-09 11:31:05,422 - DEBUG - Current Position is 0
2018-02-09 11:31:05,422 - DEBUG - Current Position is <class 'str'>
2018-02-09 11:31:05,422 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 11:31:05,423 - DEBUG - Time is 11
2018-02-09 11:31:05,423 - DEBUG - Time is <class 'int'>
2018-02-09 11:31:05,423 - DEBUG - Time is 31
2018-02-09 11:31:05,423 - DEBUG - Time is <class 'int'>
2018-02-09 11:31:05,424 - DEBUG - Disconnected from IBController
2018-02-09 11:31:05,424 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 11:36:01,350 - DEBUG - ****************************************************
2018-02-09 11:36:01,351 - DEBUG - Current Time is 11:36AM
2018-02-09 11:36:01,351 - DEBUG - Starting Pos Mgmt H E
2018-02-09 11:36:01,351 - DEBUG - Connecting to database
2018-02-09 11:36:01,377 - DEBUG - Connected to database
2018-02-09 11:36:01,377 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 11:36:01,379 - DEBUG - Order Profit is 186
2018-02-09 11:36:01,379 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 11:36:01,380 - DEBUG - Stop ID is 0
2018-02-09 11:36:01,381 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 11:36:01,382 - DEBUG - Entry ID is 186
2018-02-09 11:36:01,382 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 11:36:01,384 - DEBUG - OCA ID is 1
2018-02-09 11:36:01,384 - DEBUG - Connecting to IBController
2018-02-09 11:36:02,391 - DEBUG - Connected to IBController
2018-02-09 11:36:02,391 - DEBUG - Position requested
2018-02-09 11:36:02,397 - DEBUG - Pos Mgmt -12987
2018-02-09 11:36:02,397 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211DDA0>, pos=-12987, avgCost=0.95368235>
2018-02-09 11:36:02,398 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 11:36:02,398 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 11:36:02,398 - DEBUG - Position is -12987
2018-02-09 11:36:03,391 - DEBUG - Open Orders requested
2018-02-09 11:36:03,392 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x000000000211DE10>, order=<ib.ext.Order.Order object at 0x000000000211DC18>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B21D0>>
2018-02-09 11:36:03,393 - DEBUG - Order OrderID 185
2018-02-09 11:36:03,394 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 11:36:03,394 - DEBUG - Order status PreSubmitted
2018-02-09 11:36:03,394 - DEBUG - Order Identification 185
2018-02-09 11:36:03,395 - DEBUG - Order Identification <class 'int'>
2018-02-09 11:36:03,395 - DEBUG - Profit ID from database is 186
2018-02-09 11:36:03,395 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 11:36:03,395 - DEBUG - Stop ID database is 0
2018-02-09 11:36:03,396 - DEBUG - Entry ID database is 186
2018-02-09 11:36:03,397 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x000000000211DE10>, order=<ib.ext.Order.Order object at 0x000000000211DC18>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B2048>>
2018-02-09 11:36:03,397 - DEBUG - Order OrderID 184
2018-02-09 11:36:03,397 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 11:36:03,398 - DEBUG - Order status PreSubmitted
2018-02-09 11:36:03,398 - DEBUG - Order Identification 184
2018-02-09 11:36:03,398 - DEBUG - Order Identification <class 'int'>
2018-02-09 11:36:03,398 - DEBUG - Profit ID from database is 186
2018-02-09 11:36:03,399 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 11:36:03,399 - DEBUG - Stop ID database is 0
2018-02-09 11:36:03,399 - DEBUG - Entry ID database is 186
2018-02-09 11:36:03,400 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x000000000211DE10>, order=<ib.ext.Order.Order object at 0x000000000211DC18>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B2240>>
2018-02-09 11:36:03,400 - DEBUG - Order OrderID 186
2018-02-09 11:36:03,401 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 11:36:03,401 - DEBUG - Order status PreSubmitted
2018-02-09 11:36:03,401 - DEBUG - Order Identification 186
2018-02-09 11:36:03,402 - DEBUG - Order Identification <class 'int'>
2018-02-09 11:36:03,402 - DEBUG - Profit ID from database is 186
2018-02-09 11:36:03,402 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 11:36:03,402 - DEBUG - Stop ID database is 0
2018-02-09 11:36:03,402 - DEBUG - Entry ID database is 186
2018-02-09 11:36:03,403 - DEBUG - Profit API ID is 186
2018-02-09 11:36:03,403 - DEBUG - Entry API ID is 186
2018-02-09 11:36:05,393 - DEBUG - Connecting to database
2018-02-09 11:36:05,405 - DEBUG - Connected to database
2018-02-09 11:36:05,407 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 11:36:05,407 - DEBUG - Stop loss value is 70.02
2018-02-09 11:36:05,409 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 11:36:05,409 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 11:36:05,411 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 11:36:05,411 - DEBUG - EntryPrice value is 68.725
2018-02-09 11:36:05,412 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 11:36:05,413 - DEBUG - Stop quantity 1
2018-02-09 11:36:05,414 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 11:36:05,415 - DEBUG - Direction is Short
2018-02-09 11:36:05,416 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 11:36:05,416 - DEBUG - Count is 0
2018-02-09 11:36:05,418 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 11:36:05,418 - DEBUG - Stop Loss Flag is 0
2018-02-09 11:36:05,419 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 11:36:05,420 - DEBUG - Max ID Order is (186,)
2018-02-09 11:36:05,420 - DEBUG - Today is 2018-02-09
2018-02-09 11:36:05,420 - DEBUG - Day of the week 4
2018-02-09 11:36:05,421 - DEBUG - Yesterday is 02/08/2018
2018-02-09 11:36:05,421 - DEBUG - In Position is  0
2018-02-09 11:36:05,421 - DEBUG - In Position is  <class 'int'>
2018-02-09 11:36:05,421 - DEBUG - curStopLossFlag is  0
2018-02-09 11:36:05,422 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 11:36:05,422 - DEBUG - Checking if Entry has been filled
2018-02-09 11:36:05,422 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 11:36:05,423 - DEBUG - EntryPend is 1
2018-02-09 11:36:05,424 - DEBUG - Try to Cancel Stop
2018-02-09 11:36:05,424 - DEBUG - Stop API ID 0
2018-02-09 11:36:05,424 - DEBUG - Profit API ID 186
2018-02-09 11:36:05,424 - DEBUG - Stop API ID <class 'int'>
2018-02-09 11:36:05,425 - DEBUG - Profit API ID <class 'int'>
2018-02-09 11:36:05,425 - DEBUG - Pos is 0
2018-02-09 11:36:05,425 - DEBUG - CurCount is 0
2018-02-09 11:36:05,425 - DEBUG - In Pos 0
2018-02-09 11:36:05,425 - DEBUG - Stop ID is 0
2018-02-09 11:36:05,426 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 11:36:05,427 - DEBUG - EntryPend is 1
2018-02-09 11:36:05,427 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 11:36:05,428 - DEBUG - Entry Date is 10
2018-02-09 11:36:05,428 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 11:36:05,428 - DEBUG - Order Profit ID is 186
2018-02-09 11:36:05,428 - DEBUG - Order Entry ID is 186
2018-02-09 11:36:05,429 - DEBUG - API ID is  0
2018-02-09 11:36:05,429 - DEBUG - Current Position is 0
2018-02-09 11:36:05,429 - DEBUG - Current Position is <class 'str'>
2018-02-09 11:36:05,429 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 11:36:05,429 - DEBUG - Time is 11
2018-02-09 11:36:05,430 - DEBUG - Time is <class 'int'>
2018-02-09 11:36:05,430 - DEBUG - Time is 36
2018-02-09 11:36:05,430 - DEBUG - Time is <class 'int'>
2018-02-09 11:36:05,430 - DEBUG - Disconnected from IBController
2018-02-09 11:36:05,431 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 11:41:01,349 - DEBUG - ****************************************************
2018-02-09 11:41:01,350 - DEBUG - Current Time is 11:41AM
2018-02-09 11:41:01,350 - DEBUG - Starting Pos Mgmt H E
2018-02-09 11:41:01,350 - DEBUG - Connecting to database
2018-02-09 11:41:01,370 - DEBUG - Connected to database
2018-02-09 11:41:01,371 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 11:41:01,372 - DEBUG - Order Profit is 186
2018-02-09 11:41:01,373 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 11:41:01,374 - DEBUG - Stop ID is 0
2018-02-09 11:41:01,374 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 11:41:01,376 - DEBUG - Entry ID is 186
2018-02-09 11:41:01,376 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 11:41:01,377 - DEBUG - OCA ID is 1
2018-02-09 11:41:01,378 - DEBUG - Connecting to IBController
2018-02-09 11:41:02,384 - DEBUG - Connected to IBController
2018-02-09 11:41:02,384 - DEBUG - Position requested
2018-02-09 11:41:02,385 - DEBUG - Pos Mgmt -12987
2018-02-09 11:41:02,386 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000219DCF8>, pos=-12987, avgCost=0.95368235>
2018-02-09 11:41:02,386 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 11:41:02,386 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 11:41:02,387 - DEBUG - Position is -12987
2018-02-09 11:41:03,385 - DEBUG - Open Orders requested
2018-02-09 11:41:03,387 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x000000000219DCC0>, order=<ib.ext.Order.Order object at 0x000000000219DBA8>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002232160>>
2018-02-09 11:41:03,388 - DEBUG - Order OrderID 185
2018-02-09 11:41:03,388 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 11:41:03,389 - DEBUG - Order status PreSubmitted
2018-02-09 11:41:03,389 - DEBUG - Order Identification 185
2018-02-09 11:41:03,389 - DEBUG - Order Identification <class 'int'>
2018-02-09 11:41:03,390 - DEBUG - Profit ID from database is 186
2018-02-09 11:41:03,390 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 11:41:03,390 - DEBUG - Stop ID database is 0
2018-02-09 11:41:03,390 - DEBUG - Entry ID database is 186
2018-02-09 11:41:03,391 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x000000000219DCC0>, order=<ib.ext.Order.Order object at 0x000000000219DBA8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000022321D0>>
2018-02-09 11:41:03,392 - DEBUG - Order OrderID 184
2018-02-09 11:41:03,392 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 11:41:03,392 - DEBUG - Order status PreSubmitted
2018-02-09 11:41:03,393 - DEBUG - Order Identification 184
2018-02-09 11:41:03,393 - DEBUG - Order Identification <class 'int'>
2018-02-09 11:41:03,393 - DEBUG - Profit ID from database is 186
2018-02-09 11:41:03,394 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 11:41:03,394 - DEBUG - Stop ID database is 0
2018-02-09 11:41:03,394 - DEBUG - Entry ID database is 186
2018-02-09 11:41:03,395 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x000000000219DCC0>, order=<ib.ext.Order.Order object at 0x000000000219DBA8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000022322B0>>
2018-02-09 11:41:03,396 - DEBUG - Order OrderID 186
2018-02-09 11:41:03,396 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 11:41:03,396 - DEBUG - Order status PreSubmitted
2018-02-09 11:41:03,396 - DEBUG - Order Identification 186
2018-02-09 11:41:03,397 - DEBUG - Order Identification <class 'int'>
2018-02-09 11:41:03,397 - DEBUG - Profit ID from database is 186
2018-02-09 11:41:03,397 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 11:41:03,397 - DEBUG - Stop ID database is 0
2018-02-09 11:41:03,397 - DEBUG - Entry ID database is 186
2018-02-09 11:41:03,398 - DEBUG - Profit API ID is 186
2018-02-09 11:41:03,398 - DEBUG - Entry API ID is 186
2018-02-09 11:41:05,385 - DEBUG - Connecting to database
2018-02-09 11:41:05,393 - DEBUG - Connected to database
2018-02-09 11:41:05,394 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 11:41:05,395 - DEBUG - Stop loss value is 70.02
2018-02-09 11:41:05,396 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 11:41:05,396 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 11:41:05,398 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 11:41:05,398 - DEBUG - EntryPrice value is 68.725
2018-02-09 11:41:05,400 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 11:41:05,400 - DEBUG - Stop quantity 1
2018-02-09 11:41:05,401 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 11:41:05,402 - DEBUG - Direction is Short
2018-02-09 11:41:05,403 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 11:41:05,403 - DEBUG - Count is 0
2018-02-09 11:41:05,405 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 11:41:05,405 - DEBUG - Stop Loss Flag is 0
2018-02-09 11:41:05,406 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 11:41:05,407 - DEBUG - Max ID Order is (186,)
2018-02-09 11:41:05,407 - DEBUG - Today is 2018-02-09
2018-02-09 11:41:05,407 - DEBUG - Day of the week 4
2018-02-09 11:41:05,408 - DEBUG - Yesterday is 02/08/2018
2018-02-09 11:41:05,408 - DEBUG - In Position is  0
2018-02-09 11:41:05,408 - DEBUG - In Position is  <class 'int'>
2018-02-09 11:41:05,408 - DEBUG - curStopLossFlag is  0
2018-02-09 11:41:05,409 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 11:41:05,409 - DEBUG - Checking if Entry has been filled
2018-02-09 11:41:05,409 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 11:41:05,410 - DEBUG - EntryPend is 1
2018-02-09 11:41:05,411 - DEBUG - Try to Cancel Stop
2018-02-09 11:41:05,411 - DEBUG - Stop API ID 0
2018-02-09 11:41:05,411 - DEBUG - Profit API ID 186
2018-02-09 11:41:05,411 - DEBUG - Stop API ID <class 'int'>
2018-02-09 11:41:05,412 - DEBUG - Profit API ID <class 'int'>
2018-02-09 11:41:05,412 - DEBUG - Pos is 0
2018-02-09 11:41:05,412 - DEBUG - CurCount is 0
2018-02-09 11:41:05,412 - DEBUG - In Pos 0
2018-02-09 11:41:05,412 - DEBUG - Stop ID is 0
2018-02-09 11:41:05,413 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 11:41:05,414 - DEBUG - EntryPend is 1
2018-02-09 11:41:05,414 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 11:41:05,415 - DEBUG - Entry Date is 10
2018-02-09 11:41:05,415 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 11:41:05,415 - DEBUG - Order Profit ID is 186
2018-02-09 11:41:05,415 - DEBUG - Order Entry ID is 186
2018-02-09 11:41:05,415 - DEBUG - API ID is  0
2018-02-09 11:41:05,416 - DEBUG - Current Position is 0
2018-02-09 11:41:05,416 - DEBUG - Current Position is <class 'str'>
2018-02-09 11:41:05,416 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 11:41:05,416 - DEBUG - Time is 11
2018-02-09 11:41:05,417 - DEBUG - Time is <class 'int'>
2018-02-09 11:41:05,417 - DEBUG - Time is 41
2018-02-09 11:41:05,417 - DEBUG - Time is <class 'int'>
2018-02-09 11:41:05,417 - DEBUG - Disconnected from IBController
2018-02-09 11:41:05,418 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 11:46:01,370 - DEBUG - ****************************************************
2018-02-09 11:46:01,370 - DEBUG - Current Time is 11:46AM
2018-02-09 11:46:01,371 - DEBUG - Starting Pos Mgmt H E
2018-02-09 11:46:01,371 - DEBUG - Connecting to database
2018-02-09 11:46:01,399 - DEBUG - Connected to database
2018-02-09 11:46:01,399 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 11:46:01,401 - DEBUG - Order Profit is 186
2018-02-09 11:46:01,401 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 11:46:01,403 - DEBUG - Stop ID is 0
2018-02-09 11:46:01,404 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 11:46:01,405 - DEBUG - Entry ID is 186
2018-02-09 11:46:01,405 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 11:46:01,407 - DEBUG - OCA ID is 1
2018-02-09 11:46:01,407 - DEBUG - Connecting to IBController
2018-02-09 11:46:02,417 - DEBUG - Connected to IBController
2018-02-09 11:46:02,417 - DEBUG - Position requested
2018-02-09 11:46:02,418 - DEBUG - Pos Mgmt -12987
2018-02-09 11:46:02,419 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212CDA0>, pos=-12987, avgCost=0.95368235>
2018-02-09 11:46:02,419 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 11:46:02,419 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 11:46:02,420 - DEBUG - Position is -12987
2018-02-09 11:46:03,417 - DEBUG - Open Orders requested
2018-02-09 11:46:03,419 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x000000000212CD68>, order=<ib.ext.Order.Order object at 0x000000000212CA58>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C21D0>>
2018-02-09 11:46:03,420 - DEBUG - Order OrderID 185
2018-02-09 11:46:03,420 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 11:46:03,421 - DEBUG - Order status PreSubmitted
2018-02-09 11:46:03,421 - DEBUG - Order Identification 185
2018-02-09 11:46:03,421 - DEBUG - Order Identification <class 'int'>
2018-02-09 11:46:03,421 - DEBUG - Profit ID from database is 186
2018-02-09 11:46:03,422 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 11:46:03,422 - DEBUG - Stop ID database is 0
2018-02-09 11:46:03,422 - DEBUG - Entry ID database is 186
2018-02-09 11:46:03,423 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x000000000212CD68>, order=<ib.ext.Order.Order object at 0x000000000212CA58>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C2080>>
2018-02-09 11:46:03,423 - DEBUG - Order OrderID 184
2018-02-09 11:46:03,424 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 11:46:03,424 - DEBUG - Order status PreSubmitted
2018-02-09 11:46:03,424 - DEBUG - Order Identification 184
2018-02-09 11:46:03,425 - DEBUG - Order Identification <class 'int'>
2018-02-09 11:46:03,425 - DEBUG - Profit ID from database is 186
2018-02-09 11:46:03,425 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 11:46:03,425 - DEBUG - Stop ID database is 0
2018-02-09 11:46:03,425 - DEBUG - Entry ID database is 186
2018-02-09 11:46:03,427 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x000000000212CD68>, order=<ib.ext.Order.Order object at 0x000000000212CA58>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C2240>>
2018-02-09 11:46:03,427 - DEBUG - Order OrderID 186
2018-02-09 11:46:03,427 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 11:46:03,428 - DEBUG - Order status PreSubmitted
2018-02-09 11:46:03,428 - DEBUG - Order Identification 186
2018-02-09 11:46:03,428 - DEBUG - Order Identification <class 'int'>
2018-02-09 11:46:03,428 - DEBUG - Profit ID from database is 186
2018-02-09 11:46:03,428 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 11:46:03,429 - DEBUG - Stop ID database is 0
2018-02-09 11:46:03,429 - DEBUG - Entry ID database is 186
2018-02-09 11:46:03,429 - DEBUG - Profit API ID is 186
2018-02-09 11:46:03,429 - DEBUG - Entry API ID is 186
2018-02-09 11:46:05,420 - DEBUG - Connecting to database
2018-02-09 11:46:05,427 - DEBUG - Connected to database
2018-02-09 11:46:05,429 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 11:46:05,429 - DEBUG - Stop loss value is 70.02
2018-02-09 11:46:05,430 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 11:46:05,431 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 11:46:05,432 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 11:46:05,432 - DEBUG - EntryPrice value is 68.725
2018-02-09 11:46:05,434 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 11:46:05,434 - DEBUG - Stop quantity 1
2018-02-09 11:46:05,435 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 11:46:05,436 - DEBUG - Direction is Short
2018-02-09 11:46:05,437 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 11:46:05,437 - DEBUG - Count is 0
2018-02-09 11:46:05,439 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 11:46:05,439 - DEBUG - Stop Loss Flag is 0
2018-02-09 11:46:05,440 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 11:46:05,441 - DEBUG - Max ID Order is (186,)
2018-02-09 11:46:05,441 - DEBUG - Today is 2018-02-09
2018-02-09 11:46:05,442 - DEBUG - Day of the week 4
2018-02-09 11:46:05,442 - DEBUG - Yesterday is 02/08/2018
2018-02-09 11:46:05,442 - DEBUG - In Position is  0
2018-02-09 11:46:05,442 - DEBUG - In Position is  <class 'int'>
2018-02-09 11:46:05,443 - DEBUG - curStopLossFlag is  0
2018-02-09 11:46:05,443 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 11:46:05,443 - DEBUG - Checking if Entry has been filled
2018-02-09 11:46:05,443 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 11:46:05,445 - DEBUG - EntryPend is 1
2018-02-09 11:46:05,445 - DEBUG - Try to Cancel Stop
2018-02-09 11:46:05,445 - DEBUG - Stop API ID 0
2018-02-09 11:46:05,445 - DEBUG - Profit API ID 186
2018-02-09 11:46:05,445 - DEBUG - Stop API ID <class 'int'>
2018-02-09 11:46:05,446 - DEBUG - Profit API ID <class 'int'>
2018-02-09 11:46:05,446 - DEBUG - Pos is 0
2018-02-09 11:46:05,446 - DEBUG - CurCount is 0
2018-02-09 11:46:05,446 - DEBUG - In Pos 0
2018-02-09 11:46:05,447 - DEBUG - Stop ID is 0
2018-02-09 11:46:05,447 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 11:46:05,448 - DEBUG - EntryPend is 1
2018-02-09 11:46:05,449 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 11:46:05,449 - DEBUG - Entry Date is 10
2018-02-09 11:46:05,449 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 11:46:05,449 - DEBUG - Order Profit ID is 186
2018-02-09 11:46:05,449 - DEBUG - Order Entry ID is 186
2018-02-09 11:46:05,450 - DEBUG - API ID is  0
2018-02-09 11:46:05,450 - DEBUG - Current Position is 0
2018-02-09 11:46:05,450 - DEBUG - Current Position is <class 'str'>
2018-02-09 11:46:05,450 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 11:46:05,451 - DEBUG - Time is 11
2018-02-09 11:46:05,451 - DEBUG - Time is <class 'int'>
2018-02-09 11:46:05,451 - DEBUG - Time is 46
2018-02-09 11:46:05,451 - DEBUG - Time is <class 'int'>
2018-02-09 11:46:05,452 - DEBUG - Disconnected from IBController
2018-02-09 11:46:05,452 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 11:51:01,347 - DEBUG - ****************************************************
2018-02-09 11:51:01,347 - DEBUG - Current Time is 11:51AM
2018-02-09 11:51:01,348 - DEBUG - Starting Pos Mgmt H E
2018-02-09 11:51:01,348 - DEBUG - Connecting to database
2018-02-09 11:51:01,380 - DEBUG - Connected to database
2018-02-09 11:51:01,381 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 11:51:01,382 - DEBUG - Order Profit is 186
2018-02-09 11:51:01,382 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 11:51:01,384 - DEBUG - Stop ID is 0
2018-02-09 11:51:01,384 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 11:51:01,385 - DEBUG - Entry ID is 186
2018-02-09 11:51:01,386 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 11:51:01,387 - DEBUG - OCA ID is 1
2018-02-09 11:51:01,387 - DEBUG - Connecting to IBController
2018-02-09 11:51:02,400 - DEBUG - Connected to IBController
2018-02-09 11:51:02,400 - DEBUG - Position requested
2018-02-09 11:51:02,401 - DEBUG - Pos Mgmt -12987
2018-02-09 11:51:02,402 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020DDE48>, pos=-12987, avgCost=0.95368235>
2018-02-09 11:51:02,402 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 11:51:02,402 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 11:51:02,403 - DEBUG - Position is -12987
2018-02-09 11:51:03,402 - DEBUG - Open Orders requested
2018-02-09 11:51:03,409 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x00000000020DDCC0>, order=<ib.ext.Order.Order object at 0x00000000020DDD30>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002172160>>
2018-02-09 11:51:03,409 - DEBUG - Order OrderID 185
2018-02-09 11:51:03,410 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 11:51:03,410 - DEBUG - Order status PreSubmitted
2018-02-09 11:51:03,410 - DEBUG - Order Identification 185
2018-02-09 11:51:03,411 - DEBUG - Order Identification <class 'int'>
2018-02-09 11:51:03,411 - DEBUG - Profit ID from database is 186
2018-02-09 11:51:03,411 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 11:51:03,411 - DEBUG - Stop ID database is 0
2018-02-09 11:51:03,412 - DEBUG - Entry ID database is 186
2018-02-09 11:51:03,413 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x00000000020DDCC0>, order=<ib.ext.Order.Order object at 0x00000000020DDD30>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021721D0>>
2018-02-09 11:51:03,413 - DEBUG - Order OrderID 184
2018-02-09 11:51:03,413 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 11:51:03,414 - DEBUG - Order status PreSubmitted
2018-02-09 11:51:03,414 - DEBUG - Order Identification 184
2018-02-09 11:51:03,414 - DEBUG - Order Identification <class 'int'>
2018-02-09 11:51:03,414 - DEBUG - Profit ID from database is 186
2018-02-09 11:51:03,415 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 11:51:03,415 - DEBUG - Stop ID database is 0
2018-02-09 11:51:03,415 - DEBUG - Entry ID database is 186
2018-02-09 11:51:03,416 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x00000000020DDCC0>, order=<ib.ext.Order.Order object at 0x00000000020DDD30>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021722B0>>
2018-02-09 11:51:03,416 - DEBUG - Order OrderID 186
2018-02-09 11:51:03,417 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 11:51:03,417 - DEBUG - Order status PreSubmitted
2018-02-09 11:51:03,418 - DEBUG - Order Identification 186
2018-02-09 11:51:03,418 - DEBUG - Order Identification <class 'int'>
2018-02-09 11:51:03,418 - DEBUG - Profit ID from database is 186
2018-02-09 11:51:03,418 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 11:51:03,418 - DEBUG - Stop ID database is 0
2018-02-09 11:51:03,419 - DEBUG - Entry ID database is 186
2018-02-09 11:51:03,419 - DEBUG - Profit API ID is 186
2018-02-09 11:51:03,419 - DEBUG - Entry API ID is 186
2018-02-09 11:51:05,402 - DEBUG - Connecting to database
2018-02-09 11:51:05,409 - DEBUG - Connected to database
2018-02-09 11:51:05,411 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 11:51:05,411 - DEBUG - Stop loss value is 70.02
2018-02-09 11:51:05,413 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 11:51:05,413 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 11:51:05,414 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 11:51:05,415 - DEBUG - EntryPrice value is 68.725
2018-02-09 11:51:05,416 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 11:51:05,416 - DEBUG - Stop quantity 1
2018-02-09 11:51:05,418 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 11:51:05,418 - DEBUG - Direction is Short
2018-02-09 11:51:05,419 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 11:51:05,420 - DEBUG - Count is 0
2018-02-09 11:51:05,421 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 11:51:05,421 - DEBUG - Stop Loss Flag is 0
2018-02-09 11:51:05,423 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 11:51:05,423 - DEBUG - Max ID Order is (186,)
2018-02-09 11:51:05,423 - DEBUG - Today is 2018-02-09
2018-02-09 11:51:05,424 - DEBUG - Day of the week 4
2018-02-09 11:51:05,424 - DEBUG - Yesterday is 02/08/2018
2018-02-09 11:51:05,424 - DEBUG - In Position is  0
2018-02-09 11:51:05,424 - DEBUG - In Position is  <class 'int'>
2018-02-09 11:51:05,425 - DEBUG - curStopLossFlag is  0
2018-02-09 11:51:05,425 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 11:51:05,425 - DEBUG - Checking if Entry has been filled
2018-02-09 11:51:05,425 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 11:51:05,427 - DEBUG - EntryPend is 1
2018-02-09 11:51:05,427 - DEBUG - Try to Cancel Stop
2018-02-09 11:51:05,427 - DEBUG - Stop API ID 0
2018-02-09 11:51:05,427 - DEBUG - Profit API ID 186
2018-02-09 11:51:05,428 - DEBUG - Stop API ID <class 'int'>
2018-02-09 11:51:05,428 - DEBUG - Profit API ID <class 'int'>
2018-02-09 11:51:05,428 - DEBUG - Pos is 0
2018-02-09 11:51:05,428 - DEBUG - CurCount is 0
2018-02-09 11:51:05,428 - DEBUG - In Pos 0
2018-02-09 11:51:05,429 - DEBUG - Stop ID is 0
2018-02-09 11:51:05,429 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 11:51:05,430 - DEBUG - EntryPend is 1
2018-02-09 11:51:05,431 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 11:51:05,431 - DEBUG - Entry Date is 10
2018-02-09 11:51:05,431 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 11:51:05,431 - DEBUG - Order Profit ID is 186
2018-02-09 11:51:05,431 - DEBUG - Order Entry ID is 186
2018-02-09 11:51:05,432 - DEBUG - API ID is  0
2018-02-09 11:51:05,432 - DEBUG - Current Position is 0
2018-02-09 11:51:05,432 - DEBUG - Current Position is <class 'str'>
2018-02-09 11:51:05,432 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 11:51:05,432 - DEBUG - Time is 11
2018-02-09 11:51:05,433 - DEBUG - Time is <class 'int'>
2018-02-09 11:51:05,433 - DEBUG - Time is 51
2018-02-09 11:51:05,433 - DEBUG - Time is <class 'int'>
2018-02-09 11:51:05,433 - DEBUG - Disconnected from IBController
2018-02-09 11:51:05,434 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 11:56:01,347 - DEBUG - ****************************************************
2018-02-09 11:56:01,348 - DEBUG - Current Time is 11:56AM
2018-02-09 11:56:01,348 - DEBUG - Starting Pos Mgmt H E
2018-02-09 11:56:01,348 - DEBUG - Connecting to database
2018-02-09 11:56:01,473 - DEBUG - Connected to database
2018-02-09 11:56:01,473 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 11:56:01,475 - DEBUG - Order Profit is 186
2018-02-09 11:56:01,475 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 11:56:01,476 - DEBUG - Stop ID is 0
2018-02-09 11:56:01,477 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 11:56:01,478 - DEBUG - Entry ID is 186
2018-02-09 11:56:01,478 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 11:56:01,480 - DEBUG - OCA ID is 1
2018-02-09 11:56:01,480 - DEBUG - Connecting to IBController
2018-02-09 11:56:02,485 - DEBUG - Connected to IBController
2018-02-09 11:56:02,485 - DEBUG - Position requested
2018-02-09 11:56:02,486 - DEBUG - Pos Mgmt -12987
2018-02-09 11:56:02,487 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020DCE48>, pos=-12987, avgCost=0.95368235>
2018-02-09 11:56:02,487 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 11:56:02,487 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 11:56:02,488 - DEBUG - Position is -12987
2018-02-09 11:56:03,486 - DEBUG - Open Orders requested
2018-02-09 11:56:03,488 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x00000000020DCC50>, order=<ib.ext.Order.Order object at 0x00000000020DCBE0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021711D0>>
2018-02-09 11:56:03,489 - DEBUG - Order OrderID 185
2018-02-09 11:56:03,489 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 11:56:03,490 - DEBUG - Order status PreSubmitted
2018-02-09 11:56:03,490 - DEBUG - Order Identification 185
2018-02-09 11:56:03,490 - DEBUG - Order Identification <class 'int'>
2018-02-09 11:56:03,490 - DEBUG - Profit ID from database is 186
2018-02-09 11:56:03,491 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 11:56:03,491 - DEBUG - Stop ID database is 0
2018-02-09 11:56:03,491 - DEBUG - Entry ID database is 186
2018-02-09 11:56:03,492 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x00000000020DCC50>, order=<ib.ext.Order.Order object at 0x00000000020DCBE0>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002171080>>
2018-02-09 11:56:03,492 - DEBUG - Order OrderID 184
2018-02-09 11:56:03,493 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 11:56:03,493 - DEBUG - Order status PreSubmitted
2018-02-09 11:56:03,493 - DEBUG - Order Identification 184
2018-02-09 11:56:03,494 - DEBUG - Order Identification <class 'int'>
2018-02-09 11:56:03,494 - DEBUG - Profit ID from database is 186
2018-02-09 11:56:03,494 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 11:56:03,494 - DEBUG - Stop ID database is 0
2018-02-09 11:56:03,494 - DEBUG - Entry ID database is 186
2018-02-09 11:56:03,495 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x00000000020DCC50>, order=<ib.ext.Order.Order object at 0x00000000020DCBE0>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002171240>>
2018-02-09 11:56:03,496 - DEBUG - Order OrderID 186
2018-02-09 11:56:03,496 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 11:56:03,497 - DEBUG - Order status PreSubmitted
2018-02-09 11:56:03,497 - DEBUG - Order Identification 186
2018-02-09 11:56:03,497 - DEBUG - Order Identification <class 'int'>
2018-02-09 11:56:03,497 - DEBUG - Profit ID from database is 186
2018-02-09 11:56:03,497 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 11:56:03,498 - DEBUG - Stop ID database is 0
2018-02-09 11:56:03,498 - DEBUG - Entry ID database is 186
2018-02-09 11:56:03,498 - DEBUG - Profit API ID is 186
2018-02-09 11:56:03,498 - DEBUG - Entry API ID is 186
2018-02-09 11:56:05,489 - DEBUG - Connecting to database
2018-02-09 11:56:05,498 - DEBUG - Connected to database
2018-02-09 11:56:05,500 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 11:56:05,500 - DEBUG - Stop loss value is 70.02
2018-02-09 11:56:05,501 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 11:56:05,502 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 11:56:05,503 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 11:56:05,503 - DEBUG - EntryPrice value is 68.725
2018-02-09 11:56:05,505 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 11:56:05,505 - DEBUG - Stop quantity 1
2018-02-09 11:56:05,506 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 11:56:05,507 - DEBUG - Direction is Short
2018-02-09 11:56:05,508 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 11:56:05,508 - DEBUG - Count is 0
2018-02-09 11:56:05,510 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 11:56:05,510 - DEBUG - Stop Loss Flag is 0
2018-02-09 11:56:05,511 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 11:56:05,512 - DEBUG - Max ID Order is (186,)
2018-02-09 11:56:05,512 - DEBUG - Today is 2018-02-09
2018-02-09 11:56:05,512 - DEBUG - Day of the week 4
2018-02-09 11:56:05,513 - DEBUG - Yesterday is 02/08/2018
2018-02-09 11:56:05,513 - DEBUG - In Position is  0
2018-02-09 11:56:05,513 - DEBUG - In Position is  <class 'int'>
2018-02-09 11:56:05,513 - DEBUG - curStopLossFlag is  0
2018-02-09 11:56:05,513 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 11:56:05,514 - DEBUG - Checking if Entry has been filled
2018-02-09 11:56:05,514 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 11:56:05,515 - DEBUG - EntryPend is 1
2018-02-09 11:56:05,515 - DEBUG - Try to Cancel Stop
2018-02-09 11:56:05,516 - DEBUG - Stop API ID 0
2018-02-09 11:56:05,516 - DEBUG - Profit API ID 186
2018-02-09 11:56:05,516 - DEBUG - Stop API ID <class 'int'>
2018-02-09 11:56:05,516 - DEBUG - Profit API ID <class 'int'>
2018-02-09 11:56:05,517 - DEBUG - Pos is 0
2018-02-09 11:56:05,517 - DEBUG - CurCount is 0
2018-02-09 11:56:05,517 - DEBUG - In Pos 0
2018-02-09 11:56:05,517 - DEBUG - Stop ID is 0
2018-02-09 11:56:05,517 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 11:56:05,519 - DEBUG - EntryPend is 1
2018-02-09 11:56:05,519 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 11:56:05,519 - DEBUG - Entry Date is 10
2018-02-09 11:56:05,520 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 11:56:05,520 - DEBUG - Order Profit ID is 186
2018-02-09 11:56:05,520 - DEBUG - Order Entry ID is 186
2018-02-09 11:56:05,520 - DEBUG - API ID is  0
2018-02-09 11:56:05,520 - DEBUG - Current Position is 0
2018-02-09 11:56:05,521 - DEBUG - Current Position is <class 'str'>
2018-02-09 11:56:05,521 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 11:56:05,521 - DEBUG - Time is 11
2018-02-09 11:56:05,521 - DEBUG - Time is <class 'int'>
2018-02-09 11:56:05,522 - DEBUG - Time is 56
2018-02-09 11:56:05,522 - DEBUG - Time is <class 'int'>
2018-02-09 11:56:05,522 - DEBUG - Disconnected from IBController
2018-02-09 11:56:05,522 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 12:01:01,346 - DEBUG - ****************************************************
2018-02-09 12:01:01,347 - DEBUG - Current Time is 12:01PM
2018-02-09 12:01:01,347 - DEBUG - Starting Pos Mgmt H E
2018-02-09 12:01:01,347 - DEBUG - Connecting to database
2018-02-09 12:01:01,380 - DEBUG - Connected to database
2018-02-09 12:01:01,380 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 12:01:01,382 - DEBUG - Order Profit is 186
2018-02-09 12:01:01,382 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 12:01:01,383 - DEBUG - Stop ID is 0
2018-02-09 12:01:01,383 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 12:01:01,385 - DEBUG - Entry ID is 186
2018-02-09 12:01:01,385 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 12:01:01,387 - DEBUG - OCA ID is 1
2018-02-09 12:01:01,387 - DEBUG - Connecting to IBController
2018-02-09 12:01:02,395 - DEBUG - Connected to IBController
2018-02-09 12:01:02,395 - DEBUG - Position requested
2018-02-09 12:01:02,396 - DEBUG - Pos Mgmt -12987
2018-02-09 12:01:02,397 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211CE48>, pos=-12987, avgCost=0.95368235>
2018-02-09 12:01:02,397 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 12:01:02,397 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 12:01:02,398 - DEBUG - Position is -12987
2018-02-09 12:01:03,397 - DEBUG - Open Orders requested
2018-02-09 12:01:03,399 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x000000000211CB00>, order=<ib.ext.Order.Order object at 0x000000000211CBA8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B21D0>>
2018-02-09 12:01:03,400 - DEBUG - Order OrderID 185
2018-02-09 12:01:03,400 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 12:01:03,400 - DEBUG - Order status PreSubmitted
2018-02-09 12:01:03,401 - DEBUG - Order Identification 185
2018-02-09 12:01:03,401 - DEBUG - Order Identification <class 'int'>
2018-02-09 12:01:03,401 - DEBUG - Profit ID from database is 186
2018-02-09 12:01:03,401 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 12:01:03,402 - DEBUG - Stop ID database is 0
2018-02-09 12:01:03,402 - DEBUG - Entry ID database is 186
2018-02-09 12:01:03,403 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x000000000211CB00>, order=<ib.ext.Order.Order object at 0x000000000211CBA8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B2080>>
2018-02-09 12:01:03,403 - DEBUG - Order OrderID 184
2018-02-09 12:01:03,404 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 12:01:03,404 - DEBUG - Order status PreSubmitted
2018-02-09 12:01:03,404 - DEBUG - Order Identification 184
2018-02-09 12:01:03,404 - DEBUG - Order Identification <class 'int'>
2018-02-09 12:01:03,405 - DEBUG - Profit ID from database is 186
2018-02-09 12:01:03,405 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 12:01:03,405 - DEBUG - Stop ID database is 0
2018-02-09 12:01:03,405 - DEBUG - Entry ID database is 186
2018-02-09 12:01:03,406 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x000000000211CB00>, order=<ib.ext.Order.Order object at 0x000000000211CBA8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B2240>>
2018-02-09 12:01:03,407 - DEBUG - Order OrderID 186
2018-02-09 12:01:03,407 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 12:01:03,407 - DEBUG - Order status PreSubmitted
2018-02-09 12:01:03,408 - DEBUG - Order Identification 186
2018-02-09 12:01:03,408 - DEBUG - Order Identification <class 'int'>
2018-02-09 12:01:03,408 - DEBUG - Profit ID from database is 186
2018-02-09 12:01:03,408 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 12:01:03,408 - DEBUG - Stop ID database is 0
2018-02-09 12:01:03,408 - DEBUG - Entry ID database is 186
2018-02-09 12:01:03,409 - DEBUG - Profit API ID is 186
2018-02-09 12:01:03,409 - DEBUG - Entry API ID is 186
2018-02-09 12:01:05,399 - DEBUG - Connecting to database
2018-02-09 12:01:05,406 - DEBUG - Connected to database
2018-02-09 12:01:05,407 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 12:01:05,408 - DEBUG - Stop loss value is 70.02
2018-02-09 12:01:05,409 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 12:01:05,409 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 12:01:05,411 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 12:01:05,411 - DEBUG - EntryPrice value is 68.725
2018-02-09 12:01:05,412 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 12:01:05,413 - DEBUG - Stop quantity 1
2018-02-09 12:01:05,414 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 12:01:05,414 - DEBUG - Direction is Short
2018-02-09 12:01:05,416 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 12:01:05,416 - DEBUG - Count is 0
2018-02-09 12:01:05,417 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 12:01:05,418 - DEBUG - Stop Loss Flag is 0
2018-02-09 12:01:05,419 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 12:01:05,419 - DEBUG - Max ID Order is (186,)
2018-02-09 12:01:05,420 - DEBUG - Today is 2018-02-09
2018-02-09 12:01:05,420 - DEBUG - Day of the week 4
2018-02-09 12:01:05,420 - DEBUG - Yesterday is 02/08/2018
2018-02-09 12:01:05,421 - DEBUG - In Position is  0
2018-02-09 12:01:05,421 - DEBUG - In Position is  <class 'int'>
2018-02-09 12:01:05,421 - DEBUG - curStopLossFlag is  0
2018-02-09 12:01:05,421 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 12:01:05,421 - DEBUG - Checking if Entry has been filled
2018-02-09 12:01:05,422 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 12:01:05,423 - DEBUG - EntryPend is 1
2018-02-09 12:01:05,423 - DEBUG - Try to Cancel Stop
2018-02-09 12:01:05,424 - DEBUG - Stop API ID 0
2018-02-09 12:01:05,424 - DEBUG - Profit API ID 186
2018-02-09 12:01:05,424 - DEBUG - Stop API ID <class 'int'>
2018-02-09 12:01:05,424 - DEBUG - Profit API ID <class 'int'>
2018-02-09 12:01:05,424 - DEBUG - Pos is 0
2018-02-09 12:01:05,425 - DEBUG - CurCount is 0
2018-02-09 12:01:05,425 - DEBUG - In Pos 0
2018-02-09 12:01:05,425 - DEBUG - Stop ID is 0
2018-02-09 12:01:05,425 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 12:01:05,427 - DEBUG - EntryPend is 1
2018-02-09 12:01:05,427 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 12:01:05,427 - DEBUG - Entry Date is 10
2018-02-09 12:01:05,427 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 12:01:05,428 - DEBUG - Order Profit ID is 186
2018-02-09 12:01:05,428 - DEBUG - Order Entry ID is 186
2018-02-09 12:01:05,428 - DEBUG - API ID is  0
2018-02-09 12:01:05,428 - DEBUG - Current Position is 0
2018-02-09 12:01:05,428 - DEBUG - Current Position is <class 'str'>
2018-02-09 12:01:05,429 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 12:01:05,429 - DEBUG - Time is 12
2018-02-09 12:01:05,429 - DEBUG - Time is <class 'int'>
2018-02-09 12:01:05,429 - DEBUG - Time is 1
2018-02-09 12:01:05,430 - DEBUG - Time is <class 'int'>
2018-02-09 12:01:05,430 - DEBUG - Disconnected from IBController
2018-02-09 12:01:05,431 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 12:06:01,344 - DEBUG - ****************************************************
2018-02-09 12:06:01,345 - DEBUG - Current Time is 12:06PM
2018-02-09 12:06:01,345 - DEBUG - Starting Pos Mgmt H E
2018-02-09 12:06:01,345 - DEBUG - Connecting to database
2018-02-09 12:06:01,364 - DEBUG - Connected to database
2018-02-09 12:06:01,365 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 12:06:01,366 - DEBUG - Order Profit is 186
2018-02-09 12:06:01,366 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 12:06:01,368 - DEBUG - Stop ID is 0
2018-02-09 12:06:01,368 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 12:06:01,369 - DEBUG - Entry ID is 186
2018-02-09 12:06:01,370 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 12:06:01,371 - DEBUG - OCA ID is 1
2018-02-09 12:06:01,371 - DEBUG - Connecting to IBController
2018-02-09 12:06:02,379 - DEBUG - Connected to IBController
2018-02-09 12:06:02,379 - DEBUG - Position requested
2018-02-09 12:06:02,380 - DEBUG - Pos Mgmt -12987
2018-02-09 12:06:02,381 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FBDA0>, pos=-12987, avgCost=0.95368235>
2018-02-09 12:06:02,381 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 12:06:02,381 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 12:06:02,382 - DEBUG - Position is -12987
2018-02-09 12:06:03,380 - DEBUG - Open Orders requested
2018-02-09 12:06:03,382 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x00000000020FBE10>, order=<ib.ext.Order.Order object at 0x00000000020FBCC0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021901D0>>
2018-02-09 12:06:03,383 - DEBUG - Order OrderID 185
2018-02-09 12:06:03,383 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 12:06:03,384 - DEBUG - Order status PreSubmitted
2018-02-09 12:06:03,384 - DEBUG - Order Identification 185
2018-02-09 12:06:03,384 - DEBUG - Order Identification <class 'int'>
2018-02-09 12:06:03,384 - DEBUG - Profit ID from database is 186
2018-02-09 12:06:03,385 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 12:06:03,385 - DEBUG - Stop ID database is 0
2018-02-09 12:06:03,385 - DEBUG - Entry ID database is 186
2018-02-09 12:06:03,386 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x00000000020FBE10>, order=<ib.ext.Order.Order object at 0x00000000020FBCC0>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002190048>>
2018-02-09 12:06:03,387 - DEBUG - Order OrderID 184
2018-02-09 12:06:03,387 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 12:06:03,387 - DEBUG - Order status PreSubmitted
2018-02-09 12:06:03,387 - DEBUG - Order Identification 184
2018-02-09 12:06:03,388 - DEBUG - Order Identification <class 'int'>
2018-02-09 12:06:03,388 - DEBUG - Profit ID from database is 186
2018-02-09 12:06:03,388 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 12:06:03,388 - DEBUG - Stop ID database is 0
2018-02-09 12:06:03,388 - DEBUG - Entry ID database is 186
2018-02-09 12:06:03,390 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x00000000020FBE10>, order=<ib.ext.Order.Order object at 0x00000000020FBCC0>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002190240>>
2018-02-09 12:06:03,390 - DEBUG - Order OrderID 186
2018-02-09 12:06:03,390 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 12:06:03,391 - DEBUG - Order status PreSubmitted
2018-02-09 12:06:03,391 - DEBUG - Order Identification 186
2018-02-09 12:06:03,391 - DEBUG - Order Identification <class 'int'>
2018-02-09 12:06:03,391 - DEBUG - Profit ID from database is 186
2018-02-09 12:06:03,391 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 12:06:03,392 - DEBUG - Stop ID database is 0
2018-02-09 12:06:03,392 - DEBUG - Entry ID database is 186
2018-02-09 12:06:03,392 - DEBUG - Profit API ID is 186
2018-02-09 12:06:03,392 - DEBUG - Entry API ID is 186
2018-02-09 12:06:05,383 - DEBUG - Connecting to database
2018-02-09 12:06:05,390 - DEBUG - Connected to database
2018-02-09 12:06:05,391 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 12:06:05,392 - DEBUG - Stop loss value is 70.02
2018-02-09 12:06:05,393 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 12:06:05,394 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 12:06:05,395 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 12:06:05,395 - DEBUG - EntryPrice value is 68.725
2018-02-09 12:06:05,397 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 12:06:05,397 - DEBUG - Stop quantity 1
2018-02-09 12:06:05,399 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 12:06:05,399 - DEBUG - Direction is Short
2018-02-09 12:06:05,400 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 12:06:05,401 - DEBUG - Count is 0
2018-02-09 12:06:05,402 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 12:06:05,402 - DEBUG - Stop Loss Flag is 0
2018-02-09 12:06:05,404 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 12:06:05,404 - DEBUG - Max ID Order is (186,)
2018-02-09 12:06:05,404 - DEBUG - Today is 2018-02-09
2018-02-09 12:06:05,405 - DEBUG - Day of the week 4
2018-02-09 12:06:05,405 - DEBUG - Yesterday is 02/08/2018
2018-02-09 12:06:05,405 - DEBUG - In Position is  0
2018-02-09 12:06:05,406 - DEBUG - In Position is  <class 'int'>
2018-02-09 12:06:05,406 - DEBUG - curStopLossFlag is  0
2018-02-09 12:06:05,406 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 12:06:05,406 - DEBUG - Checking if Entry has been filled
2018-02-09 12:06:05,406 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 12:06:05,408 - DEBUG - EntryPend is 1
2018-02-09 12:06:05,408 - DEBUG - Try to Cancel Stop
2018-02-09 12:06:05,408 - DEBUG - Stop API ID 0
2018-02-09 12:06:05,408 - DEBUG - Profit API ID 186
2018-02-09 12:06:05,409 - DEBUG - Stop API ID <class 'int'>
2018-02-09 12:06:05,409 - DEBUG - Profit API ID <class 'int'>
2018-02-09 12:06:05,409 - DEBUG - Pos is 0
2018-02-09 12:06:05,409 - DEBUG - CurCount is 0
2018-02-09 12:06:05,410 - DEBUG - In Pos 0
2018-02-09 12:06:05,410 - DEBUG - Stop ID is 0
2018-02-09 12:06:05,410 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 12:06:05,411 - DEBUG - EntryPend is 1
2018-02-09 12:06:05,412 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 12:06:05,412 - DEBUG - Entry Date is 10
2018-02-09 12:06:05,412 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 12:06:05,412 - DEBUG - Order Profit ID is 186
2018-02-09 12:06:05,412 - DEBUG - Order Entry ID is 186
2018-02-09 12:06:05,413 - DEBUG - API ID is  0
2018-02-09 12:06:05,413 - DEBUG - Current Position is 0
2018-02-09 12:06:05,413 - DEBUG - Current Position is <class 'str'>
2018-02-09 12:06:05,413 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 12:06:05,414 - DEBUG - Time is 12
2018-02-09 12:06:05,414 - DEBUG - Time is <class 'int'>
2018-02-09 12:06:05,414 - DEBUG - Time is 6
2018-02-09 12:06:05,414 - DEBUG - Time is <class 'int'>
2018-02-09 12:06:05,414 - DEBUG - Disconnected from IBController
2018-02-09 12:06:05,416 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 12:11:01,348 - DEBUG - ****************************************************
2018-02-09 12:11:01,349 - DEBUG - Current Time is 12:11PM
2018-02-09 12:11:01,349 - DEBUG - Starting Pos Mgmt H E
2018-02-09 12:11:01,349 - DEBUG - Connecting to database
2018-02-09 12:11:01,393 - DEBUG - Connected to database
2018-02-09 12:11:01,393 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 12:11:01,394 - DEBUG - Order Profit is 186
2018-02-09 12:11:01,395 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 12:11:01,396 - DEBUG - Stop ID is 0
2018-02-09 12:11:01,396 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 12:11:01,397 - DEBUG - Entry ID is 186
2018-02-09 12:11:01,398 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 12:11:01,399 - DEBUG - OCA ID is 1
2018-02-09 12:11:01,400 - DEBUG - Connecting to IBController
2018-02-09 12:11:02,405 - DEBUG - Connected to IBController
2018-02-09 12:11:02,405 - DEBUG - Position requested
2018-02-09 12:11:02,406 - DEBUG - Pos Mgmt -12987
2018-02-09 12:11:02,407 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020ADD68>, pos=-12987, avgCost=0.95368235>
2018-02-09 12:11:02,407 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 12:11:02,407 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 12:11:02,408 - DEBUG - Position is -12987
2018-02-09 12:11:03,406 - DEBUG - Open Orders requested
2018-02-09 12:11:03,408 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x00000000020ADC88>, order=<ib.ext.Order.Order object at 0x00000000020ADAC8>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002142160>>
2018-02-09 12:11:03,409 - DEBUG - Order OrderID 185
2018-02-09 12:11:03,409 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 12:11:03,410 - DEBUG - Order status PreSubmitted
2018-02-09 12:11:03,410 - DEBUG - Order Identification 185
2018-02-09 12:11:03,410 - DEBUG - Order Identification <class 'int'>
2018-02-09 12:11:03,410 - DEBUG - Profit ID from database is 186
2018-02-09 12:11:03,411 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 12:11:03,411 - DEBUG - Stop ID database is 0
2018-02-09 12:11:03,411 - DEBUG - Entry ID database is 186
2018-02-09 12:11:03,412 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x00000000020ADC88>, order=<ib.ext.Order.Order object at 0x00000000020ADAC8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021421D0>>
2018-02-09 12:11:03,412 - DEBUG - Order OrderID 184
2018-02-09 12:11:03,413 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 12:11:03,413 - DEBUG - Order status PreSubmitted
2018-02-09 12:11:03,413 - DEBUG - Order Identification 184
2018-02-09 12:11:03,414 - DEBUG - Order Identification <class 'int'>
2018-02-09 12:11:03,414 - DEBUG - Profit ID from database is 186
2018-02-09 12:11:03,414 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 12:11:03,414 - DEBUG - Stop ID database is 0
2018-02-09 12:11:03,414 - DEBUG - Entry ID database is 186
2018-02-09 12:11:03,416 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x00000000020ADC88>, order=<ib.ext.Order.Order object at 0x00000000020ADAC8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021422B0>>
2018-02-09 12:11:03,416 - DEBUG - Order OrderID 186
2018-02-09 12:11:03,416 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 12:11:03,417 - DEBUG - Order status PreSubmitted
2018-02-09 12:11:03,417 - DEBUG - Order Identification 186
2018-02-09 12:11:03,417 - DEBUG - Order Identification <class 'int'>
2018-02-09 12:11:03,417 - DEBUG - Profit ID from database is 186
2018-02-09 12:11:03,417 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 12:11:03,418 - DEBUG - Stop ID database is 0
2018-02-09 12:11:03,418 - DEBUG - Entry ID database is 186
2018-02-09 12:11:03,418 - DEBUG - Profit API ID is 186
2018-02-09 12:11:03,418 - DEBUG - Entry API ID is 186
2018-02-09 12:11:05,407 - DEBUG - Connecting to database
2018-02-09 12:11:05,414 - DEBUG - Connected to database
2018-02-09 12:11:05,416 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 12:11:05,416 - DEBUG - Stop loss value is 70.02
2018-02-09 12:11:05,417 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 12:11:05,418 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 12:11:05,419 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 12:11:05,419 - DEBUG - EntryPrice value is 68.725
2018-02-09 12:11:05,421 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 12:11:05,421 - DEBUG - Stop quantity 1
2018-02-09 12:11:05,422 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 12:11:05,423 - DEBUG - Direction is Short
2018-02-09 12:11:05,424 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 12:11:05,424 - DEBUG - Count is 0
2018-02-09 12:11:05,426 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 12:11:05,426 - DEBUG - Stop Loss Flag is 0
2018-02-09 12:11:05,427 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 12:11:05,428 - DEBUG - Max ID Order is (186,)
2018-02-09 12:11:05,428 - DEBUG - Today is 2018-02-09
2018-02-09 12:11:05,428 - DEBUG - Day of the week 4
2018-02-09 12:11:05,429 - DEBUG - Yesterday is 02/08/2018
2018-02-09 12:11:05,429 - DEBUG - In Position is  0
2018-02-09 12:11:05,429 - DEBUG - In Position is  <class 'int'>
2018-02-09 12:11:05,429 - DEBUG - curStopLossFlag is  0
2018-02-09 12:11:05,430 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 12:11:05,430 - DEBUG - Checking if Entry has been filled
2018-02-09 12:11:05,430 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 12:11:05,431 - DEBUG - EntryPend is 1
2018-02-09 12:11:05,432 - DEBUG - Try to Cancel Stop
2018-02-09 12:11:05,432 - DEBUG - Stop API ID 0
2018-02-09 12:11:05,432 - DEBUG - Profit API ID 186
2018-02-09 12:11:05,432 - DEBUG - Stop API ID <class 'int'>
2018-02-09 12:11:05,433 - DEBUG - Profit API ID <class 'int'>
2018-02-09 12:11:05,433 - DEBUG - Pos is 0
2018-02-09 12:11:05,433 - DEBUG - CurCount is 0
2018-02-09 12:11:05,433 - DEBUG - In Pos 0
2018-02-09 12:11:05,433 - DEBUG - Stop ID is 0
2018-02-09 12:11:05,434 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 12:11:05,435 - DEBUG - EntryPend is 1
2018-02-09 12:11:05,435 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 12:11:05,435 - DEBUG - Entry Date is 10
2018-02-09 12:11:05,436 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 12:11:05,436 - DEBUG - Order Profit ID is 186
2018-02-09 12:11:05,436 - DEBUG - Order Entry ID is 186
2018-02-09 12:11:05,436 - DEBUG - API ID is  0
2018-02-09 12:11:05,437 - DEBUG - Current Position is 0
2018-02-09 12:11:05,437 - DEBUG - Current Position is <class 'str'>
2018-02-09 12:11:05,437 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 12:11:05,437 - DEBUG - Time is 12
2018-02-09 12:11:05,437 - DEBUG - Time is <class 'int'>
2018-02-09 12:11:05,438 - DEBUG - Time is 11
2018-02-09 12:11:05,438 - DEBUG - Time is <class 'int'>
2018-02-09 12:11:05,438 - DEBUG - Disconnected from IBController
2018-02-09 12:11:05,439 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 12:16:01,351 - DEBUG - ****************************************************
2018-02-09 12:16:01,351 - DEBUG - Current Time is 12:16PM
2018-02-09 12:16:01,352 - DEBUG - Starting Pos Mgmt H E
2018-02-09 12:16:01,352 - DEBUG - Connecting to database
2018-02-09 12:16:01,429 - DEBUG - Connected to database
2018-02-09 12:16:01,429 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 12:16:01,431 - DEBUG - Order Profit is 186
2018-02-09 12:16:01,431 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 12:16:01,433 - DEBUG - Stop ID is 0
2018-02-09 12:16:01,433 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 12:16:01,434 - DEBUG - Entry ID is 186
2018-02-09 12:16:01,435 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 12:16:01,436 - DEBUG - OCA ID is 1
2018-02-09 12:16:01,437 - DEBUG - Connecting to IBController
2018-02-09 12:16:02,444 - DEBUG - Connected to IBController
2018-02-09 12:16:02,444 - DEBUG - Position requested
2018-02-09 12:16:02,445 - DEBUG - Pos Mgmt -12987
2018-02-09 12:16:02,446 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000217DE48>, pos=-12987, avgCost=0.95368235>
2018-02-09 12:16:02,446 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 12:16:02,446 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 12:16:02,447 - DEBUG - Position is -12987
2018-02-09 12:16:03,446 - DEBUG - Open Orders requested
2018-02-09 12:16:03,448 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x000000000217DC50>, order=<ib.ext.Order.Order object at 0x000000000217DAC8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000022111D0>>
2018-02-09 12:16:03,448 - DEBUG - Order OrderID 185
2018-02-09 12:16:03,449 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 12:16:03,449 - DEBUG - Order status PreSubmitted
2018-02-09 12:16:03,449 - DEBUG - Order Identification 185
2018-02-09 12:16:03,450 - DEBUG - Order Identification <class 'int'>
2018-02-09 12:16:03,450 - DEBUG - Profit ID from database is 186
2018-02-09 12:16:03,450 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 12:16:03,450 - DEBUG - Stop ID database is 0
2018-02-09 12:16:03,451 - DEBUG - Entry ID database is 186
2018-02-09 12:16:03,460 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x000000000217DC50>, order=<ib.ext.Order.Order object at 0x000000000217DAC8>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002211080>>
2018-02-09 12:16:03,461 - DEBUG - Order OrderID 184
2018-02-09 12:16:03,461 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 12:16:03,462 - DEBUG - Order status PreSubmitted
2018-02-09 12:16:03,462 - DEBUG - Order Identification 184
2018-02-09 12:16:03,462 - DEBUG - Order Identification <class 'int'>
2018-02-09 12:16:03,462 - DEBUG - Profit ID from database is 186
2018-02-09 12:16:03,463 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 12:16:03,463 - DEBUG - Stop ID database is 0
2018-02-09 12:16:03,463 - DEBUG - Entry ID database is 186
2018-02-09 12:16:03,464 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x000000000217DC50>, order=<ib.ext.Order.Order object at 0x000000000217DAC8>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002211240>>
2018-02-09 12:16:03,465 - DEBUG - Order OrderID 186
2018-02-09 12:16:03,465 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 12:16:03,465 - DEBUG - Order status PreSubmitted
2018-02-09 12:16:03,466 - DEBUG - Order Identification 186
2018-02-09 12:16:03,466 - DEBUG - Order Identification <class 'int'>
2018-02-09 12:16:03,466 - DEBUG - Profit ID from database is 186
2018-02-09 12:16:03,466 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 12:16:03,467 - DEBUG - Stop ID database is 0
2018-02-09 12:16:03,467 - DEBUG - Entry ID database is 186
2018-02-09 12:16:03,467 - DEBUG - Profit API ID is 186
2018-02-09 12:16:03,467 - DEBUG - Entry API ID is 186
2018-02-09 12:16:05,448 - DEBUG - Connecting to database
2018-02-09 12:16:05,455 - DEBUG - Connected to database
2018-02-09 12:16:05,457 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 12:16:05,457 - DEBUG - Stop loss value is 70.02
2018-02-09 12:16:05,459 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 12:16:05,459 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 12:16:05,460 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 12:16:05,461 - DEBUG - EntryPrice value is 68.725
2018-02-09 12:16:05,462 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 12:16:05,462 - DEBUG - Stop quantity 1
2018-02-09 12:16:05,464 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 12:16:05,464 - DEBUG - Direction is Short
2018-02-09 12:16:05,465 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 12:16:05,466 - DEBUG - Count is 0
2018-02-09 12:16:05,467 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 12:16:05,467 - DEBUG - Stop Loss Flag is 0
2018-02-09 12:16:05,469 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 12:16:05,469 - DEBUG - Max ID Order is (186,)
2018-02-09 12:16:05,470 - DEBUG - Today is 2018-02-09
2018-02-09 12:16:05,470 - DEBUG - Day of the week 4
2018-02-09 12:16:05,470 - DEBUG - Yesterday is 02/08/2018
2018-02-09 12:16:05,471 - DEBUG - In Position is  0
2018-02-09 12:16:05,471 - DEBUG - In Position is  <class 'int'>
2018-02-09 12:16:05,471 - DEBUG - curStopLossFlag is  0
2018-02-09 12:16:05,471 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 12:16:05,471 - DEBUG - Checking if Entry has been filled
2018-02-09 12:16:05,472 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 12:16:05,473 - DEBUG - EntryPend is 1
2018-02-09 12:16:05,473 - DEBUG - Try to Cancel Stop
2018-02-09 12:16:05,474 - DEBUG - Stop API ID 0
2018-02-09 12:16:05,474 - DEBUG - Profit API ID 186
2018-02-09 12:16:05,474 - DEBUG - Stop API ID <class 'int'>
2018-02-09 12:16:05,474 - DEBUG - Profit API ID <class 'int'>
2018-02-09 12:16:05,475 - DEBUG - Pos is 0
2018-02-09 12:16:05,475 - DEBUG - CurCount is 0
2018-02-09 12:16:05,475 - DEBUG - In Pos 0
2018-02-09 12:16:05,475 - DEBUG - Stop ID is 0
2018-02-09 12:16:05,476 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 12:16:05,477 - DEBUG - EntryPend is 1
2018-02-09 12:16:05,477 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 12:16:05,477 - DEBUG - Entry Date is 10
2018-02-09 12:16:05,478 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 12:16:05,478 - DEBUG - Order Profit ID is 186
2018-02-09 12:16:05,478 - DEBUG - Order Entry ID is 186
2018-02-09 12:16:05,478 - DEBUG - API ID is  0
2018-02-09 12:16:05,478 - DEBUG - Current Position is 0
2018-02-09 12:16:05,479 - DEBUG - Current Position is <class 'str'>
2018-02-09 12:16:05,479 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 12:16:05,479 - DEBUG - Time is 12
2018-02-09 12:16:05,479 - DEBUG - Time is <class 'int'>
2018-02-09 12:16:05,480 - DEBUG - Time is 16
2018-02-09 12:16:05,480 - DEBUG - Time is <class 'int'>
2018-02-09 12:16:05,480 - DEBUG - Disconnected from IBController
2018-02-09 12:16:05,481 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 12:21:01,348 - DEBUG - ****************************************************
2018-02-09 12:21:01,348 - DEBUG - Current Time is 12:21PM
2018-02-09 12:21:01,349 - DEBUG - Starting Pos Mgmt H E
2018-02-09 12:21:01,349 - DEBUG - Connecting to database
2018-02-09 12:21:01,387 - DEBUG - Connected to database
2018-02-09 12:21:01,388 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 12:21:01,389 - DEBUG - Order Profit is 186
2018-02-09 12:21:01,389 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 12:21:01,391 - DEBUG - Stop ID is 0
2018-02-09 12:21:01,391 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 12:21:01,392 - DEBUG - Entry ID is 186
2018-02-09 12:21:01,393 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 12:21:01,394 - DEBUG - OCA ID is 1
2018-02-09 12:21:01,395 - DEBUG - Connecting to IBController
2018-02-09 12:21:02,402 - DEBUG - Connected to IBController
2018-02-09 12:21:02,402 - DEBUG - Position requested
2018-02-09 12:21:02,403 - DEBUG - Pos Mgmt -12987
2018-02-09 12:21:02,404 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211DE48>, pos=-12987, avgCost=0.95368235>
2018-02-09 12:21:02,404 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 12:21:02,404 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 12:21:02,405 - DEBUG - Position is -12987
2018-02-09 12:21:03,404 - DEBUG - Open Orders requested
2018-02-09 12:21:03,406 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x000000000211DB00>, order=<ib.ext.Order.Order object at 0x000000000211DDA0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B11D0>>
2018-02-09 12:21:03,407 - DEBUG - Order OrderID 185
2018-02-09 12:21:03,407 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 12:21:03,407 - DEBUG - Order status PreSubmitted
2018-02-09 12:21:03,408 - DEBUG - Order Identification 185
2018-02-09 12:21:03,408 - DEBUG - Order Identification <class 'int'>
2018-02-09 12:21:03,408 - DEBUG - Profit ID from database is 186
2018-02-09 12:21:03,408 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 12:21:03,409 - DEBUG - Stop ID database is 0
2018-02-09 12:21:03,409 - DEBUG - Entry ID database is 186
2018-02-09 12:21:03,410 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x000000000211DB00>, order=<ib.ext.Order.Order object at 0x000000000211DDA0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B1080>>
2018-02-09 12:21:03,410 - DEBUG - Order OrderID 184
2018-02-09 12:21:03,411 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 12:21:03,411 - DEBUG - Order status PreSubmitted
2018-02-09 12:21:03,411 - DEBUG - Order Identification 184
2018-02-09 12:21:03,411 - DEBUG - Order Identification <class 'int'>
2018-02-09 12:21:03,412 - DEBUG - Profit ID from database is 186
2018-02-09 12:21:03,412 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 12:21:03,412 - DEBUG - Stop ID database is 0
2018-02-09 12:21:03,412 - DEBUG - Entry ID database is 186
2018-02-09 12:21:03,413 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x000000000211DB00>, order=<ib.ext.Order.Order object at 0x000000000211DDA0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B1240>>
2018-02-09 12:21:03,414 - DEBUG - Order OrderID 186
2018-02-09 12:21:03,414 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 12:21:03,414 - DEBUG - Order status PreSubmitted
2018-02-09 12:21:03,415 - DEBUG - Order Identification 186
2018-02-09 12:21:03,415 - DEBUG - Order Identification <class 'int'>
2018-02-09 12:21:03,415 - DEBUG - Profit ID from database is 186
2018-02-09 12:21:03,415 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 12:21:03,416 - DEBUG - Stop ID database is 0
2018-02-09 12:21:03,416 - DEBUG - Entry ID database is 186
2018-02-09 12:21:03,416 - DEBUG - Profit API ID is 186
2018-02-09 12:21:03,416 - DEBUG - Entry API ID is 186
2018-02-09 12:21:05,406 - DEBUG - Connecting to database
2018-02-09 12:21:05,413 - DEBUG - Connected to database
2018-02-09 12:21:05,414 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 12:21:05,415 - DEBUG - Stop loss value is 70.02
2018-02-09 12:21:05,416 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 12:21:05,417 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 12:21:05,418 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 12:21:05,418 - DEBUG - EntryPrice value is 68.725
2018-02-09 12:21:05,420 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 12:21:05,420 - DEBUG - Stop quantity 1
2018-02-09 12:21:05,421 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 12:21:05,422 - DEBUG - Direction is Short
2018-02-09 12:21:05,423 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 12:21:05,423 - DEBUG - Count is 0
2018-02-09 12:21:05,425 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 12:21:05,425 - DEBUG - Stop Loss Flag is 0
2018-02-09 12:21:05,426 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 12:21:05,427 - DEBUG - Max ID Order is (186,)
2018-02-09 12:21:05,427 - DEBUG - Today is 2018-02-09
2018-02-09 12:21:05,427 - DEBUG - Day of the week 4
2018-02-09 12:21:05,428 - DEBUG - Yesterday is 02/08/2018
2018-02-09 12:21:05,428 - DEBUG - In Position is  0
2018-02-09 12:21:05,428 - DEBUG - In Position is  <class 'int'>
2018-02-09 12:21:05,428 - DEBUG - curStopLossFlag is  0
2018-02-09 12:21:05,429 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 12:21:05,429 - DEBUG - Checking if Entry has been filled
2018-02-09 12:21:05,429 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 12:21:05,430 - DEBUG - EntryPend is 1
2018-02-09 12:21:05,431 - DEBUG - Try to Cancel Stop
2018-02-09 12:21:05,431 - DEBUG - Stop API ID 0
2018-02-09 12:21:05,431 - DEBUG - Profit API ID 186
2018-02-09 12:21:05,431 - DEBUG - Stop API ID <class 'int'>
2018-02-09 12:21:05,432 - DEBUG - Profit API ID <class 'int'>
2018-02-09 12:21:05,432 - DEBUG - Pos is 0
2018-02-09 12:21:05,432 - DEBUG - CurCount is 0
2018-02-09 12:21:05,432 - DEBUG - In Pos 0
2018-02-09 12:21:05,433 - DEBUG - Stop ID is 0
2018-02-09 12:21:05,433 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 12:21:05,434 - DEBUG - EntryPend is 1
2018-02-09 12:21:05,434 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 12:21:05,435 - DEBUG - Entry Date is 10
2018-02-09 12:21:05,435 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 12:21:05,435 - DEBUG - Order Profit ID is 186
2018-02-09 12:21:05,435 - DEBUG - Order Entry ID is 186
2018-02-09 12:21:05,435 - DEBUG - API ID is  0
2018-02-09 12:21:05,436 - DEBUG - Current Position is 0
2018-02-09 12:21:05,436 - DEBUG - Current Position is <class 'str'>
2018-02-09 12:21:05,436 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 12:21:05,436 - DEBUG - Time is 12
2018-02-09 12:21:05,437 - DEBUG - Time is <class 'int'>
2018-02-09 12:21:05,437 - DEBUG - Time is 21
2018-02-09 12:21:05,437 - DEBUG - Time is <class 'int'>
2018-02-09 12:21:05,437 - DEBUG - Disconnected from IBController
2018-02-09 12:21:05,438 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 12:26:01,352 - DEBUG - ****************************************************
2018-02-09 12:26:01,353 - DEBUG - Current Time is 12:26PM
2018-02-09 12:26:01,353 - DEBUG - Starting Pos Mgmt H E
2018-02-09 12:26:01,353 - DEBUG - Connecting to database
2018-02-09 12:26:01,440 - DEBUG - Connected to database
2018-02-09 12:26:01,441 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 12:26:01,442 - DEBUG - Order Profit is 186
2018-02-09 12:26:01,443 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 12:26:01,444 - DEBUG - Stop ID is 0
2018-02-09 12:26:01,444 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 12:26:01,446 - DEBUG - Entry ID is 186
2018-02-09 12:26:01,446 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 12:26:01,448 - DEBUG - OCA ID is 1
2018-02-09 12:26:01,448 - DEBUG - Connecting to IBController
2018-02-09 12:26:02,453 - DEBUG - Connected to IBController
2018-02-09 12:26:02,453 - DEBUG - Position requested
2018-02-09 12:26:02,454 - DEBUG - Pos Mgmt -12987
2018-02-09 12:26:02,455 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020CDE48>, pos=-12987, avgCost=0.95368235>
2018-02-09 12:26:02,455 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 12:26:02,455 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 12:26:02,455 - DEBUG - Position is -12987
2018-02-09 12:26:03,454 - DEBUG - Open Orders requested
2018-02-09 12:26:03,455 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x00000000020CDC18>, order=<ib.ext.Order.Order object at 0x00000000020CDCF8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021611D0>>
2018-02-09 12:26:03,456 - DEBUG - Order OrderID 185
2018-02-09 12:26:03,457 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 12:26:03,457 - DEBUG - Order status PreSubmitted
2018-02-09 12:26:03,457 - DEBUG - Order Identification 185
2018-02-09 12:26:03,458 - DEBUG - Order Identification <class 'int'>
2018-02-09 12:26:03,458 - DEBUG - Profit ID from database is 186
2018-02-09 12:26:03,458 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 12:26:03,458 - DEBUG - Stop ID database is 0
2018-02-09 12:26:03,459 - DEBUG - Entry ID database is 186
2018-02-09 12:26:03,467 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x00000000020CDC18>, order=<ib.ext.Order.Order object at 0x00000000020CDCF8>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002161080>>
2018-02-09 12:26:03,468 - DEBUG - Order OrderID 184
2018-02-09 12:26:03,468 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 12:26:03,468 - DEBUG - Order status PreSubmitted
2018-02-09 12:26:03,469 - DEBUG - Order Identification 184
2018-02-09 12:26:03,469 - DEBUG - Order Identification <class 'int'>
2018-02-09 12:26:03,469 - DEBUG - Profit ID from database is 186
2018-02-09 12:26:03,469 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 12:26:03,470 - DEBUG - Stop ID database is 0
2018-02-09 12:26:03,470 - DEBUG - Entry ID database is 186
2018-02-09 12:26:03,471 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x00000000020CDC18>, order=<ib.ext.Order.Order object at 0x00000000020CDCF8>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002161240>>
2018-02-09 12:26:03,471 - DEBUG - Order OrderID 186
2018-02-09 12:26:03,472 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 12:26:03,472 - DEBUG - Order status PreSubmitted
2018-02-09 12:26:03,472 - DEBUG - Order Identification 186
2018-02-09 12:26:03,473 - DEBUG - Order Identification <class 'int'>
2018-02-09 12:26:03,473 - DEBUG - Profit ID from database is 186
2018-02-09 12:26:03,473 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 12:26:03,473 - DEBUG - Stop ID database is 0
2018-02-09 12:26:03,473 - DEBUG - Entry ID database is 186
2018-02-09 12:26:03,474 - DEBUG - Profit API ID is 186
2018-02-09 12:26:03,474 - DEBUG - Entry API ID is 186
2018-02-09 12:26:05,456 - DEBUG - Connecting to database
2018-02-09 12:26:05,463 - DEBUG - Connected to database
2018-02-09 12:26:05,465 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 12:26:05,465 - DEBUG - Stop loss value is 70.02
2018-02-09 12:26:05,467 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 12:26:05,467 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 12:26:05,468 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 12:26:05,469 - DEBUG - EntryPrice value is 68.725
2018-02-09 12:26:05,470 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 12:26:05,470 - DEBUG - Stop quantity 1
2018-02-09 12:26:05,472 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 12:26:05,472 - DEBUG - Direction is Short
2018-02-09 12:26:05,473 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 12:26:05,474 - DEBUG - Count is 0
2018-02-09 12:26:05,475 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 12:26:05,475 - DEBUG - Stop Loss Flag is 0
2018-02-09 12:26:05,477 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 12:26:05,477 - DEBUG - Max ID Order is (186,)
2018-02-09 12:26:05,477 - DEBUG - Today is 2018-02-09
2018-02-09 12:26:05,478 - DEBUG - Day of the week 4
2018-02-09 12:26:05,478 - DEBUG - Yesterday is 02/08/2018
2018-02-09 12:26:05,478 - DEBUG - In Position is  0
2018-02-09 12:26:05,478 - DEBUG - In Position is  <class 'int'>
2018-02-09 12:26:05,479 - DEBUG - curStopLossFlag is  0
2018-02-09 12:26:05,479 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 12:26:05,479 - DEBUG - Checking if Entry has been filled
2018-02-09 12:26:05,479 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 12:26:05,481 - DEBUG - EntryPend is 1
2018-02-09 12:26:05,481 - DEBUG - Try to Cancel Stop
2018-02-09 12:26:05,481 - DEBUG - Stop API ID 0
2018-02-09 12:26:05,481 - DEBUG - Profit API ID 186
2018-02-09 12:26:05,482 - DEBUG - Stop API ID <class 'int'>
2018-02-09 12:26:05,482 - DEBUG - Profit API ID <class 'int'>
2018-02-09 12:26:05,482 - DEBUG - Pos is 0
2018-02-09 12:26:05,482 - DEBUG - CurCount is 0
2018-02-09 12:26:05,483 - DEBUG - In Pos 0
2018-02-09 12:26:05,483 - DEBUG - Stop ID is 0
2018-02-09 12:26:05,483 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 12:26:05,484 - DEBUG - EntryPend is 1
2018-02-09 12:26:05,485 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 12:26:05,485 - DEBUG - Entry Date is 10
2018-02-09 12:26:05,485 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 12:26:05,485 - DEBUG - Order Profit ID is 186
2018-02-09 12:26:05,486 - DEBUG - Order Entry ID is 186
2018-02-09 12:26:05,486 - DEBUG - API ID is  0
2018-02-09 12:26:05,486 - DEBUG - Current Position is 0
2018-02-09 12:26:05,486 - DEBUG - Current Position is <class 'str'>
2018-02-09 12:26:05,486 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 12:26:05,487 - DEBUG - Time is 12
2018-02-09 12:26:05,487 - DEBUG - Time is <class 'int'>
2018-02-09 12:26:05,487 - DEBUG - Time is 26
2018-02-09 12:26:05,487 - DEBUG - Time is <class 'int'>
2018-02-09 12:26:05,488 - DEBUG - Disconnected from IBController
2018-02-09 12:26:05,488 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 12:31:01,346 - DEBUG - ****************************************************
2018-02-09 12:31:01,347 - DEBUG - Current Time is 12:31PM
2018-02-09 12:31:01,347 - DEBUG - Starting Pos Mgmt H E
2018-02-09 12:31:01,347 - DEBUG - Connecting to database
2018-02-09 12:31:01,413 - DEBUG - Connected to database
2018-02-09 12:31:01,413 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 12:31:01,415 - DEBUG - Order Profit is 186
2018-02-09 12:31:01,415 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 12:31:01,417 - DEBUG - Stop ID is 0
2018-02-09 12:31:01,417 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 12:31:01,418 - DEBUG - Entry ID is 186
2018-02-09 12:31:01,418 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 12:31:01,420 - DEBUG - OCA ID is 1
2018-02-09 12:31:01,420 - DEBUG - Connecting to IBController
2018-02-09 12:31:02,428 - DEBUG - Connected to IBController
2018-02-09 12:31:02,428 - DEBUG - Position requested
2018-02-09 12:31:02,429 - DEBUG - Pos Mgmt -12987
2018-02-09 12:31:02,430 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210CC50>, pos=-12987, avgCost=0.95368235>
2018-02-09 12:31:02,430 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 12:31:02,430 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 12:31:02,430 - DEBUG - Position is -12987
2018-02-09 12:31:03,429 - DEBUG - Open Orders requested
2018-02-09 12:31:03,430 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x000000000210CD68>, order=<ib.ext.Order.Order object at 0x000000000210CC18>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A21D0>>
2018-02-09 12:31:03,431 - DEBUG - Order OrderID 185
2018-02-09 12:31:03,432 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 12:31:03,432 - DEBUG - Order status PreSubmitted
2018-02-09 12:31:03,432 - DEBUG - Order Identification 185
2018-02-09 12:31:03,432 - DEBUG - Order Identification <class 'int'>
2018-02-09 12:31:03,433 - DEBUG - Profit ID from database is 186
2018-02-09 12:31:03,433 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 12:31:03,433 - DEBUG - Stop ID database is 0
2018-02-09 12:31:03,433 - DEBUG - Entry ID database is 186
2018-02-09 12:31:03,435 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x000000000210CD68>, order=<ib.ext.Order.Order object at 0x000000000210CC18>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A2048>>
2018-02-09 12:31:03,435 - DEBUG - Order OrderID 184
2018-02-09 12:31:03,435 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 12:31:03,436 - DEBUG - Order status PreSubmitted
2018-02-09 12:31:03,436 - DEBUG - Order Identification 184
2018-02-09 12:31:03,436 - DEBUG - Order Identification <class 'int'>
2018-02-09 12:31:03,436 - DEBUG - Profit ID from database is 186
2018-02-09 12:31:03,436 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 12:31:03,437 - DEBUG - Stop ID database is 0
2018-02-09 12:31:03,437 - DEBUG - Entry ID database is 186
2018-02-09 12:31:03,438 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x000000000210CD68>, order=<ib.ext.Order.Order object at 0x000000000210CC18>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A2240>>
2018-02-09 12:31:03,438 - DEBUG - Order OrderID 186
2018-02-09 12:31:03,439 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 12:31:03,439 - DEBUG - Order status PreSubmitted
2018-02-09 12:31:03,439 - DEBUG - Order Identification 186
2018-02-09 12:31:03,440 - DEBUG - Order Identification <class 'int'>
2018-02-09 12:31:03,440 - DEBUG - Profit ID from database is 186
2018-02-09 12:31:03,440 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 12:31:03,440 - DEBUG - Stop ID database is 0
2018-02-09 12:31:03,440 - DEBUG - Entry ID database is 186
2018-02-09 12:31:03,441 - DEBUG - Profit API ID is 186
2018-02-09 12:31:03,441 - DEBUG - Entry API ID is 186
2018-02-09 12:31:05,431 - DEBUG - Connecting to database
2018-02-09 12:31:05,438 - DEBUG - Connected to database
2018-02-09 12:31:05,440 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 12:31:05,440 - DEBUG - Stop loss value is 70.02
2018-02-09 12:31:05,441 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 12:31:05,442 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 12:31:05,443 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 12:31:05,444 - DEBUG - EntryPrice value is 68.725
2018-02-09 12:31:05,445 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 12:31:05,445 - DEBUG - Stop quantity 1
2018-02-09 12:31:05,447 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 12:31:05,447 - DEBUG - Direction is Short
2018-02-09 12:31:05,448 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 12:31:05,449 - DEBUG - Count is 0
2018-02-09 12:31:05,450 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 12:31:05,450 - DEBUG - Stop Loss Flag is 0
2018-02-09 12:31:05,451 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 12:31:05,452 - DEBUG - Max ID Order is (186,)
2018-02-09 12:31:05,452 - DEBUG - Today is 2018-02-09
2018-02-09 12:31:05,453 - DEBUG - Day of the week 4
2018-02-09 12:31:05,453 - DEBUG - Yesterday is 02/08/2018
2018-02-09 12:31:05,453 - DEBUG - In Position is  0
2018-02-09 12:31:05,453 - DEBUG - In Position is  <class 'int'>
2018-02-09 12:31:05,453 - DEBUG - curStopLossFlag is  0
2018-02-09 12:31:05,454 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 12:31:05,454 - DEBUG - Checking if Entry has been filled
2018-02-09 12:31:05,454 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 12:31:05,456 - DEBUG - EntryPend is 1
2018-02-09 12:31:05,456 - DEBUG - Try to Cancel Stop
2018-02-09 12:31:05,456 - DEBUG - Stop API ID 0
2018-02-09 12:31:05,456 - DEBUG - Profit API ID 186
2018-02-09 12:31:05,457 - DEBUG - Stop API ID <class 'int'>
2018-02-09 12:31:05,457 - DEBUG - Profit API ID <class 'int'>
2018-02-09 12:31:05,457 - DEBUG - Pos is 0
2018-02-09 12:31:05,457 - DEBUG - CurCount is 0
2018-02-09 12:31:05,458 - DEBUG - In Pos 0
2018-02-09 12:31:05,458 - DEBUG - Stop ID is 0
2018-02-09 12:31:05,458 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 12:31:05,459 - DEBUG - EntryPend is 1
2018-02-09 12:31:05,460 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 12:31:05,460 - DEBUG - Entry Date is 10
2018-02-09 12:31:05,460 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 12:31:05,460 - DEBUG - Order Profit ID is 186
2018-02-09 12:31:05,460 - DEBUG - Order Entry ID is 186
2018-02-09 12:31:05,461 - DEBUG - API ID is  0
2018-02-09 12:31:05,461 - DEBUG - Current Position is 0
2018-02-09 12:31:05,461 - DEBUG - Current Position is <class 'str'>
2018-02-09 12:31:05,461 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 12:31:05,461 - DEBUG - Time is 12
2018-02-09 12:31:05,462 - DEBUG - Time is <class 'int'>
2018-02-09 12:31:05,462 - DEBUG - Time is 31
2018-02-09 12:31:05,462 - DEBUG - Time is <class 'int'>
2018-02-09 12:31:05,462 - DEBUG - Disconnected from IBController
2018-02-09 12:31:05,463 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 12:36:01,344 - DEBUG - ****************************************************
2018-02-09 12:36:01,345 - DEBUG - Current Time is 12:36PM
2018-02-09 12:36:01,345 - DEBUG - Starting Pos Mgmt H E
2018-02-09 12:36:01,345 - DEBUG - Connecting to database
2018-02-09 12:36:01,368 - DEBUG - Connected to database
2018-02-09 12:36:01,369 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 12:36:01,370 - DEBUG - Order Profit is 186
2018-02-09 12:36:01,370 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 12:36:01,372 - DEBUG - Stop ID is 0
2018-02-09 12:36:01,372 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 12:36:01,373 - DEBUG - Entry ID is 186
2018-02-09 12:36:01,374 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 12:36:01,375 - DEBUG - OCA ID is 1
2018-02-09 12:36:01,375 - DEBUG - Connecting to IBController
2018-02-09 12:36:02,384 - DEBUG - Connected to IBController
2018-02-09 12:36:02,384 - DEBUG - Position requested
2018-02-09 12:36:02,385 - DEBUG - Pos Mgmt -12987
2018-02-09 12:36:02,386 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020EDE48>, pos=-12987, avgCost=0.95368235>
2018-02-09 12:36:02,386 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 12:36:02,386 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 12:36:02,387 - DEBUG - Position is -12987
2018-02-09 12:36:03,386 - DEBUG - Open Orders requested
2018-02-09 12:36:03,388 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x00000000020EDB00>, order=<ib.ext.Order.Order object at 0x00000000020EDDD8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021811D0>>
2018-02-09 12:36:03,389 - DEBUG - Order OrderID 185
2018-02-09 12:36:03,389 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 12:36:03,389 - DEBUG - Order status PreSubmitted
2018-02-09 12:36:03,390 - DEBUG - Order Identification 185
2018-02-09 12:36:03,390 - DEBUG - Order Identification <class 'int'>
2018-02-09 12:36:03,390 - DEBUG - Profit ID from database is 186
2018-02-09 12:36:03,390 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 12:36:03,391 - DEBUG - Stop ID database is 0
2018-02-09 12:36:03,391 - DEBUG - Entry ID database is 186
2018-02-09 12:36:03,392 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x00000000020EDB00>, order=<ib.ext.Order.Order object at 0x00000000020EDDD8>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002181080>>
2018-02-09 12:36:03,392 - DEBUG - Order OrderID 184
2018-02-09 12:36:03,393 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 12:36:03,393 - DEBUG - Order status PreSubmitted
2018-02-09 12:36:03,393 - DEBUG - Order Identification 184
2018-02-09 12:36:03,393 - DEBUG - Order Identification <class 'int'>
2018-02-09 12:36:03,394 - DEBUG - Profit ID from database is 186
2018-02-09 12:36:03,394 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 12:36:03,394 - DEBUG - Stop ID database is 0
2018-02-09 12:36:03,394 - DEBUG - Entry ID database is 186
2018-02-09 12:36:03,395 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x00000000020EDB00>, order=<ib.ext.Order.Order object at 0x00000000020EDDD8>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002181240>>
2018-02-09 12:36:03,396 - DEBUG - Order OrderID 186
2018-02-09 12:36:03,396 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 12:36:03,397 - DEBUG - Order status PreSubmitted
2018-02-09 12:36:03,397 - DEBUG - Order Identification 186
2018-02-09 12:36:03,397 - DEBUG - Order Identification <class 'int'>
2018-02-09 12:36:03,397 - DEBUG - Profit ID from database is 186
2018-02-09 12:36:03,398 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 12:36:03,398 - DEBUG - Stop ID database is 0
2018-02-09 12:36:03,398 - DEBUG - Entry ID database is 186
2018-02-09 12:36:03,398 - DEBUG - Profit API ID is 186
2018-02-09 12:36:03,398 - DEBUG - Entry API ID is 186
2018-02-09 12:36:05,388 - DEBUG - Connecting to database
2018-02-09 12:36:05,395 - DEBUG - Connected to database
2018-02-09 12:36:05,396 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 12:36:05,397 - DEBUG - Stop loss value is 70.02
2018-02-09 12:36:05,398 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 12:36:05,399 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 12:36:05,416 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 12:36:05,417 - DEBUG - EntryPrice value is 68.725
2018-02-09 12:36:05,418 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 12:36:05,419 - DEBUG - Stop quantity 1
2018-02-09 12:36:05,420 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 12:36:05,420 - DEBUG - Direction is Short
2018-02-09 12:36:05,421 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 12:36:05,422 - DEBUG - Count is 0
2018-02-09 12:36:05,423 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 12:36:05,423 - DEBUG - Stop Loss Flag is 0
2018-02-09 12:36:05,425 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 12:36:05,425 - DEBUG - Max ID Order is (186,)
2018-02-09 12:36:05,426 - DEBUG - Today is 2018-02-09
2018-02-09 12:36:05,426 - DEBUG - Day of the week 4
2018-02-09 12:36:05,426 - DEBUG - Yesterday is 02/08/2018
2018-02-09 12:36:05,427 - DEBUG - In Position is  0
2018-02-09 12:36:05,427 - DEBUG - In Position is  <class 'int'>
2018-02-09 12:36:05,427 - DEBUG - curStopLossFlag is  0
2018-02-09 12:36:05,427 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 12:36:05,427 - DEBUG - Checking if Entry has been filled
2018-02-09 12:36:05,428 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 12:36:05,429 - DEBUG - EntryPend is 1
2018-02-09 12:36:05,429 - DEBUG - Try to Cancel Stop
2018-02-09 12:36:05,429 - DEBUG - Stop API ID 0
2018-02-09 12:36:05,430 - DEBUG - Profit API ID 186
2018-02-09 12:36:05,430 - DEBUG - Stop API ID <class 'int'>
2018-02-09 12:36:05,430 - DEBUG - Profit API ID <class 'int'>
2018-02-09 12:36:05,430 - DEBUG - Pos is 0
2018-02-09 12:36:05,431 - DEBUG - CurCount is 0
2018-02-09 12:36:05,431 - DEBUG - In Pos 0
2018-02-09 12:36:05,431 - DEBUG - Stop ID is 0
2018-02-09 12:36:05,431 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 12:36:05,433 - DEBUG - EntryPend is 1
2018-02-09 12:36:05,433 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 12:36:05,433 - DEBUG - Entry Date is 10
2018-02-09 12:36:05,433 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 12:36:05,433 - DEBUG - Order Profit ID is 186
2018-02-09 12:36:05,434 - DEBUG - Order Entry ID is 186
2018-02-09 12:36:05,434 - DEBUG - API ID is  0
2018-02-09 12:36:05,434 - DEBUG - Current Position is 0
2018-02-09 12:36:05,434 - DEBUG - Current Position is <class 'str'>
2018-02-09 12:36:05,435 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 12:36:05,435 - DEBUG - Time is 12
2018-02-09 12:36:05,435 - DEBUG - Time is <class 'int'>
2018-02-09 12:36:05,435 - DEBUG - Time is 36
2018-02-09 12:36:05,436 - DEBUG - Time is <class 'int'>
2018-02-09 12:36:05,436 - DEBUG - Disconnected from IBController
2018-02-09 12:36:05,436 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 12:41:01,349 - DEBUG - ****************************************************
2018-02-09 12:41:01,349 - DEBUG - Current Time is 12:41PM
2018-02-09 12:41:01,350 - DEBUG - Starting Pos Mgmt H E
2018-02-09 12:41:01,350 - DEBUG - Connecting to database
2018-02-09 12:41:01,375 - DEBUG - Connected to database
2018-02-09 12:41:01,375 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 12:41:01,376 - DEBUG - Order Profit is 186
2018-02-09 12:41:01,377 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 12:41:01,378 - DEBUG - Stop ID is 0
2018-02-09 12:41:01,378 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 12:41:01,380 - DEBUG - Entry ID is 186
2018-02-09 12:41:01,380 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 12:41:01,381 - DEBUG - OCA ID is 1
2018-02-09 12:41:01,382 - DEBUG - Connecting to IBController
2018-02-09 12:41:02,390 - DEBUG - Connected to IBController
2018-02-09 12:41:02,390 - DEBUG - Position requested
2018-02-09 12:41:02,391 - DEBUG - Pos Mgmt -12987
2018-02-09 12:41:02,392 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211DAC8>, pos=-12987, avgCost=0.95368235>
2018-02-09 12:41:02,392 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 12:41:02,392 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 12:41:02,393 - DEBUG - Position is -12987
2018-02-09 12:41:03,391 - DEBUG - Open Orders requested
2018-02-09 12:41:03,393 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x000000000211DE10>, order=<ib.ext.Order.Order object at 0x000000000211DA90>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B11D0>>
2018-02-09 12:41:03,394 - DEBUG - Order OrderID 185
2018-02-09 12:41:03,394 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 12:41:03,395 - DEBUG - Order status PreSubmitted
2018-02-09 12:41:03,395 - DEBUG - Order Identification 185
2018-02-09 12:41:03,395 - DEBUG - Order Identification <class 'int'>
2018-02-09 12:41:03,395 - DEBUG - Profit ID from database is 186
2018-02-09 12:41:03,396 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 12:41:03,396 - DEBUG - Stop ID database is 0
2018-02-09 12:41:03,396 - DEBUG - Entry ID database is 186
2018-02-09 12:41:03,397 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x000000000211DE10>, order=<ib.ext.Order.Order object at 0x000000000211DA90>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B1080>>
2018-02-09 12:41:03,397 - DEBUG - Order OrderID 184
2018-02-09 12:41:03,398 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 12:41:03,398 - DEBUG - Order status PreSubmitted
2018-02-09 12:41:03,398 - DEBUG - Order Identification 184
2018-02-09 12:41:03,399 - DEBUG - Order Identification <class 'int'>
2018-02-09 12:41:03,399 - DEBUG - Profit ID from database is 186
2018-02-09 12:41:03,399 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 12:41:03,399 - DEBUG - Stop ID database is 0
2018-02-09 12:41:03,399 - DEBUG - Entry ID database is 186
2018-02-09 12:41:03,400 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x000000000211DE10>, order=<ib.ext.Order.Order object at 0x000000000211DA90>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B1240>>
2018-02-09 12:41:03,401 - DEBUG - Order OrderID 186
2018-02-09 12:41:03,401 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 12:41:03,402 - DEBUG - Order status PreSubmitted
2018-02-09 12:41:03,402 - DEBUG - Order Identification 186
2018-02-09 12:41:03,402 - DEBUG - Order Identification <class 'int'>
2018-02-09 12:41:03,402 - DEBUG - Profit ID from database is 186
2018-02-09 12:41:03,402 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 12:41:03,403 - DEBUG - Stop ID database is 0
2018-02-09 12:41:03,403 - DEBUG - Entry ID database is 186
2018-02-09 12:41:03,403 - DEBUG - Profit API ID is 186
2018-02-09 12:41:03,403 - DEBUG - Entry API ID is 186
2018-02-09 12:41:05,394 - DEBUG - Connecting to database
2018-02-09 12:41:05,413 - DEBUG - Connected to database
2018-02-09 12:41:05,415 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 12:41:05,416 - DEBUG - Stop loss value is 70.02
2018-02-09 12:41:05,417 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 12:41:05,417 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 12:41:05,419 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 12:41:05,419 - DEBUG - EntryPrice value is 68.725
2018-02-09 12:41:05,420 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 12:41:05,421 - DEBUG - Stop quantity 1
2018-02-09 12:41:05,422 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 12:41:05,423 - DEBUG - Direction is Short
2018-02-09 12:41:05,424 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 12:41:05,424 - DEBUG - Count is 0
2018-02-09 12:41:05,426 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 12:41:05,426 - DEBUG - Stop Loss Flag is 0
2018-02-09 12:41:05,427 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 12:41:05,428 - DEBUG - Max ID Order is (186,)
2018-02-09 12:41:05,428 - DEBUG - Today is 2018-02-09
2018-02-09 12:41:05,428 - DEBUG - Day of the week 4
2018-02-09 12:41:05,429 - DEBUG - Yesterday is 02/08/2018
2018-02-09 12:41:05,429 - DEBUG - In Position is  0
2018-02-09 12:41:05,429 - DEBUG - In Position is  <class 'int'>
2018-02-09 12:41:05,429 - DEBUG - curStopLossFlag is  0
2018-02-09 12:41:05,430 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 12:41:05,430 - DEBUG - Checking if Entry has been filled
2018-02-09 12:41:05,430 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 12:41:05,431 - DEBUG - EntryPend is 1
2018-02-09 12:41:05,432 - DEBUG - Try to Cancel Stop
2018-02-09 12:41:05,432 - DEBUG - Stop API ID 0
2018-02-09 12:41:05,432 - DEBUG - Profit API ID 186
2018-02-09 12:41:05,432 - DEBUG - Stop API ID <class 'int'>
2018-02-09 12:41:05,433 - DEBUG - Profit API ID <class 'int'>
2018-02-09 12:41:05,433 - DEBUG - Pos is 0
2018-02-09 12:41:05,433 - DEBUG - CurCount is 0
2018-02-09 12:41:05,433 - DEBUG - In Pos 0
2018-02-09 12:41:05,434 - DEBUG - Stop ID is 0
2018-02-09 12:41:05,434 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 12:41:05,436 - DEBUG - EntryPend is 1
2018-02-09 12:41:05,437 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 12:41:05,437 - DEBUG - Entry Date is 10
2018-02-09 12:41:05,437 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 12:41:05,437 - DEBUG - Order Profit ID is 186
2018-02-09 12:41:05,437 - DEBUG - Order Entry ID is 186
2018-02-09 12:41:05,438 - DEBUG - API ID is  0
2018-02-09 12:41:05,438 - DEBUG - Current Position is 0
2018-02-09 12:41:05,438 - DEBUG - Current Position is <class 'str'>
2018-02-09 12:41:05,438 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 12:41:05,439 - DEBUG - Time is 12
2018-02-09 12:41:05,439 - DEBUG - Time is <class 'int'>
2018-02-09 12:41:05,439 - DEBUG - Time is 41
2018-02-09 12:41:05,439 - DEBUG - Time is <class 'int'>
2018-02-09 12:41:05,439 - DEBUG - Disconnected from IBController
2018-02-09 12:41:05,440 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 12:46:01,350 - DEBUG - ****************************************************
2018-02-09 12:46:01,351 - DEBUG - Current Time is 12:46PM
2018-02-09 12:46:01,351 - DEBUG - Starting Pos Mgmt H E
2018-02-09 12:46:01,352 - DEBUG - Connecting to database
2018-02-09 12:46:01,371 - DEBUG - Connected to database
2018-02-09 12:46:01,371 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 12:46:01,373 - DEBUG - Order Profit is 186
2018-02-09 12:46:01,373 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 12:46:01,378 - DEBUG - Stop ID is 0
2018-02-09 12:46:01,379 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 12:46:01,380 - DEBUG - Entry ID is 186
2018-02-09 12:46:01,380 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 12:46:01,383 - DEBUG - OCA ID is 1
2018-02-09 12:46:01,384 - DEBUG - Connecting to IBController
2018-02-09 12:46:02,391 - DEBUG - Connected to IBController
2018-02-09 12:46:02,391 - DEBUG - Position requested
2018-02-09 12:46:02,392 - DEBUG - Pos Mgmt -12987
2018-02-09 12:46:02,393 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FCE48>, pos=-12987, avgCost=0.95368235>
2018-02-09 12:46:02,393 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 12:46:02,394 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 12:46:02,394 - DEBUG - Position is -12987
2018-02-09 12:46:03,393 - DEBUG - Open Orders requested
2018-02-09 12:46:03,395 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x00000000020FCA58>, order=<ib.ext.Order.Order object at 0x00000000020FCD30>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021911D0>>
2018-02-09 12:46:03,396 - DEBUG - Order OrderID 185
2018-02-09 12:46:03,396 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 12:46:03,397 - DEBUG - Order status PreSubmitted
2018-02-09 12:46:03,397 - DEBUG - Order Identification 185
2018-02-09 12:46:03,397 - DEBUG - Order Identification <class 'int'>
2018-02-09 12:46:03,397 - DEBUG - Profit ID from database is 186
2018-02-09 12:46:03,398 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 12:46:03,398 - DEBUG - Stop ID database is 0
2018-02-09 12:46:03,398 - DEBUG - Entry ID database is 186
2018-02-09 12:46:03,399 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x00000000020FCA58>, order=<ib.ext.Order.Order object at 0x00000000020FCD30>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002191080>>
2018-02-09 12:46:03,399 - DEBUG - Order OrderID 184
2018-02-09 12:46:03,400 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 12:46:03,400 - DEBUG - Order status PreSubmitted
2018-02-09 12:46:03,400 - DEBUG - Order Identification 184
2018-02-09 12:46:03,401 - DEBUG - Order Identification <class 'int'>
2018-02-09 12:46:03,401 - DEBUG - Profit ID from database is 186
2018-02-09 12:46:03,401 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 12:46:03,401 - DEBUG - Stop ID database is 0
2018-02-09 12:46:03,402 - DEBUG - Entry ID database is 186
2018-02-09 12:46:03,403 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x00000000020FCA58>, order=<ib.ext.Order.Order object at 0x00000000020FCD30>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002191240>>
2018-02-09 12:46:03,403 - DEBUG - Order OrderID 186
2018-02-09 12:46:03,403 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 12:46:03,404 - DEBUG - Order status PreSubmitted
2018-02-09 12:46:03,404 - DEBUG - Order Identification 186
2018-02-09 12:46:03,404 - DEBUG - Order Identification <class 'int'>
2018-02-09 12:46:03,404 - DEBUG - Profit ID from database is 186
2018-02-09 12:46:03,405 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 12:46:03,405 - DEBUG - Stop ID database is 0
2018-02-09 12:46:03,405 - DEBUG - Entry ID database is 186
2018-02-09 12:46:03,405 - DEBUG - Profit API ID is 186
2018-02-09 12:46:03,405 - DEBUG - Entry API ID is 186
2018-02-09 12:46:05,396 - DEBUG - Connecting to database
2018-02-09 12:46:05,403 - DEBUG - Connected to database
2018-02-09 12:46:05,404 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 12:46:05,405 - DEBUG - Stop loss value is 70.02
2018-02-09 12:46:05,406 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 12:46:05,407 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 12:46:05,408 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 12:46:05,408 - DEBUG - EntryPrice value is 68.725
2018-02-09 12:46:05,410 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 12:46:05,410 - DEBUG - Stop quantity 1
2018-02-09 12:46:05,411 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 12:46:05,412 - DEBUG - Direction is Short
2018-02-09 12:46:05,414 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 12:46:05,414 - DEBUG - Count is 0
2018-02-09 12:46:05,415 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 12:46:05,416 - DEBUG - Stop Loss Flag is 0
2018-02-09 12:46:05,417 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 12:46:05,417 - DEBUG - Max ID Order is (186,)
2018-02-09 12:46:05,418 - DEBUG - Today is 2018-02-09
2018-02-09 12:46:05,418 - DEBUG - Day of the week 4
2018-02-09 12:46:05,418 - DEBUG - Yesterday is 02/08/2018
2018-02-09 12:46:05,419 - DEBUG - In Position is  0
2018-02-09 12:46:05,419 - DEBUG - In Position is  <class 'int'>
2018-02-09 12:46:05,419 - DEBUG - curStopLossFlag is  0
2018-02-09 12:46:05,419 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 12:46:05,420 - DEBUG - Checking if Entry has been filled
2018-02-09 12:46:05,420 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 12:46:05,421 - DEBUG - EntryPend is 1
2018-02-09 12:46:05,421 - DEBUG - Try to Cancel Stop
2018-02-09 12:46:05,422 - DEBUG - Stop API ID 0
2018-02-09 12:46:05,422 - DEBUG - Profit API ID 186
2018-02-09 12:46:05,422 - DEBUG - Stop API ID <class 'int'>
2018-02-09 12:46:05,422 - DEBUG - Profit API ID <class 'int'>
2018-02-09 12:46:05,423 - DEBUG - Pos is 0
2018-02-09 12:46:05,423 - DEBUG - CurCount is 0
2018-02-09 12:46:05,423 - DEBUG - In Pos 0
2018-02-09 12:46:05,423 - DEBUG - Stop ID is 0
2018-02-09 12:46:05,423 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 12:46:05,425 - DEBUG - EntryPend is 1
2018-02-09 12:46:05,425 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 12:46:05,425 - DEBUG - Entry Date is 10
2018-02-09 12:46:05,425 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 12:46:05,426 - DEBUG - Order Profit ID is 186
2018-02-09 12:46:05,426 - DEBUG - Order Entry ID is 186
2018-02-09 12:46:05,426 - DEBUG - API ID is  0
2018-02-09 12:46:05,426 - DEBUG - Current Position is 0
2018-02-09 12:46:05,427 - DEBUG - Current Position is <class 'str'>
2018-02-09 12:46:05,427 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 12:46:05,427 - DEBUG - Time is 12
2018-02-09 12:46:05,427 - DEBUG - Time is <class 'int'>
2018-02-09 12:46:05,427 - DEBUG - Time is 46
2018-02-09 12:46:05,428 - DEBUG - Time is <class 'int'>
2018-02-09 12:46:05,428 - DEBUG - Disconnected from IBController
2018-02-09 12:46:05,428 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 12:51:01,348 - DEBUG - ****************************************************
2018-02-09 12:51:01,349 - DEBUG - Current Time is 12:51PM
2018-02-09 12:51:01,349 - DEBUG - Starting Pos Mgmt H E
2018-02-09 12:51:01,349 - DEBUG - Connecting to database
2018-02-09 12:51:01,399 - DEBUG - Connected to database
2018-02-09 12:51:01,399 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 12:51:01,401 - DEBUG - Order Profit is 186
2018-02-09 12:51:01,401 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 12:51:01,402 - DEBUG - Stop ID is 0
2018-02-09 12:51:01,402 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 12:51:01,404 - DEBUG - Entry ID is 186
2018-02-09 12:51:01,404 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 12:51:01,405 - DEBUG - OCA ID is 1
2018-02-09 12:51:01,406 - DEBUG - Connecting to IBController
2018-02-09 12:51:02,414 - DEBUG - Connected to IBController
2018-02-09 12:51:02,414 - DEBUG - Position requested
2018-02-09 12:51:02,415 - DEBUG - Pos Mgmt -12987
2018-02-09 12:51:02,415 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000216BD30>, pos=-12987, avgCost=0.95368235>
2018-02-09 12:51:02,416 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 12:51:02,416 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 12:51:02,416 - DEBUG - Position is -12987
2018-02-09 12:51:03,415 - DEBUG - Open Orders requested
2018-02-09 12:51:03,416 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x000000000216BE10>, order=<ib.ext.Order.Order object at 0x000000000216BCC0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000022001D0>>
2018-02-09 12:51:03,417 - DEBUG - Order OrderID 185
2018-02-09 12:51:03,418 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 12:51:03,418 - DEBUG - Order status PreSubmitted
2018-02-09 12:51:03,418 - DEBUG - Order Identification 185
2018-02-09 12:51:03,418 - DEBUG - Order Identification <class 'int'>
2018-02-09 12:51:03,419 - DEBUG - Profit ID from database is 186
2018-02-09 12:51:03,419 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 12:51:03,419 - DEBUG - Stop ID database is 0
2018-02-09 12:51:03,419 - DEBUG - Entry ID database is 186
2018-02-09 12:51:03,420 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x000000000216BE10>, order=<ib.ext.Order.Order object at 0x000000000216BCC0>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002200048>>
2018-02-09 12:51:03,421 - DEBUG - Order OrderID 184
2018-02-09 12:51:03,421 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 12:51:03,421 - DEBUG - Order status PreSubmitted
2018-02-09 12:51:03,422 - DEBUG - Order Identification 184
2018-02-09 12:51:03,422 - DEBUG - Order Identification <class 'int'>
2018-02-09 12:51:03,422 - DEBUG - Profit ID from database is 186
2018-02-09 12:51:03,422 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 12:51:03,423 - DEBUG - Stop ID database is 0
2018-02-09 12:51:03,423 - DEBUG - Entry ID database is 186
2018-02-09 12:51:03,424 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x000000000216BE10>, order=<ib.ext.Order.Order object at 0x000000000216BCC0>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002200240>>
2018-02-09 12:51:03,424 - DEBUG - Order OrderID 186
2018-02-09 12:51:03,424 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 12:51:03,425 - DEBUG - Order status PreSubmitted
2018-02-09 12:51:03,425 - DEBUG - Order Identification 186
2018-02-09 12:51:03,425 - DEBUG - Order Identification <class 'int'>
2018-02-09 12:51:03,425 - DEBUG - Profit ID from database is 186
2018-02-09 12:51:03,426 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 12:51:03,426 - DEBUG - Stop ID database is 0
2018-02-09 12:51:03,426 - DEBUG - Entry ID database is 186
2018-02-09 12:51:03,426 - DEBUG - Profit API ID is 186
2018-02-09 12:51:03,427 - DEBUG - Entry API ID is 186
2018-02-09 12:51:05,417 - DEBUG - Connecting to database
2018-02-09 12:51:05,424 - DEBUG - Connected to database
2018-02-09 12:51:05,426 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 12:51:05,426 - DEBUG - Stop loss value is 70.02
2018-02-09 12:51:05,428 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 12:51:05,428 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 12:51:05,429 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 12:51:05,430 - DEBUG - EntryPrice value is 68.725
2018-02-09 12:51:05,431 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 12:51:05,431 - DEBUG - Stop quantity 1
2018-02-09 12:51:05,433 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 12:51:05,433 - DEBUG - Direction is Short
2018-02-09 12:51:05,434 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 12:51:05,435 - DEBUG - Count is 0
2018-02-09 12:51:05,436 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 12:51:05,436 - DEBUG - Stop Loss Flag is 0
2018-02-09 12:51:05,437 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 12:51:05,438 - DEBUG - Max ID Order is (186,)
2018-02-09 12:51:05,438 - DEBUG - Today is 2018-02-09
2018-02-09 12:51:05,439 - DEBUG - Day of the week 4
2018-02-09 12:51:05,439 - DEBUG - Yesterday is 02/08/2018
2018-02-09 12:51:05,439 - DEBUG - In Position is  0
2018-02-09 12:51:05,439 - DEBUG - In Position is  <class 'int'>
2018-02-09 12:51:05,440 - DEBUG - curStopLossFlag is  0
2018-02-09 12:51:05,440 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 12:51:05,440 - DEBUG - Checking if Entry has been filled
2018-02-09 12:51:05,440 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 12:51:05,442 - DEBUG - EntryPend is 1
2018-02-09 12:51:05,442 - DEBUG - Try to Cancel Stop
2018-02-09 12:51:05,442 - DEBUG - Stop API ID 0
2018-02-09 12:51:05,442 - DEBUG - Profit API ID 186
2018-02-09 12:51:05,443 - DEBUG - Stop API ID <class 'int'>
2018-02-09 12:51:05,443 - DEBUG - Profit API ID <class 'int'>
2018-02-09 12:51:05,443 - DEBUG - Pos is 0
2018-02-09 12:51:05,443 - DEBUG - CurCount is 0
2018-02-09 12:51:05,444 - DEBUG - In Pos 0
2018-02-09 12:51:05,444 - DEBUG - Stop ID is 0
2018-02-09 12:51:05,444 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 12:51:05,445 - DEBUG - EntryPend is 1
2018-02-09 12:51:05,446 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 12:51:05,446 - DEBUG - Entry Date is 10
2018-02-09 12:51:05,446 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 12:51:05,446 - DEBUG - Order Profit ID is 186
2018-02-09 12:51:05,447 - DEBUG - Order Entry ID is 186
2018-02-09 12:51:05,447 - DEBUG - API ID is  0
2018-02-09 12:51:05,447 - DEBUG - Current Position is 0
2018-02-09 12:51:05,447 - DEBUG - Current Position is <class 'str'>
2018-02-09 12:51:05,448 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 12:51:05,448 - DEBUG - Time is 12
2018-02-09 12:51:05,448 - DEBUG - Time is <class 'int'>
2018-02-09 12:51:05,448 - DEBUG - Time is 51
2018-02-09 12:51:05,448 - DEBUG - Time is <class 'int'>
2018-02-09 12:51:05,449 - DEBUG - Disconnected from IBController
2018-02-09 12:51:05,449 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 12:56:01,342 - DEBUG - ****************************************************
2018-02-09 12:56:01,342 - DEBUG - Current Time is 12:56PM
2018-02-09 12:56:01,343 - DEBUG - Starting Pos Mgmt H E
2018-02-09 12:56:01,343 - DEBUG - Connecting to database
2018-02-09 12:56:01,373 - DEBUG - Connected to database
2018-02-09 12:56:01,373 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 12:56:01,375 - DEBUG - Order Profit is 186
2018-02-09 12:56:01,375 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 12:56:01,376 - DEBUG - Stop ID is 0
2018-02-09 12:56:01,377 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 12:56:01,378 - DEBUG - Entry ID is 186
2018-02-09 12:56:01,378 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 12:56:01,380 - DEBUG - OCA ID is 1
2018-02-09 12:56:01,380 - DEBUG - Connecting to IBController
2018-02-09 12:56:02,388 - DEBUG - Connected to IBController
2018-02-09 12:56:02,388 - DEBUG - Position requested
2018-02-09 12:56:02,389 - DEBUG - Pos Mgmt -12987
2018-02-09 12:56:02,390 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000213CE48>, pos=-12987, avgCost=0.95368235>
2018-02-09 12:56:02,390 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 12:56:02,390 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 12:56:02,391 - DEBUG - Position is -12987
2018-02-09 12:56:03,390 - DEBUG - Open Orders requested
2018-02-09 12:56:03,392 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x000000000213CB00>, order=<ib.ext.Order.Order object at 0x000000000213CCF8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021D11D0>>
2018-02-09 12:56:03,393 - DEBUG - Order OrderID 185
2018-02-09 12:56:03,393 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 12:56:03,393 - DEBUG - Order status PreSubmitted
2018-02-09 12:56:03,394 - DEBUG - Order Identification 185
2018-02-09 12:56:03,394 - DEBUG - Order Identification <class 'int'>
2018-02-09 12:56:03,394 - DEBUG - Profit ID from database is 186
2018-02-09 12:56:03,394 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 12:56:03,395 - DEBUG - Stop ID database is 0
2018-02-09 12:56:03,395 - DEBUG - Entry ID database is 186
2018-02-09 12:56:03,396 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x000000000213CB00>, order=<ib.ext.Order.Order object at 0x000000000213CCF8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021D1080>>
2018-02-09 12:56:03,396 - DEBUG - Order OrderID 184
2018-02-09 12:56:03,396 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 12:56:03,397 - DEBUG - Order status PreSubmitted
2018-02-09 12:56:03,397 - DEBUG - Order Identification 184
2018-02-09 12:56:03,397 - DEBUG - Order Identification <class 'int'>
2018-02-09 12:56:03,397 - DEBUG - Profit ID from database is 186
2018-02-09 12:56:03,398 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 12:56:03,398 - DEBUG - Stop ID database is 0
2018-02-09 12:56:03,398 - DEBUG - Entry ID database is 186
2018-02-09 12:56:03,399 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x000000000213CB00>, order=<ib.ext.Order.Order object at 0x000000000213CCF8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021D1240>>
2018-02-09 12:56:03,400 - DEBUG - Order OrderID 186
2018-02-09 12:56:03,400 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 12:56:03,400 - DEBUG - Order status PreSubmitted
2018-02-09 12:56:03,400 - DEBUG - Order Identification 186
2018-02-09 12:56:03,401 - DEBUG - Order Identification <class 'int'>
2018-02-09 12:56:03,401 - DEBUG - Profit ID from database is 186
2018-02-09 12:56:03,401 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 12:56:03,401 - DEBUG - Stop ID database is 0
2018-02-09 12:56:03,401 - DEBUG - Entry ID database is 186
2018-02-09 12:56:03,402 - DEBUG - Profit API ID is 186
2018-02-09 12:56:03,402 - DEBUG - Entry API ID is 186
2018-02-09 12:56:05,392 - DEBUG - Connecting to database
2018-02-09 12:56:05,399 - DEBUG - Connected to database
2018-02-09 12:56:05,400 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 12:56:05,401 - DEBUG - Stop loss value is 70.02
2018-02-09 12:56:05,402 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 12:56:05,403 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 12:56:05,404 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 12:56:05,404 - DEBUG - EntryPrice value is 68.725
2018-02-09 12:56:05,406 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 12:56:05,406 - DEBUG - Stop quantity 1
2018-02-09 12:56:05,407 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 12:56:05,408 - DEBUG - Direction is Short
2018-02-09 12:56:05,409 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 12:56:05,410 - DEBUG - Count is 0
2018-02-09 12:56:05,411 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 12:56:05,411 - DEBUG - Stop Loss Flag is 0
2018-02-09 12:56:05,413 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 12:56:05,413 - DEBUG - Max ID Order is (186,)
2018-02-09 12:56:05,413 - DEBUG - Today is 2018-02-09
2018-02-09 12:56:05,414 - DEBUG - Day of the week 4
2018-02-09 12:56:05,414 - DEBUG - Yesterday is 02/08/2018
2018-02-09 12:56:05,414 - DEBUG - In Position is  0
2018-02-09 12:56:05,414 - DEBUG - In Position is  <class 'int'>
2018-02-09 12:56:05,415 - DEBUG - curStopLossFlag is  0
2018-02-09 12:56:05,415 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 12:56:05,415 - DEBUG - Checking if Entry has been filled
2018-02-09 12:56:05,415 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 12:56:05,417 - DEBUG - EntryPend is 1
2018-02-09 12:56:05,417 - DEBUG - Try to Cancel Stop
2018-02-09 12:56:05,417 - DEBUG - Stop API ID 0
2018-02-09 12:56:05,417 - DEBUG - Profit API ID 186
2018-02-09 12:56:05,418 - DEBUG - Stop API ID <class 'int'>
2018-02-09 12:56:05,418 - DEBUG - Profit API ID <class 'int'>
2018-02-09 12:56:05,418 - DEBUG - Pos is 0
2018-02-09 12:56:05,418 - DEBUG - CurCount is 0
2018-02-09 12:56:05,418 - DEBUG - In Pos 0
2018-02-09 12:56:05,419 - DEBUG - Stop ID is 0
2018-02-09 12:56:05,419 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 12:56:05,420 - DEBUG - EntryPend is 1
2018-02-09 12:56:05,421 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 12:56:05,421 - DEBUG - Entry Date is 10
2018-02-09 12:56:05,421 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 12:56:05,421 - DEBUG - Order Profit ID is 186
2018-02-09 12:56:05,422 - DEBUG - Order Entry ID is 186
2018-02-09 12:56:05,422 - DEBUG - API ID is  0
2018-02-09 12:56:05,422 - DEBUG - Current Position is 0
2018-02-09 12:56:05,422 - DEBUG - Current Position is <class 'str'>
2018-02-09 12:56:05,422 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 12:56:05,423 - DEBUG - Time is 12
2018-02-09 12:56:05,423 - DEBUG - Time is <class 'int'>
2018-02-09 12:56:05,423 - DEBUG - Time is 56
2018-02-09 12:56:05,423 - DEBUG - Time is <class 'int'>
2018-02-09 12:56:05,424 - DEBUG - Disconnected from IBController
2018-02-09 12:56:05,424 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 13:01:01,351 - DEBUG - ****************************************************
2018-02-09 13:01:01,351 - DEBUG - Current Time is 01:01PM
2018-02-09 13:01:01,352 - DEBUG - Starting Pos Mgmt H E
2018-02-09 13:01:01,352 - DEBUG - Connecting to database
2018-02-09 13:01:01,392 - DEBUG - Connected to database
2018-02-09 13:01:01,392 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 13:01:01,394 - DEBUG - Order Profit is 186
2018-02-09 13:01:01,394 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 13:01:01,395 - DEBUG - Stop ID is 0
2018-02-09 13:01:01,396 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 13:01:01,397 - DEBUG - Entry ID is 186
2018-02-09 13:01:01,397 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 13:01:01,399 - DEBUG - OCA ID is 1
2018-02-09 13:01:01,399 - DEBUG - Connecting to IBController
2018-02-09 13:01:02,407 - DEBUG - Connected to IBController
2018-02-09 13:01:02,407 - DEBUG - Position requested
2018-02-09 13:01:02,408 - DEBUG - Pos Mgmt -12987
2018-02-09 13:01:02,409 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000216DA90>, pos=-12987, avgCost=0.95368235>
2018-02-09 13:01:02,409 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 13:01:02,409 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 13:01:02,410 - DEBUG - Position is -12987
2018-02-09 13:01:03,408 - DEBUG - Open Orders requested
2018-02-09 13:01:03,409 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x000000000216DE10>, order=<ib.ext.Order.Order object at 0x000000000216DCC0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000022011D0>>
2018-02-09 13:01:03,410 - DEBUG - Order OrderID 185
2018-02-09 13:01:03,411 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 13:01:03,411 - DEBUG - Order status PreSubmitted
2018-02-09 13:01:03,411 - DEBUG - Order Identification 185
2018-02-09 13:01:03,412 - DEBUG - Order Identification <class 'int'>
2018-02-09 13:01:03,412 - DEBUG - Profit ID from database is 186
2018-02-09 13:01:03,412 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 13:01:03,412 - DEBUG - Stop ID database is 0
2018-02-09 13:01:03,413 - DEBUG - Entry ID database is 186
2018-02-09 13:01:03,414 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x000000000216DE10>, order=<ib.ext.Order.Order object at 0x000000000216DCC0>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002201080>>
2018-02-09 13:01:03,414 - DEBUG - Order OrderID 184
2018-02-09 13:01:03,415 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 13:01:03,415 - DEBUG - Order status PreSubmitted
2018-02-09 13:01:03,415 - DEBUG - Order Identification 184
2018-02-09 13:01:03,415 - DEBUG - Order Identification <class 'int'>
2018-02-09 13:01:03,415 - DEBUG - Profit ID from database is 186
2018-02-09 13:01:03,416 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 13:01:03,416 - DEBUG - Stop ID database is 0
2018-02-09 13:01:03,416 - DEBUG - Entry ID database is 186
2018-02-09 13:01:03,417 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x000000000216DE10>, order=<ib.ext.Order.Order object at 0x000000000216DCC0>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002201240>>
2018-02-09 13:01:03,417 - DEBUG - Order OrderID 186
2018-02-09 13:01:03,418 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 13:01:03,418 - DEBUG - Order status PreSubmitted
2018-02-09 13:01:03,418 - DEBUG - Order Identification 186
2018-02-09 13:01:03,419 - DEBUG - Order Identification <class 'int'>
2018-02-09 13:01:03,419 - DEBUG - Profit ID from database is 186
2018-02-09 13:01:03,419 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 13:01:03,419 - DEBUG - Stop ID database is 0
2018-02-09 13:01:03,420 - DEBUG - Entry ID database is 186
2018-02-09 13:01:03,420 - DEBUG - Profit API ID is 186
2018-02-09 13:01:03,420 - DEBUG - Entry API ID is 186
2018-02-09 13:01:05,410 - DEBUG - Connecting to database
2018-02-09 13:01:05,417 - DEBUG - Connected to database
2018-02-09 13:01:05,420 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 13:01:05,421 - DEBUG - Stop loss value is 70.02
2018-02-09 13:01:05,422 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 13:01:05,422 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 13:01:05,424 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 13:01:05,424 - DEBUG - EntryPrice value is 68.725
2018-02-09 13:01:05,425 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 13:01:05,426 - DEBUG - Stop quantity 1
2018-02-09 13:01:05,427 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 13:01:05,427 - DEBUG - Direction is Short
2018-02-09 13:01:05,429 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 13:01:05,429 - DEBUG - Count is 0
2018-02-09 13:01:05,430 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 13:01:05,431 - DEBUG - Stop Loss Flag is 0
2018-02-09 13:01:05,432 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 13:01:05,433 - DEBUG - Max ID Order is (186,)
2018-02-09 13:01:05,433 - DEBUG - Today is 2018-02-09
2018-02-09 13:01:05,433 - DEBUG - Day of the week 4
2018-02-09 13:01:05,434 - DEBUG - Yesterday is 02/08/2018
2018-02-09 13:01:05,434 - DEBUG - In Position is  0
2018-02-09 13:01:05,434 - DEBUG - In Position is  <class 'int'>
2018-02-09 13:01:05,434 - DEBUG - curStopLossFlag is  0
2018-02-09 13:01:05,435 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 13:01:05,435 - DEBUG - Checking if Entry has been filled
2018-02-09 13:01:05,435 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 13:01:05,436 - DEBUG - EntryPend is 1
2018-02-09 13:01:05,437 - DEBUG - Try to Cancel Stop
2018-02-09 13:01:05,437 - DEBUG - Stop API ID 0
2018-02-09 13:01:05,437 - DEBUG - Profit API ID 186
2018-02-09 13:01:05,437 - DEBUG - Stop API ID <class 'int'>
2018-02-09 13:01:05,438 - DEBUG - Profit API ID <class 'int'>
2018-02-09 13:01:05,438 - DEBUG - Pos is 0
2018-02-09 13:01:05,438 - DEBUG - CurCount is 0
2018-02-09 13:01:05,438 - DEBUG - In Pos 0
2018-02-09 13:01:05,438 - DEBUG - Stop ID is 0
2018-02-09 13:01:05,439 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 13:01:05,440 - DEBUG - EntryPend is 1
2018-02-09 13:01:05,440 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 13:01:05,441 - DEBUG - Entry Date is 10
2018-02-09 13:01:05,441 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 13:01:05,441 - DEBUG - Order Profit ID is 186
2018-02-09 13:01:05,441 - DEBUG - Order Entry ID is 186
2018-02-09 13:01:05,441 - DEBUG - API ID is  0
2018-02-09 13:01:05,442 - DEBUG - Current Position is 0
2018-02-09 13:01:05,442 - DEBUG - Current Position is <class 'str'>
2018-02-09 13:01:05,442 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 13:01:05,442 - DEBUG - Time is 13
2018-02-09 13:01:05,443 - DEBUG - Time is <class 'int'>
2018-02-09 13:01:05,443 - DEBUG - Time is 1
2018-02-09 13:01:05,443 - DEBUG - Time is <class 'int'>
2018-02-09 13:01:05,443 - DEBUG - Disconnected from IBController
2018-02-09 13:01:05,444 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 13:06:01,349 - DEBUG - ****************************************************
2018-02-09 13:06:01,349 - DEBUG - Current Time is 01:06PM
2018-02-09 13:06:01,349 - DEBUG - Starting Pos Mgmt H E
2018-02-09 13:06:01,350 - DEBUG - Connecting to database
2018-02-09 13:06:01,368 - DEBUG - Connected to database
2018-02-09 13:06:01,369 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 13:06:01,370 - DEBUG - Order Profit is 186
2018-02-09 13:06:01,370 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 13:06:01,372 - DEBUG - Stop ID is 0
2018-02-09 13:06:01,372 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 13:06:01,374 - DEBUG - Entry ID is 186
2018-02-09 13:06:01,374 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 13:06:01,375 - DEBUG - OCA ID is 1
2018-02-09 13:06:01,376 - DEBUG - Connecting to IBController
2018-02-09 13:06:02,383 - DEBUG - Connected to IBController
2018-02-09 13:06:02,383 - DEBUG - Position requested
2018-02-09 13:06:02,385 - DEBUG - Pos Mgmt -12987
2018-02-09 13:06:02,386 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020ACDD8>, pos=-12987, avgCost=0.95368235>
2018-02-09 13:06:02,386 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 13:06:02,386 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 13:06:02,386 - DEBUG - Position is -12987
2018-02-09 13:06:03,384 - DEBUG - Open Orders requested
2018-02-09 13:06:03,386 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x00000000020ACE10>, order=<ib.ext.Order.Order object at 0x00000000020ACCC0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021411D0>>
2018-02-09 13:06:03,387 - DEBUG - Order OrderID 185
2018-02-09 13:06:03,387 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 13:06:03,388 - DEBUG - Order status PreSubmitted
2018-02-09 13:06:03,388 - DEBUG - Order Identification 185
2018-02-09 13:06:03,388 - DEBUG - Order Identification <class 'int'>
2018-02-09 13:06:03,388 - DEBUG - Profit ID from database is 186
2018-02-09 13:06:03,389 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 13:06:03,389 - DEBUG - Stop ID database is 0
2018-02-09 13:06:03,389 - DEBUG - Entry ID database is 186
2018-02-09 13:06:03,390 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x00000000020ACE10>, order=<ib.ext.Order.Order object at 0x00000000020ACCC0>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002141048>>
2018-02-09 13:06:03,391 - DEBUG - Order OrderID 184
2018-02-09 13:06:03,391 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 13:06:03,391 - DEBUG - Order status PreSubmitted
2018-02-09 13:06:03,392 - DEBUG - Order Identification 184
2018-02-09 13:06:03,392 - DEBUG - Order Identification <class 'int'>
2018-02-09 13:06:03,392 - DEBUG - Profit ID from database is 186
2018-02-09 13:06:03,392 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 13:06:03,393 - DEBUG - Stop ID database is 0
2018-02-09 13:06:03,393 - DEBUG - Entry ID database is 186
2018-02-09 13:06:03,394 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x00000000020ACE10>, order=<ib.ext.Order.Order object at 0x00000000020ACCC0>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002141240>>
2018-02-09 13:06:03,394 - DEBUG - Order OrderID 186
2018-02-09 13:06:03,395 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 13:06:03,395 - DEBUG - Order status PreSubmitted
2018-02-09 13:06:03,395 - DEBUG - Order Identification 186
2018-02-09 13:06:03,395 - DEBUG - Order Identification <class 'int'>
2018-02-09 13:06:03,396 - DEBUG - Profit ID from database is 186
2018-02-09 13:06:03,396 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 13:06:03,396 - DEBUG - Stop ID database is 0
2018-02-09 13:06:03,396 - DEBUG - Entry ID database is 186
2018-02-09 13:06:03,397 - DEBUG - Profit API ID is 186
2018-02-09 13:06:03,397 - DEBUG - Entry API ID is 186
2018-02-09 13:06:05,386 - DEBUG - Connecting to database
2018-02-09 13:06:05,393 - DEBUG - Connected to database
2018-02-09 13:06:05,395 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 13:06:05,395 - DEBUG - Stop loss value is 70.02
2018-02-09 13:06:05,397 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 13:06:05,397 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 13:06:05,398 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 13:06:05,399 - DEBUG - EntryPrice value is 68.725
2018-02-09 13:06:05,400 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 13:06:05,401 - DEBUG - Stop quantity 1
2018-02-09 13:06:05,402 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 13:06:05,402 - DEBUG - Direction is Short
2018-02-09 13:06:05,404 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 13:06:05,404 - DEBUG - Count is 0
2018-02-09 13:06:05,405 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 13:06:05,406 - DEBUG - Stop Loss Flag is 0
2018-02-09 13:06:05,407 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 13:06:05,407 - DEBUG - Max ID Order is (186,)
2018-02-09 13:06:05,408 - DEBUG - Today is 2018-02-09
2018-02-09 13:06:05,408 - DEBUG - Day of the week 4
2018-02-09 13:06:05,408 - DEBUG - Yesterday is 02/08/2018
2018-02-09 13:06:05,409 - DEBUG - In Position is  0
2018-02-09 13:06:05,409 - DEBUG - In Position is  <class 'int'>
2018-02-09 13:06:05,409 - DEBUG - curStopLossFlag is  0
2018-02-09 13:06:05,409 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 13:06:05,410 - DEBUG - Checking if Entry has been filled
2018-02-09 13:06:05,410 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 13:06:05,411 - DEBUG - EntryPend is 1
2018-02-09 13:06:05,412 - DEBUG - Try to Cancel Stop
2018-02-09 13:06:05,412 - DEBUG - Stop API ID 0
2018-02-09 13:06:05,412 - DEBUG - Profit API ID 186
2018-02-09 13:06:05,412 - DEBUG - Stop API ID <class 'int'>
2018-02-09 13:06:05,413 - DEBUG - Profit API ID <class 'int'>
2018-02-09 13:06:05,413 - DEBUG - Pos is 0
2018-02-09 13:06:05,413 - DEBUG - CurCount is 0
2018-02-09 13:06:05,413 - DEBUG - In Pos 0
2018-02-09 13:06:05,413 - DEBUG - Stop ID is 0
2018-02-09 13:06:05,414 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 13:06:05,415 - DEBUG - EntryPend is 1
2018-02-09 13:06:05,415 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 13:06:05,416 - DEBUG - Entry Date is 10
2018-02-09 13:06:05,416 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 13:06:05,416 - DEBUG - Order Profit ID is 186
2018-02-09 13:06:05,416 - DEBUG - Order Entry ID is 186
2018-02-09 13:06:05,417 - DEBUG - API ID is  0
2018-02-09 13:06:05,417 - DEBUG - Current Position is 0
2018-02-09 13:06:05,417 - DEBUG - Current Position is <class 'str'>
2018-02-09 13:06:05,417 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 13:06:05,417 - DEBUG - Time is 13
2018-02-09 13:06:05,418 - DEBUG - Time is <class 'int'>
2018-02-09 13:06:05,418 - DEBUG - Time is 6
2018-02-09 13:06:05,418 - DEBUG - Time is <class 'int'>
2018-02-09 13:06:05,418 - DEBUG - Disconnected from IBController
2018-02-09 13:06:05,419 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 13:11:01,349 - DEBUG - ****************************************************
2018-02-09 13:11:01,350 - DEBUG - Current Time is 01:11PM
2018-02-09 13:11:01,350 - DEBUG - Starting Pos Mgmt H E
2018-02-09 13:11:01,350 - DEBUG - Connecting to database
2018-02-09 13:11:01,392 - DEBUG - Connected to database
2018-02-09 13:11:01,392 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 13:11:01,394 - DEBUG - Order Profit is 186
2018-02-09 13:11:01,394 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 13:11:01,395 - DEBUG - Stop ID is 0
2018-02-09 13:11:01,395 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 13:11:01,397 - DEBUG - Entry ID is 186
2018-02-09 13:11:01,397 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 13:11:01,398 - DEBUG - OCA ID is 1
2018-02-09 13:11:01,399 - DEBUG - Connecting to IBController
2018-02-09 13:11:02,403 - DEBUG - Connected to IBController
2018-02-09 13:11:02,403 - DEBUG - Position requested
2018-02-09 13:11:02,404 - DEBUG - Pos Mgmt -12987
2018-02-09 13:11:02,405 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212DE48>, pos=-12987, avgCost=0.95368235>
2018-02-09 13:11:02,405 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 13:11:02,405 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 13:11:02,406 - DEBUG - Position is -12987
2018-02-09 13:11:03,405 - DEBUG - Open Orders requested
2018-02-09 13:11:03,407 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x000000000212DCC0>, order=<ib.ext.Order.Order object at 0x000000000212DC50>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C21D0>>
2018-02-09 13:11:03,407 - DEBUG - Order OrderID 185
2018-02-09 13:11:03,408 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 13:11:03,408 - DEBUG - Order status PreSubmitted
2018-02-09 13:11:03,408 - DEBUG - Order Identification 185
2018-02-09 13:11:03,409 - DEBUG - Order Identification <class 'int'>
2018-02-09 13:11:03,409 - DEBUG - Profit ID from database is 186
2018-02-09 13:11:03,409 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 13:11:03,409 - DEBUG - Stop ID database is 0
2018-02-09 13:11:03,410 - DEBUG - Entry ID database is 186
2018-02-09 13:11:03,416 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x000000000212DCC0>, order=<ib.ext.Order.Order object at 0x000000000212DC50>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C2080>>
2018-02-09 13:11:03,416 - DEBUG - Order OrderID 184
2018-02-09 13:11:03,416 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 13:11:03,417 - DEBUG - Order status PreSubmitted
2018-02-09 13:11:03,417 - DEBUG - Order Identification 184
2018-02-09 13:11:03,417 - DEBUG - Order Identification <class 'int'>
2018-02-09 13:11:03,417 - DEBUG - Profit ID from database is 186
2018-02-09 13:11:03,417 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 13:11:03,418 - DEBUG - Stop ID database is 0
2018-02-09 13:11:03,418 - DEBUG - Entry ID database is 186
2018-02-09 13:11:03,419 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x000000000212DCC0>, order=<ib.ext.Order.Order object at 0x000000000212DC50>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C2240>>
2018-02-09 13:11:03,419 - DEBUG - Order OrderID 186
2018-02-09 13:11:03,420 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 13:11:03,420 - DEBUG - Order status PreSubmitted
2018-02-09 13:11:03,420 - DEBUG - Order Identification 186
2018-02-09 13:11:03,421 - DEBUG - Order Identification <class 'int'>
2018-02-09 13:11:03,421 - DEBUG - Profit ID from database is 186
2018-02-09 13:11:03,421 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 13:11:03,421 - DEBUG - Stop ID database is 0
2018-02-09 13:11:03,422 - DEBUG - Entry ID database is 186
2018-02-09 13:11:03,422 - DEBUG - Profit API ID is 186
2018-02-09 13:11:03,422 - DEBUG - Entry API ID is 186
2018-02-09 13:11:05,407 - DEBUG - Connecting to database
2018-02-09 13:11:05,414 - DEBUG - Connected to database
2018-02-09 13:11:05,415 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 13:11:05,416 - DEBUG - Stop loss value is 70.02
2018-02-09 13:11:05,417 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 13:11:05,417 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 13:11:05,419 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 13:11:05,419 - DEBUG - EntryPrice value is 68.725
2018-02-09 13:11:05,420 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 13:11:05,421 - DEBUG - Stop quantity 1
2018-02-09 13:11:05,422 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 13:11:05,423 - DEBUG - Direction is Short
2018-02-09 13:11:05,424 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 13:11:05,424 - DEBUG - Count is 0
2018-02-09 13:11:05,425 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 13:11:05,426 - DEBUG - Stop Loss Flag is 0
2018-02-09 13:11:05,427 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 13:11:05,427 - DEBUG - Max ID Order is (186,)
2018-02-09 13:11:05,428 - DEBUG - Today is 2018-02-09
2018-02-09 13:11:05,428 - DEBUG - Day of the week 4
2018-02-09 13:11:05,428 - DEBUG - Yesterday is 02/08/2018
2018-02-09 13:11:05,428 - DEBUG - In Position is  0
2018-02-09 13:11:05,429 - DEBUG - In Position is  <class 'int'>
2018-02-09 13:11:05,429 - DEBUG - curStopLossFlag is  0
2018-02-09 13:11:05,429 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 13:11:05,429 - DEBUG - Checking if Entry has been filled
2018-02-09 13:11:05,430 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 13:11:05,431 - DEBUG - EntryPend is 1
2018-02-09 13:11:05,431 - DEBUG - Try to Cancel Stop
2018-02-09 13:11:05,432 - DEBUG - Stop API ID 0
2018-02-09 13:11:05,432 - DEBUG - Profit API ID 186
2018-02-09 13:11:05,432 - DEBUG - Stop API ID <class 'int'>
2018-02-09 13:11:05,432 - DEBUG - Profit API ID <class 'int'>
2018-02-09 13:11:05,432 - DEBUG - Pos is 0
2018-02-09 13:11:05,433 - DEBUG - CurCount is 0
2018-02-09 13:11:05,433 - DEBUG - In Pos 0
2018-02-09 13:11:05,433 - DEBUG - Stop ID is 0
2018-02-09 13:11:05,433 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 13:11:05,435 - DEBUG - EntryPend is 1
2018-02-09 13:11:05,435 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 13:11:05,435 - DEBUG - Entry Date is 10
2018-02-09 13:11:05,435 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 13:11:05,436 - DEBUG - Order Profit ID is 186
2018-02-09 13:11:05,436 - DEBUG - Order Entry ID is 186
2018-02-09 13:11:05,436 - DEBUG - API ID is  0
2018-02-09 13:11:05,436 - DEBUG - Current Position is 0
2018-02-09 13:11:05,436 - DEBUG - Current Position is <class 'str'>
2018-02-09 13:11:05,437 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 13:11:05,437 - DEBUG - Time is 13
2018-02-09 13:11:05,437 - DEBUG - Time is <class 'int'>
2018-02-09 13:11:05,437 - DEBUG - Time is 11
2018-02-09 13:11:05,438 - DEBUG - Time is <class 'int'>
2018-02-09 13:11:05,438 - DEBUG - Disconnected from IBController
2018-02-09 13:11:05,439 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 13:16:01,350 - DEBUG - ****************************************************
2018-02-09 13:16:01,350 - DEBUG - Current Time is 01:16PM
2018-02-09 13:16:01,351 - DEBUG - Starting Pos Mgmt H E
2018-02-09 13:16:01,351 - DEBUG - Connecting to database
2018-02-09 13:16:01,382 - DEBUG - Connected to database
2018-02-09 13:16:01,382 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 13:16:01,385 - DEBUG - Order Profit is 186
2018-02-09 13:16:01,385 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 13:16:01,386 - DEBUG - Stop ID is 0
2018-02-09 13:16:01,387 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 13:16:01,388 - DEBUG - Entry ID is 186
2018-02-09 13:16:01,388 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 13:16:01,389 - DEBUG - OCA ID is 1
2018-02-09 13:16:01,390 - DEBUG - Connecting to IBController
2018-02-09 13:16:02,398 - DEBUG - Connected to IBController
2018-02-09 13:16:02,398 - DEBUG - Position requested
2018-02-09 13:16:02,399 - DEBUG - Pos Mgmt -12987
2018-02-09 13:16:02,400 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210DD68>, pos=-12987, avgCost=0.95368235>
2018-02-09 13:16:02,400 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 13:16:02,401 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 13:16:02,401 - DEBUG - Position is -12987
2018-02-09 13:16:03,398 - DEBUG - Open Orders requested
2018-02-09 13:16:03,400 - DEBUG - Reply Handler Orders is <openOrder orderId=185, contract=<ib.ext.Contract.Contract object at 0x000000000210DD30>, order=<ib.ext.Order.Order object at 0x000000000210DBE0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A2160>>
2018-02-09 13:16:03,401 - DEBUG - Order OrderID 185
2018-02-09 13:16:03,401 - DEBUG - reply handler status <orderStatus orderId=185, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187279, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 13:16:03,402 - DEBUG - Order status PreSubmitted
2018-02-09 13:16:03,402 - DEBUG - Order Identification 185
2018-02-09 13:16:03,402 - DEBUG - Order Identification <class 'int'>
2018-02-09 13:16:03,402 - DEBUG - Profit ID from database is 186
2018-02-09 13:16:03,403 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 13:16:03,403 - DEBUG - Stop ID database is 0
2018-02-09 13:16:03,403 - DEBUG - Entry ID database is 186
2018-02-09 13:16:03,404 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x000000000210DD30>, order=<ib.ext.Order.Order object at 0x000000000210DBE0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A21D0>>
2018-02-09 13:16:03,404 - DEBUG - Order OrderID 184
2018-02-09 13:16:03,405 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 13:16:03,405 - DEBUG - Order status PreSubmitted
2018-02-09 13:16:03,405 - DEBUG - Order Identification 184
2018-02-09 13:16:03,405 - DEBUG - Order Identification <class 'int'>
2018-02-09 13:16:03,406 - DEBUG - Profit ID from database is 186
2018-02-09 13:16:03,406 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 13:16:03,406 - DEBUG - Stop ID database is 0
2018-02-09 13:16:03,406 - DEBUG - Entry ID database is 186
2018-02-09 13:16:03,407 - DEBUG - Reply Handler Orders is <openOrder orderId=186, contract=<ib.ext.Contract.Contract object at 0x000000000210DD30>, order=<ib.ext.Order.Order object at 0x000000000210DBE0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A22B0>>
2018-02-09 13:16:03,408 - DEBUG - Order OrderID 186
2018-02-09 13:16:03,408 - DEBUG - reply handler status <orderStatus orderId=186, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 13:16:03,408 - DEBUG - Order status PreSubmitted
2018-02-09 13:16:03,409 - DEBUG - Order Identification 186
2018-02-09 13:16:03,409 - DEBUG - Order Identification <class 'int'>
2018-02-09 13:16:03,409 - DEBUG - Profit ID from database is 186
2018-02-09 13:16:03,409 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 13:16:03,410 - DEBUG - Stop ID database is 0
2018-02-09 13:16:03,410 - DEBUG - Entry ID database is 186
2018-02-09 13:16:03,410 - DEBUG - Profit API ID is 186
2018-02-09 13:16:03,410 - DEBUG - Entry API ID is 186
2018-02-09 13:16:05,398 - DEBUG - Connecting to database
2018-02-09 13:16:05,418 - DEBUG - Connected to database
2018-02-09 13:16:05,419 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 13:16:05,420 - DEBUG - Stop loss value is 70.02
2018-02-09 13:16:05,421 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 13:16:05,421 - DEBUG - Stop loss value is 57.775000000000006
2018-02-09 13:16:05,423 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 13:16:05,423 - DEBUG - EntryPrice value is 68.725
2018-02-09 13:16:05,425 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 13:16:05,425 - DEBUG - Stop quantity 1
2018-02-09 13:16:05,426 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 13:16:05,427 - DEBUG - Direction is Short
2018-02-09 13:16:05,428 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 13:16:05,428 - DEBUG - Count is 0
2018-02-09 13:16:05,430 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 13:16:05,430 - DEBUG - Stop Loss Flag is 0
2018-02-09 13:16:05,431 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 13:16:05,432 - DEBUG - Max ID Order is (186,)
2018-02-09 13:16:05,432 - DEBUG - Today is 2018-02-09
2018-02-09 13:16:05,432 - DEBUG - Day of the week 4
2018-02-09 13:16:05,433 - DEBUG - Yesterday is 02/08/2018
2018-02-09 13:16:05,433 - DEBUG - In Position is  0
2018-02-09 13:16:05,433 - DEBUG - In Position is  <class 'int'>
2018-02-09 13:16:05,433 - DEBUG - curStopLossFlag is  0
2018-02-09 13:16:05,434 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 13:16:05,434 - DEBUG - Checking if Entry has been filled
2018-02-09 13:16:05,434 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 13:16:05,435 - DEBUG - EntryPend is 1
2018-02-09 13:16:05,436 - DEBUG - Try to Cancel Stop
2018-02-09 13:16:05,436 - DEBUG - Stop API ID 0
2018-02-09 13:16:05,436 - DEBUG - Profit API ID 186
2018-02-09 13:16:05,436 - DEBUG - Stop API ID <class 'int'>
2018-02-09 13:16:05,437 - DEBUG - Profit API ID <class 'int'>
2018-02-09 13:16:05,437 - DEBUG - Pos is 0
2018-02-09 13:16:05,437 - DEBUG - CurCount is 0
2018-02-09 13:16:05,437 - DEBUG - In Pos 0
2018-02-09 13:16:05,438 - DEBUG - Stop ID is 0
2018-02-09 13:16:05,438 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 13:16:05,439 - DEBUG - EntryPend is 1
2018-02-09 13:16:05,439 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 13:16:05,440 - DEBUG - Entry Date is 10
2018-02-09 13:16:05,440 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 13:16:05,440 - DEBUG - Order Profit ID is 186
2018-02-09 13:16:05,440 - DEBUG - Order Entry ID is 186
2018-02-09 13:16:05,440 - DEBUG - API ID is  0
2018-02-09 13:16:05,441 - DEBUG - Current Position is 0
2018-02-09 13:16:05,441 - DEBUG - Current Position is <class 'str'>
2018-02-09 13:16:05,441 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 13:16:05,441 - DEBUG - Time is 13
2018-02-09 13:16:05,442 - DEBUG - Time is <class 'int'>
2018-02-09 13:16:05,442 - DEBUG - Time is 16
2018-02-09 13:16:05,442 - DEBUG - Time is <class 'int'>
2018-02-09 13:16:05,442 - ERROR - Setup Never Executed. Clearing Position information and Orders
2018-02-09 13:16:05,443 - ERROR - Canceled Order 186
2018-02-09 13:16:05,444 - DEBUG - Query is UPDATE Orders SET Status = 'Canceled' where idOrder = 186;
2018-02-09 13:16:05,462 - DEBUG - Query is UPDATE hasPosition SET BB_StopLossVal = 0 where CCY ='HE';
2018-02-09 13:16:05,478 - DEBUG - reply handler status <orderStatus orderId=186, status=Cancelled, filled=0, remaining=1, avgFillPrice=0.0, permId=720187280, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=None>
2018-02-09 13:16:05,478 - DEBUG - Order status Cancelled
2018-02-09 13:16:05,479 - DEBUG - Order Identification 186
2018-02-09 13:16:05,479 - DEBUG - Order Identification <class 'int'>
2018-02-09 13:16:05,479 - DEBUG - Query is UPDATE hasPosition SET BB_StopQty = 0 where CCY ='HE';
2018-02-09 13:16:05,479 - DEBUG - Profit ID from database is 186
2018-02-09 13:16:05,479 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 13:16:05,480 - DEBUG - Stop ID database is 0
2018-02-09 13:16:05,480 - DEBUG - Entry ID database is 186
2018-02-09 13:16:05,480 - DEBUG - Profit API ID is 186
2018-02-09 13:16:05,480 - DEBUG - Entry API ID is 186
2018-02-09 13:16:05,513 - DEBUG - Query is UPDATE hasPosition SET BB_direction = 0 where CCY ='HE';
2018-02-09 13:16:05,528 - DEBUG - Query is UPDATE hasPosition SET BB_EntryID = 0 where CCY = 'HE'
2018-02-09 13:16:05,542 - DEBUG - Query is UPDATE hasPosition SET BB_Position = 0 where CCY = 'HE'
2018-02-09 13:16:05,570 - DEBUG - Query is UPDATE hasPosition SET BB_ProfitID = 0 where CCY = 'HE'
2018-02-09 13:16:05,585 - DEBUG - Query is UPDATE hasPosition SET BB_StopID = 0 where CCY = 'HE'
2018-02-09 13:16:05,612 - DEBUG - Query is UPDATE hasPosition SET BBEntryPending = 0 where CCY = 'HE'
2018-02-09 13:16:05,628 - DEBUG - Query is UPDATE hasPosition SET Count = 0 where CCY = 'HE'
2018-02-09 13:16:05,643 - DEBUG - Query is UPDATE hasPosition SET BB_EntryPrice = 0 where CCY = 'HE'
2018-02-09 13:16:05,671 - DEBUG - Query is UPDATE hasPosition SET BB_ProfitPrice = 0 where CCY = 'HE'
2018-02-09 13:16:05,687 - DEBUG - Disconnected from IBController
2018-02-09 13:16:05,687 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 13:21:01,347 - DEBUG - ****************************************************
2018-02-09 13:21:01,348 - DEBUG - Current Time is 01:21PM
2018-02-09 13:21:01,348 - DEBUG - Starting Pos Mgmt H E
2018-02-09 13:21:01,348 - DEBUG - Connecting to database
2018-02-09 13:21:01,405 - DEBUG - Connected to database
2018-02-09 13:21:01,406 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 13:21:01,407 - DEBUG - Order Profit is 0
2018-02-09 13:21:01,407 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 13:21:01,409 - DEBUG - Stop ID is 0
2018-02-09 13:21:01,409 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 13:21:01,410 - DEBUG - Entry ID is 0
2018-02-09 13:21:01,411 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 13:21:01,412 - DEBUG - OCA ID is 1
2018-02-09 13:21:01,412 - DEBUG - Connecting to IBController
2018-02-09 13:21:02,418 - DEBUG - Connected to IBController
2018-02-09 13:21:02,418 - DEBUG - Position requested
2018-02-09 13:21:02,419 - DEBUG - Pos Mgmt -12987
2018-02-09 13:21:02,419 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212DCC0>, pos=-12987, avgCost=0.95368235>
2018-02-09 13:21:02,420 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 13:21:02,420 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 13:21:02,420 - DEBUG - Position is -12987
2018-02-09 13:21:03,419 - DEBUG - Open Orders requested
2018-02-09 13:21:03,420 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x000000000212DA58>, order=<ib.ext.Order.Order object at 0x000000000212DA20>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C2080>>
2018-02-09 13:21:03,421 - DEBUG - Order OrderID 184
2018-02-09 13:21:03,422 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 13:21:03,422 - DEBUG - Order status PreSubmitted
2018-02-09 13:21:03,422 - DEBUG - Order Identification 184
2018-02-09 13:21:03,423 - DEBUG - Order Identification <class 'int'>
2018-02-09 13:21:03,423 - DEBUG - Profit ID from database is 0
2018-02-09 13:21:03,423 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 13:21:03,423 - DEBUG - Stop ID database is 0
2018-02-09 13:21:03,424 - DEBUG - Entry ID database is 0
2018-02-09 13:21:05,421 - DEBUG - Connecting to database
2018-02-09 13:21:05,428 - DEBUG - Connected to database
2018-02-09 13:21:05,429 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 13:21:05,430 - DEBUG - Stop loss value is 0
2018-02-09 13:21:05,431 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 13:21:05,432 - DEBUG - Stop loss value is 0
2018-02-09 13:21:05,433 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 13:21:05,433 - DEBUG - EntryPrice value is 0
2018-02-09 13:21:05,435 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 13:21:05,435 - DEBUG - Stop quantity 0
2018-02-09 13:21:05,437 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 13:21:05,437 - DEBUG - Direction is 0
2018-02-09 13:21:05,438 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 13:21:05,439 - DEBUG - Count is 0
2018-02-09 13:21:05,440 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 13:21:05,440 - DEBUG - Stop Loss Flag is 0
2018-02-09 13:21:05,442 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 13:21:05,442 - DEBUG - Max ID Order is (186,)
2018-02-09 13:21:05,442 - DEBUG - Today is 2018-02-09
2018-02-09 13:21:05,443 - DEBUG - Day of the week 4
2018-02-09 13:21:05,443 - DEBUG - Yesterday is 02/08/2018
2018-02-09 13:21:05,443 - DEBUG - In Position is  0
2018-02-09 13:21:05,444 - DEBUG - In Position is  <class 'int'>
2018-02-09 13:21:05,444 - DEBUG - curStopLossFlag is  0
2018-02-09 13:21:05,444 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 13:21:05,444 - DEBUG - Checking if Entry has been filled
2018-02-09 13:21:05,444 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 13:21:05,446 - DEBUG - EntryPend is 0
2018-02-09 13:21:05,446 - DEBUG - Try to Cancel Stop
2018-02-09 13:21:05,446 - DEBUG - Stop API ID 0
2018-02-09 13:21:05,447 - DEBUG - Profit API ID 0
2018-02-09 13:21:05,447 - DEBUG - Stop API ID <class 'int'>
2018-02-09 13:21:05,447 - DEBUG - Profit API ID <class 'int'>
2018-02-09 13:21:05,447 - DEBUG - Pos is 0
2018-02-09 13:21:05,448 - DEBUG - CurCount is 0
2018-02-09 13:21:05,448 - DEBUG - In Pos 0
2018-02-09 13:21:05,448 - DEBUG - Stop ID is 0
2018-02-09 13:21:05,448 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 13:21:05,450 - DEBUG - EntryPend is 0
2018-02-09 13:21:05,450 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 13:21:05,450 - DEBUG - Entry Date is 10
2018-02-09 13:21:05,450 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 13:21:05,451 - DEBUG - Order Profit ID is 0
2018-02-09 13:21:05,451 - DEBUG - Order Entry ID is 0
2018-02-09 13:21:05,451 - DEBUG - API ID is  0
2018-02-09 13:21:05,451 - DEBUG - Current Position is 0
2018-02-09 13:21:05,451 - DEBUG - Current Position is <class 'str'>
2018-02-09 13:21:05,452 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 13:21:05,452 - DEBUG - Time is 13
2018-02-09 13:21:05,452 - DEBUG - Time is <class 'int'>
2018-02-09 13:21:05,452 - DEBUG - Time is 21
2018-02-09 13:21:05,453 - DEBUG - Time is <class 'int'>
2018-02-09 13:21:05,453 - ERROR - Setup Never Executed. Clearing Position information and Orders
2018-02-09 13:21:05,453 - ERROR - Canceled Order 0
2018-02-09 13:21:05,453 - DEBUG - Query is UPDATE Orders SET Status = 'Canceled' where idOrder = 0;
2018-02-09 13:21:05,469 - DEBUG - Query is UPDATE hasPosition SET BB_StopLossVal = 0 where CCY ='HE';
2018-02-09 13:21:05,483 - DEBUG - Query is UPDATE hasPosition SET BB_StopQty = 0 where CCY ='HE';
2018-02-09 13:21:05,501 - DEBUG - Query is UPDATE hasPosition SET BB_direction = 0 where CCY ='HE';
2018-02-09 13:21:05,516 - DEBUG - Query is UPDATE hasPosition SET BB_EntryID = 0 where CCY = 'HE'
2018-02-09 13:21:05,531 - DEBUG - Query is UPDATE hasPosition SET BB_Position = 0 where CCY = 'HE'
2018-02-09 13:21:05,564 - DEBUG - Query is UPDATE hasPosition SET BB_ProfitID = 0 where CCY = 'HE'
2018-02-09 13:21:05,578 - DEBUG - Query is UPDATE hasPosition SET BB_StopID = 0 where CCY = 'HE'
2018-02-09 13:21:05,594 - DEBUG - Query is UPDATE hasPosition SET BBEntryPending = 0 where CCY = 'HE'
2018-02-09 13:21:05,609 - DEBUG - Query is UPDATE hasPosition SET Count = 0 where CCY = 'HE'
2018-02-09 13:21:05,624 - DEBUG - Query is UPDATE hasPosition SET BB_EntryPrice = 0 where CCY = 'HE'
2018-02-09 13:21:05,638 - DEBUG - Query is UPDATE hasPosition SET BB_ProfitPrice = 0 where CCY = 'HE'
2018-02-09 13:21:05,653 - DEBUG - Disconnected from IBController
2018-02-09 13:21:05,654 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 13:26:01,345 - DEBUG - ****************************************************
2018-02-09 13:26:01,346 - DEBUG - Current Time is 01:26PM
2018-02-09 13:26:01,346 - DEBUG - Starting Pos Mgmt H E
2018-02-09 13:26:01,346 - DEBUG - Connecting to database
2018-02-09 13:26:01,383 - DEBUG - Connected to database
2018-02-09 13:26:01,383 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 13:26:01,384 - DEBUG - Order Profit is 0
2018-02-09 13:26:01,385 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 13:26:01,386 - DEBUG - Stop ID is 0
2018-02-09 13:26:01,386 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 13:26:01,388 - DEBUG - Entry ID is 0
2018-02-09 13:26:01,388 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 13:26:01,390 - DEBUG - OCA ID is 1
2018-02-09 13:26:01,390 - DEBUG - Connecting to IBController
2018-02-09 13:26:02,397 - DEBUG - Connected to IBController
2018-02-09 13:26:02,397 - DEBUG - Position requested
2018-02-09 13:26:02,398 - DEBUG - Pos Mgmt -12987
2018-02-09 13:26:02,399 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020EDA90>, pos=-12987, avgCost=0.95368235>
2018-02-09 13:26:02,399 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 13:26:02,399 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 13:26:02,400 - DEBUG - Position is -12987
2018-02-09 13:26:03,399 - DEBUG - Open Orders requested
2018-02-09 13:26:03,401 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x00000000020EDBE0>, order=<ib.ext.Order.Order object at 0x00000000020EDD30>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002181080>>
2018-02-09 13:26:03,401 - DEBUG - Order OrderID 184
2018-02-09 13:26:03,402 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 13:26:03,402 - DEBUG - Order status PreSubmitted
2018-02-09 13:26:03,402 - DEBUG - Order Identification 184
2018-02-09 13:26:03,402 - DEBUG - Order Identification <class 'int'>
2018-02-09 13:26:03,403 - DEBUG - Profit ID from database is 0
2018-02-09 13:26:03,403 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 13:26:03,403 - DEBUG - Stop ID database is 0
2018-02-09 13:26:03,403 - DEBUG - Entry ID database is 0
2018-02-09 13:26:05,401 - DEBUG - Connecting to database
2018-02-09 13:26:05,408 - DEBUG - Connected to database
2018-02-09 13:26:05,409 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 13:26:05,410 - DEBUG - Stop loss value is 0
2018-02-09 13:26:05,411 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 13:26:05,412 - DEBUG - Stop loss value is 0
2018-02-09 13:26:05,413 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 13:26:05,413 - DEBUG - EntryPrice value is 0
2018-02-09 13:26:05,414 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 13:26:05,415 - DEBUG - Stop quantity 0
2018-02-09 13:26:05,416 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 13:26:05,416 - DEBUG - Direction is 0
2018-02-09 13:26:05,418 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 13:26:05,418 - DEBUG - Count is 0
2018-02-09 13:26:05,420 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 13:26:05,420 - DEBUG - Stop Loss Flag is 0
2018-02-09 13:26:05,421 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 13:26:05,422 - DEBUG - Max ID Order is (186,)
2018-02-09 13:26:05,422 - DEBUG - Today is 2018-02-09
2018-02-09 13:26:05,422 - DEBUG - Day of the week 4
2018-02-09 13:26:05,423 - DEBUG - Yesterday is 02/08/2018
2018-02-09 13:26:05,423 - DEBUG - In Position is  0
2018-02-09 13:26:05,423 - DEBUG - In Position is  <class 'int'>
2018-02-09 13:26:05,423 - DEBUG - curStopLossFlag is  0
2018-02-09 13:26:05,424 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 13:26:05,424 - DEBUG - Checking if Entry has been filled
2018-02-09 13:26:05,424 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 13:26:05,425 - DEBUG - EntryPend is 0
2018-02-09 13:26:05,426 - DEBUG - Try to Cancel Stop
2018-02-09 13:26:05,426 - DEBUG - Stop API ID 0
2018-02-09 13:26:05,426 - DEBUG - Profit API ID 0
2018-02-09 13:26:05,426 - DEBUG - Stop API ID <class 'int'>
2018-02-09 13:26:05,427 - DEBUG - Profit API ID <class 'int'>
2018-02-09 13:26:05,427 - DEBUG - Pos is 0
2018-02-09 13:26:05,427 - DEBUG - CurCount is 0
2018-02-09 13:26:05,427 - DEBUG - In Pos 0
2018-02-09 13:26:05,427 - DEBUG - Stop ID is 0
2018-02-09 13:26:05,428 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 13:26:05,429 - DEBUG - EntryPend is 0
2018-02-09 13:26:05,429 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 13:26:05,430 - DEBUG - Entry Date is 10
2018-02-09 13:26:05,430 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 13:26:05,430 - DEBUG - Order Profit ID is 0
2018-02-09 13:26:05,430 - DEBUG - Order Entry ID is 0
2018-02-09 13:26:05,431 - DEBUG - API ID is  0
2018-02-09 13:26:05,431 - DEBUG - Current Position is 0
2018-02-09 13:26:05,431 - DEBUG - Current Position is <class 'str'>
2018-02-09 13:26:05,431 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 13:26:05,431 - DEBUG - Time is 13
2018-02-09 13:26:05,432 - DEBUG - Time is <class 'int'>
2018-02-09 13:26:05,432 - DEBUG - Time is 26
2018-02-09 13:26:05,432 - DEBUG - Time is <class 'int'>
2018-02-09 13:26:05,432 - ERROR - Setup Never Executed. Clearing Position information and Orders
2018-02-09 13:26:05,433 - ERROR - Canceled Order 0
2018-02-09 13:26:05,433 - DEBUG - Query is UPDATE Orders SET Status = 'Canceled' where idOrder = 0;
2018-02-09 13:26:05,449 - DEBUG - Query is UPDATE hasPosition SET BB_StopLossVal = 0 where CCY ='HE';
2018-02-09 13:26:05,463 - DEBUG - Query is UPDATE hasPosition SET BB_StopQty = 0 where CCY ='HE';
2018-02-09 13:26:05,478 - DEBUG - Query is UPDATE hasPosition SET BB_direction = 0 where CCY ='HE';
2018-02-09 13:26:05,492 - DEBUG - Query is UPDATE hasPosition SET BB_EntryID = 0 where CCY = 'HE'
2018-02-09 13:26:05,509 - DEBUG - Query is UPDATE hasPosition SET BB_Position = 0 where CCY = 'HE'
2018-02-09 13:26:05,522 - DEBUG - Query is UPDATE hasPosition SET BB_ProfitID = 0 where CCY = 'HE'
2018-02-09 13:26:05,536 - DEBUG - Query is UPDATE hasPosition SET BB_StopID = 0 where CCY = 'HE'
2018-02-09 13:26:05,550 - DEBUG - Query is UPDATE hasPosition SET BBEntryPending = 0 where CCY = 'HE'
2018-02-09 13:26:05,564 - DEBUG - Query is UPDATE hasPosition SET Count = 0 where CCY = 'HE'
2018-02-09 13:26:05,580 - DEBUG - Query is UPDATE hasPosition SET BB_EntryPrice = 0 where CCY = 'HE'
2018-02-09 13:26:05,595 - DEBUG - Query is UPDATE hasPosition SET BB_ProfitPrice = 0 where CCY = 'HE'
2018-02-09 13:26:05,610 - DEBUG - Disconnected from IBController
2018-02-09 13:26:05,610 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 13:31:01,352 - DEBUG - ****************************************************
2018-02-09 13:31:01,353 - DEBUG - Current Time is 01:31PM
2018-02-09 13:31:01,353 - DEBUG - Starting Pos Mgmt H E
2018-02-09 13:31:01,354 - DEBUG - Connecting to database
2018-02-09 13:31:01,383 - DEBUG - Connected to database
2018-02-09 13:31:01,384 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 13:31:01,385 - DEBUG - Order Profit is 0
2018-02-09 13:31:01,386 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 13:31:01,387 - DEBUG - Stop ID is 0
2018-02-09 13:31:01,387 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 13:31:01,389 - DEBUG - Entry ID is 0
2018-02-09 13:31:01,389 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 13:31:01,391 - DEBUG - OCA ID is 1
2018-02-09 13:31:01,391 - DEBUG - Connecting to IBController
2018-02-09 13:31:02,408 - DEBUG - Connected to IBController
2018-02-09 13:31:02,408 - DEBUG - Position requested
2018-02-09 13:31:02,409 - DEBUG - Pos Mgmt -12987
2018-02-09 13:31:02,410 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211CA90>, pos=-12987, avgCost=0.95368235>
2018-02-09 13:31:02,410 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 13:31:02,410 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 13:31:02,411 - DEBUG - Position is -12987
2018-02-09 13:31:03,410 - DEBUG - Open Orders requested
2018-02-09 13:31:03,420 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x000000000211CBE0>, order=<ib.ext.Order.Order object at 0x000000000211CCC0>, orderState=<ib.ext.OrderState.OrderState object at 0x000000000211CFD0>>
2018-02-09 13:31:03,421 - DEBUG - Order OrderID 184
2018-02-09 13:31:03,421 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 13:31:03,422 - DEBUG - Order status PreSubmitted
2018-02-09 13:31:03,422 - DEBUG - Order Identification 184
2018-02-09 13:31:03,422 - DEBUG - Order Identification <class 'int'>
2018-02-09 13:31:03,422 - DEBUG - Profit ID from database is 0
2018-02-09 13:31:03,423 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 13:31:03,423 - DEBUG - Stop ID database is 0
2018-02-09 13:31:03,423 - DEBUG - Entry ID database is 0
2018-02-09 13:31:05,410 - DEBUG - Connecting to database
2018-02-09 13:31:05,418 - DEBUG - Connected to database
2018-02-09 13:31:05,419 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 13:31:05,420 - DEBUG - Stop loss value is 0
2018-02-09 13:31:05,421 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 13:31:05,421 - DEBUG - Stop loss value is 0
2018-02-09 13:31:05,423 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 13:31:05,423 - DEBUG - EntryPrice value is 0
2018-02-09 13:31:05,424 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 13:31:05,425 - DEBUG - Stop quantity 0
2018-02-09 13:31:05,426 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 13:31:05,426 - DEBUG - Direction is 0
2018-02-09 13:31:05,429 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 13:31:05,429 - DEBUG - Count is 0
2018-02-09 13:31:05,430 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 13:31:05,431 - DEBUG - Stop Loss Flag is 0
2018-02-09 13:31:05,432 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 13:31:05,432 - DEBUG - Max ID Order is (186,)
2018-02-09 13:31:05,433 - DEBUG - Today is 2018-02-09
2018-02-09 13:31:05,433 - DEBUG - Day of the week 4
2018-02-09 13:31:05,434 - DEBUG - Yesterday is 02/08/2018
2018-02-09 13:31:05,434 - DEBUG - In Position is  0
2018-02-09 13:31:05,434 - DEBUG - In Position is  <class 'int'>
2018-02-09 13:31:05,434 - DEBUG - curStopLossFlag is  0
2018-02-09 13:31:05,435 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 13:31:05,435 - DEBUG - Checking if Entry has been filled
2018-02-09 13:31:05,435 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 13:31:05,437 - DEBUG - EntryPend is 0
2018-02-09 13:31:05,437 - DEBUG - Try to Cancel Stop
2018-02-09 13:31:05,437 - DEBUG - Stop API ID 0
2018-02-09 13:31:05,437 - DEBUG - Profit API ID 0
2018-02-09 13:31:05,438 - DEBUG - Stop API ID <class 'int'>
2018-02-09 13:31:05,438 - DEBUG - Profit API ID <class 'int'>
2018-02-09 13:31:05,438 - DEBUG - Pos is 0
2018-02-09 13:31:05,438 - DEBUG - CurCount is 0
2018-02-09 13:31:05,439 - DEBUG - In Pos 0
2018-02-09 13:31:05,439 - DEBUG - Stop ID is 0
2018-02-09 13:31:05,439 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 13:31:05,441 - DEBUG - EntryPend is 0
2018-02-09 13:31:05,441 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 13:31:05,441 - DEBUG - Entry Date is 10
2018-02-09 13:31:05,441 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 13:31:05,441 - DEBUG - Order Profit ID is 0
2018-02-09 13:31:05,442 - DEBUG - Order Entry ID is 0
2018-02-09 13:31:05,442 - DEBUG - API ID is  0
2018-02-09 13:31:05,442 - DEBUG - Current Position is 0
2018-02-09 13:31:05,442 - DEBUG - Current Position is <class 'str'>
2018-02-09 13:31:05,443 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 13:31:05,443 - DEBUG - Time is 13
2018-02-09 13:31:05,443 - DEBUG - Time is <class 'int'>
2018-02-09 13:31:05,443 - DEBUG - Time is 31
2018-02-09 13:31:05,444 - DEBUG - Time is <class 'int'>
2018-02-09 13:31:05,444 - ERROR - Setup Never Executed. Clearing Position information and Orders
2018-02-09 13:31:05,444 - ERROR - Canceled Order 0
2018-02-09 13:31:05,445 - DEBUG - Query is UPDATE Orders SET Status = 'Canceled' where idOrder = 0;
2018-02-09 13:31:05,460 - DEBUG - Query is UPDATE hasPosition SET BB_StopLossVal = 0 where CCY ='HE';
2018-02-09 13:31:05,474 - DEBUG - Query is UPDATE hasPosition SET BB_StopQty = 0 where CCY ='HE';
2018-02-09 13:31:05,489 - DEBUG - Query is UPDATE hasPosition SET BB_direction = 0 where CCY ='HE';
2018-02-09 13:31:05,503 - DEBUG - Query is UPDATE hasPosition SET BB_EntryID = 0 where CCY = 'HE'
2018-02-09 13:31:05,518 - DEBUG - Query is UPDATE hasPosition SET BB_Position = 0 where CCY = 'HE'
2018-02-09 13:31:05,534 - DEBUG - Query is UPDATE hasPosition SET BB_ProfitID = 0 where CCY = 'HE'
2018-02-09 13:31:05,550 - DEBUG - Query is UPDATE hasPosition SET BB_StopID = 0 where CCY = 'HE'
2018-02-09 13:31:05,567 - DEBUG - Query is UPDATE hasPosition SET BBEntryPending = 0 where CCY = 'HE'
2018-02-09 13:31:05,581 - DEBUG - Query is UPDATE hasPosition SET Count = 0 where CCY = 'HE'
2018-02-09 13:31:05,596 - DEBUG - Query is UPDATE hasPosition SET BB_EntryPrice = 0 where CCY = 'HE'
2018-02-09 13:31:05,610 - DEBUG - Query is UPDATE hasPosition SET BB_ProfitPrice = 0 where CCY = 'HE'
2018-02-09 13:31:05,625 - DEBUG - Disconnected from IBController
2018-02-09 13:31:05,625 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-09 13:36:01,353 - DEBUG - ****************************************************
2018-02-09 13:36:01,354 - DEBUG - Current Time is 01:36PM
2018-02-09 13:36:01,354 - DEBUG - Starting Pos Mgmt H E
2018-02-09 13:36:01,354 - DEBUG - Connecting to database
2018-02-09 13:36:01,409 - DEBUG - Connected to database
2018-02-09 13:36:01,409 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-09 13:36:01,411 - DEBUG - Order Profit is 0
2018-02-09 13:36:01,412 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-09 13:36:01,413 - DEBUG - Stop ID is 0
2018-02-09 13:36:01,413 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-09 13:36:01,415 - DEBUG - Entry ID is 0
2018-02-09 13:36:01,415 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-09 13:36:01,417 - DEBUG - OCA ID is 1
2018-02-09 13:36:01,417 - DEBUG - Connecting to IBController
2018-02-09 13:36:02,422 - DEBUG - Connected to IBController
2018-02-09 13:36:02,422 - DEBUG - Position requested
2018-02-09 13:36:02,435 - DEBUG - Pos Mgmt -12987
2018-02-09 13:36:02,435 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020EDD68>, pos=-12987, avgCost=0.95368235>
2018-02-09 13:36:02,436 - DEBUG - ccy1 Symbol with position is NZD
2018-02-09 13:36:02,436 - DEBUG - ccy2 Currency with position is CAD
2018-02-09 13:36:02,436 - DEBUG - Position is -12987
2018-02-09 13:36:03,435 - DEBUG - Open Orders requested
2018-02-09 13:36:03,437 - DEBUG - Reply Handler Orders is <openOrder orderId=184, contract=<ib.ext.Contract.Contract object at 0x00000000020EDA58>, order=<ib.ext.Order.Order object at 0x00000000020EDBA8>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002181080>>
2018-02-09 13:36:03,438 - DEBUG - Order OrderID 184
2018-02-09 13:36:03,438 - DEBUG - reply handler status <orderStatus orderId=184, status=PreSubmitted, filled=0, remaining=5, avgFillPrice=0.0, permId=720187278, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-09 13:36:03,439 - DEBUG - Order status PreSubmitted
2018-02-09 13:36:03,439 - DEBUG - Order Identification 184
2018-02-09 13:36:03,439 - DEBUG - Order Identification <class 'int'>
2018-02-09 13:36:03,440 - DEBUG - Profit ID from database is 0
2018-02-09 13:36:03,440 - DEBUG - Profit ID from database is <class 'str'>
2018-02-09 13:36:03,440 - DEBUG - Stop ID database is 0
2018-02-09 13:36:03,440 - DEBUG - Entry ID database is 0
2018-02-09 13:36:05,438 - DEBUG - Connecting to database
2018-02-09 13:36:05,445 - DEBUG - Connected to database
2018-02-09 13:36:05,447 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-09 13:36:05,447 - DEBUG - Stop loss value is 0
2018-02-09 13:36:05,449 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-09 13:36:05,449 - DEBUG - Stop loss value is 0
2018-02-09 13:36:05,451 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-09 13:36:05,451 - DEBUG - EntryPrice value is 0
2018-02-09 13:36:05,452 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-09 13:36:05,453 - DEBUG - Stop quantity 0
2018-02-09 13:36:05,454 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-09 13:36:05,454 - DEBUG - Direction is 0
2018-02-09 13:36:05,456 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-09 13:36:05,456 - DEBUG - Count is 0
2018-02-09 13:36:05,457 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-09 13:36:05,458 - DEBUG - Stop Loss Flag is 0
2018-02-09 13:36:05,459 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-09 13:36:05,459 - DEBUG - Max ID Order is (186,)
2018-02-09 13:36:05,460 - DEBUG - Today is 2018-02-09
2018-02-09 13:36:05,460 - DEBUG - Day of the week 4
2018-02-09 13:36:05,460 - DEBUG - Yesterday is 02/08/2018
2018-02-09 13:36:05,460 - DEBUG - In Position is  0
2018-02-09 13:36:05,461 - DEBUG - In Position is  <class 'int'>
2018-02-09 13:36:05,461 - DEBUG - curStopLossFlag is  0
2018-02-09 13:36:05,461 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-09 13:36:05,461 - DEBUG - Checking if Entry has been filled
2018-02-09 13:36:05,462 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 13:36:05,463 - DEBUG - EntryPend is 0
2018-02-09 13:36:05,464 - DEBUG - Try to Cancel Stop
2018-02-09 13:36:05,464 - DEBUG - Stop API ID 0
2018-02-09 13:36:05,464 - DEBUG - Profit API ID 0
2018-02-09 13:36:05,464 - DEBUG - Stop API ID <class 'int'>
2018-02-09 13:36:05,465 - DEBUG - Profit API ID <class 'int'>
2018-02-09 13:36:05,465 - DEBUG - Pos is 0
2018-02-09 13:36:05,465 - DEBUG - CurCount is 0
2018-02-09 13:36:05,465 - DEBUG - In Pos 0
2018-02-09 13:36:05,465 - DEBUG - Stop ID is 0
2018-02-09 13:36:05,466 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-09 13:36:05,467 - DEBUG - EntryPend is 0
2018-02-09 13:36:05,467 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-09 13:36:05,468 - DEBUG - Entry Date is 10
2018-02-09 13:36:05,468 - DEBUG - confirming yesterday is 02/08/2018
2018-02-09 13:36:05,468 - DEBUG - Order Profit ID is 0
2018-02-09 13:36:05,468 - DEBUG - Order Entry ID is 0
2018-02-09 13:36:05,468 - DEBUG - API ID is  0
2018-02-09 13:36:05,469 - DEBUG - Current Position is 0
2018-02-09 13:36:05,469 - DEBUG - Current Position is <class 'str'>
2018-02-09 13:36:05,469 - DEBUG - Checking if Positions should be close at EOD
2018-02-09 13:36:05,469 - DEBUG - Time is 13
2018-02-09 13:36:05,470 - DEBUG - Time is <class 'int'>
2018-02-09 13:36:05,470 - DEBUG - Time is 36
2018-02-09 13:36:05,470 - DEBUG - Time is <class 'int'>
2018-02-09 13:36:05,470 - ERROR - Setup Never Executed. Clearing Position information and Orders
2018-02-09 13:36:05,471 - ERROR - Canceled Order 0
2018-02-09 13:36:05,471 - DEBUG - Query is UPDATE Orders SET Status = 'Canceled' where idOrder = 0;
2018-02-09 13:36:05,486 - DEBUG - Query is UPDATE hasPosition SET BB_StopLossVal = 0 where CCY ='HE';
2018-02-09 13:36:05,500 - DEBUG - Query is UPDATE hasPosition SET BB_StopQty = 0 where CCY ='HE';
2018-02-09 13:36:05,516 - DEBUG - Query is UPDATE hasPosition SET BB_direction = 0 where CCY ='HE';
2018-02-09 13:36:05,529 - DEBUG - Query is UPDATE hasPosition SET BB_EntryID = 0 where CCY = 'HE'
2018-02-09 13:36:05,544 - DEBUG - Query is UPDATE hasPosition SET BB_Position = 0 where CCY = 'HE'
2018-02-09 13:36:05,559 - DEBUG - Query is UPDATE hasPosition SET BB_ProfitID = 0 where CCY = 'HE'
2018-02-09 13:36:05,573 - DEBUG - Query is UPDATE hasPosition SET BB_StopID = 0 where CCY = 'HE'
2018-02-09 13:36:05,588 - DEBUG - Query is UPDATE hasPosition SET BBEntryPending = 0 where CCY = 'HE'
2018-02-09 13:36:05,601 - DEBUG - Query is UPDATE hasPosition SET Count = 0 where CCY = 'HE'
2018-02-09 13:36:05,616 - DEBUG - Query is UPDATE hasPosition SET BB_EntryPrice = 0 where CCY = 'HE'
2018-02-09 13:36:05,642 - DEBUG - Query is UPDATE hasPosition SET BB_ProfitPrice = 0 where CCY = 'HE'
2018-02-09 13:36:05,660 - DEBUG - Disconnected from IBController
2018-02-09 13:36:05,661 - DEBUG - END POS MGMT SCRIPT :-!
