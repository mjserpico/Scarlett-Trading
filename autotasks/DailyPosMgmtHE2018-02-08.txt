2018-02-08 09:36:01,433 - DEBUG - ****************************************************
2018-02-08 09:36:01,433 - DEBUG - Current Time is 09:36AM
2018-02-08 09:36:01,434 - DEBUG - Starting Pos Mgmt H E
2018-02-08 09:36:01,434 - DEBUG - Connecting to database
2018-02-08 09:36:01,468 - DEBUG - Connected to database
2018-02-08 09:36:01,468 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 09:36:01,470 - DEBUG - Order Profit is 181
2018-02-08 09:36:01,470 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 09:36:01,472 - DEBUG - Stop ID is 0
2018-02-08 09:36:01,472 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 09:36:01,473 - DEBUG - Entry ID is 181
2018-02-08 09:36:01,473 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 09:36:01,475 - DEBUG - OCA ID is 1
2018-02-08 09:36:01,475 - DEBUG - Connecting to IBController
2018-02-08 09:36:02,480 - DEBUG - Connected to IBController
2018-02-08 09:36:02,480 - DEBUG - Position requested
2018-02-08 09:36:02,481 - DEBUG - Pos Mgmt 0
2018-02-08 09:36:02,482 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212DC88>, pos=0, avgCost=0.0>
2018-02-08 09:36:02,482 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 09:36:02,482 - DEBUG - ccy2 Currency with position is USD
2018-02-08 09:36:02,483 - DEBUG - Position is 0
2018-02-08 09:36:02,483 - DEBUG - Pos Mgmt -12987
2018-02-08 09:36:02,483 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212DD30>, pos=-12987, avgCost=0.95368235>
2018-02-08 09:36:02,484 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 09:36:02,484 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 09:36:02,484 - DEBUG - Position is -12987
2018-02-08 09:36:03,481 - DEBUG - Open Orders requested
2018-02-08 09:36:03,482 - DEBUG - Reply Handler Orders is <openOrder orderId=180, contract=<ib.ext.Contract.Contract object at 0x000000000212DF28>, order=<ib.ext.Order.Order object at 0x000000000212DCC0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C2198>>
2018-02-08 09:36:03,483 - DEBUG - Order OrderID 180
2018-02-08 09:36:03,484 - DEBUG - reply handler status <orderStatus orderId=180, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213620, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 09:36:03,484 - DEBUG - Order status PreSubmitted
2018-02-08 09:36:03,485 - DEBUG - Order Identification 180
2018-02-08 09:36:03,485 - DEBUG - Order Identification <class 'int'>
2018-02-08 09:36:03,485 - DEBUG - Profit ID from database is 181
2018-02-08 09:36:03,485 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 09:36:03,486 - DEBUG - Stop ID database is 0
2018-02-08 09:36:03,486 - DEBUG - Entry ID database is 181
2018-02-08 09:36:03,487 - DEBUG - Reply Handler Orders is <openOrder orderId=181, contract=<ib.ext.Contract.Contract object at 0x000000000212DF28>, order=<ib.ext.Order.Order object at 0x000000000212DCC0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C20B8>>
2018-02-08 09:36:03,487 - DEBUG - Order OrderID 181
2018-02-08 09:36:03,488 - DEBUG - reply handler status <orderStatus orderId=181, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213621, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 09:36:03,488 - DEBUG - Order status PreSubmitted
2018-02-08 09:36:03,488 - DEBUG - Order Identification 181
2018-02-08 09:36:03,488 - DEBUG - Order Identification <class 'int'>
2018-02-08 09:36:03,489 - DEBUG - Profit ID from database is 181
2018-02-08 09:36:03,489 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 09:36:03,489 - DEBUG - Stop ID database is 0
2018-02-08 09:36:03,489 - DEBUG - Entry ID database is 181
2018-02-08 09:36:03,489 - DEBUG - Profit API ID is 181
2018-02-08 09:36:03,490 - DEBUG - Entry API ID is 181
2018-02-08 09:36:05,483 - DEBUG - Connecting to database
2018-02-08 09:36:05,490 - DEBUG - Connected to database
2018-02-08 09:36:05,492 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 09:36:05,492 - DEBUG - Stop loss value is 71.07
2018-02-08 09:36:05,494 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 09:36:05,494 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 09:36:05,495 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 09:36:05,496 - DEBUG - EntryPrice value is 68.85
2018-02-08 09:36:05,497 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 09:36:05,497 - DEBUG - Stop quantity 1
2018-02-08 09:36:05,500 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 09:36:05,500 - DEBUG - Direction is Short
2018-02-08 09:36:05,501 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 09:36:05,502 - DEBUG - Count is 0
2018-02-08 09:36:05,503 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 09:36:05,503 - DEBUG - Stop Loss Flag is 0
2018-02-08 09:36:05,505 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 09:36:05,505 - DEBUG - Max ID Order is (181,)
2018-02-08 09:36:05,505 - DEBUG - Today is 2018-02-08
2018-02-08 09:36:05,506 - DEBUG - Day of the week 3
2018-02-08 09:36:05,506 - DEBUG - Yesterday is 02/07/2018
2018-02-08 09:36:05,506 - DEBUG - In Position is  0
2018-02-08 09:36:05,506 - DEBUG - In Position is  <class 'int'>
2018-02-08 09:36:05,507 - DEBUG - curStopLossFlag is  0
2018-02-08 09:36:05,507 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 09:36:05,507 - DEBUG - Checking if Entry has been filled
2018-02-08 09:36:05,507 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 09:36:05,509 - DEBUG - EntryPend is 1
2018-02-08 09:36:05,509 - DEBUG - Try to Cancel Stop
2018-02-08 09:36:05,509 - DEBUG - Stop API ID 0
2018-02-08 09:36:05,510 - DEBUG - Profit API ID 181
2018-02-08 09:36:05,510 - DEBUG - Stop API ID <class 'int'>
2018-02-08 09:36:05,510 - DEBUG - Profit API ID <class 'int'>
2018-02-08 09:36:05,510 - DEBUG - Pos is 0
2018-02-08 09:36:05,511 - DEBUG - CurCount is 0
2018-02-08 09:36:05,511 - DEBUG - In Pos 0
2018-02-08 09:36:05,511 - DEBUG - Stop ID is 0
2018-02-08 09:36:05,511 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 09:36:05,513 - DEBUG - EntryPend is 1
2018-02-08 09:36:05,513 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 09:36:05,513 - DEBUG - Entry Date is 10
2018-02-08 09:36:05,513 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 09:36:05,514 - DEBUG - Order Profit ID is 181
2018-02-08 09:36:05,514 - DEBUG - Order Entry ID is 181
2018-02-08 09:36:05,514 - DEBUG - API ID is  0
2018-02-08 09:36:05,514 - DEBUG - Current Position is 0
2018-02-08 09:36:05,515 - DEBUG - Current Position is <class 'str'>
2018-02-08 09:36:05,515 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 09:36:05,515 - DEBUG - Time is 9
2018-02-08 09:36:05,515 - DEBUG - Time is <class 'int'>
2018-02-08 09:36:05,515 - DEBUG - Time is 36
2018-02-08 09:36:05,516 - DEBUG - Time is <class 'int'>
2018-02-08 09:36:05,516 - DEBUG - Disconnected from IBController
2018-02-08 09:36:05,516 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 09:41:01,348 - DEBUG - ****************************************************
2018-02-08 09:41:01,348 - DEBUG - Current Time is 09:41AM
2018-02-08 09:41:01,349 - DEBUG - Starting Pos Mgmt H E
2018-02-08 09:41:01,349 - DEBUG - Connecting to database
2018-02-08 09:41:01,377 - DEBUG - Connected to database
2018-02-08 09:41:01,378 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 09:41:01,379 - DEBUG - Order Profit is 181
2018-02-08 09:41:01,379 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 09:41:01,381 - DEBUG - Stop ID is 0
2018-02-08 09:41:01,381 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 09:41:01,383 - DEBUG - Entry ID is 181
2018-02-08 09:41:01,383 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 09:41:01,384 - DEBUG - OCA ID is 1
2018-02-08 09:41:01,385 - DEBUG - Connecting to IBController
2018-02-08 09:41:02,391 - DEBUG - Connected to IBController
2018-02-08 09:41:02,391 - DEBUG - Position requested
2018-02-08 09:41:02,393 - DEBUG - Pos Mgmt -1
2018-02-08 09:41:02,393 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020EDDA0>, pos=-1, avgCost=27537.1>
2018-02-08 09:41:02,393 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 09:41:02,394 - DEBUG - ccy2 Currency with position is USD
2018-02-08 09:41:02,394 - DEBUG - Position is -1
2018-02-08 09:41:02,394 - DEBUG - In Position
2018-02-08 09:41:02,394 - DEBUG - Position is 1
2018-02-08 09:41:02,395 - DEBUG - Pos Mgmt 0
2018-02-08 09:41:02,395 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020EDC50>, pos=0, avgCost=0.0>
2018-02-08 09:41:02,395 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 09:41:02,395 - DEBUG - ccy2 Currency with position is USD
2018-02-08 09:41:02,397 - DEBUG - Position is 0
2018-02-08 09:41:02,398 - DEBUG - Pos Mgmt -12987
2018-02-08 09:41:02,398 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020EDEF0>, pos=-12987, avgCost=0.95368235>
2018-02-08 09:41:02,398 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 09:41:02,399 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 09:41:02,399 - DEBUG - Position is -12987
2018-02-08 09:41:03,392 - DEBUG - Open Orders requested
2018-02-08 09:41:03,394 - DEBUG - Reply Handler Orders is <openOrder orderId=180, contract=<ib.ext.Contract.Contract object at 0x00000000020EDDD8>, order=<ib.ext.Order.Order object at 0x00000000020EDBE0>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002182160>>
2018-02-08 09:41:03,394 - DEBUG - Order OrderID 180
2018-02-08 09:41:03,395 - DEBUG - reply handler status <orderStatus orderId=180, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213620, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 09:41:03,395 - DEBUG - Order status PreSubmitted
2018-02-08 09:41:03,396 - DEBUG - Order Identification 180
2018-02-08 09:41:03,396 - DEBUG - Order Identification <class 'int'>
2018-02-08 09:41:03,396 - DEBUG - Profit ID from database is 181
2018-02-08 09:41:03,397 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 09:41:03,397 - DEBUG - Stop ID database is 0
2018-02-08 09:41:03,397 - DEBUG - Entry ID database is 181
2018-02-08 09:41:05,394 - DEBUG - Connecting to database
2018-02-08 09:41:05,401 - DEBUG - Connected to database
2018-02-08 09:41:05,403 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 09:41:05,403 - DEBUG - Stop loss value is 71.07
2018-02-08 09:41:05,405 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 09:41:05,405 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 09:41:05,406 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 09:41:05,407 - DEBUG - EntryPrice value is 68.85
2018-02-08 09:41:05,408 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 09:41:05,409 - DEBUG - Stop quantity 1
2018-02-08 09:41:05,410 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 09:41:05,410 - DEBUG - Direction is Short
2018-02-08 09:41:05,412 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 09:41:05,412 - DEBUG - Count is 0
2018-02-08 09:41:05,413 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 09:41:05,414 - DEBUG - Stop Loss Flag is 0
2018-02-08 09:41:05,415 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 09:41:05,415 - DEBUG - Max ID Order is (181,)
2018-02-08 09:41:05,416 - DEBUG - Today is 2018-02-08
2018-02-08 09:41:05,416 - DEBUG - Day of the week 3
2018-02-08 09:41:05,417 - DEBUG - Yesterday is 02/07/2018
2018-02-08 09:41:05,417 - DEBUG - In Position is  1
2018-02-08 09:41:05,417 - DEBUG - In Position is  <class 'int'>
2018-02-08 09:41:05,417 - DEBUG - curStopLossFlag is  0
2018-02-08 09:41:05,418 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 09:41:05,418 - DEBUG - Checking if Entry has been filled
2018-02-08 09:41:05,418 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 09:41:05,419 - DEBUG - EntryPend is 1
2018-02-08 09:41:05,420 - DEBUG - Identified Entry Order Has Been Filled: In Stop Loss creation
2018-02-08 09:41:05,420 - DEBUG - Order Profit is ('181',)
2018-02-08 09:41:05,420 - DEBUG - Incremented Order ID for stop loss 182
2018-02-08 09:41:05,420 - DEBUG - Symbol, secType, exchange is H FUT GLOBEX
2018-02-08 09:41:05,421 - DEBUG - Contract is <ib.ext.Contract.Contract object at 0x00000000020EDC50>
2018-02-08 09:41:05,421 - DEBUG - Entry Trade Direction is Short
2018-02-08 09:41:05,421 - DEBUG - In Short direction.
2018-02-08 09:41:05,421 - DEBUG - In TRAIL STOP function
2018-02-08 09:41:05,422 - DEBUG - Order action Buy
2018-02-08 09:41:05,422 - DEBUG - Limit value is 1
2018-02-08 09:41:05,422 - DEBUG - In Buy action. TRAIL price is 71.0700
2018-02-08 09:41:05,422 - DEBUG - In Buy action. AUX Price price is 1.0
2018-02-08 09:41:05,423 - DEBUG - In Buy action. account is U1998629
2018-02-08 09:41:05,425 - DEBUG - Long stop order placed
2018-02-08 09:41:05,425 - DEBUG - Query is UPDATE hasPosition SET BB_Position = 1 where CCY = 'HE'
2018-02-08 09:41:05,427 - DEBUG - BB POSITION Set to 1.  No More positions should be taken
2018-02-08 09:41:05,456 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x00000000021821D0>, order=<ib.ext.Order.Order object at 0x00000000021822B0>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002182550>>
2018-02-08 09:41:05,456 - DEBUG - Order OrderID 182
2018-02-08 09:41:05,457 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 09:41:05,457 - DEBUG - Order status PreSubmitted
2018-02-08 09:41:05,457 - DEBUG - Order Identification 182
2018-02-08 09:41:05,457 - DEBUG - Order Identification <class 'int'>
2018-02-08 09:41:05,458 - DEBUG - Profit ID from database is 181
2018-02-08 09:41:05,458 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 09:41:05,458 - DEBUG - Stop ID database is 0
2018-02-08 09:41:05,458 - DEBUG - Entry ID database is 181
2018-02-08 09:41:05,467 - DEBUG - Master Fill set to 1
2018-02-08 09:41:05,467 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'ES'
2018-02-08 09:41:05,469 - DEBUG - Entry ID is 0
2018-02-08 09:41:05,470 - DEBUG - Canceled Order 0
2018-02-08 09:41:05,470 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'M6E'
2018-02-08 09:41:05,472 - DEBUG - Entry ID is 0
2018-02-08 09:41:05,472 - ERROR - Canceled Order 0
2018-02-08 09:41:05,473 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'LE'
2018-02-08 09:41:05,475 - DEBUG - Entry ID is 180
2018-02-08 09:41:05,475 - ERROR - Canceled Order 180
2018-02-08 09:41:05,476 - DEBUG - Query is UPDATE Orders SET Status = 'Canceled' where idOrder = 0;
2018-02-08 09:41:05,494 - DEBUG - Query is UPDATE Orders SET Status = 'Canceled' where idOrder = 0;
2018-02-08 09:41:05,505 - DEBUG - reply handler status <orderStatus orderId=180, status=Cancelled, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213620, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=None>
2018-02-08 09:41:05,505 - DEBUG - Order status Cancelled
2018-02-08 09:41:05,506 - DEBUG - Order Identification 180
2018-02-08 09:41:05,506 - DEBUG - Order Identification <class 'int'>
2018-02-08 09:41:05,506 - DEBUG - Profit ID from database is 181
2018-02-08 09:41:05,506 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 09:41:05,506 - DEBUG - Stop ID database is 0
2018-02-08 09:41:05,507 - DEBUG - Entry ID database is 181
2018-02-08 09:41:05,512 - DEBUG - Query is UPDATE Orders SET Status = 'Canceled' where idOrder = 180;
2018-02-08 09:41:05,527 - DEBUG - Max Positions is (-12.0,)
2018-02-08 09:41:05,528 - DEBUG - Max Positions2 is -11.0
2018-02-08 09:41:05,528 - DEBUG - Query is UPDATE RiskParameters SET RiskParametersValue = -11.0 where idRiskParameters = 15
2018-02-08 09:41:05,544 - DEBUG - Query is UPDATE hasPosition SET BBEntryPending = 0 where CCY ='HE';
2018-02-08 09:41:05,561 - DEBUG - Query is UPDATE hasPosition SET BB_StopLossFlag = 1 where CCY = 'HE'
2018-02-08 09:41:05,575 - DEBUG - StopLossVal2 is 71.07
2018-02-08 09:41:05,575 - DEBUG - ProfitVal2 is 57.900000000000006
2018-02-08 09:41:05,603 - DEBUG - Query is UPDATE Orders SET Status = 'Filled' where idOrder = 181;
2018-02-08 09:41:05,619 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 09:41:05,619 - DEBUG - Max ID Order is (182,)
2018-02-08 09:41:05,619 - DEBUG - Incremented Order ID for profit target 183
2018-02-08 09:41:05,620 - DEBUG - Try to Cancel Stop
2018-02-08 09:41:05,620 - DEBUG - Stop API ID 0
2018-02-08 09:41:05,620 - DEBUG - Profit API ID 0
2018-02-08 09:41:05,620 - DEBUG - Stop API ID <class 'int'>
2018-02-08 09:41:05,620 - DEBUG - Profit API ID <class 'int'>
2018-02-08 09:41:05,621 - DEBUG - Pos is 1
2018-02-08 09:41:05,621 - DEBUG - CurCount is 0
2018-02-08 09:41:05,621 - DEBUG - In Pos 1
2018-02-08 09:41:05,621 - DEBUG - Stop ID is 0
2018-02-08 09:41:05,622 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 09:41:05,624 - DEBUG - EntryPend is 0
2018-02-08 09:41:05,624 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 09:41:05,624 - DEBUG - Entry Date is 10
2018-02-08 09:41:05,624 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 09:41:05,625 - DEBUG - Order Profit ID is 181
2018-02-08 09:41:05,625 - DEBUG - Order Entry ID is 181
2018-02-08 09:41:05,625 - DEBUG - API ID is  0
2018-02-08 09:41:05,625 - DEBUG - Current Position is 0
2018-02-08 09:41:05,625 - DEBUG - Current Position is <class 'str'>
2018-02-08 09:41:05,626 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 09:41:05,626 - DEBUG - Time is 9
2018-02-08 09:41:05,626 - DEBUG - Time is <class 'int'>
2018-02-08 09:41:05,626 - DEBUG - Time is 41
2018-02-08 09:41:05,627 - DEBUG - Time is <class 'int'>
2018-02-08 09:41:05,627 - DEBUG - Disconnected from IBController
2018-02-08 09:41:05,628 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 09:46:01,356 - DEBUG - ****************************************************
2018-02-08 09:46:01,356 - DEBUG - Current Time is 09:46AM
2018-02-08 09:46:01,356 - DEBUG - Starting Pos Mgmt H E
2018-02-08 09:46:01,357 - DEBUG - Connecting to database
2018-02-08 09:46:01,414 - DEBUG - Connected to database
2018-02-08 09:46:01,415 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 09:46:01,416 - DEBUG - Order Profit is 181
2018-02-08 09:46:01,417 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 09:46:01,418 - DEBUG - Stop ID is 182
2018-02-08 09:46:01,418 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 09:46:01,420 - DEBUG - Entry ID is 181
2018-02-08 09:46:01,420 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 09:46:01,422 - DEBUG - OCA ID is 1
2018-02-08 09:46:01,422 - DEBUG - Connecting to IBController
2018-02-08 09:46:02,430 - DEBUG - Connected to IBController
2018-02-08 09:46:02,430 - DEBUG - Position requested
2018-02-08 09:46:02,432 - DEBUG - Pos Mgmt -1
2018-02-08 09:46:02,435 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020BDD30>, pos=-1, avgCost=27537.1>
2018-02-08 09:46:02,435 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 09:46:02,435 - DEBUG - ccy2 Currency with position is USD
2018-02-08 09:46:02,436 - DEBUG - Position is -1
2018-02-08 09:46:02,436 - DEBUG - In Position
2018-02-08 09:46:02,436 - DEBUG - Position is 1
2018-02-08 09:46:02,437 - DEBUG - Pos Mgmt 0
2018-02-08 09:46:02,437 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020BDAC8>, pos=0, avgCost=0.0>
2018-02-08 09:46:02,437 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 09:46:02,437 - DEBUG - ccy2 Currency with position is USD
2018-02-08 09:46:02,438 - DEBUG - Position is 0
2018-02-08 09:46:02,438 - DEBUG - Pos Mgmt -12987
2018-02-08 09:46:02,438 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020BDF28>, pos=-12987, avgCost=0.95368235>
2018-02-08 09:46:02,439 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 09:46:02,439 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 09:46:02,439 - DEBUG - Position is -12987
2018-02-08 09:46:03,431 - DEBUG - Open Orders requested
2018-02-08 09:46:03,433 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x00000000020BDD68>, order=<ib.ext.Order.Order object at 0x00000000020BDC88>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002151198>>
2018-02-08 09:46:03,433 - DEBUG - Order OrderID 182
2018-02-08 09:46:03,434 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 09:46:03,434 - DEBUG - Order status PreSubmitted
2018-02-08 09:46:03,434 - DEBUG - Order Identification 182
2018-02-08 09:46:03,435 - DEBUG - Order Identification <class 'int'>
2018-02-08 09:46:03,435 - DEBUG - Profit ID from database is 181
2018-02-08 09:46:03,436 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 09:46:03,437 - DEBUG - Stop ID database is 182
2018-02-08 09:46:03,437 - DEBUG - Entry ID database is 181
2018-02-08 09:46:03,437 - DEBUG - Stop API ID is 182
2018-02-08 09:46:05,433 - DEBUG - Connecting to database
2018-02-08 09:46:05,440 - DEBUG - Connected to database
2018-02-08 09:46:05,442 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 09:46:05,443 - DEBUG - Stop loss value is 71.07
2018-02-08 09:46:05,445 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 09:46:05,445 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 09:46:05,446 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 09:46:05,447 - DEBUG - EntryPrice value is 68.85
2018-02-08 09:46:05,448 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 09:46:05,448 - DEBUG - Stop quantity 1
2018-02-08 09:46:05,450 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 09:46:05,450 - DEBUG - Direction is Short
2018-02-08 09:46:05,451 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 09:46:05,452 - DEBUG - Count is 1
2018-02-08 09:46:05,453 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 09:46:05,454 - DEBUG - Stop Loss Flag is 1
2018-02-08 09:46:05,455 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 09:46:05,456 - DEBUG - Max ID Order is (182,)
2018-02-08 09:46:05,456 - DEBUG - Today is 2018-02-08
2018-02-08 09:46:05,456 - DEBUG - Day of the week 3
2018-02-08 09:46:05,457 - DEBUG - Yesterday is 02/07/2018
2018-02-08 09:46:05,457 - DEBUG - In Position is  1
2018-02-08 09:46:05,457 - DEBUG - In Position is  <class 'int'>
2018-02-08 09:46:05,457 - DEBUG - curStopLossFlag is  1
2018-02-08 09:46:05,458 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 09:46:05,458 - DEBUG - Checking if Entry has been filled
2018-02-08 09:46:05,458 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 09:46:05,460 - DEBUG - EntryPend is 0
2018-02-08 09:46:05,460 - DEBUG - Try to Cancel Stop
2018-02-08 09:46:05,460 - DEBUG - Stop API ID 182
2018-02-08 09:46:05,460 - DEBUG - Profit API ID 0
2018-02-08 09:46:05,460 - DEBUG - Stop API ID <class 'int'>
2018-02-08 09:46:05,461 - DEBUG - Profit API ID <class 'int'>
2018-02-08 09:46:05,461 - DEBUG - Pos is 1
2018-02-08 09:46:05,461 - DEBUG - CurCount is 1
2018-02-08 09:46:05,461 - DEBUG - In Pos 1
2018-02-08 09:46:05,462 - DEBUG - Stop ID is 182
2018-02-08 09:46:05,462 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 09:46:05,464 - DEBUG - EntryPend is 0
2018-02-08 09:46:05,464 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 09:46:05,464 - DEBUG - Entry Date is 10
2018-02-08 09:46:05,464 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 09:46:05,465 - DEBUG - Order Profit ID is 181
2018-02-08 09:46:05,465 - DEBUG - Order Entry ID is 181
2018-02-08 09:46:05,465 - DEBUG - API ID is  0
2018-02-08 09:46:05,465 - DEBUG - Current Position is 1
2018-02-08 09:46:05,465 - DEBUG - Current Position is <class 'str'>
2018-02-08 09:46:05,466 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 09:46:05,466 - DEBUG - Time is 9
2018-02-08 09:46:05,466 - DEBUG - Time is <class 'int'>
2018-02-08 09:46:05,466 - DEBUG - Time is 46
2018-02-08 09:46:05,467 - DEBUG - Time is <class 'int'>
2018-02-08 09:46:05,467 - DEBUG - Disconnected from IBController
2018-02-08 09:46:05,467 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 09:51:01,348 - DEBUG - ****************************************************
2018-02-08 09:51:01,349 - DEBUG - Current Time is 09:51AM
2018-02-08 09:51:01,349 - DEBUG - Starting Pos Mgmt H E
2018-02-08 09:51:01,350 - DEBUG - Connecting to database
2018-02-08 09:51:01,388 - DEBUG - Connected to database
2018-02-08 09:51:01,388 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 09:51:01,390 - DEBUG - Order Profit is 181
2018-02-08 09:51:01,390 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 09:51:01,392 - DEBUG - Stop ID is 182
2018-02-08 09:51:01,392 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 09:51:01,393 - DEBUG - Entry ID is 181
2018-02-08 09:51:01,394 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 09:51:01,395 - DEBUG - OCA ID is 1
2018-02-08 09:51:01,395 - DEBUG - Connecting to IBController
2018-02-08 09:51:02,401 - DEBUG - Connected to IBController
2018-02-08 09:51:02,401 - DEBUG - Position requested
2018-02-08 09:51:02,402 - DEBUG - Pos Mgmt -1
2018-02-08 09:51:02,403 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000213BDA0>, pos=-1, avgCost=27537.1>
2018-02-08 09:51:02,403 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 09:51:02,403 - DEBUG - ccy2 Currency with position is USD
2018-02-08 09:51:02,404 - DEBUG - Position is -1
2018-02-08 09:51:02,404 - DEBUG - In Position
2018-02-08 09:51:02,404 - DEBUG - Position is 1
2018-02-08 09:51:02,404 - DEBUG - Pos Mgmt 0
2018-02-08 09:51:02,405 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000213BC18>, pos=0, avgCost=0.0>
2018-02-08 09:51:02,405 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 09:51:02,406 - DEBUG - ccy2 Currency with position is USD
2018-02-08 09:51:02,406 - DEBUG - Position is 0
2018-02-08 09:51:02,407 - DEBUG - Pos Mgmt -12987
2018-02-08 09:51:02,407 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000213BF28>, pos=-12987, avgCost=0.95368235>
2018-02-08 09:51:02,407 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 09:51:02,408 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 09:51:02,408 - DEBUG - Position is -12987
2018-02-08 09:51:03,402 - DEBUG - Open Orders requested
2018-02-08 09:51:03,403 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x000000000213BDD8>, order=<ib.ext.Order.Order object at 0x000000000213BCC0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021D0198>>
2018-02-08 09:51:03,404 - DEBUG - Order OrderID 182
2018-02-08 09:51:03,405 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 09:51:03,405 - DEBUG - Order status PreSubmitted
2018-02-08 09:51:03,405 - DEBUG - Order Identification 182
2018-02-08 09:51:03,406 - DEBUG - Order Identification <class 'int'>
2018-02-08 09:51:03,406 - DEBUG - Profit ID from database is 181
2018-02-08 09:51:03,406 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 09:51:03,406 - DEBUG - Stop ID database is 182
2018-02-08 09:51:03,406 - DEBUG - Entry ID database is 181
2018-02-08 09:51:03,407 - DEBUG - Stop API ID is 182
2018-02-08 09:51:05,404 - DEBUG - Connecting to database
2018-02-08 09:51:05,411 - DEBUG - Connected to database
2018-02-08 09:51:05,412 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 09:51:05,413 - DEBUG - Stop loss value is 71.07
2018-02-08 09:51:05,414 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 09:51:05,415 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 09:51:05,416 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 09:51:05,416 - DEBUG - EntryPrice value is 68.85
2018-02-08 09:51:05,418 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 09:51:05,418 - DEBUG - Stop quantity 1
2018-02-08 09:51:05,419 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 09:51:05,420 - DEBUG - Direction is Short
2018-02-08 09:51:05,421 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 09:51:05,421 - DEBUG - Count is 1
2018-02-08 09:51:05,423 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 09:51:05,423 - DEBUG - Stop Loss Flag is 1
2018-02-08 09:51:05,424 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 09:51:05,425 - DEBUG - Max ID Order is (182,)
2018-02-08 09:51:05,425 - DEBUG - Today is 2018-02-08
2018-02-08 09:51:05,425 - DEBUG - Day of the week 3
2018-02-08 09:51:05,426 - DEBUG - Yesterday is 02/07/2018
2018-02-08 09:51:05,426 - DEBUG - In Position is  1
2018-02-08 09:51:05,426 - DEBUG - In Position is  <class 'int'>
2018-02-08 09:51:05,426 - DEBUG - curStopLossFlag is  1
2018-02-08 09:51:05,426 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 09:51:05,427 - DEBUG - Checking if Entry has been filled
2018-02-08 09:51:05,427 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 09:51:05,428 - DEBUG - EntryPend is 0
2018-02-08 09:51:05,429 - DEBUG - Try to Cancel Stop
2018-02-08 09:51:05,429 - DEBUG - Stop API ID 182
2018-02-08 09:51:05,429 - DEBUG - Profit API ID 0
2018-02-08 09:51:05,429 - DEBUG - Stop API ID <class 'int'>
2018-02-08 09:51:05,429 - DEBUG - Profit API ID <class 'int'>
2018-02-08 09:51:05,430 - DEBUG - Pos is 1
2018-02-08 09:51:05,430 - DEBUG - CurCount is 1
2018-02-08 09:51:05,430 - DEBUG - In Pos 1
2018-02-08 09:51:05,430 - DEBUG - Stop ID is 182
2018-02-08 09:51:05,431 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 09:51:05,432 - DEBUG - EntryPend is 0
2018-02-08 09:51:05,432 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 09:51:05,433 - DEBUG - Entry Date is 10
2018-02-08 09:51:05,433 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 09:51:05,433 - DEBUG - Order Profit ID is 181
2018-02-08 09:51:05,433 - DEBUG - Order Entry ID is 181
2018-02-08 09:51:05,434 - DEBUG - API ID is  0
2018-02-08 09:51:05,434 - DEBUG - Current Position is 1
2018-02-08 09:51:05,434 - DEBUG - Current Position is <class 'str'>
2018-02-08 09:51:05,434 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 09:51:05,435 - DEBUG - Time is 9
2018-02-08 09:51:05,435 - DEBUG - Time is <class 'int'>
2018-02-08 09:51:05,435 - DEBUG - Time is 51
2018-02-08 09:51:05,435 - DEBUG - Time is <class 'int'>
2018-02-08 09:51:05,436 - DEBUG - Disconnected from IBController
2018-02-08 09:51:05,436 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 09:56:01,350 - DEBUG - ****************************************************
2018-02-08 09:56:01,350 - DEBUG - Current Time is 09:56AM
2018-02-08 09:56:01,351 - DEBUG - Starting Pos Mgmt H E
2018-02-08 09:56:01,351 - DEBUG - Connecting to database
2018-02-08 09:56:01,400 - DEBUG - Connected to database
2018-02-08 09:56:01,400 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 09:56:01,402 - DEBUG - Order Profit is 181
2018-02-08 09:56:01,403 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 09:56:01,404 - DEBUG - Stop ID is 182
2018-02-08 09:56:01,405 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 09:56:01,406 - DEBUG - Entry ID is 181
2018-02-08 09:56:01,406 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 09:56:01,408 - DEBUG - OCA ID is 1
2018-02-08 09:56:01,408 - DEBUG - Connecting to IBController
2018-02-08 09:56:02,415 - DEBUG - Connected to IBController
2018-02-08 09:56:02,415 - DEBUG - Position requested
2018-02-08 09:56:02,417 - DEBUG - Pos Mgmt -1
2018-02-08 09:56:02,417 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x0000000001CAAD68>, pos=-1, avgCost=27537.1>
2018-02-08 09:56:02,418 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 09:56:02,418 - DEBUG - ccy2 Currency with position is USD
2018-02-08 09:56:02,418 - DEBUG - Position is -1
2018-02-08 09:56:02,418 - DEBUG - In Position
2018-02-08 09:56:02,418 - DEBUG - Position is 1
2018-02-08 09:56:02,419 - DEBUG - Pos Mgmt 0
2018-02-08 09:56:02,419 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x0000000001CAAC88>, pos=0, avgCost=0.0>
2018-02-08 09:56:02,419 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 09:56:02,420 - DEBUG - ccy2 Currency with position is USD
2018-02-08 09:56:02,420 - DEBUG - Position is 0
2018-02-08 09:56:02,420 - DEBUG - Pos Mgmt -12987
2018-02-08 09:56:02,421 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x0000000001CAAF28>, pos=-12987, avgCost=0.95368235>
2018-02-08 09:56:02,421 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 09:56:02,421 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 09:56:02,421 - DEBUG - Position is -12987
2018-02-08 09:56:03,416 - DEBUG - Open Orders requested
2018-02-08 09:56:03,418 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x0000000001CAAD30>, order=<ib.ext.Order.Order object at 0x0000000001CAABE0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021EF198>>
2018-02-08 09:56:03,418 - DEBUG - Order OrderID 182
2018-02-08 09:56:03,419 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 09:56:03,419 - DEBUG - Order status PreSubmitted
2018-02-08 09:56:03,420 - DEBUG - Order Identification 182
2018-02-08 09:56:03,420 - DEBUG - Order Identification <class 'int'>
2018-02-08 09:56:03,420 - DEBUG - Profit ID from database is 181
2018-02-08 09:56:03,420 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 09:56:03,421 - DEBUG - Stop ID database is 182
2018-02-08 09:56:03,421 - DEBUG - Entry ID database is 181
2018-02-08 09:56:03,421 - DEBUG - Stop API ID is 182
2018-02-08 09:56:05,418 - DEBUG - Connecting to database
2018-02-08 09:56:05,425 - DEBUG - Connected to database
2018-02-08 09:56:05,427 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 09:56:05,427 - DEBUG - Stop loss value is 71.07
2018-02-08 09:56:05,429 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 09:56:05,429 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 09:56:05,431 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 09:56:05,431 - DEBUG - EntryPrice value is 68.85
2018-02-08 09:56:05,432 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 09:56:05,433 - DEBUG - Stop quantity 1
2018-02-08 09:56:05,434 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 09:56:05,434 - DEBUG - Direction is Short
2018-02-08 09:56:05,436 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 09:56:05,436 - DEBUG - Count is 1
2018-02-08 09:56:05,437 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 09:56:05,438 - DEBUG - Stop Loss Flag is 1
2018-02-08 09:56:05,439 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 09:56:05,439 - DEBUG - Max ID Order is (182,)
2018-02-08 09:56:05,440 - DEBUG - Today is 2018-02-08
2018-02-08 09:56:05,440 - DEBUG - Day of the week 3
2018-02-08 09:56:05,441 - DEBUG - Yesterday is 02/07/2018
2018-02-08 09:56:05,441 - DEBUG - In Position is  1
2018-02-08 09:56:05,441 - DEBUG - In Position is  <class 'int'>
2018-02-08 09:56:05,441 - DEBUG - curStopLossFlag is  1
2018-02-08 09:56:05,441 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 09:56:05,442 - DEBUG - Checking if Entry has been filled
2018-02-08 09:56:05,442 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 09:56:05,443 - DEBUG - EntryPend is 0
2018-02-08 09:56:05,444 - DEBUG - Try to Cancel Stop
2018-02-08 09:56:05,444 - DEBUG - Stop API ID 182
2018-02-08 09:56:05,444 - DEBUG - Profit API ID 0
2018-02-08 09:56:05,444 - DEBUG - Stop API ID <class 'int'>
2018-02-08 09:56:05,445 - DEBUG - Profit API ID <class 'int'>
2018-02-08 09:56:05,445 - DEBUG - Pos is 1
2018-02-08 09:56:05,445 - DEBUG - CurCount is 1
2018-02-08 09:56:05,445 - DEBUG - In Pos 1
2018-02-08 09:56:05,446 - DEBUG - Stop ID is 182
2018-02-08 09:56:05,446 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 09:56:05,447 - DEBUG - EntryPend is 0
2018-02-08 09:56:05,448 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 09:56:05,448 - DEBUG - Entry Date is 10
2018-02-08 09:56:05,448 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 09:56:05,448 - DEBUG - Order Profit ID is 181
2018-02-08 09:56:05,449 - DEBUG - Order Entry ID is 181
2018-02-08 09:56:05,449 - DEBUG - API ID is  0
2018-02-08 09:56:05,449 - DEBUG - Current Position is 1
2018-02-08 09:56:05,449 - DEBUG - Current Position is <class 'str'>
2018-02-08 09:56:05,450 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 09:56:05,450 - DEBUG - Time is 9
2018-02-08 09:56:05,450 - DEBUG - Time is <class 'int'>
2018-02-08 09:56:05,450 - DEBUG - Time is 56
2018-02-08 09:56:05,450 - DEBUG - Time is <class 'int'>
2018-02-08 09:56:05,451 - DEBUG - Disconnected from IBController
2018-02-08 09:56:05,451 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 10:01:01,349 - DEBUG - ****************************************************
2018-02-08 10:01:01,349 - DEBUG - Current Time is 10:01AM
2018-02-08 10:01:01,350 - DEBUG - Starting Pos Mgmt H E
2018-02-08 10:01:01,350 - DEBUG - Connecting to database
2018-02-08 10:01:01,408 - DEBUG - Connected to database
2018-02-08 10:01:01,409 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 10:01:01,411 - DEBUG - Order Profit is 181
2018-02-08 10:01:01,411 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 10:01:01,412 - DEBUG - Stop ID is 182
2018-02-08 10:01:01,413 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 10:01:01,414 - DEBUG - Entry ID is 181
2018-02-08 10:01:01,414 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 10:01:01,416 - DEBUG - OCA ID is 1
2018-02-08 10:01:01,416 - DEBUG - Connecting to IBController
2018-02-08 10:01:02,422 - DEBUG - Connected to IBController
2018-02-08 10:01:02,422 - DEBUG - Position requested
2018-02-08 10:01:02,424 - DEBUG - Pos Mgmt -1
2018-02-08 10:01:02,424 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020EDD68>, pos=-1, avgCost=27537.1>
2018-02-08 10:01:02,424 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 10:01:02,425 - DEBUG - ccy2 Currency with position is USD
2018-02-08 10:01:02,425 - DEBUG - Position is -1
2018-02-08 10:01:02,425 - DEBUG - In Position
2018-02-08 10:01:02,425 - DEBUG - Position is 1
2018-02-08 10:01:02,426 - DEBUG - Pos Mgmt 0
2018-02-08 10:01:02,426 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020EDC88>, pos=0, avgCost=0.0>
2018-02-08 10:01:02,426 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 10:01:02,427 - DEBUG - ccy2 Currency with position is USD
2018-02-08 10:01:02,427 - DEBUG - Position is 0
2018-02-08 10:01:02,427 - DEBUG - Pos Mgmt -12987
2018-02-08 10:01:02,428 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020EDF28>, pos=-12987, avgCost=0.95368235>
2018-02-08 10:01:02,428 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 10:01:02,428 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 10:01:02,428 - DEBUG - Position is -12987
2018-02-08 10:01:03,423 - DEBUG - Open Orders requested
2018-02-08 10:01:03,424 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x00000000020EDDD8>, order=<ib.ext.Order.Order object at 0x00000000020EDCC0>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002181198>>
2018-02-08 10:01:03,425 - DEBUG - Order OrderID 182
2018-02-08 10:01:03,426 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 10:01:03,426 - DEBUG - Order status PreSubmitted
2018-02-08 10:01:03,426 - DEBUG - Order Identification 182
2018-02-08 10:01:03,427 - DEBUG - Order Identification <class 'int'>
2018-02-08 10:01:03,427 - DEBUG - Profit ID from database is 181
2018-02-08 10:01:03,427 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 10:01:03,427 - DEBUG - Stop ID database is 182
2018-02-08 10:01:03,428 - DEBUG - Entry ID database is 181
2018-02-08 10:01:03,428 - DEBUG - Stop API ID is 182
2018-02-08 10:01:05,425 - DEBUG - Connecting to database
2018-02-08 10:01:05,432 - DEBUG - Connected to database
2018-02-08 10:01:05,434 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 10:01:05,434 - DEBUG - Stop loss value is 71.07
2018-02-08 10:01:05,435 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 10:01:05,436 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 10:01:05,437 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 10:01:05,437 - DEBUG - EntryPrice value is 68.85
2018-02-08 10:01:05,438 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 10:01:05,439 - DEBUG - Stop quantity 1
2018-02-08 10:01:05,440 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 10:01:05,440 - DEBUG - Direction is Short
2018-02-08 10:01:05,442 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 10:01:05,442 - DEBUG - Count is 1
2018-02-08 10:01:05,443 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 10:01:05,444 - DEBUG - Stop Loss Flag is 1
2018-02-08 10:01:05,445 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 10:01:05,445 - DEBUG - Max ID Order is (182,)
2018-02-08 10:01:05,446 - DEBUG - Today is 2018-02-08
2018-02-08 10:01:05,446 - DEBUG - Day of the week 3
2018-02-08 10:01:05,446 - DEBUG - Yesterday is 02/07/2018
2018-02-08 10:01:05,447 - DEBUG - In Position is  1
2018-02-08 10:01:05,447 - DEBUG - In Position is  <class 'int'>
2018-02-08 10:01:05,447 - DEBUG - curStopLossFlag is  1
2018-02-08 10:01:05,447 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 10:01:05,447 - DEBUG - Checking if Entry has been filled
2018-02-08 10:01:05,448 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 10:01:05,449 - DEBUG - EntryPend is 0
2018-02-08 10:01:05,449 - DEBUG - Try to Cancel Stop
2018-02-08 10:01:05,449 - DEBUG - Stop API ID 182
2018-02-08 10:01:05,450 - DEBUG - Profit API ID 0
2018-02-08 10:01:05,450 - DEBUG - Stop API ID <class 'int'>
2018-02-08 10:01:05,450 - DEBUG - Profit API ID <class 'int'>
2018-02-08 10:01:05,450 - DEBUG - Pos is 1
2018-02-08 10:01:05,450 - DEBUG - CurCount is 1
2018-02-08 10:01:05,451 - DEBUG - In Pos 1
2018-02-08 10:01:05,451 - DEBUG - Stop ID is 182
2018-02-08 10:01:05,451 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 10:01:05,452 - DEBUG - EntryPend is 0
2018-02-08 10:01:05,453 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 10:01:05,453 - DEBUG - Entry Date is 10
2018-02-08 10:01:05,453 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 10:01:05,453 - DEBUG - Order Profit ID is 181
2018-02-08 10:01:05,453 - DEBUG - Order Entry ID is 181
2018-02-08 10:01:05,454 - DEBUG - API ID is  0
2018-02-08 10:01:05,454 - DEBUG - Current Position is 1
2018-02-08 10:01:05,454 - DEBUG - Current Position is <class 'str'>
2018-02-08 10:01:05,454 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 10:01:05,454 - DEBUG - Time is 10
2018-02-08 10:01:05,454 - DEBUG - Time is <class 'int'>
2018-02-08 10:01:05,455 - DEBUG - Time is 1
2018-02-08 10:01:05,455 - DEBUG - Time is <class 'int'>
2018-02-08 10:01:05,455 - DEBUG - Disconnected from IBController
2018-02-08 10:01:05,455 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 10:06:01,346 - DEBUG - ****************************************************
2018-02-08 10:06:01,346 - DEBUG - Current Time is 10:06AM
2018-02-08 10:06:01,346 - DEBUG - Starting Pos Mgmt H E
2018-02-08 10:06:01,347 - DEBUG - Connecting to database
2018-02-08 10:06:01,365 - DEBUG - Connected to database
2018-02-08 10:06:01,366 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 10:06:01,368 - DEBUG - Order Profit is 181
2018-02-08 10:06:01,368 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 10:06:01,370 - DEBUG - Stop ID is 182
2018-02-08 10:06:01,370 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 10:06:01,371 - DEBUG - Entry ID is 181
2018-02-08 10:06:01,372 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 10:06:01,373 - DEBUG - OCA ID is 1
2018-02-08 10:06:01,373 - DEBUG - Connecting to IBController
2018-02-08 10:06:02,380 - DEBUG - Connected to IBController
2018-02-08 10:06:02,380 - DEBUG - Position requested
2018-02-08 10:06:02,381 - DEBUG - Pos Mgmt -1
2018-02-08 10:06:02,381 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000215CD30>, pos=-1, avgCost=27537.1>
2018-02-08 10:06:02,382 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 10:06:02,382 - DEBUG - ccy2 Currency with position is USD
2018-02-08 10:06:02,382 - DEBUG - Position is -1
2018-02-08 10:06:02,383 - DEBUG - In Position
2018-02-08 10:06:02,383 - DEBUG - Position is 1
2018-02-08 10:06:02,383 - DEBUG - Pos Mgmt 0
2018-02-08 10:06:02,384 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000215CBA8>, pos=0, avgCost=0.0>
2018-02-08 10:06:02,384 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 10:06:02,384 - DEBUG - ccy2 Currency with position is USD
2018-02-08 10:06:02,384 - DEBUG - Position is 0
2018-02-08 10:06:02,385 - DEBUG - Pos Mgmt -12987
2018-02-08 10:06:02,385 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000215CF98>, pos=-12987, avgCost=0.95368235>
2018-02-08 10:06:02,385 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 10:06:02,386 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 10:06:02,386 - DEBUG - Position is -12987
2018-02-08 10:06:03,381 - DEBUG - Open Orders requested
2018-02-08 10:06:03,382 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x000000000215CDD8>, order=<ib.ext.Order.Order object at 0x000000000215CC88>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021F1198>>
2018-02-08 10:06:03,383 - DEBUG - Order OrderID 182
2018-02-08 10:06:03,384 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 10:06:03,384 - DEBUG - Order status PreSubmitted
2018-02-08 10:06:03,384 - DEBUG - Order Identification 182
2018-02-08 10:06:03,384 - DEBUG - Order Identification <class 'int'>
2018-02-08 10:06:03,385 - DEBUG - Profit ID from database is 181
2018-02-08 10:06:03,385 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 10:06:03,385 - DEBUG - Stop ID database is 182
2018-02-08 10:06:03,385 - DEBUG - Entry ID database is 181
2018-02-08 10:06:03,386 - DEBUG - Stop API ID is 182
2018-02-08 10:06:05,383 - DEBUG - Connecting to database
2018-02-08 10:06:05,404 - DEBUG - Connected to database
2018-02-08 10:06:05,405 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 10:06:05,406 - DEBUG - Stop loss value is 71.07
2018-02-08 10:06:05,407 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 10:06:05,407 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 10:06:05,409 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 10:06:05,409 - DEBUG - EntryPrice value is 68.85
2018-02-08 10:06:05,410 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 10:06:05,411 - DEBUG - Stop quantity 1
2018-02-08 10:06:05,412 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 10:06:05,413 - DEBUG - Direction is Short
2018-02-08 10:06:05,414 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 10:06:05,414 - DEBUG - Count is 1
2018-02-08 10:06:05,415 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 10:06:05,416 - DEBUG - Stop Loss Flag is 1
2018-02-08 10:06:05,417 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 10:06:05,418 - DEBUG - Max ID Order is (182,)
2018-02-08 10:06:05,418 - DEBUG - Today is 2018-02-08
2018-02-08 10:06:05,419 - DEBUG - Day of the week 3
2018-02-08 10:06:05,419 - DEBUG - Yesterday is 02/07/2018
2018-02-08 10:06:05,419 - DEBUG - In Position is  1
2018-02-08 10:06:05,419 - DEBUG - In Position is  <class 'int'>
2018-02-08 10:06:05,420 - DEBUG - curStopLossFlag is  1
2018-02-08 10:06:05,420 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 10:06:05,420 - DEBUG - Checking if Entry has been filled
2018-02-08 10:06:05,420 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 10:06:05,422 - DEBUG - EntryPend is 0
2018-02-08 10:06:05,422 - DEBUG - Try to Cancel Stop
2018-02-08 10:06:05,422 - DEBUG - Stop API ID 182
2018-02-08 10:06:05,423 - DEBUG - Profit API ID 0
2018-02-08 10:06:05,423 - DEBUG - Stop API ID <class 'int'>
2018-02-08 10:06:05,423 - DEBUG - Profit API ID <class 'int'>
2018-02-08 10:06:05,423 - DEBUG - Pos is 1
2018-02-08 10:06:05,424 - DEBUG - CurCount is 1
2018-02-08 10:06:05,424 - DEBUG - In Pos 1
2018-02-08 10:06:05,424 - DEBUG - Stop ID is 182
2018-02-08 10:06:05,424 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 10:06:05,426 - DEBUG - EntryPend is 0
2018-02-08 10:06:05,426 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 10:06:05,426 - DEBUG - Entry Date is 10
2018-02-08 10:06:05,427 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 10:06:05,427 - DEBUG - Order Profit ID is 181
2018-02-08 10:06:05,427 - DEBUG - Order Entry ID is 181
2018-02-08 10:06:05,427 - DEBUG - API ID is  0
2018-02-08 10:06:05,428 - DEBUG - Current Position is 1
2018-02-08 10:06:05,428 - DEBUG - Current Position is <class 'str'>
2018-02-08 10:06:05,428 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 10:06:05,428 - DEBUG - Time is 10
2018-02-08 10:06:05,429 - DEBUG - Time is <class 'int'>
2018-02-08 10:06:05,429 - DEBUG - Time is 6
2018-02-08 10:06:05,429 - DEBUG - Time is <class 'int'>
2018-02-08 10:06:05,429 - DEBUG - Disconnected from IBController
2018-02-08 10:06:05,430 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 10:11:01,351 - DEBUG - ****************************************************
2018-02-08 10:11:01,351 - DEBUG - Current Time is 10:11AM
2018-02-08 10:11:01,352 - DEBUG - Starting Pos Mgmt H E
2018-02-08 10:11:01,352 - DEBUG - Connecting to database
2018-02-08 10:11:01,371 - DEBUG - Connected to database
2018-02-08 10:11:01,371 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 10:11:01,373 - DEBUG - Order Profit is 181
2018-02-08 10:11:01,373 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 10:11:01,375 - DEBUG - Stop ID is 182
2018-02-08 10:11:01,375 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 10:11:01,376 - DEBUG - Entry ID is 181
2018-02-08 10:11:01,376 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 10:11:01,378 - DEBUG - OCA ID is 1
2018-02-08 10:11:01,378 - DEBUG - Connecting to IBController
2018-02-08 10:11:02,388 - DEBUG - Connected to IBController
2018-02-08 10:11:02,388 - DEBUG - Position requested
2018-02-08 10:11:02,390 - DEBUG - Pos Mgmt -1
2018-02-08 10:11:02,390 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210BB38>, pos=-1, avgCost=27537.1>
2018-02-08 10:11:02,390 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 10:11:02,391 - DEBUG - ccy2 Currency with position is USD
2018-02-08 10:11:02,391 - DEBUG - Position is -1
2018-02-08 10:11:02,391 - DEBUG - In Position
2018-02-08 10:11:02,391 - DEBUG - Position is 1
2018-02-08 10:11:02,392 - DEBUG - Pos Mgmt 0
2018-02-08 10:11:02,392 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210BC18>, pos=0, avgCost=0.0>
2018-02-08 10:11:02,392 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 10:11:02,392 - DEBUG - ccy2 Currency with position is USD
2018-02-08 10:11:02,393 - DEBUG - Position is 0
2018-02-08 10:11:02,393 - DEBUG - Pos Mgmt -12987
2018-02-08 10:11:02,393 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210BF28>, pos=-12987, avgCost=0.95368235>
2018-02-08 10:11:02,394 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 10:11:02,394 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 10:11:02,394 - DEBUG - Position is -12987
2018-02-08 10:11:03,390 - DEBUG - Open Orders requested
2018-02-08 10:11:03,392 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x000000000210BDD8>, order=<ib.ext.Order.Order object at 0x000000000210BCF8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A0198>>
2018-02-08 10:11:03,393 - DEBUG - Order OrderID 182
2018-02-08 10:11:03,393 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 10:11:03,393 - DEBUG - Order status PreSubmitted
2018-02-08 10:11:03,394 - DEBUG - Order Identification 182
2018-02-08 10:11:03,394 - DEBUG - Order Identification <class 'int'>
2018-02-08 10:11:03,394 - DEBUG - Profit ID from database is 181
2018-02-08 10:11:03,394 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 10:11:03,395 - DEBUG - Stop ID database is 182
2018-02-08 10:11:03,395 - DEBUG - Entry ID database is 181
2018-02-08 10:11:03,395 - DEBUG - Stop API ID is 182
2018-02-08 10:11:05,392 - DEBUG - Connecting to database
2018-02-08 10:11:05,400 - DEBUG - Connected to database
2018-02-08 10:11:05,401 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 10:11:05,402 - DEBUG - Stop loss value is 71.07
2018-02-08 10:11:05,403 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 10:11:05,404 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 10:11:05,405 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 10:11:05,405 - DEBUG - EntryPrice value is 68.85
2018-02-08 10:11:05,408 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 10:11:05,409 - DEBUG - Stop quantity 1
2018-02-08 10:11:05,410 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 10:11:05,410 - DEBUG - Direction is Short
2018-02-08 10:11:05,412 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 10:11:05,412 - DEBUG - Count is 1
2018-02-08 10:11:05,414 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 10:11:05,414 - DEBUG - Stop Loss Flag is 1
2018-02-08 10:11:05,416 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 10:11:05,416 - DEBUG - Max ID Order is (182,)
2018-02-08 10:11:05,417 - DEBUG - Today is 2018-02-08
2018-02-08 10:11:05,417 - DEBUG - Day of the week 3
2018-02-08 10:11:05,417 - DEBUG - Yesterday is 02/07/2018
2018-02-08 10:11:05,417 - DEBUG - In Position is  1
2018-02-08 10:11:05,418 - DEBUG - In Position is  <class 'int'>
2018-02-08 10:11:05,418 - DEBUG - curStopLossFlag is  1
2018-02-08 10:11:05,418 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 10:11:05,418 - DEBUG - Checking if Entry has been filled
2018-02-08 10:11:05,419 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 10:11:05,420 - DEBUG - EntryPend is 0
2018-02-08 10:11:05,420 - DEBUG - Try to Cancel Stop
2018-02-08 10:11:05,421 - DEBUG - Stop API ID 182
2018-02-08 10:11:05,421 - DEBUG - Profit API ID 0
2018-02-08 10:11:05,421 - DEBUG - Stop API ID <class 'int'>
2018-02-08 10:11:05,421 - DEBUG - Profit API ID <class 'int'>
2018-02-08 10:11:05,421 - DEBUG - Pos is 1
2018-02-08 10:11:05,422 - DEBUG - CurCount is 1
2018-02-08 10:11:05,422 - DEBUG - In Pos 1
2018-02-08 10:11:05,422 - DEBUG - Stop ID is 182
2018-02-08 10:11:05,422 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 10:11:05,424 - DEBUG - EntryPend is 0
2018-02-08 10:11:05,424 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 10:11:05,424 - DEBUG - Entry Date is 10
2018-02-08 10:11:05,424 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 10:11:05,425 - DEBUG - Order Profit ID is 181
2018-02-08 10:11:05,425 - DEBUG - Order Entry ID is 181
2018-02-08 10:11:05,425 - DEBUG - API ID is  0
2018-02-08 10:11:05,425 - DEBUG - Current Position is 1
2018-02-08 10:11:05,426 - DEBUG - Current Position is <class 'str'>
2018-02-08 10:11:05,426 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 10:11:05,426 - DEBUG - Time is 10
2018-02-08 10:11:05,426 - DEBUG - Time is <class 'int'>
2018-02-08 10:11:05,427 - DEBUG - Time is 11
2018-02-08 10:11:05,427 - DEBUG - Time is <class 'int'>
2018-02-08 10:11:05,427 - DEBUG - Disconnected from IBController
2018-02-08 10:11:05,427 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 10:16:01,352 - DEBUG - ****************************************************
2018-02-08 10:16:01,352 - DEBUG - Current Time is 10:16AM
2018-02-08 10:16:01,352 - DEBUG - Starting Pos Mgmt H E
2018-02-08 10:16:01,353 - DEBUG - Connecting to database
2018-02-08 10:16:01,409 - DEBUG - Connected to database
2018-02-08 10:16:01,410 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 10:16:01,411 - DEBUG - Order Profit is 181
2018-02-08 10:16:01,412 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 10:16:01,413 - DEBUG - Stop ID is 182
2018-02-08 10:16:01,413 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 10:16:01,415 - DEBUG - Entry ID is 181
2018-02-08 10:16:01,415 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 10:16:01,416 - DEBUG - OCA ID is 1
2018-02-08 10:16:01,417 - DEBUG - Connecting to IBController
2018-02-08 10:16:02,422 - DEBUG - Connected to IBController
2018-02-08 10:16:02,422 - DEBUG - Position requested
2018-02-08 10:16:02,423 - DEBUG - Pos Mgmt -1
2018-02-08 10:16:02,424 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212BB38>, pos=-1, avgCost=27537.1>
2018-02-08 10:16:02,424 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 10:16:02,424 - DEBUG - ccy2 Currency with position is USD
2018-02-08 10:16:02,425 - DEBUG - Position is -1
2018-02-08 10:16:02,425 - DEBUG - In Position
2018-02-08 10:16:02,425 - DEBUG - Position is 1
2018-02-08 10:16:02,425 - DEBUG - Pos Mgmt 0
2018-02-08 10:16:02,426 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212BC88>, pos=0, avgCost=0.0>
2018-02-08 10:16:02,426 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 10:16:02,426 - DEBUG - ccy2 Currency with position is USD
2018-02-08 10:16:02,426 - DEBUG - Position is 0
2018-02-08 10:16:02,427 - DEBUG - Pos Mgmt -12987
2018-02-08 10:16:02,427 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212BF28>, pos=-12987, avgCost=0.95368235>
2018-02-08 10:16:02,427 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 10:16:02,427 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 10:16:02,435 - DEBUG - Position is -12987
2018-02-08 10:16:03,424 - DEBUG - Open Orders requested
2018-02-08 10:16:03,426 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x000000000212BCF8>, order=<ib.ext.Order.Order object at 0x000000000212BE80>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C0198>>
2018-02-08 10:16:03,426 - DEBUG - Order OrderID 182
2018-02-08 10:16:03,427 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 10:16:03,427 - DEBUG - Order status PreSubmitted
2018-02-08 10:16:03,427 - DEBUG - Order Identification 182
2018-02-08 10:16:03,427 - DEBUG - Order Identification <class 'int'>
2018-02-08 10:16:03,428 - DEBUG - Profit ID from database is 181
2018-02-08 10:16:03,428 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 10:16:03,428 - DEBUG - Stop ID database is 182
2018-02-08 10:16:03,428 - DEBUG - Entry ID database is 181
2018-02-08 10:16:03,429 - DEBUG - Stop API ID is 182
2018-02-08 10:16:05,426 - DEBUG - Connecting to database
2018-02-08 10:16:05,433 - DEBUG - Connected to database
2018-02-08 10:16:05,435 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 10:16:05,435 - DEBUG - Stop loss value is 71.07
2018-02-08 10:16:05,436 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 10:16:05,437 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 10:16:05,459 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 10:16:05,459 - DEBUG - EntryPrice value is 68.85
2018-02-08 10:16:05,460 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 10:16:05,461 - DEBUG - Stop quantity 1
2018-02-08 10:16:05,462 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 10:16:05,462 - DEBUG - Direction is Short
2018-02-08 10:16:05,464 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 10:16:05,464 - DEBUG - Count is 1
2018-02-08 10:16:05,465 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 10:16:05,466 - DEBUG - Stop Loss Flag is 1
2018-02-08 10:16:05,467 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 10:16:05,468 - DEBUG - Max ID Order is (182,)
2018-02-08 10:16:05,468 - DEBUG - Today is 2018-02-08
2018-02-08 10:16:05,468 - DEBUG - Day of the week 3
2018-02-08 10:16:05,469 - DEBUG - Yesterday is 02/07/2018
2018-02-08 10:16:05,469 - DEBUG - In Position is  1
2018-02-08 10:16:05,469 - DEBUG - In Position is  <class 'int'>
2018-02-08 10:16:05,469 - DEBUG - curStopLossFlag is  1
2018-02-08 10:16:05,470 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 10:16:05,470 - DEBUG - Checking if Entry has been filled
2018-02-08 10:16:05,470 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 10:16:05,471 - DEBUG - EntryPend is 0
2018-02-08 10:16:05,472 - DEBUG - Try to Cancel Stop
2018-02-08 10:16:05,472 - DEBUG - Stop API ID 182
2018-02-08 10:16:05,472 - DEBUG - Profit API ID 0
2018-02-08 10:16:05,472 - DEBUG - Stop API ID <class 'int'>
2018-02-08 10:16:05,473 - DEBUG - Profit API ID <class 'int'>
2018-02-08 10:16:05,473 - DEBUG - Pos is 1
2018-02-08 10:16:05,473 - DEBUG - CurCount is 1
2018-02-08 10:16:05,473 - DEBUG - In Pos 1
2018-02-08 10:16:05,473 - DEBUG - Stop ID is 182
2018-02-08 10:16:05,474 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 10:16:05,475 - DEBUG - EntryPend is 0
2018-02-08 10:16:05,475 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 10:16:05,475 - DEBUG - Entry Date is 10
2018-02-08 10:16:05,476 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 10:16:05,476 - DEBUG - Order Profit ID is 181
2018-02-08 10:16:05,476 - DEBUG - Order Entry ID is 181
2018-02-08 10:16:05,476 - DEBUG - API ID is  0
2018-02-08 10:16:05,476 - DEBUG - Current Position is 1
2018-02-08 10:16:05,477 - DEBUG - Current Position is <class 'str'>
2018-02-08 10:16:05,477 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 10:16:05,477 - DEBUG - Time is 10
2018-02-08 10:16:05,477 - DEBUG - Time is <class 'int'>
2018-02-08 10:16:05,478 - DEBUG - Time is 16
2018-02-08 10:16:05,478 - DEBUG - Time is <class 'int'>
2018-02-08 10:16:05,478 - DEBUG - Disconnected from IBController
2018-02-08 10:16:05,479 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 10:21:01,354 - DEBUG - ****************************************************
2018-02-08 10:21:01,355 - DEBUG - Current Time is 10:21AM
2018-02-08 10:21:01,355 - DEBUG - Starting Pos Mgmt H E
2018-02-08 10:21:01,355 - DEBUG - Connecting to database
2018-02-08 10:21:01,403 - DEBUG - Connected to database
2018-02-08 10:21:01,403 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 10:21:01,405 - DEBUG - Order Profit is 181
2018-02-08 10:21:01,405 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 10:21:01,407 - DEBUG - Stop ID is 182
2018-02-08 10:21:01,407 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 10:21:01,408 - DEBUG - Entry ID is 181
2018-02-08 10:21:01,408 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 10:21:01,410 - DEBUG - OCA ID is 1
2018-02-08 10:21:01,410 - DEBUG - Connecting to IBController
2018-02-08 10:21:02,416 - DEBUG - Connected to IBController
2018-02-08 10:21:02,416 - DEBUG - Position requested
2018-02-08 10:21:02,418 - DEBUG - Pos Mgmt -1
2018-02-08 10:21:02,418 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FAB38>, pos=-1, avgCost=27537.1>
2018-02-08 10:21:02,418 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 10:21:02,419 - DEBUG - ccy2 Currency with position is USD
2018-02-08 10:21:02,419 - DEBUG - Position is -1
2018-02-08 10:21:02,419 - DEBUG - In Position
2018-02-08 10:21:02,419 - DEBUG - Position is 1
2018-02-08 10:21:02,420 - DEBUG - Pos Mgmt 0
2018-02-08 10:21:02,420 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FAC88>, pos=0, avgCost=0.0>
2018-02-08 10:21:02,420 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 10:21:02,420 - DEBUG - ccy2 Currency with position is USD
2018-02-08 10:21:02,421 - DEBUG - Position is 0
2018-02-08 10:21:02,421 - DEBUG - Pos Mgmt -12987
2018-02-08 10:21:02,421 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FAF28>, pos=-12987, avgCost=0.95368235>
2018-02-08 10:21:02,421 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 10:21:02,422 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 10:21:02,422 - DEBUG - Position is -12987
2018-02-08 10:21:03,418 - DEBUG - Open Orders requested
2018-02-08 10:21:03,420 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x00000000020FAD68>, order=<ib.ext.Order.Order object at 0x00000000020FAE80>, orderState=<ib.ext.OrderState.OrderState object at 0x000000000218F198>>
2018-02-08 10:21:03,421 - DEBUG - Order OrderID 182
2018-02-08 10:21:03,421 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 10:21:03,422 - DEBUG - Order status PreSubmitted
2018-02-08 10:21:03,422 - DEBUG - Order Identification 182
2018-02-08 10:21:03,422 - DEBUG - Order Identification <class 'int'>
2018-02-08 10:21:03,423 - DEBUG - Profit ID from database is 181
2018-02-08 10:21:03,423 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 10:21:03,423 - DEBUG - Stop ID database is 182
2018-02-08 10:21:03,423 - DEBUG - Entry ID database is 181
2018-02-08 10:21:03,423 - DEBUG - Stop API ID is 182
2018-02-08 10:21:05,421 - DEBUG - Connecting to database
2018-02-08 10:21:05,429 - DEBUG - Connected to database
2018-02-08 10:21:05,432 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 10:21:05,432 - DEBUG - Stop loss value is 71.07
2018-02-08 10:21:05,434 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 10:21:05,434 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 10:21:05,436 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 10:21:05,436 - DEBUG - EntryPrice value is 68.85
2018-02-08 10:21:05,437 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 10:21:05,438 - DEBUG - Stop quantity 1
2018-02-08 10:21:05,440 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 10:21:05,440 - DEBUG - Direction is Short
2018-02-08 10:21:05,441 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 10:21:05,442 - DEBUG - Count is 1
2018-02-08 10:21:05,444 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 10:21:05,445 - DEBUG - Stop Loss Flag is 1
2018-02-08 10:21:05,446 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 10:21:05,446 - DEBUG - Max ID Order is (182,)
2018-02-08 10:21:05,447 - DEBUG - Today is 2018-02-08
2018-02-08 10:21:05,447 - DEBUG - Day of the week 3
2018-02-08 10:21:05,447 - DEBUG - Yesterday is 02/07/2018
2018-02-08 10:21:05,448 - DEBUG - In Position is  1
2018-02-08 10:21:05,448 - DEBUG - In Position is  <class 'int'>
2018-02-08 10:21:05,448 - DEBUG - curStopLossFlag is  1
2018-02-08 10:21:05,448 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 10:21:05,449 - DEBUG - Checking if Entry has been filled
2018-02-08 10:21:05,449 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 10:21:05,453 - DEBUG - EntryPend is 0
2018-02-08 10:21:05,454 - DEBUG - Try to Cancel Stop
2018-02-08 10:21:05,454 - DEBUG - Stop API ID 182
2018-02-08 10:21:05,454 - DEBUG - Profit API ID 0
2018-02-08 10:21:05,454 - DEBUG - Stop API ID <class 'int'>
2018-02-08 10:21:05,455 - DEBUG - Profit API ID <class 'int'>
2018-02-08 10:21:05,455 - DEBUG - Pos is 1
2018-02-08 10:21:05,455 - DEBUG - CurCount is 1
2018-02-08 10:21:05,455 - DEBUG - In Pos 1
2018-02-08 10:21:05,456 - DEBUG - Stop ID is 182
2018-02-08 10:21:05,456 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 10:21:05,457 - DEBUG - EntryPend is 0
2018-02-08 10:21:05,458 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 10:21:05,458 - DEBUG - Entry Date is 10
2018-02-08 10:21:05,458 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 10:21:05,458 - DEBUG - Order Profit ID is 181
2018-02-08 10:21:05,458 - DEBUG - Order Entry ID is 181
2018-02-08 10:21:05,459 - DEBUG - API ID is  0
2018-02-08 10:21:05,459 - DEBUG - Current Position is 1
2018-02-08 10:21:05,459 - DEBUG - Current Position is <class 'str'>
2018-02-08 10:21:05,459 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 10:21:05,460 - DEBUG - Time is 10
2018-02-08 10:21:05,460 - DEBUG - Time is <class 'int'>
2018-02-08 10:21:05,460 - DEBUG - Time is 21
2018-02-08 10:21:05,460 - DEBUG - Time is <class 'int'>
2018-02-08 10:21:05,461 - DEBUG - Disconnected from IBController
2018-02-08 10:21:05,461 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 10:26:01,352 - DEBUG - ****************************************************
2018-02-08 10:26:01,353 - DEBUG - Current Time is 10:26AM
2018-02-08 10:26:01,353 - DEBUG - Starting Pos Mgmt H E
2018-02-08 10:26:01,353 - DEBUG - Connecting to database
2018-02-08 10:26:01,379 - DEBUG - Connected to database
2018-02-08 10:26:01,379 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 10:26:01,381 - DEBUG - Order Profit is 181
2018-02-08 10:26:01,381 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 10:26:01,382 - DEBUG - Stop ID is 182
2018-02-08 10:26:01,383 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 10:26:01,384 - DEBUG - Entry ID is 181
2018-02-08 10:26:01,384 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 10:26:01,386 - DEBUG - OCA ID is 1
2018-02-08 10:26:01,386 - DEBUG - Connecting to IBController
2018-02-08 10:26:02,391 - DEBUG - Connected to IBController
2018-02-08 10:26:02,391 - DEBUG - Position requested
2018-02-08 10:26:02,392 - DEBUG - Pos Mgmt -1
2018-02-08 10:26:02,393 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FDD30>, pos=-1, avgCost=27537.1>
2018-02-08 10:26:02,393 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 10:26:02,393 - DEBUG - ccy2 Currency with position is USD
2018-02-08 10:26:02,394 - DEBUG - Position is -1
2018-02-08 10:26:02,394 - DEBUG - In Position
2018-02-08 10:26:02,394 - DEBUG - Position is 1
2018-02-08 10:26:02,394 - DEBUG - Pos Mgmt 0
2018-02-08 10:26:02,395 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FDBE0>, pos=0, avgCost=0.0>
2018-02-08 10:26:02,395 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 10:26:02,395 - DEBUG - ccy2 Currency with position is USD
2018-02-08 10:26:02,395 - DEBUG - Position is 0
2018-02-08 10:26:02,396 - DEBUG - Pos Mgmt -12987
2018-02-08 10:26:02,397 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FDF28>, pos=-12987, avgCost=0.95368235>
2018-02-08 10:26:02,397 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 10:26:02,398 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 10:26:02,400 - DEBUG - Position is -12987
2018-02-08 10:26:03,392 - DEBUG - Open Orders requested
2018-02-08 10:26:03,393 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x00000000020FDCF8>, order=<ib.ext.Order.Order object at 0x00000000020FDD68>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002191198>>
2018-02-08 10:26:03,394 - DEBUG - Order OrderID 182
2018-02-08 10:26:03,394 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 10:26:03,395 - DEBUG - Order status PreSubmitted
2018-02-08 10:26:03,395 - DEBUG - Order Identification 182
2018-02-08 10:26:03,395 - DEBUG - Order Identification <class 'int'>
2018-02-08 10:26:03,396 - DEBUG - Profit ID from database is 181
2018-02-08 10:26:03,396 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 10:26:03,396 - DEBUG - Stop ID database is 182
2018-02-08 10:26:03,396 - DEBUG - Entry ID database is 181
2018-02-08 10:26:03,397 - DEBUG - Stop API ID is 182
2018-02-08 10:26:05,394 - DEBUG - Connecting to database
2018-02-08 10:26:05,401 - DEBUG - Connected to database
2018-02-08 10:26:05,403 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 10:26:05,403 - DEBUG - Stop loss value is 71.07
2018-02-08 10:26:05,405 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 10:26:05,405 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 10:26:05,406 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 10:26:05,407 - DEBUG - EntryPrice value is 68.85
2018-02-08 10:26:05,408 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 10:26:05,409 - DEBUG - Stop quantity 1
2018-02-08 10:26:05,410 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 10:26:05,410 - DEBUG - Direction is Short
2018-02-08 10:26:05,411 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 10:26:05,412 - DEBUG - Count is 1
2018-02-08 10:26:05,413 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 10:26:05,413 - DEBUG - Stop Loss Flag is 1
2018-02-08 10:26:05,415 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 10:26:05,415 - DEBUG - Max ID Order is (182,)
2018-02-08 10:26:05,415 - DEBUG - Today is 2018-02-08
2018-02-08 10:26:05,416 - DEBUG - Day of the week 3
2018-02-08 10:26:05,416 - DEBUG - Yesterday is 02/07/2018
2018-02-08 10:26:05,416 - DEBUG - In Position is  1
2018-02-08 10:26:05,416 - DEBUG - In Position is  <class 'int'>
2018-02-08 10:26:05,417 - DEBUG - curStopLossFlag is  1
2018-02-08 10:26:05,417 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 10:26:05,417 - DEBUG - Checking if Entry has been filled
2018-02-08 10:26:05,417 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 10:26:05,419 - DEBUG - EntryPend is 0
2018-02-08 10:26:05,419 - DEBUG - Try to Cancel Stop
2018-02-08 10:26:05,419 - DEBUG - Stop API ID 182
2018-02-08 10:26:05,419 - DEBUG - Profit API ID 0
2018-02-08 10:26:05,420 - DEBUG - Stop API ID <class 'int'>
2018-02-08 10:26:05,420 - DEBUG - Profit API ID <class 'int'>
2018-02-08 10:26:05,420 - DEBUG - Pos is 1
2018-02-08 10:26:05,420 - DEBUG - CurCount is 1
2018-02-08 10:26:05,421 - DEBUG - In Pos 1
2018-02-08 10:26:05,421 - DEBUG - Stop ID is 182
2018-02-08 10:26:05,421 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 10:26:05,422 - DEBUG - EntryPend is 0
2018-02-08 10:26:05,423 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 10:26:05,423 - DEBUG - Entry Date is 10
2018-02-08 10:26:05,423 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 10:26:05,423 - DEBUG - Order Profit ID is 181
2018-02-08 10:26:05,423 - DEBUG - Order Entry ID is 181
2018-02-08 10:26:05,424 - DEBUG - API ID is  0
2018-02-08 10:26:05,424 - DEBUG - Current Position is 1
2018-02-08 10:26:05,424 - DEBUG - Current Position is <class 'str'>
2018-02-08 10:26:05,424 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 10:26:05,425 - DEBUG - Time is 10
2018-02-08 10:26:05,425 - DEBUG - Time is <class 'int'>
2018-02-08 10:26:05,425 - DEBUG - Time is 26
2018-02-08 10:26:05,425 - DEBUG - Time is <class 'int'>
2018-02-08 10:26:05,426 - DEBUG - Disconnected from IBController
2018-02-08 10:26:05,426 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 10:31:01,348 - DEBUG - ****************************************************
2018-02-08 10:31:01,348 - DEBUG - Current Time is 10:31AM
2018-02-08 10:31:01,349 - DEBUG - Starting Pos Mgmt H E
2018-02-08 10:31:01,349 - DEBUG - Connecting to database
2018-02-08 10:31:01,373 - DEBUG - Connected to database
2018-02-08 10:31:01,374 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 10:31:01,375 - DEBUG - Order Profit is 181
2018-02-08 10:31:01,375 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 10:31:01,377 - DEBUG - Stop ID is 182
2018-02-08 10:31:01,377 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 10:31:01,378 - DEBUG - Entry ID is 181
2018-02-08 10:31:01,379 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 10:31:01,380 - DEBUG - OCA ID is 1
2018-02-08 10:31:01,381 - DEBUG - Connecting to IBController
2018-02-08 10:31:02,391 - DEBUG - Connected to IBController
2018-02-08 10:31:02,391 - DEBUG - Position requested
2018-02-08 10:31:02,392 - DEBUG - Pos Mgmt -1
2018-02-08 10:31:02,393 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020EDB38>, pos=-1, avgCost=27537.1>
2018-02-08 10:31:02,393 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 10:31:02,393 - DEBUG - ccy2 Currency with position is USD
2018-02-08 10:31:02,393 - DEBUG - Position is -1
2018-02-08 10:31:02,394 - DEBUG - In Position
2018-02-08 10:31:02,394 - DEBUG - Position is 1
2018-02-08 10:31:02,394 - DEBUG - Pos Mgmt 0
2018-02-08 10:31:02,394 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020EDC18>, pos=0, avgCost=0.0>
2018-02-08 10:31:02,395 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 10:31:02,395 - DEBUG - ccy2 Currency with position is USD
2018-02-08 10:31:02,395 - DEBUG - Position is 0
2018-02-08 10:31:02,396 - DEBUG - Pos Mgmt -12987
2018-02-08 10:31:02,396 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020EDF28>, pos=-12987, avgCost=0.95368235>
2018-02-08 10:31:02,396 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 10:31:02,396 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 10:31:02,397 - DEBUG - Position is -12987
2018-02-08 10:31:03,392 - DEBUG - Open Orders requested
2018-02-08 10:31:03,394 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x00000000020EDC50>, order=<ib.ext.Order.Order object at 0x00000000020EDB00>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002181198>>
2018-02-08 10:31:03,394 - DEBUG - Order OrderID 182
2018-02-08 10:31:03,395 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 10:31:03,395 - DEBUG - Order status PreSubmitted
2018-02-08 10:31:03,395 - DEBUG - Order Identification 182
2018-02-08 10:31:03,396 - DEBUG - Order Identification <class 'int'>
2018-02-08 10:31:03,396 - DEBUG - Profit ID from database is 181
2018-02-08 10:31:03,396 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 10:31:03,396 - DEBUG - Stop ID database is 182
2018-02-08 10:31:03,396 - DEBUG - Entry ID database is 181
2018-02-08 10:31:03,397 - DEBUG - Stop API ID is 182
2018-02-08 10:31:05,394 - DEBUG - Connecting to database
2018-02-08 10:31:05,401 - DEBUG - Connected to database
2018-02-08 10:31:05,403 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 10:31:05,403 - DEBUG - Stop loss value is 71.07
2018-02-08 10:31:05,405 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 10:31:05,405 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 10:31:05,407 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 10:31:05,407 - DEBUG - EntryPrice value is 68.85
2018-02-08 10:31:05,409 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 10:31:05,409 - DEBUG - Stop quantity 1
2018-02-08 10:31:05,410 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 10:31:05,411 - DEBUG - Direction is Short
2018-02-08 10:31:05,412 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 10:31:05,412 - DEBUG - Count is 1
2018-02-08 10:31:05,414 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 10:31:05,414 - DEBUG - Stop Loss Flag is 1
2018-02-08 10:31:05,415 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 10:31:05,416 - DEBUG - Max ID Order is (182,)
2018-02-08 10:31:05,416 - DEBUG - Today is 2018-02-08
2018-02-08 10:31:05,416 - DEBUG - Day of the week 3
2018-02-08 10:31:05,417 - DEBUG - Yesterday is 02/07/2018
2018-02-08 10:31:05,417 - DEBUG - In Position is  1
2018-02-08 10:31:05,417 - DEBUG - In Position is  <class 'int'>
2018-02-08 10:31:05,417 - DEBUG - curStopLossFlag is  1
2018-02-08 10:31:05,418 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 10:31:05,418 - DEBUG - Checking if Entry has been filled
2018-02-08 10:31:05,418 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 10:31:05,420 - DEBUG - EntryPend is 0
2018-02-08 10:31:05,420 - DEBUG - Try to Cancel Stop
2018-02-08 10:31:05,421 - DEBUG - Stop API ID 182
2018-02-08 10:31:05,421 - DEBUG - Profit API ID 0
2018-02-08 10:31:05,421 - DEBUG - Stop API ID <class 'int'>
2018-02-08 10:31:05,421 - DEBUG - Profit API ID <class 'int'>
2018-02-08 10:31:05,421 - DEBUG - Pos is 1
2018-02-08 10:31:05,422 - DEBUG - CurCount is 1
2018-02-08 10:31:05,422 - DEBUG - In Pos 1
2018-02-08 10:31:05,422 - DEBUG - Stop ID is 182
2018-02-08 10:31:05,422 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 10:31:05,424 - DEBUG - EntryPend is 0
2018-02-08 10:31:05,424 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 10:31:05,424 - DEBUG - Entry Date is 10
2018-02-08 10:31:05,424 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 10:31:05,425 - DEBUG - Order Profit ID is 181
2018-02-08 10:31:05,425 - DEBUG - Order Entry ID is 181
2018-02-08 10:31:05,425 - DEBUG - API ID is  0
2018-02-08 10:31:05,425 - DEBUG - Current Position is 1
2018-02-08 10:31:05,426 - DEBUG - Current Position is <class 'str'>
2018-02-08 10:31:05,426 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 10:31:05,426 - DEBUG - Time is 10
2018-02-08 10:31:05,426 - DEBUG - Time is <class 'int'>
2018-02-08 10:31:05,427 - DEBUG - Time is 31
2018-02-08 10:31:05,427 - DEBUG - Time is <class 'int'>
2018-02-08 10:31:05,427 - DEBUG - Disconnected from IBController
2018-02-08 10:31:05,428 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 10:36:01,347 - DEBUG - ****************************************************
2018-02-08 10:36:01,347 - DEBUG - Current Time is 10:36AM
2018-02-08 10:36:01,348 - DEBUG - Starting Pos Mgmt H E
2018-02-08 10:36:01,348 - DEBUG - Connecting to database
2018-02-08 10:36:01,390 - DEBUG - Connected to database
2018-02-08 10:36:01,391 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 10:36:01,393 - DEBUG - Order Profit is 181
2018-02-08 10:36:01,393 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 10:36:01,395 - DEBUG - Stop ID is 182
2018-02-08 10:36:01,395 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 10:36:01,397 - DEBUG - Entry ID is 181
2018-02-08 10:36:01,397 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 10:36:01,399 - DEBUG - OCA ID is 1
2018-02-08 10:36:01,399 - DEBUG - Connecting to IBController
2018-02-08 10:36:02,408 - DEBUG - Connected to IBController
2018-02-08 10:36:02,408 - DEBUG - Position requested
2018-02-08 10:36:02,409 - DEBUG - Pos Mgmt -1
2018-02-08 10:36:02,410 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FCB38>, pos=-1, avgCost=27537.1>
2018-02-08 10:36:02,410 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 10:36:02,411 - DEBUG - ccy2 Currency with position is USD
2018-02-08 10:36:02,411 - DEBUG - Position is -1
2018-02-08 10:36:02,411 - DEBUG - In Position
2018-02-08 10:36:02,411 - DEBUG - Position is 1
2018-02-08 10:36:02,412 - DEBUG - Pos Mgmt 0
2018-02-08 10:36:02,412 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FCCF8>, pos=0, avgCost=0.0>
2018-02-08 10:36:02,412 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 10:36:02,412 - DEBUG - ccy2 Currency with position is USD
2018-02-08 10:36:02,413 - DEBUG - Position is 0
2018-02-08 10:36:02,413 - DEBUG - Pos Mgmt -12987
2018-02-08 10:36:02,413 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FCF98>, pos=-12987, avgCost=0.95368235>
2018-02-08 10:36:02,414 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 10:36:02,414 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 10:36:02,414 - DEBUG - Position is -12987
2018-02-08 10:36:03,410 - DEBUG - Open Orders requested
2018-02-08 10:36:03,412 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x00000000020FCE10>, order=<ib.ext.Order.Order object at 0x00000000020FCBE0>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002191198>>
2018-02-08 10:36:03,412 - DEBUG - Order OrderID 182
2018-02-08 10:36:03,413 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 10:36:03,413 - DEBUG - Order status PreSubmitted
2018-02-08 10:36:03,413 - DEBUG - Order Identification 182
2018-02-08 10:36:03,413 - DEBUG - Order Identification <class 'int'>
2018-02-08 10:36:03,414 - DEBUG - Profit ID from database is 181
2018-02-08 10:36:03,414 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 10:36:03,414 - DEBUG - Stop ID database is 182
2018-02-08 10:36:03,414 - DEBUG - Entry ID database is 181
2018-02-08 10:36:03,415 - DEBUG - Stop API ID is 182
2018-02-08 10:36:05,412 - DEBUG - Connecting to database
2018-02-08 10:36:05,419 - DEBUG - Connected to database
2018-02-08 10:36:05,421 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 10:36:05,421 - DEBUG - Stop loss value is 71.07
2018-02-08 10:36:05,422 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 10:36:05,423 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 10:36:05,424 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 10:36:05,425 - DEBUG - EntryPrice value is 68.85
2018-02-08 10:36:05,426 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 10:36:05,426 - DEBUG - Stop quantity 1
2018-02-08 10:36:05,428 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 10:36:05,428 - DEBUG - Direction is Short
2018-02-08 10:36:05,429 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 10:36:05,430 - DEBUG - Count is 1
2018-02-08 10:36:05,431 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 10:36:05,431 - DEBUG - Stop Loss Flag is 1
2018-02-08 10:36:05,433 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 10:36:05,433 - DEBUG - Max ID Order is (182,)
2018-02-08 10:36:05,433 - DEBUG - Today is 2018-02-08
2018-02-08 10:36:05,434 - DEBUG - Day of the week 3
2018-02-08 10:36:05,434 - DEBUG - Yesterday is 02/07/2018
2018-02-08 10:36:05,434 - DEBUG - In Position is  1
2018-02-08 10:36:05,435 - DEBUG - In Position is  <class 'int'>
2018-02-08 10:36:05,435 - DEBUG - curStopLossFlag is  1
2018-02-08 10:36:05,435 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 10:36:05,435 - DEBUG - Checking if Entry has been filled
2018-02-08 10:36:05,436 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 10:36:05,437 - DEBUG - EntryPend is 0
2018-02-08 10:36:05,437 - DEBUG - Try to Cancel Stop
2018-02-08 10:36:05,437 - DEBUG - Stop API ID 182
2018-02-08 10:36:05,438 - DEBUG - Profit API ID 0
2018-02-08 10:36:05,438 - DEBUG - Stop API ID <class 'int'>
2018-02-08 10:36:05,438 - DEBUG - Profit API ID <class 'int'>
2018-02-08 10:36:05,438 - DEBUG - Pos is 1
2018-02-08 10:36:05,439 - DEBUG - CurCount is 1
2018-02-08 10:36:05,439 - DEBUG - In Pos 1
2018-02-08 10:36:05,439 - DEBUG - Stop ID is 182
2018-02-08 10:36:05,439 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 10:36:05,441 - DEBUG - EntryPend is 0
2018-02-08 10:36:05,441 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 10:36:05,441 - DEBUG - Entry Date is 10
2018-02-08 10:36:05,441 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 10:36:05,442 - DEBUG - Order Profit ID is 181
2018-02-08 10:36:05,442 - DEBUG - Order Entry ID is 181
2018-02-08 10:36:05,442 - DEBUG - API ID is  0
2018-02-08 10:36:05,442 - DEBUG - Current Position is 1
2018-02-08 10:36:05,442 - DEBUG - Current Position is <class 'str'>
2018-02-08 10:36:05,443 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 10:36:05,443 - DEBUG - Time is 10
2018-02-08 10:36:05,443 - DEBUG - Time is <class 'int'>
2018-02-08 10:36:05,443 - DEBUG - Time is 36
2018-02-08 10:36:05,444 - DEBUG - Time is <class 'int'>
2018-02-08 10:36:05,444 - DEBUG - Disconnected from IBController
2018-02-08 10:36:05,444 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 10:41:01,361 - DEBUG - ****************************************************
2018-02-08 10:41:01,361 - DEBUG - Current Time is 10:41AM
2018-02-08 10:41:01,362 - DEBUG - Starting Pos Mgmt H E
2018-02-08 10:41:01,362 - DEBUG - Connecting to database
2018-02-08 10:41:01,400 - DEBUG - Connected to database
2018-02-08 10:41:01,400 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 10:41:01,402 - DEBUG - Order Profit is 181
2018-02-08 10:41:01,402 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 10:41:01,404 - DEBUG - Stop ID is 182
2018-02-08 10:41:01,404 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 10:41:01,405 - DEBUG - Entry ID is 181
2018-02-08 10:41:01,406 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 10:41:01,407 - DEBUG - OCA ID is 1
2018-02-08 10:41:01,407 - DEBUG - Connecting to IBController
2018-02-08 10:41:02,415 - DEBUG - Connected to IBController
2018-02-08 10:41:02,415 - DEBUG - Position requested
2018-02-08 10:41:02,416 - DEBUG - Pos Mgmt -1
2018-02-08 10:41:02,416 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211DDD8>, pos=-1, avgCost=27537.1>
2018-02-08 10:41:02,417 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 10:41:02,417 - DEBUG - ccy2 Currency with position is USD
2018-02-08 10:41:02,417 - DEBUG - Position is -1
2018-02-08 10:41:02,418 - DEBUG - In Position
2018-02-08 10:41:02,418 - DEBUG - Position is 1
2018-02-08 10:41:02,418 - DEBUG - Pos Mgmt 0
2018-02-08 10:41:02,418 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211DCF8>, pos=0, avgCost=0.0>
2018-02-08 10:41:02,419 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 10:41:02,419 - DEBUG - ccy2 Currency with position is USD
2018-02-08 10:41:02,419 - DEBUG - Position is 0
2018-02-08 10:41:02,420 - DEBUG - Pos Mgmt -12987
2018-02-08 10:41:02,420 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211DF28>, pos=-12987, avgCost=0.95368235>
2018-02-08 10:41:02,420 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 10:41:02,421 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 10:41:02,421 - DEBUG - Position is -12987
2018-02-08 10:41:03,416 - DEBUG - Open Orders requested
2018-02-08 10:41:03,418 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x000000000211DCF8>, order=<ib.ext.Order.Order object at 0x000000000211DC18>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B1128>>
2018-02-08 10:41:03,419 - DEBUG - Order OrderID 182
2018-02-08 10:41:03,419 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 10:41:03,420 - DEBUG - Order status PreSubmitted
2018-02-08 10:41:03,420 - DEBUG - Order Identification 182
2018-02-08 10:41:03,420 - DEBUG - Order Identification <class 'int'>
2018-02-08 10:41:03,420 - DEBUG - Profit ID from database is 181
2018-02-08 10:41:03,420 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 10:41:03,421 - DEBUG - Stop ID database is 182
2018-02-08 10:41:03,421 - DEBUG - Entry ID database is 181
2018-02-08 10:41:03,421 - DEBUG - Stop API ID is 182
2018-02-08 10:41:05,416 - DEBUG - Connecting to database
2018-02-08 10:41:05,423 - DEBUG - Connected to database
2018-02-08 10:41:05,425 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 10:41:05,425 - DEBUG - Stop loss value is 71.07
2018-02-08 10:41:05,426 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 10:41:05,427 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 10:41:05,428 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 10:41:05,428 - DEBUG - EntryPrice value is 68.85
2018-02-08 10:41:05,430 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 10:41:05,430 - DEBUG - Stop quantity 1
2018-02-08 10:41:05,431 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 10:41:05,432 - DEBUG - Direction is Short
2018-02-08 10:41:05,434 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 10:41:05,434 - DEBUG - Count is 1
2018-02-08 10:41:05,435 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 10:41:05,436 - DEBUG - Stop Loss Flag is 1
2018-02-08 10:41:05,437 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 10:41:05,437 - DEBUG - Max ID Order is (182,)
2018-02-08 10:41:05,438 - DEBUG - Today is 2018-02-08
2018-02-08 10:41:05,438 - DEBUG - Day of the week 3
2018-02-08 10:41:05,439 - DEBUG - Yesterday is 02/07/2018
2018-02-08 10:41:05,439 - DEBUG - In Position is  1
2018-02-08 10:41:05,439 - DEBUG - In Position is  <class 'int'>
2018-02-08 10:41:05,439 - DEBUG - curStopLossFlag is  1
2018-02-08 10:41:05,439 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 10:41:05,440 - DEBUG - Checking if Entry has been filled
2018-02-08 10:41:05,440 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 10:41:05,441 - DEBUG - EntryPend is 0
2018-02-08 10:41:05,442 - DEBUG - Try to Cancel Stop
2018-02-08 10:41:05,442 - DEBUG - Stop API ID 182
2018-02-08 10:41:05,442 - DEBUG - Profit API ID 0
2018-02-08 10:41:05,442 - DEBUG - Stop API ID <class 'int'>
2018-02-08 10:41:05,443 - DEBUG - Profit API ID <class 'int'>
2018-02-08 10:41:05,443 - DEBUG - Pos is 1
2018-02-08 10:41:05,443 - DEBUG - CurCount is 1
2018-02-08 10:41:05,443 - DEBUG - In Pos 1
2018-02-08 10:41:05,443 - DEBUG - Stop ID is 182
2018-02-08 10:41:05,444 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 10:41:05,445 - DEBUG - EntryPend is 0
2018-02-08 10:41:05,445 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 10:41:05,445 - DEBUG - Entry Date is 10
2018-02-08 10:41:05,446 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 10:41:05,446 - DEBUG - Order Profit ID is 181
2018-02-08 10:41:05,446 - DEBUG - Order Entry ID is 181
2018-02-08 10:41:05,446 - DEBUG - API ID is  0
2018-02-08 10:41:05,447 - DEBUG - Current Position is 1
2018-02-08 10:41:05,447 - DEBUG - Current Position is <class 'str'>
2018-02-08 10:41:05,447 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 10:41:05,447 - DEBUG - Time is 10
2018-02-08 10:41:05,448 - DEBUG - Time is <class 'int'>
2018-02-08 10:41:05,448 - DEBUG - Time is 41
2018-02-08 10:41:05,448 - DEBUG - Time is <class 'int'>
2018-02-08 10:41:05,448 - DEBUG - Disconnected from IBController
2018-02-08 10:41:05,449 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 10:46:01,357 - DEBUG - ****************************************************
2018-02-08 10:46:01,357 - DEBUG - Current Time is 10:46AM
2018-02-08 10:46:01,357 - DEBUG - Starting Pos Mgmt H E
2018-02-08 10:46:01,358 - DEBUG - Connecting to database
2018-02-08 10:46:01,386 - DEBUG - Connected to database
2018-02-08 10:46:01,386 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 10:46:01,388 - DEBUG - Order Profit is 181
2018-02-08 10:46:01,389 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 10:46:01,390 - DEBUG - Stop ID is 182
2018-02-08 10:46:01,391 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 10:46:01,392 - DEBUG - Entry ID is 181
2018-02-08 10:46:01,392 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 10:46:01,394 - DEBUG - OCA ID is 1
2018-02-08 10:46:01,394 - DEBUG - Connecting to IBController
2018-02-08 10:46:02,403 - DEBUG - Connected to IBController
2018-02-08 10:46:02,403 - DEBUG - Position requested
2018-02-08 10:46:02,404 - DEBUG - Pos Mgmt -1
2018-02-08 10:46:02,405 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211DB38>, pos=-1, avgCost=27537.1>
2018-02-08 10:46:02,405 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 10:46:02,405 - DEBUG - ccy2 Currency with position is USD
2018-02-08 10:46:02,406 - DEBUG - Position is -1
2018-02-08 10:46:02,406 - DEBUG - In Position
2018-02-08 10:46:02,406 - DEBUG - Position is 1
2018-02-08 10:46:02,406 - DEBUG - Pos Mgmt 0
2018-02-08 10:46:02,407 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211DCF8>, pos=0, avgCost=0.0>
2018-02-08 10:46:02,407 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 10:46:02,407 - DEBUG - ccy2 Currency with position is USD
2018-02-08 10:46:02,407 - DEBUG - Position is 0
2018-02-08 10:46:02,408 - DEBUG - Pos Mgmt -12987
2018-02-08 10:46:02,408 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211DF28>, pos=-12987, avgCost=0.95368235>
2018-02-08 10:46:02,408 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 10:46:02,409 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 10:46:02,409 - DEBUG - Position is -12987
2018-02-08 10:46:03,405 - DEBUG - Open Orders requested
2018-02-08 10:46:03,407 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x000000000211DBE0>, order=<ib.ext.Order.Order object at 0x000000000211DC88>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B2198>>
2018-02-08 10:46:03,407 - DEBUG - Order OrderID 182
2018-02-08 10:46:03,408 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 10:46:03,408 - DEBUG - Order status PreSubmitted
2018-02-08 10:46:03,408 - DEBUG - Order Identification 182
2018-02-08 10:46:03,409 - DEBUG - Order Identification <class 'int'>
2018-02-08 10:46:03,409 - DEBUG - Profit ID from database is 181
2018-02-08 10:46:03,409 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 10:46:03,409 - DEBUG - Stop ID database is 182
2018-02-08 10:46:03,410 - DEBUG - Entry ID database is 181
2018-02-08 10:46:03,410 - DEBUG - Stop API ID is 182
2018-02-08 10:46:05,407 - DEBUG - Connecting to database
2018-02-08 10:46:05,414 - DEBUG - Connected to database
2018-02-08 10:46:05,416 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 10:46:05,417 - DEBUG - Stop loss value is 71.07
2018-02-08 10:46:05,420 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 10:46:05,421 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 10:46:05,423 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 10:46:05,424 - DEBUG - EntryPrice value is 68.85
2018-02-08 10:46:05,425 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 10:46:05,426 - DEBUG - Stop quantity 1
2018-02-08 10:46:05,427 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 10:46:05,427 - DEBUG - Direction is Short
2018-02-08 10:46:05,429 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 10:46:05,429 - DEBUG - Count is 1
2018-02-08 10:46:05,430 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 10:46:05,431 - DEBUG - Stop Loss Flag is 1
2018-02-08 10:46:05,432 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 10:46:05,432 - DEBUG - Max ID Order is (182,)
2018-02-08 10:46:05,433 - DEBUG - Today is 2018-02-08
2018-02-08 10:46:05,433 - DEBUG - Day of the week 3
2018-02-08 10:46:05,433 - DEBUG - Yesterday is 02/07/2018
2018-02-08 10:46:05,434 - DEBUG - In Position is  1
2018-02-08 10:46:05,434 - DEBUG - In Position is  <class 'int'>
2018-02-08 10:46:05,434 - DEBUG - curStopLossFlag is  1
2018-02-08 10:46:05,434 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 10:46:05,434 - DEBUG - Checking if Entry has been filled
2018-02-08 10:46:05,435 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 10:46:05,436 - DEBUG - EntryPend is 0
2018-02-08 10:46:05,436 - DEBUG - Try to Cancel Stop
2018-02-08 10:46:05,437 - DEBUG - Stop API ID 182
2018-02-08 10:46:05,437 - DEBUG - Profit API ID 0
2018-02-08 10:46:05,437 - DEBUG - Stop API ID <class 'int'>
2018-02-08 10:46:05,437 - DEBUG - Profit API ID <class 'int'>
2018-02-08 10:46:05,438 - DEBUG - Pos is 1
2018-02-08 10:46:05,438 - DEBUG - CurCount is 1
2018-02-08 10:46:05,438 - DEBUG - In Pos 1
2018-02-08 10:46:05,438 - DEBUG - Stop ID is 182
2018-02-08 10:46:05,438 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 10:46:05,441 - DEBUG - EntryPend is 0
2018-02-08 10:46:05,441 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 10:46:05,441 - DEBUG - Entry Date is 10
2018-02-08 10:46:05,441 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 10:46:05,442 - DEBUG - Order Profit ID is 181
2018-02-08 10:46:05,442 - DEBUG - Order Entry ID is 181
2018-02-08 10:46:05,442 - DEBUG - API ID is  0
2018-02-08 10:46:05,442 - DEBUG - Current Position is 1
2018-02-08 10:46:05,442 - DEBUG - Current Position is <class 'str'>
2018-02-08 10:46:05,443 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 10:46:05,443 - DEBUG - Time is 10
2018-02-08 10:46:05,443 - DEBUG - Time is <class 'int'>
2018-02-08 10:46:05,443 - DEBUG - Time is 46
2018-02-08 10:46:05,444 - DEBUG - Time is <class 'int'>
2018-02-08 10:46:05,444 - DEBUG - Disconnected from IBController
2018-02-08 10:46:05,444 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 10:51:01,349 - DEBUG - ****************************************************
2018-02-08 10:51:01,350 - DEBUG - Current Time is 10:51AM
2018-02-08 10:51:01,350 - DEBUG - Starting Pos Mgmt H E
2018-02-08 10:51:01,350 - DEBUG - Connecting to database
2018-02-08 10:51:01,382 - DEBUG - Connected to database
2018-02-08 10:51:01,383 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 10:51:01,384 - DEBUG - Order Profit is 181
2018-02-08 10:51:01,385 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 10:51:01,386 - DEBUG - Stop ID is 182
2018-02-08 10:51:01,386 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 10:51:01,388 - DEBUG - Entry ID is 181
2018-02-08 10:51:01,388 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 10:51:01,390 - DEBUG - OCA ID is 1
2018-02-08 10:51:01,390 - DEBUG - Connecting to IBController
2018-02-08 10:51:02,429 - DEBUG - Connected to IBController
2018-02-08 10:51:02,429 - DEBUG - Position requested
2018-02-08 10:51:02,433 - DEBUG - Pos Mgmt -1
2018-02-08 10:51:02,433 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210CD30>, pos=-1, avgCost=27537.1>
2018-02-08 10:51:02,433 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 10:51:02,434 - DEBUG - ccy2 Currency with position is USD
2018-02-08 10:51:02,434 - DEBUG - Position is -1
2018-02-08 10:51:02,434 - DEBUG - In Position
2018-02-08 10:51:02,434 - DEBUG - Position is 1
2018-02-08 10:51:02,435 - DEBUG - Pos Mgmt 0
2018-02-08 10:51:02,435 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210CC88>, pos=0, avgCost=0.0>
2018-02-08 10:51:02,435 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 10:51:02,435 - DEBUG - ccy2 Currency with position is USD
2018-02-08 10:51:02,436 - DEBUG - Position is 0
2018-02-08 10:51:02,436 - DEBUG - Pos Mgmt -12987
2018-02-08 10:51:02,436 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210CF98>, pos=-12987, avgCost=0.95368235>
2018-02-08 10:51:02,436 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 10:51:02,437 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 10:51:02,437 - DEBUG - Position is -12987
2018-02-08 10:51:03,432 - DEBUG - Open Orders requested
2018-02-08 10:51:03,434 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x000000000210CD68>, order=<ib.ext.Order.Order object at 0x000000000210CC50>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A1198>>
2018-02-08 10:51:03,434 - DEBUG - Order OrderID 182
2018-02-08 10:51:03,435 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 10:51:03,435 - DEBUG - Order status PreSubmitted
2018-02-08 10:51:03,435 - DEBUG - Order Identification 182
2018-02-08 10:51:03,436 - DEBUG - Order Identification <class 'int'>
2018-02-08 10:51:03,436 - DEBUG - Profit ID from database is 181
2018-02-08 10:51:03,436 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 10:51:03,437 - DEBUG - Stop ID database is 182
2018-02-08 10:51:03,437 - DEBUG - Entry ID database is 181
2018-02-08 10:51:03,437 - DEBUG - Stop API ID is 182
2018-02-08 10:51:05,434 - DEBUG - Connecting to database
2018-02-08 10:51:05,441 - DEBUG - Connected to database
2018-02-08 10:51:05,442 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 10:51:05,443 - DEBUG - Stop loss value is 71.07
2018-02-08 10:51:05,444 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 10:51:05,444 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 10:51:05,446 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 10:51:05,446 - DEBUG - EntryPrice value is 68.85
2018-02-08 10:51:05,448 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 10:51:05,448 - DEBUG - Stop quantity 1
2018-02-08 10:51:05,450 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 10:51:05,450 - DEBUG - Direction is Short
2018-02-08 10:51:05,452 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 10:51:05,452 - DEBUG - Count is 1
2018-02-08 10:51:05,453 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 10:51:05,454 - DEBUG - Stop Loss Flag is 1
2018-02-08 10:51:05,455 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 10:51:05,456 - DEBUG - Max ID Order is (182,)
2018-02-08 10:51:05,456 - DEBUG - Today is 2018-02-08
2018-02-08 10:51:05,456 - DEBUG - Day of the week 3
2018-02-08 10:51:05,457 - DEBUG - Yesterday is 02/07/2018
2018-02-08 10:51:05,457 - DEBUG - In Position is  1
2018-02-08 10:51:05,457 - DEBUG - In Position is  <class 'int'>
2018-02-08 10:51:05,457 - DEBUG - curStopLossFlag is  1
2018-02-08 10:51:05,458 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 10:51:05,458 - DEBUG - Checking if Entry has been filled
2018-02-08 10:51:05,458 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 10:51:05,459 - DEBUG - EntryPend is 0
2018-02-08 10:51:05,460 - DEBUG - Try to Cancel Stop
2018-02-08 10:51:05,460 - DEBUG - Stop API ID 182
2018-02-08 10:51:05,460 - DEBUG - Profit API ID 0
2018-02-08 10:51:05,460 - DEBUG - Stop API ID <class 'int'>
2018-02-08 10:51:05,461 - DEBUG - Profit API ID <class 'int'>
2018-02-08 10:51:05,461 - DEBUG - Pos is 1
2018-02-08 10:51:05,461 - DEBUG - CurCount is 1
2018-02-08 10:51:05,461 - DEBUG - In Pos 1
2018-02-08 10:51:05,461 - DEBUG - Stop ID is 182
2018-02-08 10:51:05,462 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 10:51:05,463 - DEBUG - EntryPend is 0
2018-02-08 10:51:05,463 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 10:51:05,463 - DEBUG - Entry Date is 10
2018-02-08 10:51:05,464 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 10:51:05,464 - DEBUG - Order Profit ID is 181
2018-02-08 10:51:05,464 - DEBUG - Order Entry ID is 181
2018-02-08 10:51:05,464 - DEBUG - API ID is  0
2018-02-08 10:51:05,465 - DEBUG - Current Position is 1
2018-02-08 10:51:05,465 - DEBUG - Current Position is <class 'str'>
2018-02-08 10:51:05,465 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 10:51:05,465 - DEBUG - Time is 10
2018-02-08 10:51:05,465 - DEBUG - Time is <class 'int'>
2018-02-08 10:51:05,466 - DEBUG - Time is 51
2018-02-08 10:51:05,466 - DEBUG - Time is <class 'int'>
2018-02-08 10:51:05,466 - DEBUG - Disconnected from IBController
2018-02-08 10:51:05,466 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 10:56:01,355 - DEBUG - ****************************************************
2018-02-08 10:56:01,355 - DEBUG - Current Time is 10:56AM
2018-02-08 10:56:01,356 - DEBUG - Starting Pos Mgmt H E
2018-02-08 10:56:01,356 - DEBUG - Connecting to database
2018-02-08 10:56:01,389 - DEBUG - Connected to database
2018-02-08 10:56:01,389 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 10:56:01,391 - DEBUG - Order Profit is 181
2018-02-08 10:56:01,391 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 10:56:01,393 - DEBUG - Stop ID is 182
2018-02-08 10:56:01,393 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 10:56:01,395 - DEBUG - Entry ID is 181
2018-02-08 10:56:01,395 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 10:56:01,396 - DEBUG - OCA ID is 1
2018-02-08 10:56:01,397 - DEBUG - Connecting to IBController
2018-02-08 10:56:02,402 - DEBUG - Connected to IBController
2018-02-08 10:56:02,402 - DEBUG - Position requested
2018-02-08 10:56:02,404 - DEBUG - Pos Mgmt -1
2018-02-08 10:56:02,404 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211CE10>, pos=-1, avgCost=27537.1>
2018-02-08 10:56:02,405 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 10:56:02,405 - DEBUG - ccy2 Currency with position is USD
2018-02-08 10:56:02,405 - DEBUG - Position is -1
2018-02-08 10:56:02,405 - DEBUG - In Position
2018-02-08 10:56:02,406 - DEBUG - Position is 1
2018-02-08 10:56:02,406 - DEBUG - Pos Mgmt 0
2018-02-08 10:56:02,406 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211CBA8>, pos=0, avgCost=0.0>
2018-02-08 10:56:02,407 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 10:56:02,407 - DEBUG - ccy2 Currency with position is USD
2018-02-08 10:56:02,407 - DEBUG - Position is 0
2018-02-08 10:56:02,408 - DEBUG - Pos Mgmt -12987
2018-02-08 10:56:02,408 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211CF98>, pos=-12987, avgCost=0.95368235>
2018-02-08 10:56:02,408 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 10:56:02,408 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 10:56:02,408 - DEBUG - Position is -12987
2018-02-08 10:56:03,403 - DEBUG - Open Orders requested
2018-02-08 10:56:03,405 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x000000000211CBA8>, order=<ib.ext.Order.Order object at 0x000000000211CC50>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B2128>>
2018-02-08 10:56:03,405 - DEBUG - Order OrderID 182
2018-02-08 10:56:03,406 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 10:56:03,406 - DEBUG - Order status PreSubmitted
2018-02-08 10:56:03,407 - DEBUG - Order Identification 182
2018-02-08 10:56:03,407 - DEBUG - Order Identification <class 'int'>
2018-02-08 10:56:03,407 - DEBUG - Profit ID from database is 181
2018-02-08 10:56:03,407 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 10:56:03,408 - DEBUG - Stop ID database is 182
2018-02-08 10:56:03,408 - DEBUG - Entry ID database is 181
2018-02-08 10:56:03,408 - DEBUG - Stop API ID is 182
2018-02-08 10:56:05,403 - DEBUG - Connecting to database
2018-02-08 10:56:05,411 - DEBUG - Connected to database
2018-02-08 10:56:05,412 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 10:56:05,412 - DEBUG - Stop loss value is 71.07
2018-02-08 10:56:05,414 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 10:56:05,414 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 10:56:05,415 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 10:56:05,416 - DEBUG - EntryPrice value is 68.85
2018-02-08 10:56:05,417 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 10:56:05,417 - DEBUG - Stop quantity 1
2018-02-08 10:56:05,419 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 10:56:05,419 - DEBUG - Direction is Short
2018-02-08 10:56:05,421 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 10:56:05,421 - DEBUG - Count is 1
2018-02-08 10:56:05,422 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 10:56:05,423 - DEBUG - Stop Loss Flag is 1
2018-02-08 10:56:05,424 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 10:56:05,424 - DEBUG - Max ID Order is (182,)
2018-02-08 10:56:05,425 - DEBUG - Today is 2018-02-08
2018-02-08 10:56:05,425 - DEBUG - Day of the week 3
2018-02-08 10:56:05,425 - DEBUG - Yesterday is 02/07/2018
2018-02-08 10:56:05,426 - DEBUG - In Position is  1
2018-02-08 10:56:05,426 - DEBUG - In Position is  <class 'int'>
2018-02-08 10:56:05,426 - DEBUG - curStopLossFlag is  1
2018-02-08 10:56:05,426 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 10:56:05,427 - DEBUG - Checking if Entry has been filled
2018-02-08 10:56:05,427 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 10:56:05,428 - DEBUG - EntryPend is 0
2018-02-08 10:56:05,428 - DEBUG - Try to Cancel Stop
2018-02-08 10:56:05,429 - DEBUG - Stop API ID 182
2018-02-08 10:56:05,429 - DEBUG - Profit API ID 0
2018-02-08 10:56:05,429 - DEBUG - Stop API ID <class 'int'>
2018-02-08 10:56:05,429 - DEBUG - Profit API ID <class 'int'>
2018-02-08 10:56:05,430 - DEBUG - Pos is 1
2018-02-08 10:56:05,430 - DEBUG - CurCount is 1
2018-02-08 10:56:05,430 - DEBUG - In Pos 1
2018-02-08 10:56:05,430 - DEBUG - Stop ID is 182
2018-02-08 10:56:05,431 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 10:56:05,432 - DEBUG - EntryPend is 0
2018-02-08 10:56:05,432 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 10:56:05,433 - DEBUG - Entry Date is 10
2018-02-08 10:56:05,433 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 10:56:05,433 - DEBUG - Order Profit ID is 181
2018-02-08 10:56:05,433 - DEBUG - Order Entry ID is 181
2018-02-08 10:56:05,433 - DEBUG - API ID is  0
2018-02-08 10:56:05,434 - DEBUG - Current Position is 1
2018-02-08 10:56:05,434 - DEBUG - Current Position is <class 'str'>
2018-02-08 10:56:05,434 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 10:56:05,434 - DEBUG - Time is 10
2018-02-08 10:56:05,435 - DEBUG - Time is <class 'int'>
2018-02-08 10:56:05,435 - DEBUG - Time is 56
2018-02-08 10:56:05,435 - DEBUG - Time is <class 'int'>
2018-02-08 10:56:05,435 - DEBUG - Disconnected from IBController
2018-02-08 10:56:05,437 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 11:01:01,353 - DEBUG - ****************************************************
2018-02-08 11:01:01,354 - DEBUG - Current Time is 11:01AM
2018-02-08 11:01:01,354 - DEBUG - Starting Pos Mgmt H E
2018-02-08 11:01:01,354 - DEBUG - Connecting to database
2018-02-08 11:01:01,398 - DEBUG - Connected to database
2018-02-08 11:01:01,399 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 11:01:01,400 - DEBUG - Order Profit is 181
2018-02-08 11:01:01,401 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 11:01:01,402 - DEBUG - Stop ID is 182
2018-02-08 11:01:01,402 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 11:01:01,404 - DEBUG - Entry ID is 181
2018-02-08 11:01:01,404 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 11:01:01,405 - DEBUG - OCA ID is 1
2018-02-08 11:01:01,406 - DEBUG - Connecting to IBController
2018-02-08 11:01:02,411 - DEBUG - Connected to IBController
2018-02-08 11:01:02,411 - DEBUG - Position requested
2018-02-08 11:01:02,412 - DEBUG - Pos Mgmt -1
2018-02-08 11:01:02,412 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FDDA0>, pos=-1, avgCost=27537.1>
2018-02-08 11:01:02,413 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 11:01:02,413 - DEBUG - ccy2 Currency with position is USD
2018-02-08 11:01:02,413 - DEBUG - Position is -1
2018-02-08 11:01:02,414 - DEBUG - In Position
2018-02-08 11:01:02,414 - DEBUG - Position is 1
2018-02-08 11:01:02,414 - DEBUG - Pos Mgmt 0
2018-02-08 11:01:02,415 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FDC50>, pos=0, avgCost=0.0>
2018-02-08 11:01:02,415 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 11:01:02,415 - DEBUG - ccy2 Currency with position is USD
2018-02-08 11:01:02,415 - DEBUG - Position is 0
2018-02-08 11:01:02,416 - DEBUG - Pos Mgmt -12987
2018-02-08 11:01:02,416 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FDF28>, pos=-12987, avgCost=0.95368235>
2018-02-08 11:01:02,416 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 11:01:02,416 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 11:01:02,417 - DEBUG - Position is -12987
2018-02-08 11:01:03,412 - DEBUG - Open Orders requested
2018-02-08 11:01:03,423 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x00000000020FDDD8>, order=<ib.ext.Order.Order object at 0x00000000020FDC18>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002192198>>
2018-02-08 11:01:03,424 - DEBUG - Order OrderID 182
2018-02-08 11:01:03,424 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 11:01:03,425 - DEBUG - Order status PreSubmitted
2018-02-08 11:01:03,425 - DEBUG - Order Identification 182
2018-02-08 11:01:03,425 - DEBUG - Order Identification <class 'int'>
2018-02-08 11:01:03,426 - DEBUG - Profit ID from database is 181
2018-02-08 11:01:03,426 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 11:01:03,426 - DEBUG - Stop ID database is 182
2018-02-08 11:01:03,427 - DEBUG - Entry ID database is 181
2018-02-08 11:01:03,427 - DEBUG - Stop API ID is 182
2018-02-08 11:01:05,424 - DEBUG - Connecting to database
2018-02-08 11:01:05,432 - DEBUG - Connected to database
2018-02-08 11:01:05,433 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 11:01:05,433 - DEBUG - Stop loss value is 71.07
2018-02-08 11:01:05,435 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 11:01:05,435 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 11:01:05,436 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 11:01:05,437 - DEBUG - EntryPrice value is 68.85
2018-02-08 11:01:05,438 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 11:01:05,438 - DEBUG - Stop quantity 1
2018-02-08 11:01:05,440 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 11:01:05,440 - DEBUG - Direction is Short
2018-02-08 11:01:05,441 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 11:01:05,442 - DEBUG - Count is 1
2018-02-08 11:01:05,443 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 11:01:05,443 - DEBUG - Stop Loss Flag is 1
2018-02-08 11:01:05,445 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 11:01:05,445 - DEBUG - Max ID Order is (182,)
2018-02-08 11:01:05,446 - DEBUG - Today is 2018-02-08
2018-02-08 11:01:05,446 - DEBUG - Day of the week 3
2018-02-08 11:01:05,446 - DEBUG - Yesterday is 02/07/2018
2018-02-08 11:01:05,447 - DEBUG - In Position is  1
2018-02-08 11:01:05,447 - DEBUG - In Position is  <class 'int'>
2018-02-08 11:01:05,447 - DEBUG - curStopLossFlag is  1
2018-02-08 11:01:05,447 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 11:01:05,447 - DEBUG - Checking if Entry has been filled
2018-02-08 11:01:05,448 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 11:01:05,449 - DEBUG - EntryPend is 0
2018-02-08 11:01:05,449 - DEBUG - Try to Cancel Stop
2018-02-08 11:01:05,450 - DEBUG - Stop API ID 182
2018-02-08 11:01:05,450 - DEBUG - Profit API ID 0
2018-02-08 11:01:05,450 - DEBUG - Stop API ID <class 'int'>
2018-02-08 11:01:05,450 - DEBUG - Profit API ID <class 'int'>
2018-02-08 11:01:05,450 - DEBUG - Pos is 1
2018-02-08 11:01:05,451 - DEBUG - CurCount is 1
2018-02-08 11:01:05,451 - DEBUG - In Pos 1
2018-02-08 11:01:05,451 - DEBUG - Stop ID is 182
2018-02-08 11:01:05,451 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 11:01:05,454 - DEBUG - EntryPend is 0
2018-02-08 11:01:05,454 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 11:01:05,454 - DEBUG - Entry Date is 10
2018-02-08 11:01:05,454 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 11:01:05,455 - DEBUG - Order Profit ID is 181
2018-02-08 11:01:05,455 - DEBUG - Order Entry ID is 181
2018-02-08 11:01:05,455 - DEBUG - API ID is  0
2018-02-08 11:01:05,455 - DEBUG - Current Position is 1
2018-02-08 11:01:05,456 - DEBUG - Current Position is <class 'str'>
2018-02-08 11:01:05,456 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 11:01:05,456 - DEBUG - Time is 11
2018-02-08 11:01:05,456 - DEBUG - Time is <class 'int'>
2018-02-08 11:01:05,456 - DEBUG - Time is 1
2018-02-08 11:01:05,457 - DEBUG - Time is <class 'int'>
2018-02-08 11:01:05,457 - DEBUG - Disconnected from IBController
2018-02-08 11:01:05,457 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 11:06:01,356 - DEBUG - ****************************************************
2018-02-08 11:06:01,357 - DEBUG - Current Time is 11:06AM
2018-02-08 11:06:01,357 - DEBUG - Starting Pos Mgmt H E
2018-02-08 11:06:01,357 - DEBUG - Connecting to database
2018-02-08 11:06:01,386 - DEBUG - Connected to database
2018-02-08 11:06:01,387 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 11:06:01,388 - DEBUG - Order Profit is 181
2018-02-08 11:06:01,389 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 11:06:01,390 - DEBUG - Stop ID is 182
2018-02-08 11:06:01,391 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 11:06:01,393 - DEBUG - Entry ID is 181
2018-02-08 11:06:01,393 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 11:06:01,395 - DEBUG - OCA ID is 1
2018-02-08 11:06:01,395 - DEBUG - Connecting to IBController
2018-02-08 11:06:02,401 - DEBUG - Connected to IBController
2018-02-08 11:06:02,401 - DEBUG - Position requested
2018-02-08 11:06:02,403 - DEBUG - Pos Mgmt -1
2018-02-08 11:06:02,403 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000215DD68>, pos=-1, avgCost=27537.1>
2018-02-08 11:06:02,403 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 11:06:02,404 - DEBUG - ccy2 Currency with position is USD
2018-02-08 11:06:02,404 - DEBUG - Position is -1
2018-02-08 11:06:02,404 - DEBUG - In Position
2018-02-08 11:06:02,404 - DEBUG - Position is 1
2018-02-08 11:06:02,405 - DEBUG - Pos Mgmt 0
2018-02-08 11:06:02,405 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000215DAC8>, pos=0, avgCost=0.0>
2018-02-08 11:06:02,405 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 11:06:02,405 - DEBUG - ccy2 Currency with position is USD
2018-02-08 11:06:02,406 - DEBUG - Position is 0
2018-02-08 11:06:02,406 - DEBUG - Pos Mgmt -12987
2018-02-08 11:06:02,406 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000215DF28>, pos=-12987, avgCost=0.95368235>
2018-02-08 11:06:02,406 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 11:06:02,407 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 11:06:02,407 - DEBUG - Position is -12987
2018-02-08 11:06:03,401 - DEBUG - Open Orders requested
2018-02-08 11:06:03,407 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x000000000215DAC8>, order=<ib.ext.Order.Order object at 0x000000000215DC18>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021F1128>>
2018-02-08 11:06:03,407 - DEBUG - Order OrderID 182
2018-02-08 11:06:03,408 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 11:06:03,408 - DEBUG - Order status PreSubmitted
2018-02-08 11:06:03,408 - DEBUG - Order Identification 182
2018-02-08 11:06:03,408 - DEBUG - Order Identification <class 'int'>
2018-02-08 11:06:03,409 - DEBUG - Profit ID from database is 181
2018-02-08 11:06:03,409 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 11:06:03,409 - DEBUG - Stop ID database is 182
2018-02-08 11:06:03,409 - DEBUG - Entry ID database is 181
2018-02-08 11:06:03,410 - DEBUG - Stop API ID is 182
2018-02-08 11:06:05,401 - DEBUG - Connecting to database
2018-02-08 11:06:05,408 - DEBUG - Connected to database
2018-02-08 11:06:05,409 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 11:06:05,410 - DEBUG - Stop loss value is 71.07
2018-02-08 11:06:05,411 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 11:06:05,412 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 11:06:05,413 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 11:06:05,413 - DEBUG - EntryPrice value is 68.85
2018-02-08 11:06:05,415 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 11:06:05,415 - DEBUG - Stop quantity 1
2018-02-08 11:06:05,416 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 11:06:05,417 - DEBUG - Direction is Short
2018-02-08 11:06:05,418 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 11:06:05,419 - DEBUG - Count is 1
2018-02-08 11:06:05,420 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 11:06:05,420 - DEBUG - Stop Loss Flag is 1
2018-02-08 11:06:05,422 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 11:06:05,422 - DEBUG - Max ID Order is (182,)
2018-02-08 11:06:05,422 - DEBUG - Today is 2018-02-08
2018-02-08 11:06:05,423 - DEBUG - Day of the week 3
2018-02-08 11:06:05,423 - DEBUG - Yesterday is 02/07/2018
2018-02-08 11:06:05,423 - DEBUG - In Position is  1
2018-02-08 11:06:05,424 - DEBUG - In Position is  <class 'int'>
2018-02-08 11:06:05,424 - DEBUG - curStopLossFlag is  1
2018-02-08 11:06:05,424 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 11:06:05,424 - DEBUG - Checking if Entry has been filled
2018-02-08 11:06:05,424 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 11:06:05,426 - DEBUG - EntryPend is 0
2018-02-08 11:06:05,426 - DEBUG - Try to Cancel Stop
2018-02-08 11:06:05,426 - DEBUG - Stop API ID 182
2018-02-08 11:06:05,427 - DEBUG - Profit API ID 0
2018-02-08 11:06:05,427 - DEBUG - Stop API ID <class 'int'>
2018-02-08 11:06:05,427 - DEBUG - Profit API ID <class 'int'>
2018-02-08 11:06:05,427 - DEBUG - Pos is 1
2018-02-08 11:06:05,427 - DEBUG - CurCount is 1
2018-02-08 11:06:05,428 - DEBUG - In Pos 1
2018-02-08 11:06:05,428 - DEBUG - Stop ID is 182
2018-02-08 11:06:05,428 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 11:06:05,430 - DEBUG - EntryPend is 0
2018-02-08 11:06:05,430 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 11:06:05,430 - DEBUG - Entry Date is 10
2018-02-08 11:06:05,430 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 11:06:05,431 - DEBUG - Order Profit ID is 181
2018-02-08 11:06:05,431 - DEBUG - Order Entry ID is 181
2018-02-08 11:06:05,431 - DEBUG - API ID is  0
2018-02-08 11:06:05,431 - DEBUG - Current Position is 1
2018-02-08 11:06:05,431 - DEBUG - Current Position is <class 'str'>
2018-02-08 11:06:05,432 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 11:06:05,432 - DEBUG - Time is 11
2018-02-08 11:06:05,432 - DEBUG - Time is <class 'int'>
2018-02-08 11:06:05,432 - DEBUG - Time is 6
2018-02-08 11:06:05,433 - DEBUG - Time is <class 'int'>
2018-02-08 11:06:05,433 - DEBUG - Disconnected from IBController
2018-02-08 11:06:05,433 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 11:11:01,367 - DEBUG - ****************************************************
2018-02-08 11:11:01,369 - DEBUG - Current Time is 11:11AM
2018-02-08 11:11:01,369 - DEBUG - Starting Pos Mgmt H E
2018-02-08 11:11:01,370 - DEBUG - Connecting to database
2018-02-08 11:11:01,411 - DEBUG - Connected to database
2018-02-08 11:11:01,412 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 11:11:01,414 - DEBUG - Order Profit is 181
2018-02-08 11:11:01,414 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 11:11:01,416 - DEBUG - Stop ID is 182
2018-02-08 11:11:01,416 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 11:11:01,418 - DEBUG - Entry ID is 181
2018-02-08 11:11:01,418 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 11:11:01,420 - DEBUG - OCA ID is 1
2018-02-08 11:11:01,420 - DEBUG - Connecting to IBController
2018-02-08 11:11:02,425 - DEBUG - Connected to IBController
2018-02-08 11:11:02,425 - DEBUG - Position requested
2018-02-08 11:11:02,426 - DEBUG - Pos Mgmt -1
2018-02-08 11:11:02,427 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211CB38>, pos=-1, avgCost=27537.1>
2018-02-08 11:11:02,427 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 11:11:02,427 - DEBUG - ccy2 Currency with position is USD
2018-02-08 11:11:02,428 - DEBUG - Position is -1
2018-02-08 11:11:02,428 - DEBUG - In Position
2018-02-08 11:11:02,428 - DEBUG - Position is 1
2018-02-08 11:11:02,428 - DEBUG - Pos Mgmt 0
2018-02-08 11:11:02,429 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211CCC0>, pos=0, avgCost=0.0>
2018-02-08 11:11:02,429 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 11:11:02,429 - DEBUG - ccy2 Currency with position is USD
2018-02-08 11:11:02,429 - DEBUG - Position is 0
2018-02-08 11:11:02,430 - DEBUG - Pos Mgmt -12987
2018-02-08 11:11:02,437 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211CF28>, pos=-12987, avgCost=0.95368235>
2018-02-08 11:11:02,437 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 11:11:02,437 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 11:11:02,437 - DEBUG - Position is -12987
2018-02-08 11:11:03,426 - DEBUG - Open Orders requested
2018-02-08 11:11:03,428 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x000000000211CC88>, order=<ib.ext.Order.Order object at 0x000000000211CC18>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B1198>>
2018-02-08 11:11:03,428 - DEBUG - Order OrderID 182
2018-02-08 11:11:03,429 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 11:11:03,429 - DEBUG - Order status PreSubmitted
2018-02-08 11:11:03,429 - DEBUG - Order Identification 182
2018-02-08 11:11:03,430 - DEBUG - Order Identification <class 'int'>
2018-02-08 11:11:03,430 - DEBUG - Profit ID from database is 181
2018-02-08 11:11:03,430 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 11:11:03,430 - DEBUG - Stop ID database is 182
2018-02-08 11:11:03,431 - DEBUG - Entry ID database is 181
2018-02-08 11:11:03,431 - DEBUG - Stop API ID is 182
2018-02-08 11:11:05,428 - DEBUG - Connecting to database
2018-02-08 11:11:05,436 - DEBUG - Connected to database
2018-02-08 11:11:05,437 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 11:11:05,438 - DEBUG - Stop loss value is 71.07
2018-02-08 11:11:05,439 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 11:11:05,439 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 11:11:05,441 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 11:11:05,441 - DEBUG - EntryPrice value is 68.85
2018-02-08 11:11:05,442 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 11:11:05,443 - DEBUG - Stop quantity 1
2018-02-08 11:11:05,444 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 11:11:05,445 - DEBUG - Direction is Short
2018-02-08 11:11:05,446 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 11:11:05,446 - DEBUG - Count is 1
2018-02-08 11:11:05,448 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 11:11:05,448 - DEBUG - Stop Loss Flag is 1
2018-02-08 11:11:05,449 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 11:11:05,449 - DEBUG - Max ID Order is (182,)
2018-02-08 11:11:05,450 - DEBUG - Today is 2018-02-08
2018-02-08 11:11:05,450 - DEBUG - Day of the week 3
2018-02-08 11:11:05,450 - DEBUG - Yesterday is 02/07/2018
2018-02-08 11:11:05,451 - DEBUG - In Position is  1
2018-02-08 11:11:05,451 - DEBUG - In Position is  <class 'int'>
2018-02-08 11:11:05,451 - DEBUG - curStopLossFlag is  1
2018-02-08 11:11:05,451 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 11:11:05,452 - DEBUG - Checking if Entry has been filled
2018-02-08 11:11:05,452 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 11:11:05,453 - DEBUG - EntryPend is 0
2018-02-08 11:11:05,454 - DEBUG - Try to Cancel Stop
2018-02-08 11:11:05,454 - DEBUG - Stop API ID 182
2018-02-08 11:11:05,454 - DEBUG - Profit API ID 0
2018-02-08 11:11:05,454 - DEBUG - Stop API ID <class 'int'>
2018-02-08 11:11:05,455 - DEBUG - Profit API ID <class 'int'>
2018-02-08 11:11:05,455 - DEBUG - Pos is 1
2018-02-08 11:11:05,455 - DEBUG - CurCount is 1
2018-02-08 11:11:05,455 - DEBUG - In Pos 1
2018-02-08 11:11:05,456 - DEBUG - Stop ID is 182
2018-02-08 11:11:05,456 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 11:11:05,458 - DEBUG - EntryPend is 0
2018-02-08 11:11:05,458 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 11:11:05,459 - DEBUG - Entry Date is 10
2018-02-08 11:11:05,459 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 11:11:05,459 - DEBUG - Order Profit ID is 181
2018-02-08 11:11:05,459 - DEBUG - Order Entry ID is 181
2018-02-08 11:11:05,460 - DEBUG - API ID is  0
2018-02-08 11:11:05,460 - DEBUG - Current Position is 1
2018-02-08 11:11:05,460 - DEBUG - Current Position is <class 'str'>
2018-02-08 11:11:05,460 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 11:11:05,460 - DEBUG - Time is 11
2018-02-08 11:11:05,461 - DEBUG - Time is <class 'int'>
2018-02-08 11:11:05,461 - DEBUG - Time is 11
2018-02-08 11:11:05,461 - DEBUG - Time is <class 'int'>
2018-02-08 11:11:05,461 - DEBUG - Disconnected from IBController
2018-02-08 11:11:05,462 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 11:16:01,347 - DEBUG - ****************************************************
2018-02-08 11:16:01,348 - DEBUG - Current Time is 11:16AM
2018-02-08 11:16:01,348 - DEBUG - Starting Pos Mgmt H E
2018-02-08 11:16:01,348 - DEBUG - Connecting to database
2018-02-08 11:16:01,371 - DEBUG - Connected to database
2018-02-08 11:16:01,371 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 11:16:01,373 - DEBUG - Order Profit is 181
2018-02-08 11:16:01,373 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 11:16:01,374 - DEBUG - Stop ID is 182
2018-02-08 11:16:01,374 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 11:16:01,376 - DEBUG - Entry ID is 181
2018-02-08 11:16:01,376 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 11:16:01,378 - DEBUG - OCA ID is 1
2018-02-08 11:16:01,378 - DEBUG - Connecting to IBController
2018-02-08 11:16:02,383 - DEBUG - Connected to IBController
2018-02-08 11:16:02,383 - DEBUG - Position requested
2018-02-08 11:16:02,385 - DEBUG - Pos Mgmt -1
2018-02-08 11:16:02,385 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212CDD8>, pos=-1, avgCost=27537.1>
2018-02-08 11:16:02,385 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 11:16:02,386 - DEBUG - ccy2 Currency with position is USD
2018-02-08 11:16:02,386 - DEBUG - Position is -1
2018-02-08 11:16:02,386 - DEBUG - In Position
2018-02-08 11:16:02,386 - DEBUG - Position is 1
2018-02-08 11:16:02,387 - DEBUG - Pos Mgmt 0
2018-02-08 11:16:02,387 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212CBA8>, pos=0, avgCost=0.0>
2018-02-08 11:16:02,387 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 11:16:02,387 - DEBUG - ccy2 Currency with position is USD
2018-02-08 11:16:02,388 - DEBUG - Position is 0
2018-02-08 11:16:02,388 - DEBUG - Pos Mgmt -12987
2018-02-08 11:16:02,388 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212CF98>, pos=-12987, avgCost=0.95368235>
2018-02-08 11:16:02,389 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 11:16:02,389 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 11:16:02,389 - DEBUG - Position is -12987
2018-02-08 11:16:03,383 - DEBUG - Open Orders requested
2018-02-08 11:16:03,385 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x000000000212CBA8>, order=<ib.ext.Order.Order object at 0x000000000212CC88>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C1128>>
2018-02-08 11:16:03,386 - DEBUG - Order OrderID 182
2018-02-08 11:16:03,386 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 11:16:03,386 - DEBUG - Order status PreSubmitted
2018-02-08 11:16:03,387 - DEBUG - Order Identification 182
2018-02-08 11:16:03,387 - DEBUG - Order Identification <class 'int'>
2018-02-08 11:16:03,387 - DEBUG - Profit ID from database is 181
2018-02-08 11:16:03,387 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 11:16:03,388 - DEBUG - Stop ID database is 182
2018-02-08 11:16:03,388 - DEBUG - Entry ID database is 181
2018-02-08 11:16:03,388 - DEBUG - Stop API ID is 182
2018-02-08 11:16:05,383 - DEBUG - Connecting to database
2018-02-08 11:16:05,391 - DEBUG - Connected to database
2018-02-08 11:16:05,392 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 11:16:05,393 - DEBUG - Stop loss value is 71.07
2018-02-08 11:16:05,394 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 11:16:05,394 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 11:16:05,396 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 11:16:05,396 - DEBUG - EntryPrice value is 68.85
2018-02-08 11:16:05,398 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 11:16:05,398 - DEBUG - Stop quantity 1
2018-02-08 11:16:05,399 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 11:16:05,400 - DEBUG - Direction is Short
2018-02-08 11:16:05,401 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 11:16:05,401 - DEBUG - Count is 1
2018-02-08 11:16:05,402 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 11:16:05,403 - DEBUG - Stop Loss Flag is 1
2018-02-08 11:16:05,404 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 11:16:05,404 - DEBUG - Max ID Order is (182,)
2018-02-08 11:16:05,405 - DEBUG - Today is 2018-02-08
2018-02-08 11:16:05,405 - DEBUG - Day of the week 3
2018-02-08 11:16:05,405 - DEBUG - Yesterday is 02/07/2018
2018-02-08 11:16:05,406 - DEBUG - In Position is  1
2018-02-08 11:16:05,406 - DEBUG - In Position is  <class 'int'>
2018-02-08 11:16:05,406 - DEBUG - curStopLossFlag is  1
2018-02-08 11:16:05,406 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 11:16:05,406 - DEBUG - Checking if Entry has been filled
2018-02-08 11:16:05,407 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 11:16:05,408 - DEBUG - EntryPend is 0
2018-02-08 11:16:05,408 - DEBUG - Try to Cancel Stop
2018-02-08 11:16:05,409 - DEBUG - Stop API ID 182
2018-02-08 11:16:05,409 - DEBUG - Profit API ID 0
2018-02-08 11:16:05,409 - DEBUG - Stop API ID <class 'int'>
2018-02-08 11:16:05,409 - DEBUG - Profit API ID <class 'int'>
2018-02-08 11:16:05,410 - DEBUG - Pos is 1
2018-02-08 11:16:05,410 - DEBUG - CurCount is 1
2018-02-08 11:16:05,410 - DEBUG - In Pos 1
2018-02-08 11:16:05,410 - DEBUG - Stop ID is 182
2018-02-08 11:16:05,410 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 11:16:05,412 - DEBUG - EntryPend is 0
2018-02-08 11:16:05,412 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 11:16:05,412 - DEBUG - Entry Date is 10
2018-02-08 11:16:05,413 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 11:16:05,413 - DEBUG - Order Profit ID is 181
2018-02-08 11:16:05,413 - DEBUG - Order Entry ID is 181
2018-02-08 11:16:05,413 - DEBUG - API ID is  0
2018-02-08 11:16:05,413 - DEBUG - Current Position is 1
2018-02-08 11:16:05,414 - DEBUG - Current Position is <class 'str'>
2018-02-08 11:16:05,414 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 11:16:05,414 - DEBUG - Time is 11
2018-02-08 11:16:05,414 - DEBUG - Time is <class 'int'>
2018-02-08 11:16:05,415 - DEBUG - Time is 16
2018-02-08 11:16:05,415 - DEBUG - Time is <class 'int'>
2018-02-08 11:16:05,415 - DEBUG - Disconnected from IBController
2018-02-08 11:16:05,420 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 11:21:01,348 - DEBUG - ****************************************************
2018-02-08 11:21:01,348 - DEBUG - Current Time is 11:21AM
2018-02-08 11:21:01,348 - DEBUG - Starting Pos Mgmt H E
2018-02-08 11:21:01,349 - DEBUG - Connecting to database
2018-02-08 11:21:01,382 - DEBUG - Connected to database
2018-02-08 11:21:01,382 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 11:21:01,384 - DEBUG - Order Profit is 181
2018-02-08 11:21:01,384 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 11:21:01,385 - DEBUG - Stop ID is 182
2018-02-08 11:21:01,386 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 11:21:01,387 - DEBUG - Entry ID is 181
2018-02-08 11:21:01,387 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 11:21:01,389 - DEBUG - OCA ID is 1
2018-02-08 11:21:01,389 - DEBUG - Connecting to IBController
2018-02-08 11:21:02,397 - DEBUG - Connected to IBController
2018-02-08 11:21:02,397 - DEBUG - Position requested
2018-02-08 11:21:02,399 - DEBUG - Pos Mgmt -1
2018-02-08 11:21:02,399 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FDB38>, pos=-1, avgCost=27537.1>
2018-02-08 11:21:02,400 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 11:21:02,400 - DEBUG - ccy2 Currency with position is USD
2018-02-08 11:21:02,400 - DEBUG - Position is -1
2018-02-08 11:21:02,401 - DEBUG - In Position
2018-02-08 11:21:02,401 - DEBUG - Position is 1
2018-02-08 11:21:02,401 - DEBUG - Pos Mgmt 0
2018-02-08 11:21:02,402 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FDCF8>, pos=0, avgCost=0.0>
2018-02-08 11:21:02,402 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 11:21:02,402 - DEBUG - ccy2 Currency with position is USD
2018-02-08 11:21:02,402 - DEBUG - Position is 0
2018-02-08 11:21:02,403 - DEBUG - Pos Mgmt -12987
2018-02-08 11:21:02,403 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FDF28>, pos=-12987, avgCost=0.95368235>
2018-02-08 11:21:02,403 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 11:21:02,403 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 11:21:02,404 - DEBUG - Position is -12987
2018-02-08 11:21:03,399 - DEBUG - Open Orders requested
2018-02-08 11:21:03,401 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x00000000020FDBE0>, order=<ib.ext.Order.Order object at 0x00000000020FDC88>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002192198>>
2018-02-08 11:21:03,401 - DEBUG - Order OrderID 182
2018-02-08 11:21:03,402 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 11:21:03,402 - DEBUG - Order status PreSubmitted
2018-02-08 11:21:03,402 - DEBUG - Order Identification 182
2018-02-08 11:21:03,403 - DEBUG - Order Identification <class 'int'>
2018-02-08 11:21:03,403 - DEBUG - Profit ID from database is 181
2018-02-08 11:21:03,403 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 11:21:03,403 - DEBUG - Stop ID database is 182
2018-02-08 11:21:03,406 - DEBUG - Entry ID database is 181
2018-02-08 11:21:03,406 - DEBUG - Stop API ID is 182
2018-02-08 11:21:05,401 - DEBUG - Connecting to database
2018-02-08 11:21:05,408 - DEBUG - Connected to database
2018-02-08 11:21:05,410 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 11:21:05,410 - DEBUG - Stop loss value is 71.07
2018-02-08 11:21:05,411 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 11:21:05,412 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 11:21:05,413 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 11:21:05,413 - DEBUG - EntryPrice value is 68.85
2018-02-08 11:21:05,415 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 11:21:05,415 - DEBUG - Stop quantity 1
2018-02-08 11:21:05,417 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 11:21:05,417 - DEBUG - Direction is Short
2018-02-08 11:21:05,418 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 11:21:05,419 - DEBUG - Count is 1
2018-02-08 11:21:05,420 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 11:21:05,420 - DEBUG - Stop Loss Flag is 1
2018-02-08 11:21:05,422 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 11:21:05,423 - DEBUG - Max ID Order is (182,)
2018-02-08 11:21:05,423 - DEBUG - Today is 2018-02-08
2018-02-08 11:21:05,423 - DEBUG - Day of the week 3
2018-02-08 11:21:05,424 - DEBUG - Yesterday is 02/07/2018
2018-02-08 11:21:05,424 - DEBUG - In Position is  1
2018-02-08 11:21:05,424 - DEBUG - In Position is  <class 'int'>
2018-02-08 11:21:05,425 - DEBUG - curStopLossFlag is  1
2018-02-08 11:21:05,425 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 11:21:05,425 - DEBUG - Checking if Entry has been filled
2018-02-08 11:21:05,425 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 11:21:05,427 - DEBUG - EntryPend is 0
2018-02-08 11:21:05,427 - DEBUG - Try to Cancel Stop
2018-02-08 11:21:05,427 - DEBUG - Stop API ID 182
2018-02-08 11:21:05,428 - DEBUG - Profit API ID 0
2018-02-08 11:21:05,428 - DEBUG - Stop API ID <class 'int'>
2018-02-08 11:21:05,428 - DEBUG - Profit API ID <class 'int'>
2018-02-08 11:21:05,428 - DEBUG - Pos is 1
2018-02-08 11:21:05,428 - DEBUG - CurCount is 1
2018-02-08 11:21:05,429 - DEBUG - In Pos 1
2018-02-08 11:21:05,429 - DEBUG - Stop ID is 182
2018-02-08 11:21:05,429 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 11:21:05,431 - DEBUG - EntryPend is 0
2018-02-08 11:21:05,431 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 11:21:05,431 - DEBUG - Entry Date is 10
2018-02-08 11:21:05,431 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 11:21:05,431 - DEBUG - Order Profit ID is 181
2018-02-08 11:21:05,432 - DEBUG - Order Entry ID is 181
2018-02-08 11:21:05,432 - DEBUG - API ID is  0
2018-02-08 11:21:05,432 - DEBUG - Current Position is 1
2018-02-08 11:21:05,432 - DEBUG - Current Position is <class 'str'>
2018-02-08 11:21:05,433 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 11:21:05,433 - DEBUG - Time is 11
2018-02-08 11:21:05,433 - DEBUG - Time is <class 'int'>
2018-02-08 11:21:05,433 - DEBUG - Time is 21
2018-02-08 11:21:05,433 - DEBUG - Time is <class 'int'>
2018-02-08 11:21:05,434 - DEBUG - Disconnected from IBController
2018-02-08 11:21:05,435 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 11:26:01,351 - DEBUG - ****************************************************
2018-02-08 11:26:01,351 - DEBUG - Current Time is 11:26AM
2018-02-08 11:26:01,352 - DEBUG - Starting Pos Mgmt H E
2018-02-08 11:26:01,352 - DEBUG - Connecting to database
2018-02-08 11:26:01,384 - DEBUG - Connected to database
2018-02-08 11:26:01,385 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 11:26:01,386 - DEBUG - Order Profit is 181
2018-02-08 11:26:01,387 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 11:26:01,388 - DEBUG - Stop ID is 182
2018-02-08 11:26:01,388 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 11:26:01,390 - DEBUG - Entry ID is 181
2018-02-08 11:26:01,391 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 11:26:01,392 - DEBUG - OCA ID is 1
2018-02-08 11:26:01,393 - DEBUG - Connecting to IBController
2018-02-08 11:26:02,398 - DEBUG - Connected to IBController
2018-02-08 11:26:02,398 - DEBUG - Position requested
2018-02-08 11:26:02,399 - DEBUG - Pos Mgmt -1
2018-02-08 11:26:02,400 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FDB38>, pos=-1, avgCost=27537.1>
2018-02-08 11:26:02,400 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 11:26:02,401 - DEBUG - ccy2 Currency with position is USD
2018-02-08 11:26:02,401 - DEBUG - Position is -1
2018-02-08 11:26:02,401 - DEBUG - In Position
2018-02-08 11:26:02,401 - DEBUG - Position is 1
2018-02-08 11:26:02,402 - DEBUG - Pos Mgmt 0
2018-02-08 11:26:02,402 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FDAC8>, pos=0, avgCost=0.0>
2018-02-08 11:26:02,402 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 11:26:02,402 - DEBUG - ccy2 Currency with position is USD
2018-02-08 11:26:02,402 - DEBUG - Position is 0
2018-02-08 11:26:02,403 - DEBUG - Pos Mgmt -12987
2018-02-08 11:26:02,403 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FDF28>, pos=-12987, avgCost=0.95368235>
2018-02-08 11:26:02,403 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 11:26:02,404 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 11:26:02,404 - DEBUG - Position is -12987
2018-02-08 11:26:03,400 - DEBUG - Open Orders requested
2018-02-08 11:26:03,402 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x00000000020FDC18>, order=<ib.ext.Order.Order object at 0x00000000020FDCC0>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002191198>>
2018-02-08 11:26:03,402 - DEBUG - Order OrderID 182
2018-02-08 11:26:03,403 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 11:26:03,403 - DEBUG - Order status PreSubmitted
2018-02-08 11:26:03,403 - DEBUG - Order Identification 182
2018-02-08 11:26:03,403 - DEBUG - Order Identification <class 'int'>
2018-02-08 11:26:03,404 - DEBUG - Profit ID from database is 181
2018-02-08 11:26:03,404 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 11:26:03,404 - DEBUG - Stop ID database is 182
2018-02-08 11:26:03,404 - DEBUG - Entry ID database is 181
2018-02-08 11:26:03,405 - DEBUG - Stop API ID is 182
2018-02-08 11:26:05,402 - DEBUG - Connecting to database
2018-02-08 11:26:05,411 - DEBUG - Connected to database
2018-02-08 11:26:05,413 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 11:26:05,414 - DEBUG - Stop loss value is 71.07
2018-02-08 11:26:05,415 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 11:26:05,415 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 11:26:05,417 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 11:26:05,417 - DEBUG - EntryPrice value is 68.85
2018-02-08 11:26:05,418 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 11:26:05,419 - DEBUG - Stop quantity 1
2018-02-08 11:26:05,420 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 11:26:05,420 - DEBUG - Direction is Short
2018-02-08 11:26:05,422 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 11:26:05,422 - DEBUG - Count is 1
2018-02-08 11:26:05,423 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 11:26:05,424 - DEBUG - Stop Loss Flag is 1
2018-02-08 11:26:05,425 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 11:26:05,425 - DEBUG - Max ID Order is (182,)
2018-02-08 11:26:05,426 - DEBUG - Today is 2018-02-08
2018-02-08 11:26:05,426 - DEBUG - Day of the week 3
2018-02-08 11:26:05,427 - DEBUG - Yesterday is 02/07/2018
2018-02-08 11:26:05,427 - DEBUG - In Position is  1
2018-02-08 11:26:05,427 - DEBUG - In Position is  <class 'int'>
2018-02-08 11:26:05,427 - DEBUG - curStopLossFlag is  1
2018-02-08 11:26:05,428 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 11:26:05,428 - DEBUG - Checking if Entry has been filled
2018-02-08 11:26:05,428 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 11:26:05,429 - DEBUG - EntryPend is 0
2018-02-08 11:26:05,430 - DEBUG - Try to Cancel Stop
2018-02-08 11:26:05,430 - DEBUG - Stop API ID 182
2018-02-08 11:26:05,430 - DEBUG - Profit API ID 0
2018-02-08 11:26:05,430 - DEBUG - Stop API ID <class 'int'>
2018-02-08 11:26:05,431 - DEBUG - Profit API ID <class 'int'>
2018-02-08 11:26:05,431 - DEBUG - Pos is 1
2018-02-08 11:26:05,431 - DEBUG - CurCount is 1
2018-02-08 11:26:05,431 - DEBUG - In Pos 1
2018-02-08 11:26:05,432 - DEBUG - Stop ID is 182
2018-02-08 11:26:05,432 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 11:26:05,434 - DEBUG - EntryPend is 0
2018-02-08 11:26:05,434 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 11:26:05,434 - DEBUG - Entry Date is 10
2018-02-08 11:26:05,435 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 11:26:05,435 - DEBUG - Order Profit ID is 181
2018-02-08 11:26:05,435 - DEBUG - Order Entry ID is 181
2018-02-08 11:26:05,435 - DEBUG - API ID is  0
2018-02-08 11:26:05,436 - DEBUG - Current Position is 1
2018-02-08 11:26:05,436 - DEBUG - Current Position is <class 'str'>
2018-02-08 11:26:05,436 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 11:26:05,436 - DEBUG - Time is 11
2018-02-08 11:26:05,436 - DEBUG - Time is <class 'int'>
2018-02-08 11:26:05,437 - DEBUG - Time is 26
2018-02-08 11:26:05,437 - DEBUG - Time is <class 'int'>
2018-02-08 11:26:05,437 - DEBUG - Disconnected from IBController
2018-02-08 11:26:05,437 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 11:31:01,358 - DEBUG - ****************************************************
2018-02-08 11:31:01,359 - DEBUG - Current Time is 11:31AM
2018-02-08 11:31:01,359 - DEBUG - Starting Pos Mgmt H E
2018-02-08 11:31:01,359 - DEBUG - Connecting to database
2018-02-08 11:31:01,401 - DEBUG - Connected to database
2018-02-08 11:31:01,401 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 11:31:01,403 - DEBUG - Order Profit is 181
2018-02-08 11:31:01,403 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 11:31:01,405 - DEBUG - Stop ID is 182
2018-02-08 11:31:01,405 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 11:31:01,406 - DEBUG - Entry ID is 181
2018-02-08 11:31:01,407 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 11:31:01,408 - DEBUG - OCA ID is 1
2018-02-08 11:31:01,408 - DEBUG - Connecting to IBController
2018-02-08 11:31:02,417 - DEBUG - Connected to IBController
2018-02-08 11:31:02,417 - DEBUG - Position requested
2018-02-08 11:31:02,419 - DEBUG - Pos Mgmt -1
2018-02-08 11:31:02,419 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020EDDD8>, pos=-1, avgCost=27537.1>
2018-02-08 11:31:02,419 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 11:31:02,419 - DEBUG - ccy2 Currency with position is USD
2018-02-08 11:31:02,420 - DEBUG - Position is -1
2018-02-08 11:31:02,420 - DEBUG - In Position
2018-02-08 11:31:02,420 - DEBUG - Position is 1
2018-02-08 11:31:02,420 - DEBUG - Pos Mgmt 0
2018-02-08 11:31:02,421 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020EDC50>, pos=0, avgCost=0.0>
2018-02-08 11:31:02,421 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 11:31:02,421 - DEBUG - ccy2 Currency with position is USD
2018-02-08 11:31:02,423 - DEBUG - Position is 0
2018-02-08 11:31:02,424 - DEBUG - Pos Mgmt -12987
2018-02-08 11:31:02,424 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020EDF28>, pos=-12987, avgCost=0.95368235>
2018-02-08 11:31:02,424 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 11:31:02,425 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 11:31:02,425 - DEBUG - Position is -12987
2018-02-08 11:31:03,417 - DEBUG - Open Orders requested
2018-02-08 11:31:03,419 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x00000000020EDC50>, order=<ib.ext.Order.Order object at 0x00000000020EDCF8>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002182128>>
2018-02-08 11:31:03,419 - DEBUG - Order OrderID 182
2018-02-08 11:31:03,420 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 11:31:03,420 - DEBUG - Order status PreSubmitted
2018-02-08 11:31:03,420 - DEBUG - Order Identification 182
2018-02-08 11:31:03,421 - DEBUG - Order Identification <class 'int'>
2018-02-08 11:31:03,421 - DEBUG - Profit ID from database is 181
2018-02-08 11:31:03,421 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 11:31:03,421 - DEBUG - Stop ID database is 182
2018-02-08 11:31:03,422 - DEBUG - Entry ID database is 181
2018-02-08 11:31:03,422 - DEBUG - Stop API ID is 182
2018-02-08 11:31:05,417 - DEBUG - Connecting to database
2018-02-08 11:31:05,424 - DEBUG - Connected to database
2018-02-08 11:31:05,426 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 11:31:05,426 - DEBUG - Stop loss value is 71.07
2018-02-08 11:31:05,427 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 11:31:05,428 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 11:31:05,429 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 11:31:05,430 - DEBUG - EntryPrice value is 68.85
2018-02-08 11:31:05,431 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 11:31:05,431 - DEBUG - Stop quantity 1
2018-02-08 11:31:05,433 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 11:31:05,433 - DEBUG - Direction is Short
2018-02-08 11:31:05,435 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 11:31:05,435 - DEBUG - Count is 1
2018-02-08 11:31:05,436 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 11:31:05,437 - DEBUG - Stop Loss Flag is 1
2018-02-08 11:31:05,438 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 11:31:05,439 - DEBUG - Max ID Order is (182,)
2018-02-08 11:31:05,439 - DEBUG - Today is 2018-02-08
2018-02-08 11:31:05,439 - DEBUG - Day of the week 3
2018-02-08 11:31:05,440 - DEBUG - Yesterday is 02/07/2018
2018-02-08 11:31:05,440 - DEBUG - In Position is  1
2018-02-08 11:31:05,440 - DEBUG - In Position is  <class 'int'>
2018-02-08 11:31:05,440 - DEBUG - curStopLossFlag is  1
2018-02-08 11:31:05,440 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 11:31:05,441 - DEBUG - Checking if Entry has been filled
2018-02-08 11:31:05,441 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 11:31:05,442 - DEBUG - EntryPend is 0
2018-02-08 11:31:05,442 - DEBUG - Try to Cancel Stop
2018-02-08 11:31:05,443 - DEBUG - Stop API ID 182
2018-02-08 11:31:05,443 - DEBUG - Profit API ID 0
2018-02-08 11:31:05,443 - DEBUG - Stop API ID <class 'int'>
2018-02-08 11:31:05,443 - DEBUG - Profit API ID <class 'int'>
2018-02-08 11:31:05,444 - DEBUG - Pos is 1
2018-02-08 11:31:05,444 - DEBUG - CurCount is 1
2018-02-08 11:31:05,444 - DEBUG - In Pos 1
2018-02-08 11:31:05,444 - DEBUG - Stop ID is 182
2018-02-08 11:31:05,444 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 11:31:05,446 - DEBUG - EntryPend is 0
2018-02-08 11:31:05,446 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 11:31:05,446 - DEBUG - Entry Date is 10
2018-02-08 11:31:05,447 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 11:31:05,447 - DEBUG - Order Profit ID is 181
2018-02-08 11:31:05,447 - DEBUG - Order Entry ID is 181
2018-02-08 11:31:05,447 - DEBUG - API ID is  0
2018-02-08 11:31:05,447 - DEBUG - Current Position is 1
2018-02-08 11:31:05,448 - DEBUG - Current Position is <class 'str'>
2018-02-08 11:31:05,448 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 11:31:05,448 - DEBUG - Time is 11
2018-02-08 11:31:05,448 - DEBUG - Time is <class 'int'>
2018-02-08 11:31:05,449 - DEBUG - Time is 31
2018-02-08 11:31:05,449 - DEBUG - Time is <class 'int'>
2018-02-08 11:31:05,449 - DEBUG - Disconnected from IBController
2018-02-08 11:31:05,449 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 11:36:01,351 - DEBUG - ****************************************************
2018-02-08 11:36:01,351 - DEBUG - Current Time is 11:36AM
2018-02-08 11:36:01,352 - DEBUG - Starting Pos Mgmt H E
2018-02-08 11:36:01,352 - DEBUG - Connecting to database
2018-02-08 11:36:01,401 - DEBUG - Connected to database
2018-02-08 11:36:01,402 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 11:36:01,403 - DEBUG - Order Profit is 181
2018-02-08 11:36:01,404 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 11:36:01,405 - DEBUG - Stop ID is 182
2018-02-08 11:36:01,405 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 11:36:01,407 - DEBUG - Entry ID is 181
2018-02-08 11:36:01,407 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 11:36:01,409 - DEBUG - OCA ID is 1
2018-02-08 11:36:01,409 - DEBUG - Connecting to IBController
2018-02-08 11:36:02,414 - DEBUG - Connected to IBController
2018-02-08 11:36:02,414 - DEBUG - Position requested
2018-02-08 11:36:02,415 - DEBUG - Pos Mgmt -1
2018-02-08 11:36:02,416 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211DB38>, pos=-1, avgCost=27537.1>
2018-02-08 11:36:02,416 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 11:36:02,416 - DEBUG - ccy2 Currency with position is USD
2018-02-08 11:36:02,416 - DEBUG - Position is -1
2018-02-08 11:36:02,417 - DEBUG - In Position
2018-02-08 11:36:02,417 - DEBUG - Position is 1
2018-02-08 11:36:02,417 - DEBUG - Pos Mgmt 0
2018-02-08 11:36:02,417 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211DCC0>, pos=0, avgCost=0.0>
2018-02-08 11:36:02,418 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 11:36:02,418 - DEBUG - ccy2 Currency with position is USD
2018-02-08 11:36:02,418 - DEBUG - Position is 0
2018-02-08 11:36:02,419 - DEBUG - Pos Mgmt -12987
2018-02-08 11:36:02,419 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211DF28>, pos=-12987, avgCost=0.95368235>
2018-02-08 11:36:02,421 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 11:36:02,421 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 11:36:02,421 - DEBUG - Position is -12987
2018-02-08 11:36:03,415 - DEBUG - Open Orders requested
2018-02-08 11:36:03,416 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x000000000211DE48>, order=<ib.ext.Order.Order object at 0x000000000211DE80>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B1198>>
2018-02-08 11:36:03,417 - DEBUG - Order OrderID 182
2018-02-08 11:36:03,418 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 11:36:03,418 - DEBUG - Order status PreSubmitted
2018-02-08 11:36:03,418 - DEBUG - Order Identification 182
2018-02-08 11:36:03,419 - DEBUG - Order Identification <class 'int'>
2018-02-08 11:36:03,419 - DEBUG - Profit ID from database is 181
2018-02-08 11:36:03,419 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 11:36:03,422 - DEBUG - Stop ID database is 182
2018-02-08 11:36:03,422 - DEBUG - Entry ID database is 181
2018-02-08 11:36:03,422 - DEBUG - Stop API ID is 182
2018-02-08 11:36:05,417 - DEBUG - Connecting to database
2018-02-08 11:36:05,425 - DEBUG - Connected to database
2018-02-08 11:36:05,426 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 11:36:05,427 - DEBUG - Stop loss value is 71.07
2018-02-08 11:36:05,428 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 11:36:05,428 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 11:36:05,430 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 11:36:05,430 - DEBUG - EntryPrice value is 68.85
2018-02-08 11:36:05,431 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 11:36:05,432 - DEBUG - Stop quantity 1
2018-02-08 11:36:05,433 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 11:36:05,434 - DEBUG - Direction is Short
2018-02-08 11:36:05,435 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 11:36:05,435 - DEBUG - Count is 1
2018-02-08 11:36:05,437 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 11:36:05,437 - DEBUG - Stop Loss Flag is 1
2018-02-08 11:36:05,438 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 11:36:05,439 - DEBUG - Max ID Order is (182,)
2018-02-08 11:36:05,439 - DEBUG - Today is 2018-02-08
2018-02-08 11:36:05,439 - DEBUG - Day of the week 3
2018-02-08 11:36:05,440 - DEBUG - Yesterday is 02/07/2018
2018-02-08 11:36:05,440 - DEBUG - In Position is  1
2018-02-08 11:36:05,440 - DEBUG - In Position is  <class 'int'>
2018-02-08 11:36:05,440 - DEBUG - curStopLossFlag is  1
2018-02-08 11:36:05,441 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 11:36:05,441 - DEBUG - Checking if Entry has been filled
2018-02-08 11:36:05,441 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 11:36:05,443 - DEBUG - EntryPend is 0
2018-02-08 11:36:05,443 - DEBUG - Try to Cancel Stop
2018-02-08 11:36:05,443 - DEBUG - Stop API ID 182
2018-02-08 11:36:05,443 - DEBUG - Profit API ID 0
2018-02-08 11:36:05,444 - DEBUG - Stop API ID <class 'int'>
2018-02-08 11:36:05,444 - DEBUG - Profit API ID <class 'int'>
2018-02-08 11:36:05,444 - DEBUG - Pos is 1
2018-02-08 11:36:05,444 - DEBUG - CurCount is 1
2018-02-08 11:36:05,445 - DEBUG - In Pos 1
2018-02-08 11:36:05,445 - DEBUG - Stop ID is 182
2018-02-08 11:36:05,445 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 11:36:05,446 - DEBUG - EntryPend is 0
2018-02-08 11:36:05,447 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 11:36:05,447 - DEBUG - Entry Date is 10
2018-02-08 11:36:05,447 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 11:36:05,447 - DEBUG - Order Profit ID is 181
2018-02-08 11:36:05,448 - DEBUG - Order Entry ID is 181
2018-02-08 11:36:05,448 - DEBUG - API ID is  0
2018-02-08 11:36:05,448 - DEBUG - Current Position is 1
2018-02-08 11:36:05,448 - DEBUG - Current Position is <class 'str'>
2018-02-08 11:36:05,448 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 11:36:05,449 - DEBUG - Time is 11
2018-02-08 11:36:05,449 - DEBUG - Time is <class 'int'>
2018-02-08 11:36:05,449 - DEBUG - Time is 36
2018-02-08 11:36:05,449 - DEBUG - Time is <class 'int'>
2018-02-08 11:36:05,450 - DEBUG - Disconnected from IBController
2018-02-08 11:36:05,451 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 11:41:01,351 - DEBUG - ****************************************************
2018-02-08 11:41:01,352 - DEBUG - Current Time is 11:41AM
2018-02-08 11:41:01,352 - DEBUG - Starting Pos Mgmt H E
2018-02-08 11:41:01,352 - DEBUG - Connecting to database
2018-02-08 11:41:01,465 - DEBUG - Connected to database
2018-02-08 11:41:01,465 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 11:41:01,467 - DEBUG - Order Profit is 181
2018-02-08 11:41:01,467 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 11:41:01,468 - DEBUG - Stop ID is 182
2018-02-08 11:41:01,469 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 11:41:01,470 - DEBUG - Entry ID is 181
2018-02-08 11:41:01,470 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 11:41:01,471 - DEBUG - OCA ID is 1
2018-02-08 11:41:01,472 - DEBUG - Connecting to IBController
2018-02-08 11:41:02,477 - DEBUG - Connected to IBController
2018-02-08 11:41:02,477 - DEBUG - Position requested
2018-02-08 11:41:02,478 - DEBUG - Pos Mgmt -1
2018-02-08 11:41:02,478 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FDDA0>, pos=-1, avgCost=27537.1>
2018-02-08 11:41:02,479 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 11:41:02,479 - DEBUG - ccy2 Currency with position is USD
2018-02-08 11:41:02,479 - DEBUG - Position is -1
2018-02-08 11:41:02,480 - DEBUG - In Position
2018-02-08 11:41:02,480 - DEBUG - Position is 1
2018-02-08 11:41:02,480 - DEBUG - Pos Mgmt 0
2018-02-08 11:41:02,480 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FDC88>, pos=0, avgCost=0.0>
2018-02-08 11:41:02,481 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 11:41:02,481 - DEBUG - ccy2 Currency with position is USD
2018-02-08 11:41:02,481 - DEBUG - Position is 0
2018-02-08 11:41:02,481 - DEBUG - Pos Mgmt -12987
2018-02-08 11:41:02,482 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FDF28>, pos=-12987, avgCost=0.95368235>
2018-02-08 11:41:02,482 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 11:41:02,482 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 11:41:02,482 - DEBUG - Position is -12987
2018-02-08 11:41:03,478 - DEBUG - Open Orders requested
2018-02-08 11:41:03,486 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x00000000020FDC88>, order=<ib.ext.Order.Order object at 0x00000000020FDC50>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002191128>>
2018-02-08 11:41:03,486 - DEBUG - Order OrderID 182
2018-02-08 11:41:03,487 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 11:41:03,487 - DEBUG - Order status PreSubmitted
2018-02-08 11:41:03,487 - DEBUG - Order Identification 182
2018-02-08 11:41:03,488 - DEBUG - Order Identification <class 'int'>
2018-02-08 11:41:03,488 - DEBUG - Profit ID from database is 181
2018-02-08 11:41:03,488 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 11:41:03,488 - DEBUG - Stop ID database is 182
2018-02-08 11:41:03,489 - DEBUG - Entry ID database is 181
2018-02-08 11:41:03,489 - DEBUG - Stop API ID is 182
2018-02-08 11:41:05,481 - DEBUG - Connecting to database
2018-02-08 11:41:05,489 - DEBUG - Connected to database
2018-02-08 11:41:05,490 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 11:41:05,491 - DEBUG - Stop loss value is 71.07
2018-02-08 11:41:05,492 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 11:41:05,492 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 11:41:05,494 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 11:41:05,494 - DEBUG - EntryPrice value is 68.85
2018-02-08 11:41:05,495 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 11:41:05,496 - DEBUG - Stop quantity 1
2018-02-08 11:41:05,497 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 11:41:05,497 - DEBUG - Direction is Short
2018-02-08 11:41:05,499 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 11:41:05,499 - DEBUG - Count is 1
2018-02-08 11:41:05,501 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 11:41:05,501 - DEBUG - Stop Loss Flag is 1
2018-02-08 11:41:05,502 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 11:41:05,503 - DEBUG - Max ID Order is (182,)
2018-02-08 11:41:05,503 - DEBUG - Today is 2018-02-08
2018-02-08 11:41:05,503 - DEBUG - Day of the week 3
2018-02-08 11:41:05,504 - DEBUG - Yesterday is 02/07/2018
2018-02-08 11:41:05,504 - DEBUG - In Position is  1
2018-02-08 11:41:05,504 - DEBUG - In Position is  <class 'int'>
2018-02-08 11:41:05,504 - DEBUG - curStopLossFlag is  1
2018-02-08 11:41:05,505 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 11:41:05,505 - DEBUG - Checking if Entry has been filled
2018-02-08 11:41:05,505 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 11:41:05,506 - DEBUG - EntryPend is 0
2018-02-08 11:41:05,507 - DEBUG - Try to Cancel Stop
2018-02-08 11:41:05,507 - DEBUG - Stop API ID 182
2018-02-08 11:41:05,507 - DEBUG - Profit API ID 0
2018-02-08 11:41:05,507 - DEBUG - Stop API ID <class 'int'>
2018-02-08 11:41:05,508 - DEBUG - Profit API ID <class 'int'>
2018-02-08 11:41:05,508 - DEBUG - Pos is 1
2018-02-08 11:41:05,508 - DEBUG - CurCount is 1
2018-02-08 11:41:05,508 - DEBUG - In Pos 1
2018-02-08 11:41:05,508 - DEBUG - Stop ID is 182
2018-02-08 11:41:05,509 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 11:41:05,510 - DEBUG - EntryPend is 0
2018-02-08 11:41:05,510 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 11:41:05,511 - DEBUG - Entry Date is 10
2018-02-08 11:41:05,511 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 11:41:05,511 - DEBUG - Order Profit ID is 181
2018-02-08 11:41:05,511 - DEBUG - Order Entry ID is 181
2018-02-08 11:41:05,512 - DEBUG - API ID is  0
2018-02-08 11:41:05,512 - DEBUG - Current Position is 1
2018-02-08 11:41:05,512 - DEBUG - Current Position is <class 'str'>
2018-02-08 11:41:05,512 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 11:41:05,512 - DEBUG - Time is 11
2018-02-08 11:41:05,513 - DEBUG - Time is <class 'int'>
2018-02-08 11:41:05,513 - DEBUG - Time is 41
2018-02-08 11:41:05,513 - DEBUG - Time is <class 'int'>
2018-02-08 11:41:05,513 - DEBUG - Disconnected from IBController
2018-02-08 11:41:05,514 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 11:46:01,351 - DEBUG - ****************************************************
2018-02-08 11:46:01,351 - DEBUG - Current Time is 11:46AM
2018-02-08 11:46:01,352 - DEBUG - Starting Pos Mgmt H E
2018-02-08 11:46:01,352 - DEBUG - Connecting to database
2018-02-08 11:46:01,392 - DEBUG - Connected to database
2018-02-08 11:46:01,392 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 11:46:01,395 - DEBUG - Order Profit is 181
2018-02-08 11:46:01,395 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 11:46:01,397 - DEBUG - Stop ID is 182
2018-02-08 11:46:01,397 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 11:46:01,399 - DEBUG - Entry ID is 181
2018-02-08 11:46:01,399 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 11:46:01,400 - DEBUG - OCA ID is 1
2018-02-08 11:46:01,401 - DEBUG - Connecting to IBController
2018-02-08 11:46:02,408 - DEBUG - Connected to IBController
2018-02-08 11:46:02,408 - DEBUG - Position requested
2018-02-08 11:46:02,409 - DEBUG - Pos Mgmt -1
2018-02-08 11:46:02,410 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210CB38>, pos=-1, avgCost=27537.1>
2018-02-08 11:46:02,410 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 11:46:02,410 - DEBUG - ccy2 Currency with position is USD
2018-02-08 11:46:02,411 - DEBUG - Position is -1
2018-02-08 11:46:02,411 - DEBUG - In Position
2018-02-08 11:46:02,411 - DEBUG - Position is 1
2018-02-08 11:46:02,412 - DEBUG - Pos Mgmt 0
2018-02-08 11:46:02,412 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210CC18>, pos=0, avgCost=0.0>
2018-02-08 11:46:02,412 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 11:46:02,412 - DEBUG - ccy2 Currency with position is USD
2018-02-08 11:46:02,413 - DEBUG - Position is 0
2018-02-08 11:46:02,413 - DEBUG - Pos Mgmt -12987
2018-02-08 11:46:02,413 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210CF28>, pos=-12987, avgCost=0.95368235>
2018-02-08 11:46:02,414 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 11:46:02,414 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 11:46:02,414 - DEBUG - Position is -12987
2018-02-08 11:46:03,410 - DEBUG - Open Orders requested
2018-02-08 11:46:03,412 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x000000000210CE48>, order=<ib.ext.Order.Order object at 0x000000000210CCF8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A1198>>
2018-02-08 11:46:03,412 - DEBUG - Order OrderID 182
2018-02-08 11:46:03,413 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 11:46:03,413 - DEBUG - Order status PreSubmitted
2018-02-08 11:46:03,413 - DEBUG - Order Identification 182
2018-02-08 11:46:03,414 - DEBUG - Order Identification <class 'int'>
2018-02-08 11:46:03,414 - DEBUG - Profit ID from database is 181
2018-02-08 11:46:03,414 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 11:46:03,414 - DEBUG - Stop ID database is 182
2018-02-08 11:46:03,415 - DEBUG - Entry ID database is 181
2018-02-08 11:46:03,415 - DEBUG - Stop API ID is 182
2018-02-08 11:46:05,412 - DEBUG - Connecting to database
2018-02-08 11:46:05,419 - DEBUG - Connected to database
2018-02-08 11:46:05,421 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 11:46:05,421 - DEBUG - Stop loss value is 71.07
2018-02-08 11:46:05,423 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 11:46:05,424 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 11:46:05,425 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 11:46:05,426 - DEBUG - EntryPrice value is 68.85
2018-02-08 11:46:05,427 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 11:46:05,427 - DEBUG - Stop quantity 1
2018-02-08 11:46:05,429 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 11:46:05,429 - DEBUG - Direction is Short
2018-02-08 11:46:05,430 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 11:46:05,431 - DEBUG - Count is 1
2018-02-08 11:46:05,432 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 11:46:05,432 - DEBUG - Stop Loss Flag is 1
2018-02-08 11:46:05,434 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 11:46:05,434 - DEBUG - Max ID Order is (182,)
2018-02-08 11:46:05,434 - DEBUG - Today is 2018-02-08
2018-02-08 11:46:05,435 - DEBUG - Day of the week 3
2018-02-08 11:46:05,435 - DEBUG - Yesterday is 02/07/2018
2018-02-08 11:46:05,435 - DEBUG - In Position is  1
2018-02-08 11:46:05,436 - DEBUG - In Position is  <class 'int'>
2018-02-08 11:46:05,436 - DEBUG - curStopLossFlag is  1
2018-02-08 11:46:05,436 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 11:46:05,436 - DEBUG - Checking if Entry has been filled
2018-02-08 11:46:05,436 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 11:46:05,438 - DEBUG - EntryPend is 0
2018-02-08 11:46:05,438 - DEBUG - Try to Cancel Stop
2018-02-08 11:46:05,438 - DEBUG - Stop API ID 182
2018-02-08 11:46:05,439 - DEBUG - Profit API ID 0
2018-02-08 11:46:05,439 - DEBUG - Stop API ID <class 'int'>
2018-02-08 11:46:05,439 - DEBUG - Profit API ID <class 'int'>
2018-02-08 11:46:05,439 - DEBUG - Pos is 1
2018-02-08 11:46:05,440 - DEBUG - CurCount is 1
2018-02-08 11:46:05,440 - DEBUG - In Pos 1
2018-02-08 11:46:05,440 - DEBUG - Stop ID is 182
2018-02-08 11:46:05,440 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 11:46:05,442 - DEBUG - EntryPend is 0
2018-02-08 11:46:05,442 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 11:46:05,442 - DEBUG - Entry Date is 10
2018-02-08 11:46:05,442 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 11:46:05,443 - DEBUG - Order Profit ID is 181
2018-02-08 11:46:05,443 - DEBUG - Order Entry ID is 181
2018-02-08 11:46:05,443 - DEBUG - API ID is  0
2018-02-08 11:46:05,443 - DEBUG - Current Position is 1
2018-02-08 11:46:05,444 - DEBUG - Current Position is <class 'str'>
2018-02-08 11:46:05,444 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 11:46:05,444 - DEBUG - Time is 11
2018-02-08 11:46:05,444 - DEBUG - Time is <class 'int'>
2018-02-08 11:46:05,445 - DEBUG - Time is 46
2018-02-08 11:46:05,445 - DEBUG - Time is <class 'int'>
2018-02-08 11:46:05,445 - DEBUG - Disconnected from IBController
2018-02-08 11:46:05,446 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 11:51:01,354 - DEBUG - ****************************************************
2018-02-08 11:51:01,355 - DEBUG - Current Time is 11:51AM
2018-02-08 11:51:01,356 - DEBUG - Starting Pos Mgmt H E
2018-02-08 11:51:01,356 - DEBUG - Connecting to database
2018-02-08 11:51:01,486 - DEBUG - Connected to database
2018-02-08 11:51:01,486 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 11:51:01,488 - DEBUG - Order Profit is 181
2018-02-08 11:51:01,488 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 11:51:01,489 - DEBUG - Stop ID is 182
2018-02-08 11:51:01,490 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 11:51:01,491 - DEBUG - Entry ID is 181
2018-02-08 11:51:01,491 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 11:51:01,493 - DEBUG - OCA ID is 1
2018-02-08 11:51:01,493 - DEBUG - Connecting to IBController
2018-02-08 11:51:02,501 - DEBUG - Connected to IBController
2018-02-08 11:51:02,501 - DEBUG - Position requested
2018-02-08 11:51:02,503 - DEBUG - Pos Mgmt -1
2018-02-08 11:51:02,503 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020EDD30>, pos=-1, avgCost=27537.1>
2018-02-08 11:51:02,503 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 11:51:02,504 - DEBUG - ccy2 Currency with position is USD
2018-02-08 11:51:02,504 - DEBUG - Position is -1
2018-02-08 11:51:02,504 - DEBUG - In Position
2018-02-08 11:51:02,504 - DEBUG - Position is 1
2018-02-08 11:51:02,505 - DEBUG - Pos Mgmt 0
2018-02-08 11:51:02,505 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020EDBE0>, pos=0, avgCost=0.0>
2018-02-08 11:51:02,505 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 11:51:02,505 - DEBUG - ccy2 Currency with position is USD
2018-02-08 11:51:02,506 - DEBUG - Position is 0
2018-02-08 11:51:02,506 - DEBUG - Pos Mgmt -12987
2018-02-08 11:51:02,506 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020EDF28>, pos=-12987, avgCost=0.95368235>
2018-02-08 11:51:02,506 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 11:51:02,507 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 11:51:02,507 - DEBUG - Position is -12987
2018-02-08 11:51:03,502 - DEBUG - Open Orders requested
2018-02-08 11:51:03,504 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x00000000020EDE10>, order=<ib.ext.Order.Order object at 0x00000000020EDC88>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002182198>>
2018-02-08 11:51:03,504 - DEBUG - Order OrderID 182
2018-02-08 11:51:03,505 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 11:51:03,505 - DEBUG - Order status PreSubmitted
2018-02-08 11:51:03,506 - DEBUG - Order Identification 182
2018-02-08 11:51:03,506 - DEBUG - Order Identification <class 'int'>
2018-02-08 11:51:03,506 - DEBUG - Profit ID from database is 181
2018-02-08 11:51:03,506 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 11:51:03,506 - DEBUG - Stop ID database is 182
2018-02-08 11:51:03,507 - DEBUG - Entry ID database is 181
2018-02-08 11:51:03,507 - DEBUG - Stop API ID is 182
2018-02-08 11:51:05,504 - DEBUG - Connecting to database
2018-02-08 11:51:05,513 - DEBUG - Connected to database
2018-02-08 11:51:05,515 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 11:51:05,515 - DEBUG - Stop loss value is 71.07
2018-02-08 11:51:05,516 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 11:51:05,517 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 11:51:05,518 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 11:51:05,518 - DEBUG - EntryPrice value is 68.85
2018-02-08 11:51:05,520 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 11:51:05,520 - DEBUG - Stop quantity 1
2018-02-08 11:51:05,522 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 11:51:05,522 - DEBUG - Direction is Short
2018-02-08 11:51:05,523 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 11:51:05,524 - DEBUG - Count is 1
2018-02-08 11:51:05,525 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 11:51:05,525 - DEBUG - Stop Loss Flag is 1
2018-02-08 11:51:05,527 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 11:51:05,527 - DEBUG - Max ID Order is (182,)
2018-02-08 11:51:05,527 - DEBUG - Today is 2018-02-08
2018-02-08 11:51:05,528 - DEBUG - Day of the week 3
2018-02-08 11:51:05,528 - DEBUG - Yesterday is 02/07/2018
2018-02-08 11:51:05,528 - DEBUG - In Position is  1
2018-02-08 11:51:05,529 - DEBUG - In Position is  <class 'int'>
2018-02-08 11:51:05,529 - DEBUG - curStopLossFlag is  1
2018-02-08 11:51:05,529 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 11:51:05,529 - DEBUG - Checking if Entry has been filled
2018-02-08 11:51:05,529 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 11:51:05,531 - DEBUG - EntryPend is 0
2018-02-08 11:51:05,531 - DEBUG - Try to Cancel Stop
2018-02-08 11:51:05,531 - DEBUG - Stop API ID 182
2018-02-08 11:51:05,532 - DEBUG - Profit API ID 0
2018-02-08 11:51:05,532 - DEBUG - Stop API ID <class 'int'>
2018-02-08 11:51:05,532 - DEBUG - Profit API ID <class 'int'>
2018-02-08 11:51:05,532 - DEBUG - Pos is 1
2018-02-08 11:51:05,532 - DEBUG - CurCount is 1
2018-02-08 11:51:05,533 - DEBUG - In Pos 1
2018-02-08 11:51:05,533 - DEBUG - Stop ID is 182
2018-02-08 11:51:05,533 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 11:51:05,535 - DEBUG - EntryPend is 0
2018-02-08 11:51:05,535 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 11:51:05,535 - DEBUG - Entry Date is 10
2018-02-08 11:51:05,535 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 11:51:05,535 - DEBUG - Order Profit ID is 181
2018-02-08 11:51:05,536 - DEBUG - Order Entry ID is 181
2018-02-08 11:51:05,536 - DEBUG - API ID is  0
2018-02-08 11:51:05,536 - DEBUG - Current Position is 1
2018-02-08 11:51:05,536 - DEBUG - Current Position is <class 'str'>
2018-02-08 11:51:05,537 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 11:51:05,537 - DEBUG - Time is 11
2018-02-08 11:51:05,537 - DEBUG - Time is <class 'int'>
2018-02-08 11:51:05,537 - DEBUG - Time is 51
2018-02-08 11:51:05,537 - DEBUG - Time is <class 'int'>
2018-02-08 11:51:05,538 - DEBUG - Disconnected from IBController
2018-02-08 11:51:05,538 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 11:56:01,353 - DEBUG - ****************************************************
2018-02-08 11:56:01,353 - DEBUG - Current Time is 11:56AM
2018-02-08 11:56:01,354 - DEBUG - Starting Pos Mgmt H E
2018-02-08 11:56:01,354 - DEBUG - Connecting to database
2018-02-08 11:56:01,389 - DEBUG - Connected to database
2018-02-08 11:56:01,389 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 11:56:01,391 - DEBUG - Order Profit is 181
2018-02-08 11:56:01,391 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 11:56:01,393 - DEBUG - Stop ID is 182
2018-02-08 11:56:01,393 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 11:56:01,395 - DEBUG - Entry ID is 181
2018-02-08 11:56:01,395 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 11:56:01,396 - DEBUG - OCA ID is 1
2018-02-08 11:56:01,397 - DEBUG - Connecting to IBController
2018-02-08 11:56:02,403 - DEBUG - Connected to IBController
2018-02-08 11:56:02,403 - DEBUG - Position requested
2018-02-08 11:56:02,404 - DEBUG - Pos Mgmt -1
2018-02-08 11:56:02,405 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210CB38>, pos=-1, avgCost=27537.1>
2018-02-08 11:56:02,405 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 11:56:02,405 - DEBUG - ccy2 Currency with position is USD
2018-02-08 11:56:02,406 - DEBUG - Position is -1
2018-02-08 11:56:02,406 - DEBUG - In Position
2018-02-08 11:56:02,406 - DEBUG - Position is 1
2018-02-08 11:56:02,406 - DEBUG - Pos Mgmt 0
2018-02-08 11:56:02,407 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210CBE0>, pos=0, avgCost=0.0>
2018-02-08 11:56:02,407 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 11:56:02,407 - DEBUG - ccy2 Currency with position is USD
2018-02-08 11:56:02,407 - DEBUG - Position is 0
2018-02-08 11:56:02,408 - DEBUG - Pos Mgmt -12987
2018-02-08 11:56:02,408 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210CF28>, pos=-12987, avgCost=0.95368235>
2018-02-08 11:56:02,408 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 11:56:02,408 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 11:56:02,409 - DEBUG - Position is -12987
2018-02-08 11:56:03,405 - DEBUG - Open Orders requested
2018-02-08 11:56:03,407 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x000000000210CC18>, order=<ib.ext.Order.Order object at 0x000000000210CCF8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A2198>>
2018-02-08 11:56:03,407 - DEBUG - Order OrderID 182
2018-02-08 11:56:03,408 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 11:56:03,408 - DEBUG - Order status PreSubmitted
2018-02-08 11:56:03,408 - DEBUG - Order Identification 182
2018-02-08 11:56:03,409 - DEBUG - Order Identification <class 'int'>
2018-02-08 11:56:03,409 - DEBUG - Profit ID from database is 181
2018-02-08 11:56:03,409 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 11:56:03,409 - DEBUG - Stop ID database is 182
2018-02-08 11:56:03,410 - DEBUG - Entry ID database is 181
2018-02-08 11:56:03,410 - DEBUG - Stop API ID is 182
2018-02-08 11:56:05,407 - DEBUG - Connecting to database
2018-02-08 11:56:05,415 - DEBUG - Connected to database
2018-02-08 11:56:05,416 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 11:56:05,417 - DEBUG - Stop loss value is 71.07
2018-02-08 11:56:05,418 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 11:56:05,418 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 11:56:05,420 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 11:56:05,420 - DEBUG - EntryPrice value is 68.85
2018-02-08 11:56:05,421 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 11:56:05,422 - DEBUG - Stop quantity 1
2018-02-08 11:56:05,423 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 11:56:05,423 - DEBUG - Direction is Short
2018-02-08 11:56:05,425 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 11:56:05,425 - DEBUG - Count is 1
2018-02-08 11:56:05,426 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 11:56:05,427 - DEBUG - Stop Loss Flag is 1
2018-02-08 11:56:05,428 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 11:56:05,428 - DEBUG - Max ID Order is (182,)
2018-02-08 11:56:05,429 - DEBUG - Today is 2018-02-08
2018-02-08 11:56:05,429 - DEBUG - Day of the week 3
2018-02-08 11:56:05,429 - DEBUG - Yesterday is 02/07/2018
2018-02-08 11:56:05,430 - DEBUG - In Position is  1
2018-02-08 11:56:05,430 - DEBUG - In Position is  <class 'int'>
2018-02-08 11:56:05,430 - DEBUG - curStopLossFlag is  1
2018-02-08 11:56:05,430 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 11:56:05,430 - DEBUG - Checking if Entry has been filled
2018-02-08 11:56:05,431 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 11:56:05,432 - DEBUG - EntryPend is 0
2018-02-08 11:56:05,432 - DEBUG - Try to Cancel Stop
2018-02-08 11:56:05,432 - DEBUG - Stop API ID 182
2018-02-08 11:56:05,433 - DEBUG - Profit API ID 0
2018-02-08 11:56:05,433 - DEBUG - Stop API ID <class 'int'>
2018-02-08 11:56:05,433 - DEBUG - Profit API ID <class 'int'>
2018-02-08 11:56:05,433 - DEBUG - Pos is 1
2018-02-08 11:56:05,434 - DEBUG - CurCount is 1
2018-02-08 11:56:05,434 - DEBUG - In Pos 1
2018-02-08 11:56:05,434 - DEBUG - Stop ID is 182
2018-02-08 11:56:05,434 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 11:56:05,436 - DEBUG - EntryPend is 0
2018-02-08 11:56:05,436 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 11:56:05,436 - DEBUG - Entry Date is 10
2018-02-08 11:56:05,436 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 11:56:05,437 - DEBUG - Order Profit ID is 181
2018-02-08 11:56:05,437 - DEBUG - Order Entry ID is 181
2018-02-08 11:56:05,437 - DEBUG - API ID is  0
2018-02-08 11:56:05,437 - DEBUG - Current Position is 1
2018-02-08 11:56:05,438 - DEBUG - Current Position is <class 'str'>
2018-02-08 11:56:05,438 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 11:56:05,438 - DEBUG - Time is 11
2018-02-08 11:56:05,438 - DEBUG - Time is <class 'int'>
2018-02-08 11:56:05,439 - DEBUG - Time is 56
2018-02-08 11:56:05,439 - DEBUG - Time is <class 'int'>
2018-02-08 11:56:05,439 - DEBUG - Disconnected from IBController
2018-02-08 11:56:05,439 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 12:01:01,361 - DEBUG - ****************************************************
2018-02-08 12:01:01,362 - DEBUG - Current Time is 12:01PM
2018-02-08 12:01:01,362 - DEBUG - Starting Pos Mgmt H E
2018-02-08 12:01:01,362 - DEBUG - Connecting to database
2018-02-08 12:01:01,400 - DEBUG - Connected to database
2018-02-08 12:01:01,400 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 12:01:01,402 - DEBUG - Order Profit is 181
2018-02-08 12:01:01,402 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 12:01:01,408 - DEBUG - Stop ID is 182
2018-02-08 12:01:01,408 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 12:01:01,415 - DEBUG - Entry ID is 181
2018-02-08 12:01:01,416 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 12:01:01,417 - DEBUG - OCA ID is 1
2018-02-08 12:01:01,418 - DEBUG - Connecting to IBController
2018-02-08 12:01:02,423 - DEBUG - Connected to IBController
2018-02-08 12:01:02,423 - DEBUG - Position requested
2018-02-08 12:01:02,424 - DEBUG - Pos Mgmt -1
2018-02-08 12:01:02,425 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212CB38>, pos=-1, avgCost=27537.1>
2018-02-08 12:01:02,425 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 12:01:02,426 - DEBUG - ccy2 Currency with position is USD
2018-02-08 12:01:02,426 - DEBUG - Position is -1
2018-02-08 12:01:02,426 - DEBUG - In Position
2018-02-08 12:01:02,426 - DEBUG - Position is 1
2018-02-08 12:01:02,427 - DEBUG - Pos Mgmt 0
2018-02-08 12:01:02,427 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212CBE0>, pos=0, avgCost=0.0>
2018-02-08 12:01:02,427 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 12:01:02,427 - DEBUG - ccy2 Currency with position is USD
2018-02-08 12:01:02,427 - DEBUG - Position is 0
2018-02-08 12:01:02,428 - DEBUG - Pos Mgmt -12987
2018-02-08 12:01:02,433 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212CF98>, pos=-12987, avgCost=0.95368235>
2018-02-08 12:01:02,433 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 12:01:02,433 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 12:01:02,434 - DEBUG - Position is -12987
2018-02-08 12:01:03,425 - DEBUG - Open Orders requested
2018-02-08 12:01:03,427 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x000000000212CD30>, order=<ib.ext.Order.Order object at 0x000000000212CE80>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C1198>>
2018-02-08 12:01:03,427 - DEBUG - Order OrderID 182
2018-02-08 12:01:03,428 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 12:01:03,428 - DEBUG - Order status PreSubmitted
2018-02-08 12:01:03,428 - DEBUG - Order Identification 182
2018-02-08 12:01:03,429 - DEBUG - Order Identification <class 'int'>
2018-02-08 12:01:03,429 - DEBUG - Profit ID from database is 181
2018-02-08 12:01:03,429 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 12:01:03,438 - DEBUG - Stop ID database is 182
2018-02-08 12:01:03,438 - DEBUG - Entry ID database is 181
2018-02-08 12:01:03,439 - DEBUG - Stop API ID is 182
2018-02-08 12:01:05,427 - DEBUG - Connecting to database
2018-02-08 12:01:05,435 - DEBUG - Connected to database
2018-02-08 12:01:05,436 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 12:01:05,437 - DEBUG - Stop loss value is 71.07
2018-02-08 12:01:05,438 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 12:01:05,439 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 12:01:05,440 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 12:01:05,441 - DEBUG - EntryPrice value is 68.85
2018-02-08 12:01:05,442 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 12:01:05,442 - DEBUG - Stop quantity 1
2018-02-08 12:01:05,444 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 12:01:05,444 - DEBUG - Direction is Short
2018-02-08 12:01:05,445 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 12:01:05,446 - DEBUG - Count is 1
2018-02-08 12:01:05,447 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 12:01:05,448 - DEBUG - Stop Loss Flag is 1
2018-02-08 12:01:05,449 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 12:01:05,449 - DEBUG - Max ID Order is (182,)
2018-02-08 12:01:05,450 - DEBUG - Today is 2018-02-08
2018-02-08 12:01:05,450 - DEBUG - Day of the week 3
2018-02-08 12:01:05,450 - DEBUG - Yesterday is 02/07/2018
2018-02-08 12:01:05,451 - DEBUG - In Position is  1
2018-02-08 12:01:05,451 - DEBUG - In Position is  <class 'int'>
2018-02-08 12:01:05,451 - DEBUG - curStopLossFlag is  1
2018-02-08 12:01:05,451 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 12:01:05,452 - DEBUG - Checking if Entry has been filled
2018-02-08 12:01:05,452 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 12:01:05,453 - DEBUG - EntryPend is 0
2018-02-08 12:01:05,454 - DEBUG - Try to Cancel Stop
2018-02-08 12:01:05,454 - DEBUG - Stop API ID 182
2018-02-08 12:01:05,454 - DEBUG - Profit API ID 0
2018-02-08 12:01:05,454 - DEBUG - Stop API ID <class 'int'>
2018-02-08 12:01:05,454 - DEBUG - Profit API ID <class 'int'>
2018-02-08 12:01:05,455 - DEBUG - Pos is 1
2018-02-08 12:01:05,455 - DEBUG - CurCount is 1
2018-02-08 12:01:05,455 - DEBUG - In Pos 1
2018-02-08 12:01:05,455 - DEBUG - Stop ID is 182
2018-02-08 12:01:05,456 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 12:01:05,457 - DEBUG - EntryPend is 0
2018-02-08 12:01:05,457 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 12:01:05,458 - DEBUG - Entry Date is 10
2018-02-08 12:01:05,458 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 12:01:05,458 - DEBUG - Order Profit ID is 181
2018-02-08 12:01:05,458 - DEBUG - Order Entry ID is 181
2018-02-08 12:01:05,458 - DEBUG - API ID is  0
2018-02-08 12:01:05,459 - DEBUG - Current Position is 1
2018-02-08 12:01:05,459 - DEBUG - Current Position is <class 'str'>
2018-02-08 12:01:05,459 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 12:01:05,459 - DEBUG - Time is 12
2018-02-08 12:01:05,460 - DEBUG - Time is <class 'int'>
2018-02-08 12:01:05,460 - DEBUG - Time is 1
2018-02-08 12:01:05,460 - DEBUG - Time is <class 'int'>
2018-02-08 12:01:05,460 - DEBUG - Disconnected from IBController
2018-02-08 12:01:05,462 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 12:06:01,392 - DEBUG - ****************************************************
2018-02-08 12:06:01,393 - DEBUG - Current Time is 12:06PM
2018-02-08 12:06:01,393 - DEBUG - Starting Pos Mgmt H E
2018-02-08 12:06:01,394 - DEBUG - Connecting to database
2018-02-08 12:06:01,429 - DEBUG - Connected to database
2018-02-08 12:06:01,429 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 12:06:01,430 - DEBUG - Order Profit is 181
2018-02-08 12:06:01,431 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 12:06:01,432 - DEBUG - Stop ID is 182
2018-02-08 12:06:01,433 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 12:06:01,434 - DEBUG - Entry ID is 181
2018-02-08 12:06:01,435 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 12:06:01,437 - DEBUG - OCA ID is 1
2018-02-08 12:06:01,437 - DEBUG - Connecting to IBController
2018-02-08 12:06:02,443 - DEBUG - Connected to IBController
2018-02-08 12:06:02,443 - DEBUG - Position requested
2018-02-08 12:06:02,445 - DEBUG - Pos Mgmt -1
2018-02-08 12:06:02,445 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020EDB38>, pos=-1, avgCost=27537.1>
2018-02-08 12:06:02,445 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 12:06:02,446 - DEBUG - ccy2 Currency with position is USD
2018-02-08 12:06:02,446 - DEBUG - Position is -1
2018-02-08 12:06:02,446 - DEBUG - In Position
2018-02-08 12:06:02,446 - DEBUG - Position is 1
2018-02-08 12:06:02,447 - DEBUG - Pos Mgmt 0
2018-02-08 12:06:02,447 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020EDAC8>, pos=0, avgCost=0.0>
2018-02-08 12:06:02,447 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 12:06:02,447 - DEBUG - ccy2 Currency with position is USD
2018-02-08 12:06:02,448 - DEBUG - Position is 0
2018-02-08 12:06:02,448 - DEBUG - Pos Mgmt -12987
2018-02-08 12:06:02,448 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020EDF28>, pos=-12987, avgCost=0.95368235>
2018-02-08 12:06:02,449 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 12:06:02,449 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 12:06:02,449 - DEBUG - Position is -12987
2018-02-08 12:06:03,445 - DEBUG - Open Orders requested
2018-02-08 12:06:03,447 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x00000000020EDC18>, order=<ib.ext.Order.Order object at 0x00000000020EDC50>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002181198>>
2018-02-08 12:06:03,448 - DEBUG - Order OrderID 182
2018-02-08 12:06:03,448 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 12:06:03,448 - DEBUG - Order status PreSubmitted
2018-02-08 12:06:03,449 - DEBUG - Order Identification 182
2018-02-08 12:06:03,449 - DEBUG - Order Identification <class 'int'>
2018-02-08 12:06:03,449 - DEBUG - Profit ID from database is 181
2018-02-08 12:06:03,449 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 12:06:03,450 - DEBUG - Stop ID database is 182
2018-02-08 12:06:03,450 - DEBUG - Entry ID database is 181
2018-02-08 12:06:03,450 - DEBUG - Stop API ID is 182
2018-02-08 12:06:05,447 - DEBUG - Connecting to database
2018-02-08 12:06:05,454 - DEBUG - Connected to database
2018-02-08 12:06:05,456 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 12:06:05,456 - DEBUG - Stop loss value is 71.07
2018-02-08 12:06:05,457 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 12:06:05,458 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 12:06:05,460 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 12:06:05,460 - DEBUG - EntryPrice value is 68.85
2018-02-08 12:06:05,461 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 12:06:05,462 - DEBUG - Stop quantity 1
2018-02-08 12:06:05,463 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 12:06:05,464 - DEBUG - Direction is Short
2018-02-08 12:06:05,465 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 12:06:05,465 - DEBUG - Count is 1
2018-02-08 12:06:05,467 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 12:06:05,467 - DEBUG - Stop Loss Flag is 1
2018-02-08 12:06:05,468 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 12:06:05,469 - DEBUG - Max ID Order is (182,)
2018-02-08 12:06:05,469 - DEBUG - Today is 2018-02-08
2018-02-08 12:06:05,470 - DEBUG - Day of the week 3
2018-02-08 12:06:05,470 - DEBUG - Yesterday is 02/07/2018
2018-02-08 12:06:05,470 - DEBUG - In Position is  1
2018-02-08 12:06:05,470 - DEBUG - In Position is  <class 'int'>
2018-02-08 12:06:05,470 - DEBUG - curStopLossFlag is  1
2018-02-08 12:06:05,471 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 12:06:05,471 - DEBUG - Checking if Entry has been filled
2018-02-08 12:06:05,471 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 12:06:05,473 - DEBUG - EntryPend is 0
2018-02-08 12:06:05,473 - DEBUG - Try to Cancel Stop
2018-02-08 12:06:05,473 - DEBUG - Stop API ID 182
2018-02-08 12:06:05,473 - DEBUG - Profit API ID 0
2018-02-08 12:06:05,473 - DEBUG - Stop API ID <class 'int'>
2018-02-08 12:06:05,474 - DEBUG - Profit API ID <class 'int'>
2018-02-08 12:06:05,474 - DEBUG - Pos is 1
2018-02-08 12:06:05,474 - DEBUG - CurCount is 1
2018-02-08 12:06:05,474 - DEBUG - In Pos 1
2018-02-08 12:06:05,475 - DEBUG - Stop ID is 182
2018-02-08 12:06:05,475 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 12:06:05,476 - DEBUG - EntryPend is 0
2018-02-08 12:06:05,477 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 12:06:05,477 - DEBUG - Entry Date is 10
2018-02-08 12:06:05,477 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 12:06:05,477 - DEBUG - Order Profit ID is 181
2018-02-08 12:06:05,477 - DEBUG - Order Entry ID is 181
2018-02-08 12:06:05,478 - DEBUG - API ID is  0
2018-02-08 12:06:05,478 - DEBUG - Current Position is 1
2018-02-08 12:06:05,478 - DEBUG - Current Position is <class 'str'>
2018-02-08 12:06:05,479 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 12:06:05,479 - DEBUG - Time is 12
2018-02-08 12:06:05,479 - DEBUG - Time is <class 'int'>
2018-02-08 12:06:05,479 - DEBUG - Time is 6
2018-02-08 12:06:05,479 - DEBUG - Time is <class 'int'>
2018-02-08 12:06:05,480 - DEBUG - Disconnected from IBController
2018-02-08 12:06:05,480 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 12:11:01,351 - DEBUG - ****************************************************
2018-02-08 12:11:01,351 - DEBUG - Current Time is 12:11PM
2018-02-08 12:11:01,352 - DEBUG - Starting Pos Mgmt H E
2018-02-08 12:11:01,352 - DEBUG - Connecting to database
2018-02-08 12:11:01,400 - DEBUG - Connected to database
2018-02-08 12:11:01,400 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 12:11:01,403 - DEBUG - Order Profit is 181
2018-02-08 12:11:01,403 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 12:11:01,407 - DEBUG - Stop ID is 182
2018-02-08 12:11:01,407 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 12:11:01,408 - DEBUG - Entry ID is 181
2018-02-08 12:11:01,409 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 12:11:01,410 - DEBUG - OCA ID is 1
2018-02-08 12:11:01,411 - DEBUG - Connecting to IBController
2018-02-08 12:11:02,417 - DEBUG - Connected to IBController
2018-02-08 12:11:02,417 - DEBUG - Position requested
2018-02-08 12:11:02,419 - DEBUG - Pos Mgmt -1
2018-02-08 12:11:02,419 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212BDD8>, pos=-1, avgCost=27537.1>
2018-02-08 12:11:02,419 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 12:11:02,420 - DEBUG - ccy2 Currency with position is USD
2018-02-08 12:11:02,420 - DEBUG - Position is -1
2018-02-08 12:11:02,420 - DEBUG - In Position
2018-02-08 12:11:02,420 - DEBUG - Position is 1
2018-02-08 12:11:02,421 - DEBUG - Pos Mgmt 0
2018-02-08 12:11:02,421 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212BAC8>, pos=0, avgCost=0.0>
2018-02-08 12:11:02,421 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 12:11:02,421 - DEBUG - ccy2 Currency with position is USD
2018-02-08 12:11:02,422 - DEBUG - Position is 0
2018-02-08 12:11:02,422 - DEBUG - Pos Mgmt -12987
2018-02-08 12:11:02,422 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212BF28>, pos=-12987, avgCost=0.95368235>
2018-02-08 12:11:02,423 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 12:11:02,423 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 12:11:02,423 - DEBUG - Position is -12987
2018-02-08 12:11:03,418 - DEBUG - Open Orders requested
2018-02-08 12:11:03,419 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x000000000212BDA0>, order=<ib.ext.Order.Order object at 0x000000000212BC50>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C0198>>
2018-02-08 12:11:03,420 - DEBUG - Order OrderID 182
2018-02-08 12:11:03,421 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 12:11:03,421 - DEBUG - Order status PreSubmitted
2018-02-08 12:11:03,421 - DEBUG - Order Identification 182
2018-02-08 12:11:03,422 - DEBUG - Order Identification <class 'int'>
2018-02-08 12:11:03,422 - DEBUG - Profit ID from database is 181
2018-02-08 12:11:03,422 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 12:11:03,422 - DEBUG - Stop ID database is 182
2018-02-08 12:11:03,423 - DEBUG - Entry ID database is 181
2018-02-08 12:11:03,423 - DEBUG - Stop API ID is 182
2018-02-08 12:11:05,420 - DEBUG - Connecting to database
2018-02-08 12:11:05,427 - DEBUG - Connected to database
2018-02-08 12:11:05,429 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 12:11:05,429 - DEBUG - Stop loss value is 71.07
2018-02-08 12:11:05,431 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 12:11:05,431 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 12:11:05,432 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 12:11:05,433 - DEBUG - EntryPrice value is 68.85
2018-02-08 12:11:05,434 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 12:11:05,434 - DEBUG - Stop quantity 1
2018-02-08 12:11:05,436 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 12:11:05,436 - DEBUG - Direction is Short
2018-02-08 12:11:05,437 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 12:11:05,438 - DEBUG - Count is 1
2018-02-08 12:11:05,439 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 12:11:05,439 - DEBUG - Stop Loss Flag is 1
2018-02-08 12:11:05,441 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 12:11:05,441 - DEBUG - Max ID Order is (182,)
2018-02-08 12:11:05,441 - DEBUG - Today is 2018-02-08
2018-02-08 12:11:05,442 - DEBUG - Day of the week 3
2018-02-08 12:11:05,442 - DEBUG - Yesterday is 02/07/2018
2018-02-08 12:11:05,442 - DEBUG - In Position is  1
2018-02-08 12:11:05,443 - DEBUG - In Position is  <class 'int'>
2018-02-08 12:11:05,443 - DEBUG - curStopLossFlag is  1
2018-02-08 12:11:05,443 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 12:11:05,443 - DEBUG - Checking if Entry has been filled
2018-02-08 12:11:05,443 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 12:11:05,445 - DEBUG - EntryPend is 0
2018-02-08 12:11:05,445 - DEBUG - Try to Cancel Stop
2018-02-08 12:11:05,446 - DEBUG - Stop API ID 182
2018-02-08 12:11:05,446 - DEBUG - Profit API ID 0
2018-02-08 12:11:05,446 - DEBUG - Stop API ID <class 'int'>
2018-02-08 12:11:05,446 - DEBUG - Profit API ID <class 'int'>
2018-02-08 12:11:05,447 - DEBUG - Pos is 1
2018-02-08 12:11:05,447 - DEBUG - CurCount is 1
2018-02-08 12:11:05,447 - DEBUG - In Pos 1
2018-02-08 12:11:05,447 - DEBUG - Stop ID is 182
2018-02-08 12:11:05,447 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 12:11:05,449 - DEBUG - EntryPend is 0
2018-02-08 12:11:05,449 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 12:11:05,449 - DEBUG - Entry Date is 10
2018-02-08 12:11:05,449 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 12:11:05,450 - DEBUG - Order Profit ID is 181
2018-02-08 12:11:05,450 - DEBUG - Order Entry ID is 181
2018-02-08 12:11:05,450 - DEBUG - API ID is  0
2018-02-08 12:11:05,450 - DEBUG - Current Position is 1
2018-02-08 12:11:05,450 - DEBUG - Current Position is <class 'str'>
2018-02-08 12:11:05,451 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 12:11:05,451 - DEBUG - Time is 12
2018-02-08 12:11:05,451 - DEBUG - Time is <class 'int'>
2018-02-08 12:11:05,451 - DEBUG - Time is 11
2018-02-08 12:11:05,452 - DEBUG - Time is <class 'int'>
2018-02-08 12:11:05,452 - DEBUG - Disconnected from IBController
2018-02-08 12:11:05,452 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 12:16:01,355 - DEBUG - ****************************************************
2018-02-08 12:16:01,356 - DEBUG - Current Time is 12:16PM
2018-02-08 12:16:01,356 - DEBUG - Starting Pos Mgmt H E
2018-02-08 12:16:01,356 - DEBUG - Connecting to database
2018-02-08 12:16:01,388 - DEBUG - Connected to database
2018-02-08 12:16:01,389 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 12:16:01,391 - DEBUG - Order Profit is 181
2018-02-08 12:16:01,391 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 12:16:01,392 - DEBUG - Stop ID is 182
2018-02-08 12:16:01,393 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 12:16:01,394 - DEBUG - Entry ID is 181
2018-02-08 12:16:01,395 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 12:16:01,396 - DEBUG - OCA ID is 1
2018-02-08 12:16:01,397 - DEBUG - Connecting to IBController
2018-02-08 12:16:02,402 - DEBUG - Connected to IBController
2018-02-08 12:16:02,402 - DEBUG - Position requested
2018-02-08 12:16:02,403 - DEBUG - Pos Mgmt -1
2018-02-08 12:16:02,405 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FDB38>, pos=-1, avgCost=27537.1>
2018-02-08 12:16:02,406 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 12:16:02,406 - DEBUG - ccy2 Currency with position is USD
2018-02-08 12:16:02,406 - DEBUG - Position is -1
2018-02-08 12:16:02,407 - DEBUG - In Position
2018-02-08 12:16:02,407 - DEBUG - Position is 1
2018-02-08 12:16:02,407 - DEBUG - Pos Mgmt 0
2018-02-08 12:16:02,408 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FDCC0>, pos=0, avgCost=0.0>
2018-02-08 12:16:02,408 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 12:16:02,408 - DEBUG - ccy2 Currency with position is USD
2018-02-08 12:16:02,408 - DEBUG - Position is 0
2018-02-08 12:16:02,409 - DEBUG - Pos Mgmt -12987
2018-02-08 12:16:02,409 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FDF28>, pos=-12987, avgCost=0.95368235>
2018-02-08 12:16:02,409 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 12:16:02,409 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 12:16:02,410 - DEBUG - Position is -12987
2018-02-08 12:16:03,405 - DEBUG - Open Orders requested
2018-02-08 12:16:03,407 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x00000000020FDB00>, order=<ib.ext.Order.Order object at 0x00000000020FDAC8>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002191198>>
2018-02-08 12:16:03,407 - DEBUG - Order OrderID 182
2018-02-08 12:16:03,408 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 12:16:03,408 - DEBUG - Order status PreSubmitted
2018-02-08 12:16:03,408 - DEBUG - Order Identification 182
2018-02-08 12:16:03,409 - DEBUG - Order Identification <class 'int'>
2018-02-08 12:16:03,409 - DEBUG - Profit ID from database is 181
2018-02-08 12:16:03,409 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 12:16:03,409 - DEBUG - Stop ID database is 182
2018-02-08 12:16:03,410 - DEBUG - Entry ID database is 181
2018-02-08 12:16:03,410 - DEBUG - Stop API ID is 182
2018-02-08 12:16:05,407 - DEBUG - Connecting to database
2018-02-08 12:16:05,425 - DEBUG - Connected to database
2018-02-08 12:16:05,427 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 12:16:05,427 - DEBUG - Stop loss value is 71.07
2018-02-08 12:16:05,429 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 12:16:05,429 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 12:16:05,431 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 12:16:05,431 - DEBUG - EntryPrice value is 68.85
2018-02-08 12:16:05,432 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 12:16:05,433 - DEBUG - Stop quantity 1
2018-02-08 12:16:05,434 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 12:16:05,434 - DEBUG - Direction is Short
2018-02-08 12:16:05,436 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 12:16:05,436 - DEBUG - Count is 1
2018-02-08 12:16:05,437 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 12:16:05,438 - DEBUG - Stop Loss Flag is 1
2018-02-08 12:16:05,439 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 12:16:05,440 - DEBUG - Max ID Order is (182,)
2018-02-08 12:16:05,440 - DEBUG - Today is 2018-02-08
2018-02-08 12:16:05,440 - DEBUG - Day of the week 3
2018-02-08 12:16:05,441 - DEBUG - Yesterday is 02/07/2018
2018-02-08 12:16:05,441 - DEBUG - In Position is  1
2018-02-08 12:16:05,441 - DEBUG - In Position is  <class 'int'>
2018-02-08 12:16:05,441 - DEBUG - curStopLossFlag is  1
2018-02-08 12:16:05,442 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 12:16:05,442 - DEBUG - Checking if Entry has been filled
2018-02-08 12:16:05,442 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 12:16:05,444 - DEBUG - EntryPend is 0
2018-02-08 12:16:05,444 - DEBUG - Try to Cancel Stop
2018-02-08 12:16:05,444 - DEBUG - Stop API ID 182
2018-02-08 12:16:05,444 - DEBUG - Profit API ID 0
2018-02-08 12:16:05,445 - DEBUG - Stop API ID <class 'int'>
2018-02-08 12:16:05,445 - DEBUG - Profit API ID <class 'int'>
2018-02-08 12:16:05,445 - DEBUG - Pos is 1
2018-02-08 12:16:05,445 - DEBUG - CurCount is 1
2018-02-08 12:16:05,445 - DEBUG - In Pos 1
2018-02-08 12:16:05,446 - DEBUG - Stop ID is 182
2018-02-08 12:16:05,446 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 12:16:05,447 - DEBUG - EntryPend is 0
2018-02-08 12:16:05,447 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 12:16:05,448 - DEBUG - Entry Date is 10
2018-02-08 12:16:05,448 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 12:16:05,448 - DEBUG - Order Profit ID is 181
2018-02-08 12:16:05,448 - DEBUG - Order Entry ID is 181
2018-02-08 12:16:05,449 - DEBUG - API ID is  0
2018-02-08 12:16:05,449 - DEBUG - Current Position is 1
2018-02-08 12:16:05,449 - DEBUG - Current Position is <class 'str'>
2018-02-08 12:16:05,449 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 12:16:05,450 - DEBUG - Time is 12
2018-02-08 12:16:05,450 - DEBUG - Time is <class 'int'>
2018-02-08 12:16:05,450 - DEBUG - Time is 16
2018-02-08 12:16:05,450 - DEBUG - Time is <class 'int'>
2018-02-08 12:16:05,450 - DEBUG - Disconnected from IBController
2018-02-08 12:16:05,451 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 12:21:01,348 - DEBUG - ****************************************************
2018-02-08 12:21:01,349 - DEBUG - Current Time is 12:21PM
2018-02-08 12:21:01,349 - DEBUG - Starting Pos Mgmt H E
2018-02-08 12:21:01,350 - DEBUG - Connecting to database
2018-02-08 12:21:01,451 - DEBUG - Connected to database
2018-02-08 12:21:01,452 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 12:21:01,454 - DEBUG - Order Profit is 181
2018-02-08 12:21:01,454 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 12:21:01,456 - DEBUG - Stop ID is 182
2018-02-08 12:21:01,456 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 12:21:01,457 - DEBUG - Entry ID is 181
2018-02-08 12:21:01,458 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 12:21:01,459 - DEBUG - OCA ID is 1
2018-02-08 12:21:01,459 - DEBUG - Connecting to IBController
2018-02-08 12:21:02,465 - DEBUG - Connected to IBController
2018-02-08 12:21:02,465 - DEBUG - Position requested
2018-02-08 12:21:02,466 - DEBUG - Pos Mgmt -1
2018-02-08 12:21:02,467 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000217DB38>, pos=-1, avgCost=27537.1>
2018-02-08 12:21:02,467 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 12:21:02,467 - DEBUG - ccy2 Currency with position is USD
2018-02-08 12:21:02,468 - DEBUG - Position is -1
2018-02-08 12:21:02,468 - DEBUG - In Position
2018-02-08 12:21:02,468 - DEBUG - Position is 1
2018-02-08 12:21:02,468 - DEBUG - Pos Mgmt 0
2018-02-08 12:21:02,469 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000217DC18>, pos=0, avgCost=0.0>
2018-02-08 12:21:02,469 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 12:21:02,469 - DEBUG - ccy2 Currency with position is USD
2018-02-08 12:21:02,469 - DEBUG - Position is 0
2018-02-08 12:21:02,470 - DEBUG - Pos Mgmt -12987
2018-02-08 12:21:02,478 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000217DF28>, pos=-12987, avgCost=0.95368235>
2018-02-08 12:21:02,478 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 12:21:02,479 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 12:21:02,479 - DEBUG - Position is -12987
2018-02-08 12:21:03,466 - DEBUG - Open Orders requested
2018-02-08 12:21:03,468 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x000000000217DE10>, order=<ib.ext.Order.Order object at 0x000000000217DAC8>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002212198>>
2018-02-08 12:21:03,468 - DEBUG - Order OrderID 182
2018-02-08 12:21:03,469 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 12:21:03,469 - DEBUG - Order status PreSubmitted
2018-02-08 12:21:03,469 - DEBUG - Order Identification 182
2018-02-08 12:21:03,470 - DEBUG - Order Identification <class 'int'>
2018-02-08 12:21:03,470 - DEBUG - Profit ID from database is 181
2018-02-08 12:21:03,470 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 12:21:03,471 - DEBUG - Stop ID database is 182
2018-02-08 12:21:03,471 - DEBUG - Entry ID database is 181
2018-02-08 12:21:03,471 - DEBUG - Stop API ID is 182
2018-02-08 12:21:05,468 - DEBUG - Connecting to database
2018-02-08 12:21:05,475 - DEBUG - Connected to database
2018-02-08 12:21:05,477 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 12:21:05,477 - DEBUG - Stop loss value is 71.07
2018-02-08 12:21:05,479 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 12:21:05,479 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 12:21:05,481 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 12:21:05,481 - DEBUG - EntryPrice value is 68.85
2018-02-08 12:21:05,482 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 12:21:05,483 - DEBUG - Stop quantity 1
2018-02-08 12:21:05,484 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 12:21:05,484 - DEBUG - Direction is Short
2018-02-08 12:21:05,486 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 12:21:05,486 - DEBUG - Count is 1
2018-02-08 12:21:05,487 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 12:21:05,488 - DEBUG - Stop Loss Flag is 1
2018-02-08 12:21:05,489 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 12:21:05,489 - DEBUG - Max ID Order is (182,)
2018-02-08 12:21:05,490 - DEBUG - Today is 2018-02-08
2018-02-08 12:21:05,490 - DEBUG - Day of the week 3
2018-02-08 12:21:05,490 - DEBUG - Yesterday is 02/07/2018
2018-02-08 12:21:05,491 - DEBUG - In Position is  1
2018-02-08 12:21:05,491 - DEBUG - In Position is  <class 'int'>
2018-02-08 12:21:05,491 - DEBUG - curStopLossFlag is  1
2018-02-08 12:21:05,491 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 12:21:05,491 - DEBUG - Checking if Entry has been filled
2018-02-08 12:21:05,492 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 12:21:05,493 - DEBUG - EntryPend is 0
2018-02-08 12:21:05,494 - DEBUG - Try to Cancel Stop
2018-02-08 12:21:05,494 - DEBUG - Stop API ID 182
2018-02-08 12:21:05,494 - DEBUG - Profit API ID 0
2018-02-08 12:21:05,494 - DEBUG - Stop API ID <class 'int'>
2018-02-08 12:21:05,495 - DEBUG - Profit API ID <class 'int'>
2018-02-08 12:21:05,495 - DEBUG - Pos is 1
2018-02-08 12:21:05,495 - DEBUG - CurCount is 1
2018-02-08 12:21:05,495 - DEBUG - In Pos 1
2018-02-08 12:21:05,495 - DEBUG - Stop ID is 182
2018-02-08 12:21:05,496 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 12:21:05,497 - DEBUG - EntryPend is 0
2018-02-08 12:21:05,497 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 12:21:05,498 - DEBUG - Entry Date is 10
2018-02-08 12:21:05,498 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 12:21:05,498 - DEBUG - Order Profit ID is 181
2018-02-08 12:21:05,498 - DEBUG - Order Entry ID is 181
2018-02-08 12:21:05,499 - DEBUG - API ID is  0
2018-02-08 12:21:05,499 - DEBUG - Current Position is 1
2018-02-08 12:21:05,499 - DEBUG - Current Position is <class 'str'>
2018-02-08 12:21:05,499 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 12:21:05,500 - DEBUG - Time is 12
2018-02-08 12:21:05,500 - DEBUG - Time is <class 'int'>
2018-02-08 12:21:05,500 - DEBUG - Time is 21
2018-02-08 12:21:05,500 - DEBUG - Time is <class 'int'>
2018-02-08 12:21:05,500 - DEBUG - Disconnected from IBController
2018-02-08 12:21:05,502 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 12:26:01,348 - DEBUG - ****************************************************
2018-02-08 12:26:01,348 - DEBUG - Current Time is 12:26PM
2018-02-08 12:26:01,349 - DEBUG - Starting Pos Mgmt H E
2018-02-08 12:26:01,349 - DEBUG - Connecting to database
2018-02-08 12:26:01,385 - DEBUG - Connected to database
2018-02-08 12:26:01,385 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 12:26:01,387 - DEBUG - Order Profit is 181
2018-02-08 12:26:01,387 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 12:26:01,389 - DEBUG - Stop ID is 182
2018-02-08 12:26:01,389 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 12:26:01,390 - DEBUG - Entry ID is 181
2018-02-08 12:26:01,391 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 12:26:01,392 - DEBUG - OCA ID is 1
2018-02-08 12:26:01,393 - DEBUG - Connecting to IBController
2018-02-08 12:26:02,398 - DEBUG - Connected to IBController
2018-02-08 12:26:02,398 - DEBUG - Position requested
2018-02-08 12:26:02,400 - DEBUG - Pos Mgmt -1
2018-02-08 12:26:02,400 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000213BB38>, pos=-1, avgCost=27537.1>
2018-02-08 12:26:02,400 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 12:26:02,401 - DEBUG - ccy2 Currency with position is USD
2018-02-08 12:26:02,401 - DEBUG - Position is -1
2018-02-08 12:26:02,401 - DEBUG - In Position
2018-02-08 12:26:02,401 - DEBUG - Position is 1
2018-02-08 12:26:02,402 - DEBUG - Pos Mgmt 0
2018-02-08 12:26:02,402 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000213BBE0>, pos=0, avgCost=0.0>
2018-02-08 12:26:02,402 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 12:26:02,402 - DEBUG - ccy2 Currency with position is USD
2018-02-08 12:26:02,402 - DEBUG - Position is 0
2018-02-08 12:26:02,403 - DEBUG - Pos Mgmt -12987
2018-02-08 12:26:02,403 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000213BF28>, pos=-12987, avgCost=0.95368235>
2018-02-08 12:26:02,403 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 12:26:02,404 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 12:26:02,404 - DEBUG - Position is -12987
2018-02-08 12:26:03,400 - DEBUG - Open Orders requested
2018-02-08 12:26:03,402 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x000000000213BC18>, order=<ib.ext.Order.Order object at 0x000000000213BD68>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021D0198>>
2018-02-08 12:26:03,402 - DEBUG - Order OrderID 182
2018-02-08 12:26:03,403 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 12:26:03,403 - DEBUG - Order status PreSubmitted
2018-02-08 12:26:03,403 - DEBUG - Order Identification 182
2018-02-08 12:26:03,404 - DEBUG - Order Identification <class 'int'>
2018-02-08 12:26:03,404 - DEBUG - Profit ID from database is 181
2018-02-08 12:26:03,404 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 12:26:03,404 - DEBUG - Stop ID database is 182
2018-02-08 12:26:03,405 - DEBUG - Entry ID database is 181
2018-02-08 12:26:03,405 - DEBUG - Stop API ID is 182
2018-02-08 12:26:05,402 - DEBUG - Connecting to database
2018-02-08 12:26:05,409 - DEBUG - Connected to database
2018-02-08 12:26:05,411 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 12:26:05,411 - DEBUG - Stop loss value is 71.07
2018-02-08 12:26:05,413 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 12:26:05,413 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 12:26:05,414 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 12:26:05,415 - DEBUG - EntryPrice value is 68.85
2018-02-08 12:26:05,416 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 12:26:05,416 - DEBUG - Stop quantity 1
2018-02-08 12:26:05,418 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 12:26:05,418 - DEBUG - Direction is Short
2018-02-08 12:26:05,419 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 12:26:05,420 - DEBUG - Count is 1
2018-02-08 12:26:05,421 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 12:26:05,421 - DEBUG - Stop Loss Flag is 1
2018-02-08 12:26:05,427 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 12:26:05,427 - DEBUG - Max ID Order is (182,)
2018-02-08 12:26:05,428 - DEBUG - Today is 2018-02-08
2018-02-08 12:26:05,428 - DEBUG - Day of the week 3
2018-02-08 12:26:05,428 - DEBUG - Yesterday is 02/07/2018
2018-02-08 12:26:05,428 - DEBUG - In Position is  1
2018-02-08 12:26:05,429 - DEBUG - In Position is  <class 'int'>
2018-02-08 12:26:05,429 - DEBUG - curStopLossFlag is  1
2018-02-08 12:26:05,429 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 12:26:05,429 - DEBUG - Checking if Entry has been filled
2018-02-08 12:26:05,429 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 12:26:05,440 - DEBUG - EntryPend is 0
2018-02-08 12:26:05,440 - DEBUG - Try to Cancel Stop
2018-02-08 12:26:05,440 - DEBUG - Stop API ID 182
2018-02-08 12:26:05,440 - DEBUG - Profit API ID 0
2018-02-08 12:26:05,441 - DEBUG - Stop API ID <class 'int'>
2018-02-08 12:26:05,441 - DEBUG - Profit API ID <class 'int'>
2018-02-08 12:26:05,441 - DEBUG - Pos is 1
2018-02-08 12:26:05,441 - DEBUG - CurCount is 1
2018-02-08 12:26:05,442 - DEBUG - In Pos 1
2018-02-08 12:26:05,442 - DEBUG - Stop ID is 182
2018-02-08 12:26:05,442 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 12:26:05,443 - DEBUG - EntryPend is 0
2018-02-08 12:26:05,444 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 12:26:05,444 - DEBUG - Entry Date is 10
2018-02-08 12:26:05,444 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 12:26:05,444 - DEBUG - Order Profit ID is 181
2018-02-08 12:26:05,445 - DEBUG - Order Entry ID is 181
2018-02-08 12:26:05,445 - DEBUG - API ID is  0
2018-02-08 12:26:05,445 - DEBUG - Current Position is 1
2018-02-08 12:26:05,445 - DEBUG - Current Position is <class 'str'>
2018-02-08 12:26:05,446 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 12:26:05,446 - DEBUG - Time is 12
2018-02-08 12:26:05,446 - DEBUG - Time is <class 'int'>
2018-02-08 12:26:05,446 - DEBUG - Time is 26
2018-02-08 12:26:05,446 - DEBUG - Time is <class 'int'>
2018-02-08 12:26:05,447 - DEBUG - Disconnected from IBController
2018-02-08 12:26:05,447 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 12:31:01,350 - DEBUG - ****************************************************
2018-02-08 12:31:01,350 - DEBUG - Current Time is 12:31PM
2018-02-08 12:31:01,351 - DEBUG - Starting Pos Mgmt H E
2018-02-08 12:31:01,351 - DEBUG - Connecting to database
2018-02-08 12:31:01,510 - DEBUG - Connected to database
2018-02-08 12:31:01,510 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 12:31:01,512 - DEBUG - Order Profit is 181
2018-02-08 12:31:01,512 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 12:31:01,513 - DEBUG - Stop ID is 182
2018-02-08 12:31:01,514 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 12:31:01,515 - DEBUG - Entry ID is 181
2018-02-08 12:31:01,515 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 12:31:01,517 - DEBUG - OCA ID is 1
2018-02-08 12:31:01,517 - DEBUG - Connecting to IBController
2018-02-08 12:31:02,522 - DEBUG - Connected to IBController
2018-02-08 12:31:02,522 - DEBUG - Position requested
2018-02-08 12:31:02,523 - DEBUG - Pos Mgmt -1
2018-02-08 12:31:02,524 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212BB38>, pos=-1, avgCost=27537.1>
2018-02-08 12:31:02,524 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 12:31:02,524 - DEBUG - ccy2 Currency with position is USD
2018-02-08 12:31:02,525 - DEBUG - Position is -1
2018-02-08 12:31:02,525 - DEBUG - In Position
2018-02-08 12:31:02,525 - DEBUG - Position is 1
2018-02-08 12:31:02,525 - DEBUG - Pos Mgmt 0
2018-02-08 12:31:02,526 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212BC18>, pos=0, avgCost=0.0>
2018-02-08 12:31:02,526 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 12:31:02,526 - DEBUG - ccy2 Currency with position is USD
2018-02-08 12:31:02,526 - DEBUG - Position is 0
2018-02-08 12:31:02,527 - DEBUG - Pos Mgmt -12987
2018-02-08 12:31:02,527 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212BF28>, pos=-12987, avgCost=0.95368235>
2018-02-08 12:31:02,527 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 12:31:02,528 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 12:31:02,528 - DEBUG - Position is -12987
2018-02-08 12:31:03,524 - DEBUG - Open Orders requested
2018-02-08 12:31:03,526 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x000000000212BAC8>, order=<ib.ext.Order.Order object at 0x000000000212BC50>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C0198>>
2018-02-08 12:31:03,526 - DEBUG - Order OrderID 182
2018-02-08 12:31:03,527 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 12:31:03,527 - DEBUG - Order status PreSubmitted
2018-02-08 12:31:03,527 - DEBUG - Order Identification 182
2018-02-08 12:31:03,527 - DEBUG - Order Identification <class 'int'>
2018-02-08 12:31:03,528 - DEBUG - Profit ID from database is 181
2018-02-08 12:31:03,528 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 12:31:03,528 - DEBUG - Stop ID database is 182
2018-02-08 12:31:03,528 - DEBUG - Entry ID database is 181
2018-02-08 12:31:03,529 - DEBUG - Stop API ID is 182
2018-02-08 12:31:05,526 - DEBUG - Connecting to database
2018-02-08 12:31:05,534 - DEBUG - Connected to database
2018-02-08 12:31:05,536 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 12:31:05,536 - DEBUG - Stop loss value is 71.07
2018-02-08 12:31:05,537 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 12:31:05,538 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 12:31:05,539 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 12:31:05,540 - DEBUG - EntryPrice value is 68.85
2018-02-08 12:31:05,546 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 12:31:05,546 - DEBUG - Stop quantity 1
2018-02-08 12:31:05,548 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 12:31:05,549 - DEBUG - Direction is Short
2018-02-08 12:31:05,550 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 12:31:05,550 - DEBUG - Count is 1
2018-02-08 12:31:05,552 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 12:31:05,552 - DEBUG - Stop Loss Flag is 1
2018-02-08 12:31:05,554 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 12:31:05,554 - DEBUG - Max ID Order is (182,)
2018-02-08 12:31:05,554 - DEBUG - Today is 2018-02-08
2018-02-08 12:31:05,555 - DEBUG - Day of the week 3
2018-02-08 12:31:05,555 - DEBUG - Yesterday is 02/07/2018
2018-02-08 12:31:05,555 - DEBUG - In Position is  1
2018-02-08 12:31:05,555 - DEBUG - In Position is  <class 'int'>
2018-02-08 12:31:05,556 - DEBUG - curStopLossFlag is  1
2018-02-08 12:31:05,556 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 12:31:05,556 - DEBUG - Checking if Entry has been filled
2018-02-08 12:31:05,556 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 12:31:05,558 - DEBUG - EntryPend is 0
2018-02-08 12:31:05,558 - DEBUG - Try to Cancel Stop
2018-02-08 12:31:05,558 - DEBUG - Stop API ID 182
2018-02-08 12:31:05,558 - DEBUG - Profit API ID 0
2018-02-08 12:31:05,559 - DEBUG - Stop API ID <class 'int'>
2018-02-08 12:31:05,559 - DEBUG - Profit API ID <class 'int'>
2018-02-08 12:31:05,559 - DEBUG - Pos is 1
2018-02-08 12:31:05,559 - DEBUG - CurCount is 1
2018-02-08 12:31:05,559 - DEBUG - In Pos 1
2018-02-08 12:31:05,560 - DEBUG - Stop ID is 182
2018-02-08 12:31:05,560 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 12:31:05,561 - DEBUG - EntryPend is 0
2018-02-08 12:31:05,562 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 12:31:05,562 - DEBUG - Entry Date is 10
2018-02-08 12:31:05,562 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 12:31:05,562 - DEBUG - Order Profit ID is 181
2018-02-08 12:31:05,562 - DEBUG - Order Entry ID is 181
2018-02-08 12:31:05,563 - DEBUG - API ID is  0
2018-02-08 12:31:05,563 - DEBUG - Current Position is 1
2018-02-08 12:31:05,563 - DEBUG - Current Position is <class 'str'>
2018-02-08 12:31:05,563 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 12:31:05,564 - DEBUG - Time is 12
2018-02-08 12:31:05,564 - DEBUG - Time is <class 'int'>
2018-02-08 12:31:05,564 - DEBUG - Time is 31
2018-02-08 12:31:05,564 - DEBUG - Time is <class 'int'>
2018-02-08 12:31:05,565 - DEBUG - Disconnected from IBController
2018-02-08 12:31:05,565 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 12:36:01,353 - DEBUG - ****************************************************
2018-02-08 12:36:01,354 - DEBUG - Current Time is 12:36PM
2018-02-08 12:36:01,354 - DEBUG - Starting Pos Mgmt H E
2018-02-08 12:36:01,354 - DEBUG - Connecting to database
2018-02-08 12:36:01,386 - DEBUG - Connected to database
2018-02-08 12:36:01,386 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 12:36:01,388 - DEBUG - Order Profit is 181
2018-02-08 12:36:01,388 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 12:36:01,390 - DEBUG - Stop ID is 182
2018-02-08 12:36:01,390 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 12:36:01,391 - DEBUG - Entry ID is 181
2018-02-08 12:36:01,392 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 12:36:01,393 - DEBUG - OCA ID is 1
2018-02-08 12:36:01,393 - DEBUG - Connecting to IBController
2018-02-08 12:36:02,399 - DEBUG - Connected to IBController
2018-02-08 12:36:02,399 - DEBUG - Position requested
2018-02-08 12:36:02,400 - DEBUG - Pos Mgmt -1
2018-02-08 12:36:02,400 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211CE10>, pos=-1, avgCost=27537.1>
2018-02-08 12:36:02,401 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 12:36:02,401 - DEBUG - ccy2 Currency with position is USD
2018-02-08 12:36:02,402 - DEBUG - Position is -1
2018-02-08 12:36:02,402 - DEBUG - In Position
2018-02-08 12:36:02,402 - DEBUG - Position is 1
2018-02-08 12:36:02,402 - DEBUG - Pos Mgmt 0
2018-02-08 12:36:02,403 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211CC18>, pos=0, avgCost=0.0>
2018-02-08 12:36:02,403 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 12:36:02,403 - DEBUG - ccy2 Currency with position is USD
2018-02-08 12:36:02,403 - DEBUG - Position is 0
2018-02-08 12:36:02,404 - DEBUG - Pos Mgmt -12987
2018-02-08 12:36:02,404 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000211CF28>, pos=-12987, avgCost=0.95368235>
2018-02-08 12:36:02,404 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 12:36:02,405 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 12:36:02,405 - DEBUG - Position is -12987
2018-02-08 12:36:03,400 - DEBUG - Open Orders requested
2018-02-08 12:36:03,407 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x000000000211CC18>, order=<ib.ext.Order.Order object at 0x000000000211CC50>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021B1128>>
2018-02-08 12:36:03,408 - DEBUG - Order OrderID 182
2018-02-08 12:36:03,409 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 12:36:03,409 - DEBUG - Order status PreSubmitted
2018-02-08 12:36:03,409 - DEBUG - Order Identification 182
2018-02-08 12:36:03,410 - DEBUG - Order Identification <class 'int'>
2018-02-08 12:36:03,410 - DEBUG - Profit ID from database is 181
2018-02-08 12:36:03,410 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 12:36:03,410 - DEBUG - Stop ID database is 182
2018-02-08 12:36:03,411 - DEBUG - Entry ID database is 181
2018-02-08 12:36:03,411 - DEBUG - Stop API ID is 182
2018-02-08 12:36:05,402 - DEBUG - Connecting to database
2018-02-08 12:36:05,411 - DEBUG - Connected to database
2018-02-08 12:36:05,412 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 12:36:05,413 - DEBUG - Stop loss value is 71.07
2018-02-08 12:36:05,414 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 12:36:05,414 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 12:36:05,416 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 12:36:05,416 - DEBUG - EntryPrice value is 68.85
2018-02-08 12:36:05,417 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 12:36:05,418 - DEBUG - Stop quantity 1
2018-02-08 12:36:05,419 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 12:36:05,419 - DEBUG - Direction is Short
2018-02-08 12:36:05,421 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 12:36:05,421 - DEBUG - Count is 1
2018-02-08 12:36:05,422 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 12:36:05,423 - DEBUG - Stop Loss Flag is 1
2018-02-08 12:36:05,424 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 12:36:05,424 - DEBUG - Max ID Order is (182,)
2018-02-08 12:36:05,425 - DEBUG - Today is 2018-02-08
2018-02-08 12:36:05,425 - DEBUG - Day of the week 3
2018-02-08 12:36:05,425 - DEBUG - Yesterday is 02/07/2018
2018-02-08 12:36:05,426 - DEBUG - In Position is  1
2018-02-08 12:36:05,426 - DEBUG - In Position is  <class 'int'>
2018-02-08 12:36:05,426 - DEBUG - curStopLossFlag is  1
2018-02-08 12:36:05,426 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 12:36:05,427 - DEBUG - Checking if Entry has been filled
2018-02-08 12:36:05,427 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 12:36:05,428 - DEBUG - EntryPend is 0
2018-02-08 12:36:05,429 - DEBUG - Try to Cancel Stop
2018-02-08 12:36:05,429 - DEBUG - Stop API ID 182
2018-02-08 12:36:05,429 - DEBUG - Profit API ID 0
2018-02-08 12:36:05,429 - DEBUG - Stop API ID <class 'int'>
2018-02-08 12:36:05,430 - DEBUG - Profit API ID <class 'int'>
2018-02-08 12:36:05,430 - DEBUG - Pos is 1
2018-02-08 12:36:05,430 - DEBUG - CurCount is 1
2018-02-08 12:36:05,430 - DEBUG - In Pos 1
2018-02-08 12:36:05,430 - DEBUG - Stop ID is 182
2018-02-08 12:36:05,431 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 12:36:05,432 - DEBUG - EntryPend is 0
2018-02-08 12:36:05,432 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 12:36:05,433 - DEBUG - Entry Date is 10
2018-02-08 12:36:05,433 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 12:36:05,433 - DEBUG - Order Profit ID is 181
2018-02-08 12:36:05,433 - DEBUG - Order Entry ID is 181
2018-02-08 12:36:05,433 - DEBUG - API ID is  0
2018-02-08 12:36:05,434 - DEBUG - Current Position is 1
2018-02-08 12:36:05,434 - DEBUG - Current Position is <class 'str'>
2018-02-08 12:36:05,434 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 12:36:05,434 - DEBUG - Time is 12
2018-02-08 12:36:05,435 - DEBUG - Time is <class 'int'>
2018-02-08 12:36:05,435 - DEBUG - Time is 36
2018-02-08 12:36:05,435 - DEBUG - Time is <class 'int'>
2018-02-08 12:36:05,435 - DEBUG - Disconnected from IBController
2018-02-08 12:36:05,436 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 12:41:01,348 - DEBUG - ****************************************************
2018-02-08 12:41:01,348 - DEBUG - Current Time is 12:41PM
2018-02-08 12:41:01,349 - DEBUG - Starting Pos Mgmt H E
2018-02-08 12:41:01,349 - DEBUG - Connecting to database
2018-02-08 12:41:01,368 - DEBUG - Connected to database
2018-02-08 12:41:01,368 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 12:41:01,370 - DEBUG - Order Profit is 181
2018-02-08 12:41:01,370 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 12:41:01,372 - DEBUG - Stop ID is 182
2018-02-08 12:41:01,372 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 12:41:01,374 - DEBUG - Entry ID is 181
2018-02-08 12:41:01,374 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 12:41:01,375 - DEBUG - OCA ID is 1
2018-02-08 12:41:01,376 - DEBUG - Connecting to IBController
2018-02-08 12:41:02,383 - DEBUG - Connected to IBController
2018-02-08 12:41:02,383 - DEBUG - Position requested
2018-02-08 12:41:02,384 - DEBUG - Pos Mgmt -1
2018-02-08 12:41:02,385 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212CB38>, pos=-1, avgCost=27537.1>
2018-02-08 12:41:02,385 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 12:41:02,385 - DEBUG - ccy2 Currency with position is USD
2018-02-08 12:41:02,386 - DEBUG - Position is -1
2018-02-08 12:41:02,386 - DEBUG - In Position
2018-02-08 12:41:02,386 - DEBUG - Position is 1
2018-02-08 12:41:02,386 - DEBUG - Pos Mgmt 0
2018-02-08 12:41:02,387 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212CCC0>, pos=0, avgCost=0.0>
2018-02-08 12:41:02,387 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 12:41:02,387 - DEBUG - ccy2 Currency with position is USD
2018-02-08 12:41:02,387 - DEBUG - Position is 0
2018-02-08 12:41:02,388 - DEBUG - Pos Mgmt -12987
2018-02-08 12:41:02,388 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212CF28>, pos=-12987, avgCost=0.95368235>
2018-02-08 12:41:02,388 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 12:41:02,388 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 12:41:02,389 - DEBUG - Position is -12987
2018-02-08 12:41:03,385 - DEBUG - Open Orders requested
2018-02-08 12:41:03,387 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x000000000212CDA0>, order=<ib.ext.Order.Order object at 0x000000000212CCF8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C2198>>
2018-02-08 12:41:03,387 - DEBUG - Order OrderID 182
2018-02-08 12:41:03,388 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 12:41:03,388 - DEBUG - Order status PreSubmitted
2018-02-08 12:41:03,388 - DEBUG - Order Identification 182
2018-02-08 12:41:03,389 - DEBUG - Order Identification <class 'int'>
2018-02-08 12:41:03,389 - DEBUG - Profit ID from database is 181
2018-02-08 12:41:03,389 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 12:41:03,389 - DEBUG - Stop ID database is 182
2018-02-08 12:41:03,389 - DEBUG - Entry ID database is 181
2018-02-08 12:41:03,390 - DEBUG - Stop API ID is 182
2018-02-08 12:41:05,387 - DEBUG - Connecting to database
2018-02-08 12:41:05,395 - DEBUG - Connected to database
2018-02-08 12:41:05,397 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 12:41:05,398 - DEBUG - Stop loss value is 71.07
2018-02-08 12:41:05,399 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 12:41:05,400 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 12:41:05,401 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 12:41:05,402 - DEBUG - EntryPrice value is 68.85
2018-02-08 12:41:05,403 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 12:41:05,403 - DEBUG - Stop quantity 1
2018-02-08 12:41:05,405 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 12:41:05,405 - DEBUG - Direction is Short
2018-02-08 12:41:05,406 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 12:41:05,407 - DEBUG - Count is 1
2018-02-08 12:41:05,408 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 12:41:05,408 - DEBUG - Stop Loss Flag is 1
2018-02-08 12:41:05,410 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 12:41:05,410 - DEBUG - Max ID Order is (182,)
2018-02-08 12:41:05,410 - DEBUG - Today is 2018-02-08
2018-02-08 12:41:05,411 - DEBUG - Day of the week 3
2018-02-08 12:41:05,411 - DEBUG - Yesterday is 02/07/2018
2018-02-08 12:41:05,411 - DEBUG - In Position is  1
2018-02-08 12:41:05,412 - DEBUG - In Position is  <class 'int'>
2018-02-08 12:41:05,412 - DEBUG - curStopLossFlag is  1
2018-02-08 12:41:05,412 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 12:41:05,412 - DEBUG - Checking if Entry has been filled
2018-02-08 12:41:05,412 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 12:41:05,414 - DEBUG - EntryPend is 0
2018-02-08 12:41:05,414 - DEBUG - Try to Cancel Stop
2018-02-08 12:41:05,414 - DEBUG - Stop API ID 182
2018-02-08 12:41:05,415 - DEBUG - Profit API ID 0
2018-02-08 12:41:05,415 - DEBUG - Stop API ID <class 'int'>
2018-02-08 12:41:05,415 - DEBUG - Profit API ID <class 'int'>
2018-02-08 12:41:05,415 - DEBUG - Pos is 1
2018-02-08 12:41:05,415 - DEBUG - CurCount is 1
2018-02-08 12:41:05,416 - DEBUG - In Pos 1
2018-02-08 12:41:05,416 - DEBUG - Stop ID is 182
2018-02-08 12:41:05,416 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 12:41:05,417 - DEBUG - EntryPend is 0
2018-02-08 12:41:05,418 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 12:41:05,418 - DEBUG - Entry Date is 10
2018-02-08 12:41:05,418 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 12:41:05,418 - DEBUG - Order Profit ID is 181
2018-02-08 12:41:05,419 - DEBUG - Order Entry ID is 181
2018-02-08 12:41:05,419 - DEBUG - API ID is  0
2018-02-08 12:41:05,419 - DEBUG - Current Position is 1
2018-02-08 12:41:05,419 - DEBUG - Current Position is <class 'str'>
2018-02-08 12:41:05,419 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 12:41:05,420 - DEBUG - Time is 12
2018-02-08 12:41:05,420 - DEBUG - Time is <class 'int'>
2018-02-08 12:41:05,420 - DEBUG - Time is 41
2018-02-08 12:41:05,420 - DEBUG - Time is <class 'int'>
2018-02-08 12:41:05,421 - DEBUG - Disconnected from IBController
2018-02-08 12:41:05,421 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 12:46:01,353 - DEBUG - ****************************************************
2018-02-08 12:46:01,353 - DEBUG - Current Time is 12:46PM
2018-02-08 12:46:01,354 - DEBUG - Starting Pos Mgmt H E
2018-02-08 12:46:01,354 - DEBUG - Connecting to database
2018-02-08 12:46:01,391 - DEBUG - Connected to database
2018-02-08 12:46:01,392 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 12:46:01,393 - DEBUG - Order Profit is 181
2018-02-08 12:46:01,394 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 12:46:01,395 - DEBUG - Stop ID is 182
2018-02-08 12:46:01,395 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 12:46:01,397 - DEBUG - Entry ID is 181
2018-02-08 12:46:01,397 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 12:46:01,398 - DEBUG - OCA ID is 1
2018-02-08 12:46:01,399 - DEBUG - Connecting to IBController
2018-02-08 12:46:02,404 - DEBUG - Connected to IBController
2018-02-08 12:46:02,404 - DEBUG - Position requested
2018-02-08 12:46:02,405 - DEBUG - Pos Mgmt -1
2018-02-08 12:46:02,406 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000216CDD8>, pos=-1, avgCost=27537.1>
2018-02-08 12:46:02,406 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 12:46:02,406 - DEBUG - ccy2 Currency with position is USD
2018-02-08 12:46:02,407 - DEBUG - Position is -1
2018-02-08 12:46:02,407 - DEBUG - In Position
2018-02-08 12:46:02,407 - DEBUG - Position is 1
2018-02-08 12:46:02,408 - DEBUG - Pos Mgmt 0
2018-02-08 12:46:02,408 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000216CAC8>, pos=0, avgCost=0.0>
2018-02-08 12:46:02,408 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 12:46:02,408 - DEBUG - ccy2 Currency with position is USD
2018-02-08 12:46:02,408 - DEBUG - Position is 0
2018-02-08 12:46:02,409 - DEBUG - Pos Mgmt -12987
2018-02-08 12:46:02,409 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000216CF28>, pos=-12987, avgCost=0.95368235>
2018-02-08 12:46:02,409 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 12:46:02,410 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 12:46:02,410 - DEBUG - Position is -12987
2018-02-08 12:46:03,405 - DEBUG - Open Orders requested
2018-02-08 12:46:03,406 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x000000000216CE10>, order=<ib.ext.Order.Order object at 0x000000000216CCF8>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002202198>>
2018-02-08 12:46:03,407 - DEBUG - Order OrderID 182
2018-02-08 12:46:03,408 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 12:46:03,408 - DEBUG - Order status PreSubmitted
2018-02-08 12:46:03,408 - DEBUG - Order Identification 182
2018-02-08 12:46:03,409 - DEBUG - Order Identification <class 'int'>
2018-02-08 12:46:03,409 - DEBUG - Profit ID from database is 181
2018-02-08 12:46:03,409 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 12:46:03,409 - DEBUG - Stop ID database is 182
2018-02-08 12:46:03,410 - DEBUG - Entry ID database is 181
2018-02-08 12:46:03,410 - DEBUG - Stop API ID is 182
2018-02-08 12:46:05,407 - DEBUG - Connecting to database
2018-02-08 12:46:05,415 - DEBUG - Connected to database
2018-02-08 12:46:05,417 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 12:46:05,417 - DEBUG - Stop loss value is 71.07
2018-02-08 12:46:05,419 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 12:46:05,419 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 12:46:05,421 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 12:46:05,421 - DEBUG - EntryPrice value is 68.85
2018-02-08 12:46:05,422 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 12:46:05,423 - DEBUG - Stop quantity 1
2018-02-08 12:46:05,424 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 12:46:05,424 - DEBUG - Direction is Short
2018-02-08 12:46:05,426 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 12:46:05,426 - DEBUG - Count is 1
2018-02-08 12:46:05,428 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 12:46:05,428 - DEBUG - Stop Loss Flag is 1
2018-02-08 12:46:05,429 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 12:46:05,430 - DEBUG - Max ID Order is (182,)
2018-02-08 12:46:05,430 - DEBUG - Today is 2018-02-08
2018-02-08 12:46:05,431 - DEBUG - Day of the week 3
2018-02-08 12:46:05,431 - DEBUG - Yesterday is 02/07/2018
2018-02-08 12:46:05,431 - DEBUG - In Position is  1
2018-02-08 12:46:05,431 - DEBUG - In Position is  <class 'int'>
2018-02-08 12:46:05,432 - DEBUG - curStopLossFlag is  1
2018-02-08 12:46:05,432 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 12:46:05,432 - DEBUG - Checking if Entry has been filled
2018-02-08 12:46:05,432 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 12:46:05,434 - DEBUG - EntryPend is 0
2018-02-08 12:46:05,434 - DEBUG - Try to Cancel Stop
2018-02-08 12:46:05,434 - DEBUG - Stop API ID 182
2018-02-08 12:46:05,434 - DEBUG - Profit API ID 0
2018-02-08 12:46:05,435 - DEBUG - Stop API ID <class 'int'>
2018-02-08 12:46:05,435 - DEBUG - Profit API ID <class 'int'>
2018-02-08 12:46:05,435 - DEBUG - Pos is 1
2018-02-08 12:46:05,435 - DEBUG - CurCount is 1
2018-02-08 12:46:05,435 - DEBUG - In Pos 1
2018-02-08 12:46:05,436 - DEBUG - Stop ID is 182
2018-02-08 12:46:05,436 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 12:46:05,437 - DEBUG - EntryPend is 0
2018-02-08 12:46:05,437 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 12:46:05,438 - DEBUG - Entry Date is 10
2018-02-08 12:46:05,438 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 12:46:05,438 - DEBUG - Order Profit ID is 181
2018-02-08 12:46:05,438 - DEBUG - Order Entry ID is 181
2018-02-08 12:46:05,439 - DEBUG - API ID is  0
2018-02-08 12:46:05,439 - DEBUG - Current Position is 1
2018-02-08 12:46:05,439 - DEBUG - Current Position is <class 'str'>
2018-02-08 12:46:05,439 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 12:46:05,440 - DEBUG - Time is 12
2018-02-08 12:46:05,440 - DEBUG - Time is <class 'int'>
2018-02-08 12:46:05,440 - DEBUG - Time is 46
2018-02-08 12:46:05,440 - DEBUG - Time is <class 'int'>
2018-02-08 12:46:05,441 - DEBUG - Disconnected from IBController
2018-02-08 12:46:05,441 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 12:51:01,349 - DEBUG - ****************************************************
2018-02-08 12:51:01,350 - DEBUG - Current Time is 12:51PM
2018-02-08 12:51:01,350 - DEBUG - Starting Pos Mgmt H E
2018-02-08 12:51:01,351 - DEBUG - Connecting to database
2018-02-08 12:51:01,371 - DEBUG - Connected to database
2018-02-08 12:51:01,371 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 12:51:01,373 - DEBUG - Order Profit is 181
2018-02-08 12:51:01,373 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 12:51:01,375 - DEBUG - Stop ID is 182
2018-02-08 12:51:01,375 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 12:51:01,376 - DEBUG - Entry ID is 181
2018-02-08 12:51:01,377 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 12:51:01,378 - DEBUG - OCA ID is 1
2018-02-08 12:51:01,379 - DEBUG - Connecting to IBController
2018-02-08 12:51:02,385 - DEBUG - Connected to IBController
2018-02-08 12:51:02,385 - DEBUG - Position requested
2018-02-08 12:51:02,386 - DEBUG - Pos Mgmt -1
2018-02-08 12:51:02,387 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212DB38>, pos=-1, avgCost=27537.1>
2018-02-08 12:51:02,387 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 12:51:02,387 - DEBUG - ccy2 Currency with position is USD
2018-02-08 12:51:02,388 - DEBUG - Position is -1
2018-02-08 12:51:02,388 - DEBUG - In Position
2018-02-08 12:51:02,388 - DEBUG - Position is 1
2018-02-08 12:51:02,389 - DEBUG - Pos Mgmt 0
2018-02-08 12:51:02,389 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212DCF8>, pos=0, avgCost=0.0>
2018-02-08 12:51:02,389 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 12:51:02,389 - DEBUG - ccy2 Currency with position is USD
2018-02-08 12:51:02,390 - DEBUG - Position is 0
2018-02-08 12:51:02,390 - DEBUG - Pos Mgmt -12987
2018-02-08 12:51:02,390 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212DF28>, pos=-12987, avgCost=0.95368235>
2018-02-08 12:51:02,391 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 12:51:02,391 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 12:51:02,391 - DEBUG - Position is -12987
2018-02-08 12:51:03,387 - DEBUG - Open Orders requested
2018-02-08 12:51:03,389 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x000000000212DCF8>, order=<ib.ext.Order.Order object at 0x000000000212DBE0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C1128>>
2018-02-08 12:51:03,389 - DEBUG - Order OrderID 182
2018-02-08 12:51:03,390 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 12:51:03,390 - DEBUG - Order status PreSubmitted
2018-02-08 12:51:03,390 - DEBUG - Order Identification 182
2018-02-08 12:51:03,390 - DEBUG - Order Identification <class 'int'>
2018-02-08 12:51:03,391 - DEBUG - Profit ID from database is 181
2018-02-08 12:51:03,391 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 12:51:03,391 - DEBUG - Stop ID database is 182
2018-02-08 12:51:03,391 - DEBUG - Entry ID database is 181
2018-02-08 12:51:03,392 - DEBUG - Stop API ID is 182
2018-02-08 12:51:05,389 - DEBUG - Connecting to database
2018-02-08 12:51:05,396 - DEBUG - Connected to database
2018-02-08 12:51:05,398 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 12:51:05,398 - DEBUG - Stop loss value is 71.07
2018-02-08 12:51:05,409 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 12:51:05,409 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 12:51:05,411 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 12:51:05,411 - DEBUG - EntryPrice value is 68.85
2018-02-08 12:51:05,412 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 12:51:05,413 - DEBUG - Stop quantity 1
2018-02-08 12:51:05,414 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 12:51:05,414 - DEBUG - Direction is Short
2018-02-08 12:51:05,416 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 12:51:05,416 - DEBUG - Count is 1
2018-02-08 12:51:05,417 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 12:51:05,418 - DEBUG - Stop Loss Flag is 1
2018-02-08 12:51:05,419 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 12:51:05,419 - DEBUG - Max ID Order is (182,)
2018-02-08 12:51:05,420 - DEBUG - Today is 2018-02-08
2018-02-08 12:51:05,420 - DEBUG - Day of the week 3
2018-02-08 12:51:05,420 - DEBUG - Yesterday is 02/07/2018
2018-02-08 12:51:05,421 - DEBUG - In Position is  1
2018-02-08 12:51:05,421 - DEBUG - In Position is  <class 'int'>
2018-02-08 12:51:05,421 - DEBUG - curStopLossFlag is  1
2018-02-08 12:51:05,421 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 12:51:05,422 - DEBUG - Checking if Entry has been filled
2018-02-08 12:51:05,422 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 12:51:05,423 - DEBUG - EntryPend is 0
2018-02-08 12:51:05,424 - DEBUG - Try to Cancel Stop
2018-02-08 12:51:05,424 - DEBUG - Stop API ID 182
2018-02-08 12:51:05,424 - DEBUG - Profit API ID 0
2018-02-08 12:51:05,424 - DEBUG - Stop API ID <class 'int'>
2018-02-08 12:51:05,425 - DEBUG - Profit API ID <class 'int'>
2018-02-08 12:51:05,425 - DEBUG - Pos is 1
2018-02-08 12:51:05,425 - DEBUG - CurCount is 1
2018-02-08 12:51:05,425 - DEBUG - In Pos 1
2018-02-08 12:51:05,425 - DEBUG - Stop ID is 182
2018-02-08 12:51:05,426 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 12:51:05,427 - DEBUG - EntryPend is 0
2018-02-08 12:51:05,427 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 12:51:05,427 - DEBUG - Entry Date is 10
2018-02-08 12:51:05,428 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 12:51:05,428 - DEBUG - Order Profit ID is 181
2018-02-08 12:51:05,428 - DEBUG - Order Entry ID is 181
2018-02-08 12:51:05,428 - DEBUG - API ID is  0
2018-02-08 12:51:05,429 - DEBUG - Current Position is 1
2018-02-08 12:51:05,429 - DEBUG - Current Position is <class 'str'>
2018-02-08 12:51:05,429 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 12:51:05,429 - DEBUG - Time is 12
2018-02-08 12:51:05,429 - DEBUG - Time is <class 'int'>
2018-02-08 12:51:05,430 - DEBUG - Time is 51
2018-02-08 12:51:05,430 - DEBUG - Time is <class 'int'>
2018-02-08 12:51:05,430 - DEBUG - Disconnected from IBController
2018-02-08 12:51:05,430 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 12:56:01,367 - DEBUG - ****************************************************
2018-02-08 12:56:01,367 - DEBUG - Current Time is 12:56PM
2018-02-08 12:56:01,367 - DEBUG - Starting Pos Mgmt H E
2018-02-08 12:56:01,368 - DEBUG - Connecting to database
2018-02-08 12:56:01,400 - DEBUG - Connected to database
2018-02-08 12:56:01,400 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 12:56:01,403 - DEBUG - Order Profit is 181
2018-02-08 12:56:01,403 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 12:56:01,405 - DEBUG - Stop ID is 182
2018-02-08 12:56:01,405 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 12:56:01,407 - DEBUG - Entry ID is 181
2018-02-08 12:56:01,407 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 12:56:01,409 - DEBUG - OCA ID is 1
2018-02-08 12:56:01,409 - DEBUG - Connecting to IBController
2018-02-08 12:56:02,415 - DEBUG - Connected to IBController
2018-02-08 12:56:02,415 - DEBUG - Position requested
2018-02-08 12:56:02,416 - DEBUG - Pos Mgmt -1
2018-02-08 12:56:02,417 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020EDB38>, pos=-1, avgCost=27537.1>
2018-02-08 12:56:02,417 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 12:56:02,417 - DEBUG - ccy2 Currency with position is USD
2018-02-08 12:56:02,417 - DEBUG - Position is -1
2018-02-08 12:56:02,418 - DEBUG - In Position
2018-02-08 12:56:02,418 - DEBUG - Position is 1
2018-02-08 12:56:02,418 - DEBUG - Pos Mgmt 0
2018-02-08 12:56:02,419 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020EDAC8>, pos=0, avgCost=0.0>
2018-02-08 12:56:02,419 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 12:56:02,419 - DEBUG - ccy2 Currency with position is USD
2018-02-08 12:56:02,419 - DEBUG - Position is 0
2018-02-08 12:56:02,420 - DEBUG - Pos Mgmt -12987
2018-02-08 12:56:02,420 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020EDF28>, pos=-12987, avgCost=0.95368235>
2018-02-08 12:56:02,426 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 12:56:02,426 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 12:56:02,426 - DEBUG - Position is -12987
2018-02-08 12:56:03,416 - DEBUG - Open Orders requested
2018-02-08 12:56:03,421 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x00000000020EDC18>, order=<ib.ext.Order.Order object at 0x00000000020EDC88>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002182198>>
2018-02-08 12:56:03,421 - DEBUG - Order OrderID 182
2018-02-08 12:56:03,422 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 12:56:03,422 - DEBUG - Order status PreSubmitted
2018-02-08 12:56:03,423 - DEBUG - Order Identification 182
2018-02-08 12:56:03,423 - DEBUG - Order Identification <class 'int'>
2018-02-08 12:56:03,423 - DEBUG - Profit ID from database is 181
2018-02-08 12:56:03,423 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 12:56:03,424 - DEBUG - Stop ID database is 182
2018-02-08 12:56:03,424 - DEBUG - Entry ID database is 181
2018-02-08 12:56:03,424 - DEBUG - Stop API ID is 182
2018-02-08 12:56:05,421 - DEBUG - Connecting to database
2018-02-08 12:56:05,428 - DEBUG - Connected to database
2018-02-08 12:56:05,430 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 12:56:05,430 - DEBUG - Stop loss value is 71.07
2018-02-08 12:56:05,434 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 12:56:05,434 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 12:56:05,436 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 12:56:05,436 - DEBUG - EntryPrice value is 68.85
2018-02-08 12:56:05,439 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 12:56:05,439 - DEBUG - Stop quantity 1
2018-02-08 12:56:05,440 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 12:56:05,441 - DEBUG - Direction is Short
2018-02-08 12:56:05,442 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 12:56:05,442 - DEBUG - Count is 1
2018-02-08 12:56:05,444 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 12:56:05,444 - DEBUG - Stop Loss Flag is 1
2018-02-08 12:56:05,445 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 12:56:05,445 - DEBUG - Max ID Order is (182,)
2018-02-08 12:56:05,446 - DEBUG - Today is 2018-02-08
2018-02-08 12:56:05,446 - DEBUG - Day of the week 3
2018-02-08 12:56:05,447 - DEBUG - Yesterday is 02/07/2018
2018-02-08 12:56:05,447 - DEBUG - In Position is  1
2018-02-08 12:56:05,447 - DEBUG - In Position is  <class 'int'>
2018-02-08 12:56:05,447 - DEBUG - curStopLossFlag is  1
2018-02-08 12:56:05,447 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 12:56:05,448 - DEBUG - Checking if Entry has been filled
2018-02-08 12:56:05,448 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 12:56:05,449 - DEBUG - EntryPend is 0
2018-02-08 12:56:05,450 - DEBUG - Try to Cancel Stop
2018-02-08 12:56:05,450 - DEBUG - Stop API ID 182
2018-02-08 12:56:05,450 - DEBUG - Profit API ID 0
2018-02-08 12:56:05,450 - DEBUG - Stop API ID <class 'int'>
2018-02-08 12:56:05,450 - DEBUG - Profit API ID <class 'int'>
2018-02-08 12:56:05,451 - DEBUG - Pos is 1
2018-02-08 12:56:05,451 - DEBUG - CurCount is 1
2018-02-08 12:56:05,451 - DEBUG - In Pos 1
2018-02-08 12:56:05,451 - DEBUG - Stop ID is 182
2018-02-08 12:56:05,451 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 12:56:05,453 - DEBUG - EntryPend is 0
2018-02-08 12:56:05,453 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 12:56:05,453 - DEBUG - Entry Date is 10
2018-02-08 12:56:05,454 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 12:56:05,454 - DEBUG - Order Profit ID is 181
2018-02-08 12:56:05,454 - DEBUG - Order Entry ID is 181
2018-02-08 12:56:05,454 - DEBUG - API ID is  0
2018-02-08 12:56:05,455 - DEBUG - Current Position is 1
2018-02-08 12:56:05,455 - DEBUG - Current Position is <class 'str'>
2018-02-08 12:56:05,455 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 12:56:05,455 - DEBUG - Time is 12
2018-02-08 12:56:05,455 - DEBUG - Time is <class 'int'>
2018-02-08 12:56:05,456 - DEBUG - Time is 56
2018-02-08 12:56:05,456 - DEBUG - Time is <class 'int'>
2018-02-08 12:56:05,456 - DEBUG - Disconnected from IBController
2018-02-08 12:56:05,458 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 13:01:01,446 - DEBUG - ****************************************************
2018-02-08 13:01:01,446 - DEBUG - Current Time is 01:01PM
2018-02-08 13:01:01,447 - DEBUG - Starting Pos Mgmt H E
2018-02-08 13:01:01,447 - DEBUG - Connecting to database
2018-02-08 13:01:01,478 - DEBUG - Connected to database
2018-02-08 13:01:01,479 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 13:01:01,481 - DEBUG - Order Profit is 181
2018-02-08 13:01:01,481 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 13:01:01,482 - DEBUG - Stop ID is 182
2018-02-08 13:01:01,483 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 13:01:01,484 - DEBUG - Entry ID is 181
2018-02-08 13:01:01,485 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 13:01:01,486 - DEBUG - OCA ID is 1
2018-02-08 13:01:01,487 - DEBUG - Connecting to IBController
2018-02-08 13:01:02,493 - DEBUG - Connected to IBController
2018-02-08 13:01:02,493 - DEBUG - Position requested
2018-02-08 13:01:02,495 - DEBUG - Pos Mgmt -1
2018-02-08 13:01:02,495 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210DB38>, pos=-1, avgCost=27537.1>
2018-02-08 13:01:02,495 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 13:01:02,496 - DEBUG - ccy2 Currency with position is USD
2018-02-08 13:01:02,496 - DEBUG - Position is -1
2018-02-08 13:01:02,496 - DEBUG - In Position
2018-02-08 13:01:02,496 - DEBUG - Position is 1
2018-02-08 13:01:02,497 - DEBUG - Pos Mgmt 0
2018-02-08 13:01:02,497 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210DCF8>, pos=0, avgCost=0.0>
2018-02-08 13:01:02,497 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 13:01:02,497 - DEBUG - ccy2 Currency with position is USD
2018-02-08 13:01:02,498 - DEBUG - Position is 0
2018-02-08 13:01:02,498 - DEBUG - Pos Mgmt -12987
2018-02-08 13:01:02,498 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210DF28>, pos=-12987, avgCost=0.95368235>
2018-02-08 13:01:02,499 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 13:01:02,499 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 13:01:02,499 - DEBUG - Position is -12987
2018-02-08 13:01:03,495 - DEBUG - Open Orders requested
2018-02-08 13:01:03,497 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x000000000210DD30>, order=<ib.ext.Order.Order object at 0x000000000210DCC0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A2198>>
2018-02-08 13:01:03,497 - DEBUG - Order OrderID 182
2018-02-08 13:01:03,498 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 13:01:03,498 - DEBUG - Order status PreSubmitted
2018-02-08 13:01:03,498 - DEBUG - Order Identification 182
2018-02-08 13:01:03,499 - DEBUG - Order Identification <class 'int'>
2018-02-08 13:01:03,499 - DEBUG - Profit ID from database is 181
2018-02-08 13:01:03,499 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 13:01:03,499 - DEBUG - Stop ID database is 182
2018-02-08 13:01:03,500 - DEBUG - Entry ID database is 181
2018-02-08 13:01:03,500 - DEBUG - Stop API ID is 182
2018-02-08 13:01:05,497 - DEBUG - Connecting to database
2018-02-08 13:01:05,505 - DEBUG - Connected to database
2018-02-08 13:01:05,507 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 13:01:05,507 - DEBUG - Stop loss value is 71.07
2018-02-08 13:01:05,511 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 13:01:05,511 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 13:01:05,515 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 13:01:05,515 - DEBUG - EntryPrice value is 68.85
2018-02-08 13:01:05,517 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 13:01:05,518 - DEBUG - Stop quantity 1
2018-02-08 13:01:05,527 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 13:01:05,527 - DEBUG - Direction is Short
2018-02-08 13:01:05,531 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 13:01:05,531 - DEBUG - Count is 1
2018-02-08 13:01:05,532 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 13:01:05,533 - DEBUG - Stop Loss Flag is 1
2018-02-08 13:01:05,534 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 13:01:05,534 - DEBUG - Max ID Order is (182,)
2018-02-08 13:01:05,535 - DEBUG - Today is 2018-02-08
2018-02-08 13:01:05,535 - DEBUG - Day of the week 3
2018-02-08 13:01:05,536 - DEBUG - Yesterday is 02/07/2018
2018-02-08 13:01:05,536 - DEBUG - In Position is  1
2018-02-08 13:01:05,536 - DEBUG - In Position is  <class 'int'>
2018-02-08 13:01:05,536 - DEBUG - curStopLossFlag is  1
2018-02-08 13:01:05,537 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 13:01:05,537 - DEBUG - Checking if Entry has been filled
2018-02-08 13:01:05,537 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 13:01:05,538 - DEBUG - EntryPend is 0
2018-02-08 13:01:05,539 - DEBUG - Try to Cancel Stop
2018-02-08 13:01:05,539 - DEBUG - Stop API ID 182
2018-02-08 13:01:05,539 - DEBUG - Profit API ID 0
2018-02-08 13:01:05,539 - DEBUG - Stop API ID <class 'int'>
2018-02-08 13:01:05,540 - DEBUG - Profit API ID <class 'int'>
2018-02-08 13:01:05,540 - DEBUG - Pos is 1
2018-02-08 13:01:05,540 - DEBUG - CurCount is 1
2018-02-08 13:01:05,540 - DEBUG - In Pos 1
2018-02-08 13:01:05,541 - DEBUG - Stop ID is 182
2018-02-08 13:01:05,541 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 13:01:05,542 - DEBUG - EntryPend is 0
2018-02-08 13:01:05,542 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 13:01:05,543 - DEBUG - Entry Date is 10
2018-02-08 13:01:05,543 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 13:01:05,543 - DEBUG - Order Profit ID is 181
2018-02-08 13:01:05,543 - DEBUG - Order Entry ID is 181
2018-02-08 13:01:05,544 - DEBUG - API ID is  0
2018-02-08 13:01:05,544 - DEBUG - Current Position is 1
2018-02-08 13:01:05,544 - DEBUG - Current Position is <class 'str'>
2018-02-08 13:01:05,544 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 13:01:05,545 - DEBUG - Time is 13
2018-02-08 13:01:05,545 - DEBUG - Time is <class 'int'>
2018-02-08 13:01:05,545 - DEBUG - Time is 1
2018-02-08 13:01:05,545 - DEBUG - Time is <class 'int'>
2018-02-08 13:01:05,546 - DEBUG - Disconnected from IBController
2018-02-08 13:01:05,546 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 13:06:01,457 - DEBUG - ****************************************************
2018-02-08 13:06:01,458 - DEBUG - Current Time is 01:06PM
2018-02-08 13:06:01,459 - DEBUG - Starting Pos Mgmt H E
2018-02-08 13:06:01,459 - DEBUG - Connecting to database
2018-02-08 13:06:01,497 - DEBUG - Connected to database
2018-02-08 13:06:01,498 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 13:06:01,499 - DEBUG - Order Profit is 181
2018-02-08 13:06:01,500 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 13:06:01,501 - DEBUG - Stop ID is 182
2018-02-08 13:06:01,502 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 13:06:01,503 - DEBUG - Entry ID is 181
2018-02-08 13:06:01,504 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 13:06:01,505 - DEBUG - OCA ID is 1
2018-02-08 13:06:01,506 - DEBUG - Connecting to IBController
2018-02-08 13:06:02,511 - DEBUG - Connected to IBController
2018-02-08 13:06:02,511 - DEBUG - Position requested
2018-02-08 13:06:02,512 - DEBUG - Pos Mgmt -1
2018-02-08 13:06:02,513 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212DD30>, pos=-1, avgCost=27537.1>
2018-02-08 13:06:02,513 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 13:06:02,513 - DEBUG - ccy2 Currency with position is USD
2018-02-08 13:06:02,514 - DEBUG - Position is -1
2018-02-08 13:06:02,514 - DEBUG - In Position
2018-02-08 13:06:02,514 - DEBUG - Position is 1
2018-02-08 13:06:02,515 - DEBUG - Pos Mgmt 0
2018-02-08 13:06:02,515 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212DC88>, pos=0, avgCost=0.0>
2018-02-08 13:06:02,515 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 13:06:02,515 - DEBUG - ccy2 Currency with position is USD
2018-02-08 13:06:02,516 - DEBUG - Position is 0
2018-02-08 13:06:02,516 - DEBUG - Pos Mgmt -12987
2018-02-08 13:06:02,516 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000212DF28>, pos=-12987, avgCost=0.95368235>
2018-02-08 13:06:02,516 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 13:06:02,517 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 13:06:02,517 - DEBUG - Position is -12987
2018-02-08 13:06:03,512 - DEBUG - Open Orders requested
2018-02-08 13:06:03,514 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x000000000212DB38>, order=<ib.ext.Order.Order object at 0x000000000212DC50>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021C1198>>
2018-02-08 13:06:03,514 - DEBUG - Order OrderID 182
2018-02-08 13:06:03,515 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 13:06:03,515 - DEBUG - Order status PreSubmitted
2018-02-08 13:06:03,516 - DEBUG - Order Identification 182
2018-02-08 13:06:03,516 - DEBUG - Order Identification <class 'int'>
2018-02-08 13:06:03,516 - DEBUG - Profit ID from database is 181
2018-02-08 13:06:03,516 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 13:06:03,517 - DEBUG - Stop ID database is 182
2018-02-08 13:06:03,517 - DEBUG - Entry ID database is 181
2018-02-08 13:06:03,517 - DEBUG - Stop API ID is 182
2018-02-08 13:06:05,514 - DEBUG - Connecting to database
2018-02-08 13:06:05,521 - DEBUG - Connected to database
2018-02-08 13:06:05,523 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 13:06:05,523 - DEBUG - Stop loss value is 71.07
2018-02-08 13:06:05,525 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 13:06:05,525 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 13:06:05,526 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 13:06:05,527 - DEBUG - EntryPrice value is 68.85
2018-02-08 13:06:05,528 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 13:06:05,529 - DEBUG - Stop quantity 1
2018-02-08 13:06:05,530 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 13:06:05,530 - DEBUG - Direction is Short
2018-02-08 13:06:05,532 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 13:06:05,532 - DEBUG - Count is 1
2018-02-08 13:06:05,534 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 13:06:05,534 - DEBUG - Stop Loss Flag is 1
2018-02-08 13:06:05,535 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 13:06:05,536 - DEBUG - Max ID Order is (182,)
2018-02-08 13:06:05,536 - DEBUG - Today is 2018-02-08
2018-02-08 13:06:05,537 - DEBUG - Day of the week 3
2018-02-08 13:06:05,537 - DEBUG - Yesterday is 02/07/2018
2018-02-08 13:06:05,537 - DEBUG - In Position is  1
2018-02-08 13:06:05,537 - DEBUG - In Position is  <class 'int'>
2018-02-08 13:06:05,538 - DEBUG - curStopLossFlag is  1
2018-02-08 13:06:05,538 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 13:06:05,538 - DEBUG - Checking if Entry has been filled
2018-02-08 13:06:05,538 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 13:06:05,540 - DEBUG - EntryPend is 0
2018-02-08 13:06:05,540 - DEBUG - Try to Cancel Stop
2018-02-08 13:06:05,540 - DEBUG - Stop API ID 182
2018-02-08 13:06:05,541 - DEBUG - Profit API ID 0
2018-02-08 13:06:05,541 - DEBUG - Stop API ID <class 'int'>
2018-02-08 13:06:05,541 - DEBUG - Profit API ID <class 'int'>
2018-02-08 13:06:05,541 - DEBUG - Pos is 1
2018-02-08 13:06:05,542 - DEBUG - CurCount is 1
2018-02-08 13:06:05,542 - DEBUG - In Pos 1
2018-02-08 13:06:05,542 - DEBUG - Stop ID is 182
2018-02-08 13:06:05,542 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 13:06:05,544 - DEBUG - EntryPend is 0
2018-02-08 13:06:05,544 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 13:06:05,544 - DEBUG - Entry Date is 10
2018-02-08 13:06:05,544 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 13:06:05,545 - DEBUG - Order Profit ID is 181
2018-02-08 13:06:05,545 - DEBUG - Order Entry ID is 181
2018-02-08 13:06:05,545 - DEBUG - API ID is  0
2018-02-08 13:06:05,545 - DEBUG - Current Position is 1
2018-02-08 13:06:05,546 - DEBUG - Current Position is <class 'str'>
2018-02-08 13:06:05,546 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 13:06:05,546 - DEBUG - Time is 13
2018-02-08 13:06:05,546 - DEBUG - Time is <class 'int'>
2018-02-08 13:06:05,547 - DEBUG - Time is 6
2018-02-08 13:06:05,547 - DEBUG - Time is <class 'int'>
2018-02-08 13:06:05,547 - DEBUG - Disconnected from IBController
2018-02-08 13:06:05,548 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 13:11:01,360 - DEBUG - ****************************************************
2018-02-08 13:11:01,361 - DEBUG - Current Time is 01:11PM
2018-02-08 13:11:01,361 - DEBUG - Starting Pos Mgmt H E
2018-02-08 13:11:01,361 - DEBUG - Connecting to database
2018-02-08 13:11:01,397 - DEBUG - Connected to database
2018-02-08 13:11:01,398 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 13:11:01,400 - DEBUG - Order Profit is 181
2018-02-08 13:11:01,400 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 13:11:01,404 - DEBUG - Stop ID is 182
2018-02-08 13:11:01,405 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 13:11:01,413 - DEBUG - Entry ID is 181
2018-02-08 13:11:01,413 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 13:11:01,415 - DEBUG - OCA ID is 1
2018-02-08 13:11:01,415 - DEBUG - Connecting to IBController
2018-02-08 13:11:02,424 - DEBUG - Connected to IBController
2018-02-08 13:11:02,424 - DEBUG - Position requested
2018-02-08 13:11:02,428 - DEBUG - Pos Mgmt -1
2018-02-08 13:11:02,428 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210CD68>, pos=-1, avgCost=27537.1>
2018-02-08 13:11:02,429 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 13:11:02,429 - DEBUG - ccy2 Currency with position is USD
2018-02-08 13:11:02,429 - DEBUG - Position is -1
2018-02-08 13:11:02,429 - DEBUG - In Position
2018-02-08 13:11:02,430 - DEBUG - Position is 1
2018-02-08 13:11:02,430 - DEBUG - Pos Mgmt 0
2018-02-08 13:11:02,430 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210CC88>, pos=0, avgCost=0.0>
2018-02-08 13:11:02,431 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 13:11:02,431 - DEBUG - ccy2 Currency with position is USD
2018-02-08 13:11:02,431 - DEBUG - Position is 0
2018-02-08 13:11:02,432 - DEBUG - Pos Mgmt -12987
2018-02-08 13:11:02,432 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210CF98>, pos=-12987, avgCost=0.95368235>
2018-02-08 13:11:02,432 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 13:11:02,432 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 13:11:02,432 - DEBUG - Position is -12987
2018-02-08 13:11:03,425 - DEBUG - Open Orders requested
2018-02-08 13:11:03,434 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x000000000210CC88>, order=<ib.ext.Order.Order object at 0x000000000210CC50>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A2128>>
2018-02-08 13:11:03,434 - DEBUG - Order OrderID 182
2018-02-08 13:11:03,435 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 13:11:03,435 - DEBUG - Order status PreSubmitted
2018-02-08 13:11:03,436 - DEBUG - Order Identification 182
2018-02-08 13:11:03,436 - DEBUG - Order Identification <class 'int'>
2018-02-08 13:11:03,436 - DEBUG - Profit ID from database is 181
2018-02-08 13:11:03,437 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 13:11:03,437 - DEBUG - Stop ID database is 182
2018-02-08 13:11:03,437 - DEBUG - Entry ID database is 181
2018-02-08 13:11:03,438 - DEBUG - Stop API ID is 182
2018-02-08 13:11:05,425 - DEBUG - Connecting to database
2018-02-08 13:11:05,432 - DEBUG - Connected to database
2018-02-08 13:11:05,433 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 13:11:05,434 - DEBUG - Stop loss value is 71.07
2018-02-08 13:11:05,435 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 13:11:05,436 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 13:11:05,437 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 13:11:05,437 - DEBUG - EntryPrice value is 68.85
2018-02-08 13:11:05,439 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 13:11:05,439 - DEBUG - Stop quantity 1
2018-02-08 13:11:05,440 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 13:11:05,441 - DEBUG - Direction is Short
2018-02-08 13:11:05,442 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 13:11:05,443 - DEBUG - Count is 1
2018-02-08 13:11:05,444 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 13:11:05,444 - DEBUG - Stop Loss Flag is 1
2018-02-08 13:11:05,446 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 13:11:05,446 - DEBUG - Max ID Order is (182,)
2018-02-08 13:11:05,446 - DEBUG - Today is 2018-02-08
2018-02-08 13:11:05,447 - DEBUG - Day of the week 3
2018-02-08 13:11:05,447 - DEBUG - Yesterday is 02/07/2018
2018-02-08 13:11:05,447 - DEBUG - In Position is  1
2018-02-08 13:11:05,447 - DEBUG - In Position is  <class 'int'>
2018-02-08 13:11:05,448 - DEBUG - curStopLossFlag is  1
2018-02-08 13:11:05,448 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 13:11:05,448 - DEBUG - Checking if Entry has been filled
2018-02-08 13:11:05,448 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 13:11:05,450 - DEBUG - EntryPend is 0
2018-02-08 13:11:05,450 - DEBUG - Try to Cancel Stop
2018-02-08 13:11:05,450 - DEBUG - Stop API ID 182
2018-02-08 13:11:05,451 - DEBUG - Profit API ID 0
2018-02-08 13:11:05,451 - DEBUG - Stop API ID <class 'int'>
2018-02-08 13:11:05,451 - DEBUG - Profit API ID <class 'int'>
2018-02-08 13:11:05,451 - DEBUG - Pos is 1
2018-02-08 13:11:05,452 - DEBUG - CurCount is 1
2018-02-08 13:11:05,452 - DEBUG - In Pos 1
2018-02-08 13:11:05,452 - DEBUG - Stop ID is 182
2018-02-08 13:11:05,452 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 13:11:05,454 - DEBUG - EntryPend is 0
2018-02-08 13:11:05,454 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 13:11:05,454 - DEBUG - Entry Date is 10
2018-02-08 13:11:05,454 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 13:11:05,455 - DEBUG - Order Profit ID is 181
2018-02-08 13:11:05,455 - DEBUG - Order Entry ID is 181
2018-02-08 13:11:05,455 - DEBUG - API ID is  0
2018-02-08 13:11:05,455 - DEBUG - Current Position is 1
2018-02-08 13:11:05,456 - DEBUG - Current Position is <class 'str'>
2018-02-08 13:11:05,456 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 13:11:05,456 - DEBUG - Time is 13
2018-02-08 13:11:05,456 - DEBUG - Time is <class 'int'>
2018-02-08 13:11:05,456 - DEBUG - Time is 11
2018-02-08 13:11:05,457 - DEBUG - Time is <class 'int'>
2018-02-08 13:11:05,457 - DEBUG - Disconnected from IBController
2018-02-08 13:11:05,458 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 13:16:01,349 - DEBUG - ****************************************************
2018-02-08 13:16:01,350 - DEBUG - Current Time is 01:16PM
2018-02-08 13:16:01,350 - DEBUG - Starting Pos Mgmt H E
2018-02-08 13:16:01,350 - DEBUG - Connecting to database
2018-02-08 13:16:01,369 - DEBUG - Connected to database
2018-02-08 13:16:01,370 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 13:16:01,371 - DEBUG - Order Profit is 181
2018-02-08 13:16:01,371 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 13:16:01,373 - DEBUG - Stop ID is 182
2018-02-08 13:16:01,373 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 13:16:01,374 - DEBUG - Entry ID is 181
2018-02-08 13:16:01,375 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 13:16:01,376 - DEBUG - OCA ID is 1
2018-02-08 13:16:01,377 - DEBUG - Connecting to IBController
2018-02-08 13:16:02,382 - DEBUG - Connected to IBController
2018-02-08 13:16:02,382 - DEBUG - Position requested
2018-02-08 13:16:02,389 - DEBUG - Pos Mgmt -1
2018-02-08 13:16:02,390 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000216DE10>, pos=-1, avgCost=27537.1>
2018-02-08 13:16:02,390 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 13:16:02,391 - DEBUG - ccy2 Currency with position is USD
2018-02-08 13:16:02,391 - DEBUG - Position is -1
2018-02-08 13:16:02,391 - DEBUG - In Position
2018-02-08 13:16:02,391 - DEBUG - Position is 1
2018-02-08 13:16:02,392 - DEBUG - Pos Mgmt 0
2018-02-08 13:16:02,392 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000216DC50>, pos=0, avgCost=0.0>
2018-02-08 13:16:02,392 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 13:16:02,392 - DEBUG - ccy2 Currency with position is USD
2018-02-08 13:16:02,393 - DEBUG - Position is 0
2018-02-08 13:16:02,393 - DEBUG - Pos Mgmt -12987
2018-02-08 13:16:02,393 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000216DF28>, pos=-12987, avgCost=0.95368235>
2018-02-08 13:16:02,393 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 13:16:02,394 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 13:16:02,394 - DEBUG - Position is -12987
2018-02-08 13:16:03,382 - DEBUG - Open Orders requested
2018-02-08 13:16:03,384 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x000000000216DD30>, order=<ib.ext.Order.Order object at 0x000000000216DBE0>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002202198>>
2018-02-08 13:16:03,384 - DEBUG - Order OrderID 182
2018-02-08 13:16:03,385 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 13:16:03,385 - DEBUG - Order status PreSubmitted
2018-02-08 13:16:03,386 - DEBUG - Order Identification 182
2018-02-08 13:16:03,386 - DEBUG - Order Identification <class 'int'>
2018-02-08 13:16:03,386 - DEBUG - Profit ID from database is 181
2018-02-08 13:16:03,386 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 13:16:03,387 - DEBUG - Stop ID database is 182
2018-02-08 13:16:03,387 - DEBUG - Entry ID database is 181
2018-02-08 13:16:03,387 - DEBUG - Stop API ID is 182
2018-02-08 13:16:05,384 - DEBUG - Connecting to database
2018-02-08 13:16:05,398 - DEBUG - Connected to database
2018-02-08 13:16:05,400 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 13:16:05,400 - DEBUG - Stop loss value is 71.07
2018-02-08 13:16:05,402 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 13:16:05,402 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 13:16:05,403 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 13:16:05,404 - DEBUG - EntryPrice value is 68.85
2018-02-08 13:16:05,405 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 13:16:05,405 - DEBUG - Stop quantity 1
2018-02-08 13:16:05,407 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 13:16:05,407 - DEBUG - Direction is Short
2018-02-08 13:16:05,408 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 13:16:05,409 - DEBUG - Count is 1
2018-02-08 13:16:05,410 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 13:16:05,410 - DEBUG - Stop Loss Flag is 1
2018-02-08 13:16:05,412 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 13:16:05,412 - DEBUG - Max ID Order is (182,)
2018-02-08 13:16:05,413 - DEBUG - Today is 2018-02-08
2018-02-08 13:16:05,413 - DEBUG - Day of the week 3
2018-02-08 13:16:05,413 - DEBUG - Yesterday is 02/07/2018
2018-02-08 13:16:05,413 - DEBUG - In Position is  1
2018-02-08 13:16:05,414 - DEBUG - In Position is  <class 'int'>
2018-02-08 13:16:05,414 - DEBUG - curStopLossFlag is  1
2018-02-08 13:16:05,414 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 13:16:05,414 - DEBUG - Checking if Entry has been filled
2018-02-08 13:16:05,414 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 13:16:05,416 - DEBUG - EntryPend is 0
2018-02-08 13:16:05,416 - DEBUG - Try to Cancel Stop
2018-02-08 13:16:05,416 - DEBUG - Stop API ID 182
2018-02-08 13:16:05,417 - DEBUG - Profit API ID 0
2018-02-08 13:16:05,417 - DEBUG - Stop API ID <class 'int'>
2018-02-08 13:16:05,417 - DEBUG - Profit API ID <class 'int'>
2018-02-08 13:16:05,417 - DEBUG - Pos is 1
2018-02-08 13:16:05,417 - DEBUG - CurCount is 1
2018-02-08 13:16:05,418 - DEBUG - In Pos 1
2018-02-08 13:16:05,418 - DEBUG - Stop ID is 182
2018-02-08 13:16:05,418 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 13:16:05,420 - DEBUG - EntryPend is 0
2018-02-08 13:16:05,420 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 13:16:05,420 - DEBUG - Entry Date is 10
2018-02-08 13:16:05,421 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 13:16:05,421 - DEBUG - Order Profit ID is 181
2018-02-08 13:16:05,421 - DEBUG - Order Entry ID is 181
2018-02-08 13:16:05,421 - DEBUG - API ID is  0
2018-02-08 13:16:05,422 - DEBUG - Current Position is 1
2018-02-08 13:16:05,422 - DEBUG - Current Position is <class 'str'>
2018-02-08 13:16:05,422 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 13:16:05,422 - DEBUG - Time is 13
2018-02-08 13:16:05,422 - DEBUG - Time is <class 'int'>
2018-02-08 13:16:05,423 - DEBUG - Time is 16
2018-02-08 13:16:05,423 - DEBUG - Time is <class 'int'>
2018-02-08 13:16:05,423 - DEBUG - Disconnected from IBController
2018-02-08 13:16:05,424 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 13:21:01,351 - DEBUG - ****************************************************
2018-02-08 13:21:01,352 - DEBUG - Current Time is 01:21PM
2018-02-08 13:21:01,352 - DEBUG - Starting Pos Mgmt H E
2018-02-08 13:21:01,352 - DEBUG - Connecting to database
2018-02-08 13:21:01,386 - DEBUG - Connected to database
2018-02-08 13:21:01,387 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 13:21:01,388 - DEBUG - Order Profit is 181
2018-02-08 13:21:01,389 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 13:21:01,390 - DEBUG - Stop ID is 182
2018-02-08 13:21:01,390 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 13:21:01,392 - DEBUG - Entry ID is 181
2018-02-08 13:21:01,392 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 13:21:01,393 - DEBUG - OCA ID is 1
2018-02-08 13:21:01,394 - DEBUG - Connecting to IBController
2018-02-08 13:21:02,400 - DEBUG - Connected to IBController
2018-02-08 13:21:02,400 - DEBUG - Position requested
2018-02-08 13:21:02,402 - DEBUG - Pos Mgmt -1
2018-02-08 13:21:02,402 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FCB38>, pos=-1, avgCost=27537.1>
2018-02-08 13:21:02,402 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 13:21:02,403 - DEBUG - ccy2 Currency with position is USD
2018-02-08 13:21:02,403 - DEBUG - Position is -1
2018-02-08 13:21:02,403 - DEBUG - In Position
2018-02-08 13:21:02,403 - DEBUG - Position is 1
2018-02-08 13:21:02,404 - DEBUG - Pos Mgmt 0
2018-02-08 13:21:02,404 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FCBA8>, pos=0, avgCost=0.0>
2018-02-08 13:21:02,404 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 13:21:02,404 - DEBUG - ccy2 Currency with position is USD
2018-02-08 13:21:02,404 - DEBUG - Position is 0
2018-02-08 13:21:02,405 - DEBUG - Pos Mgmt -12987
2018-02-08 13:21:02,405 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FCF98>, pos=-12987, avgCost=0.95368235>
2018-02-08 13:21:02,405 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 13:21:02,406 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 13:21:02,406 - DEBUG - Position is -12987
2018-02-08 13:21:03,402 - DEBUG - Open Orders requested
2018-02-08 13:21:03,404 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x00000000020FCE10>, order=<ib.ext.Order.Order object at 0x00000000020FCCC0>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002191198>>
2018-02-08 13:21:03,404 - DEBUG - Order OrderID 182
2018-02-08 13:21:03,405 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 13:21:03,405 - DEBUG - Order status PreSubmitted
2018-02-08 13:21:03,405 - DEBUG - Order Identification 182
2018-02-08 13:21:03,406 - DEBUG - Order Identification <class 'int'>
2018-02-08 13:21:03,406 - DEBUG - Profit ID from database is 181
2018-02-08 13:21:03,406 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 13:21:03,406 - DEBUG - Stop ID database is 182
2018-02-08 13:21:03,406 - DEBUG - Entry ID database is 181
2018-02-08 13:21:03,407 - DEBUG - Stop API ID is 182
2018-02-08 13:21:05,404 - DEBUG - Connecting to database
2018-02-08 13:21:05,412 - DEBUG - Connected to database
2018-02-08 13:21:05,413 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 13:21:05,414 - DEBUG - Stop loss value is 71.07
2018-02-08 13:21:05,415 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 13:21:05,416 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 13:21:05,417 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 13:21:05,417 - DEBUG - EntryPrice value is 68.85
2018-02-08 13:21:05,419 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 13:21:05,419 - DEBUG - Stop quantity 1
2018-02-08 13:21:05,420 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 13:21:05,421 - DEBUG - Direction is Short
2018-02-08 13:21:05,422 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 13:21:05,422 - DEBUG - Count is 1
2018-02-08 13:21:05,423 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 13:21:05,424 - DEBUG - Stop Loss Flag is 1
2018-02-08 13:21:05,425 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 13:21:05,425 - DEBUG - Max ID Order is (182,)
2018-02-08 13:21:05,426 - DEBUG - Today is 2018-02-08
2018-02-08 13:21:05,426 - DEBUG - Day of the week 3
2018-02-08 13:21:05,426 - DEBUG - Yesterday is 02/07/2018
2018-02-08 13:21:05,427 - DEBUG - In Position is  1
2018-02-08 13:21:05,427 - DEBUG - In Position is  <class 'int'>
2018-02-08 13:21:05,427 - DEBUG - curStopLossFlag is  1
2018-02-08 13:21:05,427 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 13:21:05,428 - DEBUG - Checking if Entry has been filled
2018-02-08 13:21:05,428 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 13:21:05,430 - DEBUG - EntryPend is 0
2018-02-08 13:21:05,430 - DEBUG - Try to Cancel Stop
2018-02-08 13:21:05,430 - DEBUG - Stop API ID 182
2018-02-08 13:21:05,430 - DEBUG - Profit API ID 0
2018-02-08 13:21:05,431 - DEBUG - Stop API ID <class 'int'>
2018-02-08 13:21:05,431 - DEBUG - Profit API ID <class 'int'>
2018-02-08 13:21:05,431 - DEBUG - Pos is 1
2018-02-08 13:21:05,431 - DEBUG - CurCount is 1
2018-02-08 13:21:05,432 - DEBUG - In Pos 1
2018-02-08 13:21:05,432 - DEBUG - Stop ID is 182
2018-02-08 13:21:05,432 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 13:21:05,433 - DEBUG - EntryPend is 0
2018-02-08 13:21:05,434 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 13:21:05,434 - DEBUG - Entry Date is 10
2018-02-08 13:21:05,434 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 13:21:05,434 - DEBUG - Order Profit ID is 181
2018-02-08 13:21:05,435 - DEBUG - Order Entry ID is 181
2018-02-08 13:21:05,435 - DEBUG - API ID is  0
2018-02-08 13:21:05,435 - DEBUG - Current Position is 1
2018-02-08 13:21:05,435 - DEBUG - Current Position is <class 'str'>
2018-02-08 13:21:05,435 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 13:21:05,436 - DEBUG - Time is 13
2018-02-08 13:21:05,436 - DEBUG - Time is <class 'int'>
2018-02-08 13:21:05,436 - DEBUG - Time is 21
2018-02-08 13:21:05,436 - DEBUG - Time is <class 'int'>
2018-02-08 13:21:05,437 - DEBUG - Disconnected from IBController
2018-02-08 13:21:05,437 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 13:26:01,357 - DEBUG - ****************************************************
2018-02-08 13:26:01,358 - DEBUG - Current Time is 01:26PM
2018-02-08 13:26:01,358 - DEBUG - Starting Pos Mgmt H E
2018-02-08 13:26:01,358 - DEBUG - Connecting to database
2018-02-08 13:26:01,387 - DEBUG - Connected to database
2018-02-08 13:26:01,388 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 13:26:01,390 - DEBUG - Order Profit is 181
2018-02-08 13:26:01,390 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 13:26:01,391 - DEBUG - Stop ID is 182
2018-02-08 13:26:01,392 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 13:26:01,393 - DEBUG - Entry ID is 181
2018-02-08 13:26:01,393 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 13:26:01,395 - DEBUG - OCA ID is 1
2018-02-08 13:26:01,395 - DEBUG - Connecting to IBController
2018-02-08 13:26:02,404 - DEBUG - Connected to IBController
2018-02-08 13:26:02,404 - DEBUG - Position requested
2018-02-08 13:26:02,405 - DEBUG - Pos Mgmt -1
2018-02-08 13:26:02,405 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FCD68>, pos=-1, avgCost=27537.1>
2018-02-08 13:26:02,406 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 13:26:02,406 - DEBUG - ccy2 Currency with position is USD
2018-02-08 13:26:02,406 - DEBUG - Position is -1
2018-02-08 13:26:02,407 - DEBUG - In Position
2018-02-08 13:26:02,407 - DEBUG - Position is 1
2018-02-08 13:26:02,407 - DEBUG - Pos Mgmt 0
2018-02-08 13:26:02,407 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FCC50>, pos=0, avgCost=0.0>
2018-02-08 13:26:02,408 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 13:26:02,408 - DEBUG - ccy2 Currency with position is USD
2018-02-08 13:26:02,408 - DEBUG - Position is 0
2018-02-08 13:26:02,409 - DEBUG - Pos Mgmt -12987
2018-02-08 13:26:02,409 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x00000000020FCF28>, pos=-12987, avgCost=0.95368235>
2018-02-08 13:26:02,409 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 13:26:02,409 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 13:26:02,410 - DEBUG - Position is -12987
2018-02-08 13:26:03,405 - DEBUG - Open Orders requested
2018-02-08 13:26:03,406 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x00000000020FCDD8>, order=<ib.ext.Order.Order object at 0x00000000020FCBE0>, orderState=<ib.ext.OrderState.OrderState object at 0x0000000002192198>>
2018-02-08 13:26:03,407 - DEBUG - Order OrderID 182
2018-02-08 13:26:03,408 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 13:26:03,408 - DEBUG - Order status PreSubmitted
2018-02-08 13:26:03,408 - DEBUG - Order Identification 182
2018-02-08 13:26:03,408 - DEBUG - Order Identification <class 'int'>
2018-02-08 13:26:03,409 - DEBUG - Profit ID from database is 181
2018-02-08 13:26:03,409 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 13:26:03,409 - DEBUG - Stop ID database is 182
2018-02-08 13:26:03,409 - DEBUG - Entry ID database is 181
2018-02-08 13:26:03,410 - DEBUG - Stop API ID is 182
2018-02-08 13:26:05,407 - DEBUG - Connecting to database
2018-02-08 13:26:05,414 - DEBUG - Connected to database
2018-02-08 13:26:05,416 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 13:26:05,416 - DEBUG - Stop loss value is 71.07
2018-02-08 13:26:05,417 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 13:26:05,418 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 13:26:05,419 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 13:26:05,419 - DEBUG - EntryPrice value is 68.85
2018-02-08 13:26:05,421 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 13:26:05,421 - DEBUG - Stop quantity 1
2018-02-08 13:26:05,423 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 13:26:05,423 - DEBUG - Direction is Short
2018-02-08 13:26:05,425 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 13:26:05,426 - DEBUG - Count is 1
2018-02-08 13:26:05,427 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 13:26:05,427 - DEBUG - Stop Loss Flag is 1
2018-02-08 13:26:05,429 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 13:26:05,429 - DEBUG - Max ID Order is (182,)
2018-02-08 13:26:05,429 - DEBUG - Today is 2018-02-08
2018-02-08 13:26:05,430 - DEBUG - Day of the week 3
2018-02-08 13:26:05,430 - DEBUG - Yesterday is 02/07/2018
2018-02-08 13:26:05,430 - DEBUG - In Position is  1
2018-02-08 13:26:05,430 - DEBUG - In Position is  <class 'int'>
2018-02-08 13:26:05,431 - DEBUG - curStopLossFlag is  1
2018-02-08 13:26:05,431 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 13:26:05,431 - DEBUG - Checking if Entry has been filled
2018-02-08 13:26:05,432 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 13:26:05,433 - DEBUG - EntryPend is 0
2018-02-08 13:26:05,433 - DEBUG - Try to Cancel Stop
2018-02-08 13:26:05,433 - DEBUG - Stop API ID 182
2018-02-08 13:26:05,434 - DEBUG - Profit API ID 0
2018-02-08 13:26:05,434 - DEBUG - Stop API ID <class 'int'>
2018-02-08 13:26:05,434 - DEBUG - Profit API ID <class 'int'>
2018-02-08 13:26:05,434 - DEBUG - Pos is 1
2018-02-08 13:26:05,435 - DEBUG - CurCount is 1
2018-02-08 13:26:05,435 - DEBUG - In Pos 1
2018-02-08 13:26:05,435 - DEBUG - Stop ID is 182
2018-02-08 13:26:05,435 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 13:26:05,437 - DEBUG - EntryPend is 0
2018-02-08 13:26:05,437 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 13:26:05,437 - DEBUG - Entry Date is 10
2018-02-08 13:26:05,437 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 13:26:05,438 - DEBUG - Order Profit ID is 181
2018-02-08 13:26:05,438 - DEBUG - Order Entry ID is 181
2018-02-08 13:26:05,438 - DEBUG - API ID is  0
2018-02-08 13:26:05,438 - DEBUG - Current Position is 1
2018-02-08 13:26:05,439 - DEBUG - Current Position is <class 'str'>
2018-02-08 13:26:05,439 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 13:26:05,439 - DEBUG - Time is 13
2018-02-08 13:26:05,439 - DEBUG - Time is <class 'int'>
2018-02-08 13:26:05,440 - DEBUG - Time is 26
2018-02-08 13:26:05,440 - DEBUG - Time is <class 'int'>
2018-02-08 13:26:05,440 - DEBUG - Disconnected from IBController
2018-02-08 13:26:05,440 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 13:31:01,350 - DEBUG - ****************************************************
2018-02-08 13:31:01,352 - DEBUG - Current Time is 01:31PM
2018-02-08 13:31:01,352 - DEBUG - Starting Pos Mgmt H E
2018-02-08 13:31:01,353 - DEBUG - Connecting to database
2018-02-08 13:31:01,383 - DEBUG - Connected to database
2018-02-08 13:31:01,383 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 13:31:01,385 - DEBUG - Order Profit is 181
2018-02-08 13:31:01,385 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 13:31:01,386 - DEBUG - Stop ID is 182
2018-02-08 13:31:01,387 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 13:31:01,388 - DEBUG - Entry ID is 181
2018-02-08 13:31:01,388 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 13:31:01,390 - DEBUG - OCA ID is 1
2018-02-08 13:31:01,390 - DEBUG - Connecting to IBController
2018-02-08 13:31:02,405 - DEBUG - Connected to IBController
2018-02-08 13:31:02,405 - DEBUG - Position requested
2018-02-08 13:31:02,406 - DEBUG - Pos Mgmt -1
2018-02-08 13:31:02,407 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210DD30>, pos=-1, avgCost=27537.1>
2018-02-08 13:31:02,407 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 13:31:02,407 - DEBUG - ccy2 Currency with position is USD
2018-02-08 13:31:02,408 - DEBUG - Position is -1
2018-02-08 13:31:02,408 - DEBUG - In Position
2018-02-08 13:31:02,408 - DEBUG - Position is 1
2018-02-08 13:31:02,409 - DEBUG - Pos Mgmt 0
2018-02-08 13:31:02,409 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210DC50>, pos=0, avgCost=0.0>
2018-02-08 13:31:02,409 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 13:31:02,409 - DEBUG - ccy2 Currency with position is USD
2018-02-08 13:31:02,410 - DEBUG - Position is 0
2018-02-08 13:31:02,410 - DEBUG - Pos Mgmt -12987
2018-02-08 13:31:02,410 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000210DF28>, pos=-12987, avgCost=0.95368235>
2018-02-08 13:31:02,410 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 13:31:02,411 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 13:31:02,411 - DEBUG - Position is -12987
2018-02-08 13:31:03,406 - DEBUG - Open Orders requested
2018-02-08 13:31:03,408 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x000000000210DDD8>, order=<ib.ext.Order.Order object at 0x000000000210DCF8>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021A1198>>
2018-02-08 13:31:03,408 - DEBUG - Order OrderID 182
2018-02-08 13:31:03,409 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 13:31:03,409 - DEBUG - Order status PreSubmitted
2018-02-08 13:31:03,409 - DEBUG - Order Identification 182
2018-02-08 13:31:03,410 - DEBUG - Order Identification <class 'int'>
2018-02-08 13:31:03,410 - DEBUG - Profit ID from database is 181
2018-02-08 13:31:03,410 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 13:31:03,410 - DEBUG - Stop ID database is 182
2018-02-08 13:31:03,411 - DEBUG - Entry ID database is 181
2018-02-08 13:31:03,411 - DEBUG - Stop API ID is 182
2018-02-08 13:31:05,408 - DEBUG - Connecting to database
2018-02-08 13:31:05,415 - DEBUG - Connected to database
2018-02-08 13:31:05,417 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 13:31:05,417 - DEBUG - Stop loss value is 71.07
2018-02-08 13:31:05,419 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 13:31:05,419 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 13:31:05,420 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 13:31:05,421 - DEBUG - EntryPrice value is 68.85
2018-02-08 13:31:05,422 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 13:31:05,422 - DEBUG - Stop quantity 1
2018-02-08 13:31:05,424 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 13:31:05,424 - DEBUG - Direction is Short
2018-02-08 13:31:05,425 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 13:31:05,425 - DEBUG - Count is 1
2018-02-08 13:31:05,427 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 13:31:05,428 - DEBUG - Stop Loss Flag is 1
2018-02-08 13:31:05,429 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 13:31:05,429 - DEBUG - Max ID Order is (182,)
2018-02-08 13:31:05,430 - DEBUG - Today is 2018-02-08
2018-02-08 13:31:05,430 - DEBUG - Day of the week 3
2018-02-08 13:31:05,430 - DEBUG - Yesterday is 02/07/2018
2018-02-08 13:31:05,431 - DEBUG - In Position is  1
2018-02-08 13:31:05,431 - DEBUG - In Position is  <class 'int'>
2018-02-08 13:31:05,431 - DEBUG - curStopLossFlag is  1
2018-02-08 13:31:05,431 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 13:31:05,432 - DEBUG - Checking if Entry has been filled
2018-02-08 13:31:05,432 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 13:31:05,433 - DEBUG - EntryPend is 0
2018-02-08 13:31:05,433 - DEBUG - Try to Cancel Stop
2018-02-08 13:31:05,434 - DEBUG - Stop API ID 182
2018-02-08 13:31:05,434 - DEBUG - Profit API ID 0
2018-02-08 13:31:05,434 - DEBUG - Stop API ID <class 'int'>
2018-02-08 13:31:05,434 - DEBUG - Profit API ID <class 'int'>
2018-02-08 13:31:05,435 - DEBUG - Pos is 1
2018-02-08 13:31:05,435 - DEBUG - CurCount is 1
2018-02-08 13:31:05,435 - DEBUG - In Pos 1
2018-02-08 13:31:05,435 - DEBUG - Stop ID is 182
2018-02-08 13:31:05,435 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 13:31:05,437 - DEBUG - EntryPend is 0
2018-02-08 13:31:05,437 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 13:31:05,437 - DEBUG - Entry Date is 10
2018-02-08 13:31:05,438 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 13:31:05,438 - DEBUG - Order Profit ID is 181
2018-02-08 13:31:05,438 - DEBUG - Order Entry ID is 181
2018-02-08 13:31:05,438 - DEBUG - API ID is  0
2018-02-08 13:31:05,439 - DEBUG - Current Position is 1
2018-02-08 13:31:05,439 - DEBUG - Current Position is <class 'str'>
2018-02-08 13:31:05,439 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 13:31:05,439 - DEBUG - Time is 13
2018-02-08 13:31:05,440 - DEBUG - Time is <class 'int'>
2018-02-08 13:31:05,440 - DEBUG - Time is 31
2018-02-08 13:31:05,440 - DEBUG - Time is <class 'int'>
2018-02-08 13:31:05,440 - DEBUG - Disconnected from IBController
2018-02-08 13:31:05,441 - DEBUG - END POS MGMT SCRIPT :-!
2018-02-08 13:36:01,349 - DEBUG - ****************************************************
2018-02-08 13:36:01,350 - DEBUG - Current Time is 01:36PM
2018-02-08 13:36:01,350 - DEBUG - Starting Pos Mgmt H E
2018-02-08 13:36:01,350 - DEBUG - Connecting to database
2018-02-08 13:36:01,385 - DEBUG - Connected to database
2018-02-08 13:36:01,386 - DEBUG - Query is SELECT BB_ProfitID FROM hasPosition where CCY = 'HE'
2018-02-08 13:36:01,388 - DEBUG - Order Profit is 181
2018-02-08 13:36:01,389 - DEBUG - Query is SELECT BB_StopID FROM hasPosition where CCY = 'HE'
2018-02-08 13:36:01,390 - DEBUG - Stop ID is 182
2018-02-08 13:36:01,391 - DEBUG - Query is SELECT BB_EntryID FROM hasPosition where CCY = 'HE'
2018-02-08 13:36:01,392 - DEBUG - Entry ID is 181
2018-02-08 13:36:01,392 - DEBUG - Query is select max(idOCAGroup) as OCA from OCAGroup
2018-02-08 13:36:01,394 - DEBUG - OCA ID is 1
2018-02-08 13:36:01,395 - DEBUG - Connecting to IBController
2018-02-08 13:36:02,406 - DEBUG - Connected to IBController
2018-02-08 13:36:02,406 - DEBUG - Position requested
2018-02-08 13:36:02,407 - DEBUG - Pos Mgmt -1
2018-02-08 13:36:02,408 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000214CB38>, pos=-1, avgCost=27537.1>
2018-02-08 13:36:02,408 - DEBUG - ccy1 Symbol with position is HE
2018-02-08 13:36:02,408 - DEBUG - ccy2 Currency with position is USD
2018-02-08 13:36:02,409 - DEBUG - Position is -1
2018-02-08 13:36:02,409 - DEBUG - In Position
2018-02-08 13:36:02,409 - DEBUG - Position is 1
2018-02-08 13:36:02,409 - DEBUG - Pos Mgmt 0
2018-02-08 13:36:02,410 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000214CBE0>, pos=0, avgCost=0.0>
2018-02-08 13:36:02,410 - DEBUG - ccy1 Symbol with position is M6E
2018-02-08 13:36:02,410 - DEBUG - ccy2 Currency with position is USD
2018-02-08 13:36:02,410 - DEBUG - Position is 0
2018-02-08 13:36:02,411 - DEBUG - Pos Mgmt -12987
2018-02-08 13:36:02,411 - DEBUG - Reply handler <position account=U1998629, contract=<ib.ext.Contract.Contract object at 0x000000000214CF28>, pos=-12987, avgCost=0.95368235>
2018-02-08 13:36:02,411 - DEBUG - ccy1 Symbol with position is NZD
2018-02-08 13:36:02,412 - DEBUG - ccy2 Currency with position is CAD
2018-02-08 13:36:02,412 - DEBUG - Position is -12987
2018-02-08 13:36:03,408 - DEBUG - Open Orders requested
2018-02-08 13:36:03,410 - DEBUG - Reply Handler Orders is <openOrder orderId=182, contract=<ib.ext.Contract.Contract object at 0x000000000214CC50>, order=<ib.ext.Order.Order object at 0x000000000214CCC0>, orderState=<ib.ext.OrderState.OrderState object at 0x00000000021E1198>>
2018-02-08 13:36:03,410 - DEBUG - Order OrderID 182
2018-02-08 13:36:03,411 - DEBUG - reply handler status <orderStatus orderId=182, status=PreSubmitted, filled=0, remaining=1, avgFillPrice=0.0, permId=1294213622, parentId=0, lastFillPrice=0.0, clientId=999, whyHeld=locate,trigger>
2018-02-08 13:36:03,411 - DEBUG - Order status PreSubmitted
2018-02-08 13:36:03,411 - DEBUG - Order Identification 182
2018-02-08 13:36:03,412 - DEBUG - Order Identification <class 'int'>
2018-02-08 13:36:03,412 - DEBUG - Profit ID from database is 181
2018-02-08 13:36:03,412 - DEBUG - Profit ID from database is <class 'str'>
2018-02-08 13:36:03,412 - DEBUG - Stop ID database is 182
2018-02-08 13:36:03,413 - DEBUG - Entry ID database is 181
2018-02-08 13:36:03,413 - DEBUG - Stop API ID is 182
2018-02-08 13:36:05,410 - DEBUG - Connecting to database
2018-02-08 13:36:05,417 - DEBUG - Connected to database
2018-02-08 13:36:05,419 - DEBUG - Query is SELECT BB_StopLossVal FROM hasPosition where CCY = 'HE'
2018-02-08 13:36:05,419 - DEBUG - Stop loss value is 71.07
2018-02-08 13:36:05,420 - DEBUG - Query is SELECT BB_ProfitPrice FROM hasPosition where CCY = 'HE'
2018-02-08 13:36:05,421 - DEBUG - Stop loss value is 57.900000000000006
2018-02-08 13:36:05,422 - DEBUG - Query is SELECT BB_EntryPrice FROM hasPosition where CCY = 'HE'
2018-02-08 13:36:05,423 - DEBUG - EntryPrice value is 68.85
2018-02-08 13:36:05,424 - DEBUG - Query is SELECT BB_StopQty FROM hasPosition where CCY = 'HE'
2018-02-08 13:36:05,424 - DEBUG - Stop quantity 1
2018-02-08 13:36:05,426 - DEBUG - Query is SELECT BB_direction FROM hasPosition where CCY = 'HE'
2018-02-08 13:36:05,426 - DEBUG - Direction is Short
2018-02-08 13:36:05,427 - DEBUG - Query is SELECT BB_Position FROM hasPosition where CCY = 'HE'
2018-02-08 13:36:05,428 - DEBUG - Count is 1
2018-02-08 13:36:05,429 - DEBUG - Query is SELECT BB_StopLossFlag FROM hasPosition where CCY = 'HE'
2018-02-08 13:36:05,429 - DEBUG - Stop Loss Flag is 1
2018-02-08 13:36:05,431 - DEBUG - Query is SELECT max(idOrder) FROM Orders
2018-02-08 13:36:05,431 - DEBUG - Max ID Order is (182,)
2018-02-08 13:36:05,431 - DEBUG - Today is 2018-02-08
2018-02-08 13:36:05,432 - DEBUG - Day of the week 3
2018-02-08 13:36:05,432 - DEBUG - Yesterday is 02/07/2018
2018-02-08 13:36:05,432 - DEBUG - In Position is  1
2018-02-08 13:36:05,432 - DEBUG - In Position is  <class 'int'>
2018-02-08 13:36:05,433 - DEBUG - curStopLossFlag is  1
2018-02-08 13:36:05,433 - DEBUG - curStopLossFlag is  <class 'str'>
2018-02-08 13:36:05,433 - DEBUG - Checking if Entry has been filled
2018-02-08 13:36:05,433 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 13:36:05,435 - DEBUG - EntryPend is 0
2018-02-08 13:36:05,435 - DEBUG - Try to Cancel Stop
2018-02-08 13:36:05,435 - DEBUG - Stop API ID 182
2018-02-08 13:36:05,436 - DEBUG - Profit API ID 0
2018-02-08 13:36:05,436 - DEBUG - Stop API ID <class 'int'>
2018-02-08 13:36:05,436 - DEBUG - Profit API ID <class 'int'>
2018-02-08 13:36:05,436 - DEBUG - Pos is 1
2018-02-08 13:36:05,436 - DEBUG - CurCount is 1
2018-02-08 13:36:05,437 - DEBUG - In Pos 1
2018-02-08 13:36:05,437 - DEBUG - Stop ID is 182
2018-02-08 13:36:05,437 - DEBUG - query is SELECT BBEntryPending from hasPosition where CCY ='HE';
2018-02-08 13:36:05,439 - DEBUG - EntryPend is 0
2018-02-08 13:36:05,440 - DEBUG - CHECKING IF STOP LOSS FILLED
2018-02-08 13:36:05,440 - DEBUG - Entry Date is 10
2018-02-08 13:36:05,440 - DEBUG - confirming yesterday is 02/07/2018
2018-02-08 13:36:05,440 - DEBUG - Order Profit ID is 181
2018-02-08 13:36:05,441 - DEBUG - Order Entry ID is 181
2018-02-08 13:36:05,441 - DEBUG - API ID is  0
2018-02-08 13:36:05,441 - DEBUG - Current Position is 1
2018-02-08 13:36:05,441 - DEBUG - Current Position is <class 'str'>
2018-02-08 13:36:05,441 - DEBUG - Checking if Positions should be close at EOD
2018-02-08 13:36:05,442 - DEBUG - Time is 13
2018-02-08 13:36:05,442 - DEBUG - Time is <class 'int'>
2018-02-08 13:36:05,442 - DEBUG - Time is 36
2018-02-08 13:36:05,442 - DEBUG - Time is <class 'int'>
2018-02-08 13:36:05,443 - DEBUG - Disconnected from IBController
2018-02-08 13:36:05,443 - DEBUG - END POS MGMT SCRIPT :-!
